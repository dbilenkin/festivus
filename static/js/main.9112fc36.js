/*! For license information please see main.9112fc36.js.LICENSE.txt */
!function(){"use strict";var e={463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(d,e)&&(f.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),b=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),S=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var L,j=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var U=!1;function B(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var u="\n"+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function V(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case b:return"Portal";case C:return"Profiler";case T:return"StrictMode";case I:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case S:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case M:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function Q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=Q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function G(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function Z(e,t){$(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ce,he=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _e=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var be=null,xe=null,Te=null;function Ce(e){if(e=ki(e)){if("function"!==typeof be)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),be(e.stateNode,e.type,t))}}function Ee(e){xe?Te?Te.push(e):Te=[e]:xe=e}function Se(){if(xe){var e=xe,t=Te;if(Te=xe=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Me(e,t){return e(t)}function Ie(){}var Ne=!1;function Ae(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Me(e,t,n)}finally{Ne=!1,(null!==xe||null!==Te)&&(Ie(),Se())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Re=!1;if(c)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ce){Re=!1}function Pe(e,t,n,r,i,a,o,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var Le=!1,je=null,Fe=!1,Ue=null,Be={onError:function(e){Le=!0,je=e}};function Ve(e,t,n,r,i,a,o,s,u){Le=!1,je=null,Pe.apply(Be,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(ze(e)!==e)throw Error(a(188))}function Qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ye=i.unstable_scheduleCallback,Ke=i.unstable_cancelCallback,Ge=i.unstable_shouldYield,Xe=i.unstable_requestPaint,$e=i.unstable_now,Ze=i.unstable_getCurrentPriorityLevel,Je=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var lt=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ht(s):0!==(a&=o)&&(r=ht(a))}else 0!==(o=n&~i)?r=ht(o):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function _t(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,bt,xt,Tt,Ct,Et=!1,St=[],Mt=null,It=null,Nt=null,At=new Map,Dt=new Map,Rt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pt(e,t){switch(e){case"focusin":case"focusout":Mt=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Lt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&bt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function jt(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Ct(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&bt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);_e=r,n.target.dispatchEvent(r),_e=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Bt(){Et=!1,null!==Mt&&Ft(Mt)&&(Mt=null),null!==It&&Ft(It)&&(It=null),null!==Nt&&Ft(Nt)&&(Nt=null),At.forEach(Ut),Dt.forEach(Ut)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function zt(e){function t(t){return Vt(t,e)}if(0<St.length){Vt(St[0],e);for(var n=1;n<St.length;n++){var r=St[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Mt&&Vt(Mt,e),null!==It&&Vt(It,e),null!==Nt&&Vt(Nt,e),At.forEach(t),Dt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)jt(n),null===n.blockedOn&&Rt.shift()}var qt=_.ReactCurrentBatchConfig,Wt=!0;function Qt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Yt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Yt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Yt(e,t,n,r){if(Wt){var i=Gt(e,t,n,r);if(null===i)Wr(e,t,r,Kt,n),Pt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Mt=Lt(Mt,e,t,n,r,i),!0;case"dragenter":return It=Lt(It,e,t,n,r,i),!0;case"mouseover":return Nt=Lt(Nt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return At.set(a,Lt(At.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Dt.set(a,Lt(Dt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Pt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Gt(e,t,n,r))&&Wr(e,t,r,Kt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Kt=null;function Gt(e,t,n,r){if(Kt=null,null!==(e=gi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Zt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Zt,r=n.length,i="value"in $t?$t.value:$t.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Jt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=an(ln),hn=j({},ln,{view:0,detail:0}),fn=an(hn),dn=j({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(dn),vn=an(j({},dn,{dataTransfer:0})),mn=an(j({},hn,{relatedTarget:0})),yn=an(j({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=j({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),_n=an(j({},ln,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function Cn(){return Tn}var En=j({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?bn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sn=an(En),Mn=an(j({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=an(j({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Nn=an(j({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=j({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=an(An),Rn=[9,13,27,32],On=c&&"CompositionEvent"in window,Pn=null;c&&"documentMode"in document&&(Pn=document.documentMode);var Ln=c&&"TextEvent"in window&&!Pn,jn=c&&(!On||Pn&&8<Pn&&11>=Pn),Fn=String.fromCharCode(32),Un=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Qn(e,t,n,r){Ee(r),0<(t=Hr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Yn=null;function Kn(e){Fr(e,0)}function Gn(e){if(Y(_i(e)))return e}function Xn(e,t){if("change"===e)return t}var $n=!1;if(c){var Zn;if(c){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"===typeof er.oninput}Zn=Jn}else Zn=!1;$n=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Yn=Hn=null)}function nr(e){if("value"===e.propertyName&&Gn(Yn)){var t=[];Qn(t,Yn,e,we(e)),Ae(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Yn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Gn(Yn)}function ar(e,t){if("click"===e)return Gn(t)}function or(e,t){if("input"===e||"change"===e)return Gn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=cr(n,a);var o=cr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=c&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==K(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&ur(gr,r)||(gr=r,0<(r=Hr(yr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var br={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Tr={};function Cr(e){if(xr[e])return xr[e];if(!br[e])return e;var t,n=br[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tr)return xr[e]=n[t];return e}c&&(Tr=document.createElement("div").style,"AnimationEvent"in window||(delete br.animationend.animation,delete br.animationiteration.animation,delete br.animationstart.animation),"TransitionEvent"in window||delete br.transitionend.transition);var Er=Cr("animationend"),Sr=Cr("animationiteration"),Mr=Cr("animationstart"),Ir=Cr("transitionend"),Nr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Nr.set(e,t),u(t,[e])}for(var Rr=0;Rr<Ar.length;Rr++){var Or=Ar[Rr];Dr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Dr(Er,"onAnimationEnd"),Dr(Sr,"onAnimationIteration"),Dr(Mr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Ir,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pr));function jr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,l){if(Ve.apply(this,arguments),Le){if(!Le)throw Error(a(198));var c=je;Le=!1,je=null,Fe||(Fe=!0,Ue=c)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;jr(i,s,l),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,l=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;jr(i,s,l),a=u}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Vr]){e[Vr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,Br("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Xt(t)){case 1:var i=Qt;break;case 4:i=Ht;break;default:i=Yt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=gi(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}Ae((function(){var r=a,i=we(n),o=[];e:{var s=Nr.get(e);if(void 0!==s){var u=cn,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=Sn;break;case"focusin":l="focus",u=mn;break;case"focusout":l="blur",u=mn;break;case"beforeblur":case"afterblur":u=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=In;break;case Er:case Sr:case Mr:u=yn;break;case Ir:u=Nn;break;case"scroll":u=fn;break;case"wheel":u=Dn;break;case"copy":case"cut":case"paste":u=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Mn}var c=0!==(4&t),h=!c&&"scroll"===e,f=c?null!==s?s+"Capture":null:s;c=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=De(p,f))&&c.push(Qr(p,v,d)))),h)break;p=p.return}0<c.length&&(s=new u(s,l,null,n,i),o.push({event:s,listeners:c}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===_e||!(l=n.relatedTarget||n.fromElement)||!gi(l)&&!l[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?gi(l):null)&&(l!==(h=ze(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=pn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Mn,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==u?s:_i(u),d=null==l?s:_i(l),(s=new c(v,p+"leave",u,n,i)).target=h,s.relatedTarget=d,v=null,gi(i)===r&&((c=new c(f,p+"enter",l,n,i)).target=d,c.relatedTarget=h,v=c),h=v,u&&l)e:{for(f=l,p=0,d=c=u;d;d=Yr(d))p++;for(d=0,v=f;v;v=Yr(v))d++;for(;0<p-d;)c=Yr(c),p--;for(;0<d-p;)f=Yr(f),d--;for(;p--;){if(c===f||null!==f&&c===f.alternate)break e;c=Yr(c),f=Yr(f)}c=null}else c=null;null!==u&&Kr(o,s,u,c,!1),null!==l&&null!==h&&Kr(o,h,l,c,!0)}if("select"===(u=(s=r?_i(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=Xn;else if(Wn(s))if($n)m=or;else{m=ir;var y=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ar);switch(m&&(m=m(e,r))?Qn(o,m,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=r?_i(r):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,_r(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":_r(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else zn?Bn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(jn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==k?"onCompositionEnd"===k&&zn&&(g=en()):(Zt="value"in($t=i)?$t.value:$t.textContent,zn=!0)),0<(y=Hr(r,k)).length&&(k=new _n(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=Vn(n))&&(k.data=g))),(g=Ln?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!On&&Bn(e,t)?(e=en(),Jt=Zt=$t=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Fr(o,t)}))}function Qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=De(e,n))&&r.unshift(Qr(e,a,i)),null!=(a=De(e,t))&&r.push(Qr(e,a,i))),e=e.return}return r}function Yr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,i?null!=(u=De(n,a))&&o.unshift(Qr(n,u,s)):i||null!=(u=De(n,a))&&o.push(Qr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Gr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Gr,"\n").replace(Xr,"")}function Zr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(a(425))}function Jr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),fi="__reactFiber$"+hi,di="__reactProps$"+hi,pi="__reactContainer$"+hi,vi="__reactEvents$"+hi,mi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function gi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[fi])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[fi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _i(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var bi=[],xi=-1;function Ti(e){return{current:e}}function Ci(e){0>xi||(e.current=bi[xi],bi[xi]=null,xi--)}function Ei(e,t){xi++,bi[xi]=e.current,e.current=t}var Si={},Mi=Ti(Si),Ii=Ti(!1),Ni=Si;function Ai(e,t){var n=e.type.contextTypes;if(!n)return Si;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){Ci(Ii),Ci(Mi)}function Oi(e,t,n){if(Mi.current!==Si)throw Error(a(168));Ei(Mi,t),Ei(Ii,n)}function Pi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return j({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Si,Ni=Mi.current,Ei(Mi,e),Ei(Ii,Ii.current),!0}function ji(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Pi(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ci(Ii),Ci(Mi),Ei(Mi,e)):Ci(Ii),Ei(Ii,n)}var Fi=null,Ui=!1,Bi=!1;function Vi(e){null===Fi?Fi=[e]:Fi.push(e)}function zi(){if(!Bi&&null!==Fi){Bi=!0;var e=0,t=kt;try{var n=Fi;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Ui=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ye(Je,zi),i}finally{kt=t,Bi=!1}}return null}var qi=[],Wi=0,Qi=null,Hi=0,Yi=[],Ki=0,Gi=null,Xi=1,$i="";function Zi(e,t){qi[Wi++]=Hi,qi[Wi++]=Qi,Qi=e,Hi=t}function Ji(e,t,n){Yi[Ki++]=Xi,Yi[Ki++]=$i,Yi[Ki++]=Gi,Gi=e;var r=Xi;e=$i;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xi=1<<32-ot(t)+i|n<<i|r,$i=a+e}else Xi=1<<a|n<<i|r,$i=e}function ea(e){null!==e.return&&(Zi(e,1),Ji(e,1,0))}function ta(e){for(;e===Qi;)Qi=qi[--Wi],qi[Wi]=null,Hi=qi[--Wi],qi[Wi]=null;for(;e===Gi;)Gi=Yi[--Ki],Yi[Ki]=null,$i=Yi[--Ki],Yi[Ki]=null,Xi=Yi[--Ki],Yi[Ki]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Al(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Gi?{id:Xi,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Al(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function ua(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function la(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(ua(e))throw Error(a(418));t=li(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(ua(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function ca(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ha(e){if(e!==na)return!1;if(!ia)return ca(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(ua(e))throw fa(),Error(a(418));for(;t;)oa(e,t),t=li(t.nextSibling)}if(ca(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?li(e.stateNode.nextSibling):null;return!0}function fa(){for(var e=ra;e;)e=li(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=_.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Ti(null),ga=null,ka=null,_a=null;function wa(){_a=ka=ga=null}function ba(e){var t=ya.current;Ci(ya),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ta(e,t){ga=e,_a=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(_s=!0),e.firstContext=null)}function Ca(e){var t=e._currentValue;if(_a!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ea=null;function Sa(e){null===Ea?Ea=[e]:Ea.push(e)}function Ma(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Sa(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ia(e,r)}function Ia(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Na=!1;function Aa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Da(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ra(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Mu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ia(e,n)}return null===(i=r.interleaved)?(t.next=t,Sa(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ia(e,n)}function Pa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function La(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ja(e,t,n,r){var i=e.updateQueue;Na=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,l=u.next;u.next=null,null===o?a=l:o.next=l,o=u;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===s?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(null!==a){var h=i.baseState;for(o=0,c=l=u=null,s=a;;){var f=s.lane,d=s.eventTime;if((r&f)===f){null!==c&&(c=c.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(f=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=v.payload)?p.call(d,h,f):p)||void 0===f)break e;h=j({},h,f);break e;case 2:Na=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[s]:f.push(s))}else d={eventTime:d,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(l=c=d,u=h):c=c.next=d,o|=f;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===c&&(u=h),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Lu|=o,e.lanes=o,e.memoizedState=h}}function Fa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function Ba(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Va={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=el(),i=tl(e),a=Ra(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(nl(t,e,i,r),Pa(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=el(),i=tl(e),a=Ra(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(nl(t,e,i,r),Pa(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=el(),r=tl(e),i=Ra(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(nl(t,e,r,n),Pa(t,e,r))}};function za(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,a))}function qa(e,t,n){var r=!1,i=Si,a=t.contextType;return"object"===typeof a&&null!==a?a=Ca(a):(i=Di(t)?Ni:Mi.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ai(e,i):Si),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Va,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Va.enqueueReplaceState(t,t.state,null)}function Qa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Aa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ca(a):(a=Di(t)?Ni:Mi.current,i.context=Ai(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Ba(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Va.enqueueReplaceState(i,i.state,null),ja(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ha(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ya(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ka(e){return(0,e._init)(e._payload)}function Ga(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Rl(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=jl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var a=n.type;return a===x?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===D&&Ka(a)===t.type)?((r=i(t,n.props)).ref=Ha(e,t,n),r.return=e,r):((r=Ol(n.type,n.key,n.props,null,e.mode,r)).ref=Ha(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Pl(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=jl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Ol(t.type,t.key,t.props,null,e.mode,n)).ref=Ha(e,null,t),n.return=e,n;case b:return(t=Fl(t,e.mode,n)).return=e,t;case D:return f(e,(0,t._init)(t._payload),n)}if(te(t)||P(t))return(t=Pl(t,e.mode,n,null)).return=e,t;Ya(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?l(e,t,n,r):null;case b:return n.key===i?c(e,t,n,r):null;case D:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||P(n))return null!==i?null:h(e,t,n,r,null);Ya(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||P(r))return h(t,e=e.get(n)||null,r,i,null);Ya(t,r)}return null}function v(i,a,s,u){for(var l=null,c=null,h=a,v=a=0,m=null;null!==h&&v<s.length;v++){h.index>v?(m=h,h=null):m=h.sibling;var y=d(i,h,s[v],u);if(null===y){null===h&&(h=m);break}e&&h&&null===y.alternate&&t(i,h),a=o(y,a,v),null===c?l=y:c.sibling=y,c=y,h=m}if(v===s.length)return n(i,h),ia&&Zi(i,v),l;if(null===h){for(;v<s.length;v++)null!==(h=f(i,s[v],u))&&(a=o(h,a,v),null===c?l=h:c.sibling=h,c=h);return ia&&Zi(i,v),l}for(h=r(i,h);v<s.length;v++)null!==(m=p(h,i,v,s[v],u))&&(e&&null!==m.alternate&&h.delete(null===m.key?v:m.key),a=o(m,a,v),null===c?l=m:c.sibling=m,c=m);return e&&h.forEach((function(e){return t(i,e)})),ia&&Zi(i,v),l}function m(i,s,u,l){var c=P(u);if("function"!==typeof c)throw Error(a(150));if(null==(u=c.call(u)))throw Error(a(151));for(var h=c=null,v=s,m=s=0,y=null,g=u.next();null!==v&&!g.done;m++,g=u.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,l);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),s=o(k,s,m),null===h?c=k:h.sibling=k,h=k,v=y}if(g.done)return n(i,v),ia&&Zi(i,m),c;if(null===v){for(;!g.done;m++,g=u.next())null!==(g=f(i,g.value,l))&&(s=o(g,s,m),null===h?c=g:h.sibling=g,h=g);return ia&&Zi(i,m),c}for(v=r(i,v);!g.done;m++,g=u.next())null!==(g=p(v,i,m,g.value,l))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),s=o(g,s,m),null===h?c=g:h.sibling=g,h=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Zi(i,m),c}return function e(r,a,o,u){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var l=o.key,c=a;null!==c;){if(c.key===l){if((l=o.type)===x){if(7===c.tag){n(r,c.sibling),(a=i(c,o.props.children)).return=r,r=a;break e}}else if(c.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===D&&Ka(l)===c.type){n(r,c.sibling),(a=i(c,o.props)).ref=Ha(r,c,o),a.return=r,r=a;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===x?((a=Pl(o.props.children,r.mode,u,o.key)).return=r,r=a):((u=Ol(o.type,o.key,o.props,null,r.mode,u)).ref=Ha(r,a,o),u.return=r,r=u)}return s(r);case b:e:{for(c=o.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Fl(o,r.mode,u)).return=r,r=a}return s(r);case D:return e(r,a,(c=o._init)(o._payload),u)}if(te(o))return v(r,a,o,u);if(P(o))return m(r,a,o,u);Ya(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=jl(o,r.mode,u)).return=r,r=a),s(r)):n(r,a)}}var Xa=Ga(!0),$a=Ga(!1),Za={},Ja=Ti(Za),eo=Ti(Za),to=Ti(Za);function no(e){if(e===Za)throw Error(a(174));return e}function ro(e,t){switch(Ei(to,t),Ei(eo,e),Ei(Ja,Za),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ci(Ja),Ei(Ja,t)}function io(){Ci(Ja),Ci(eo),Ci(to)}function ao(e){no(to.current);var t=no(Ja.current),n=ue(t,e.type);t!==n&&(Ei(eo,e),Ei(Ja,n))}function oo(e){eo.current===e&&(Ci(Ja),Ci(eo))}var so=Ti(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lo=[];function co(){for(var e=0;e<lo.length;e++)lo[e]._workInProgressVersionPrimary=null;lo.length=0}var ho=_.ReactCurrentDispatcher,fo=_.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,ko=!1,_o=0,wo=0;function bo(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function To(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?ss:us,e=n(r,i),ko){o=0;do{if(ko=!1,_o=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,ho.current=ls,e=n(r,i)}while(ko)}if(ho.current=os,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function Co(){var e=0!==_o;return _o=0,e}function Eo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function So(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function Mo(e,t){return"function"===typeof t?t(e):t}function Io(e){var t=So(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var u=s=null,l=null,c=o;do{var h=c.lane;if((po&h)===h)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(u=l=f,s=r):l=l.next=f,vo.lanes|=h,Lu|=h}c=c.next}while(null!==c&&c!==o);null===l?s=r:l.next=u,sr(r,t.memoizedState)||(_s=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Lu|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=So(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(_s=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ao(){}function Do(e,t){var n=vo,r=So(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,_s=!0),r=r.queue,Wo(Po.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Uo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Iu)throw Error(a(349));0!==(30&po)||Ro(n,t,i)}return i}function Ro(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Lo(t)&&jo(e)}function Po(e,t,n){return n((function(){Lo(t)&&jo(e)}))}function Lo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function jo(e){var t=Ia(e,1);null!==t&&nl(t,e,1,-1)}function Fo(e){var t=Eo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mo,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,vo,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Bo(){return So().memoizedState}function Vo(e,t,n,r){var i=Eo();vo.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=So();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}vo.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function qo(e,t){return Vo(8390656,8,e,t)}function Wo(e,t){return zo(2048,8,e,t)}function Qo(e,t){return zo(4,2,e,t)}function Ho(e,t){return zo(4,4,e,t)}function Yo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ko(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Yo.bind(null,t,e),n)}function Go(){}function Xo(e,t){var n=So();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $o(e,t){var n=So();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Zo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,_s=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),vo.lanes|=n,Lu|=n,e.baseState=!0),t)}function Jo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{kt=n,fo.transition=r}}function es(){return So().memoizedState}function ts(e,t,n){var r=tl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Ma(e,t,n,r))){nl(n,e,r,el()),as(n,t,r)}}function ns(e,t,n){var r=tl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var u=t.interleaved;return null===u?(i.next=i,Sa(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(l){}null!==(n=Ma(e,t,i,r))&&(nl(n,e,r,i=el()),as(n,t,r))}}function rs(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function is(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var os={readContext:Ca,useCallback:bo,useContext:bo,useEffect:bo,useImperativeHandle:bo,useInsertionEffect:bo,useLayoutEffect:bo,useMemo:bo,useReducer:bo,useRef:bo,useState:bo,useDebugValue:bo,useDeferredValue:bo,useTransition:bo,useMutableSource:bo,useSyncExternalStore:bo,useId:bo,unstable_isNewReconciler:!1},ss={readContext:Ca,useCallback:function(e,t){return Eo().memoizedState=[e,void 0===t?null:t],e},useContext:Ca,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Vo(4194308,4,Yo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vo(4,2,e,t)},useMemo:function(e,t){var n=Eo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Eo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Eo().memoizedState=e},useState:Fo,useDebugValue:Go,useDeferredValue:function(e){return Eo().memoizedState=e},useTransition:function(){var e=Fo(!1),t=e[0];return e=Jo.bind(null,e[1]),Eo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Eo();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Iu)throw Error(a(349));0!==(30&po)||Ro(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Po.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Eo(),t=Iu.identifierPrefix;if(ia){var n=$i;t=":"+t+"R"+(n=(Xi&~(1<<32-ot(Xi)-1)).toString(32)+n),0<(n=_o++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Ca,useCallback:Xo,useContext:Ca,useEffect:Wo,useImperativeHandle:Ko,useInsertionEffect:Qo,useLayoutEffect:Ho,useMemo:$o,useReducer:Io,useRef:Bo,useState:function(){return Io(Mo)},useDebugValue:Go,useDeferredValue:function(e){return Zo(So(),mo.memoizedState,e)},useTransition:function(){return[Io(Mo)[0],So().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Do,useId:es,unstable_isNewReconciler:!1},ls={readContext:Ca,useCallback:Xo,useContext:Ca,useEffect:Wo,useImperativeHandle:Ko,useInsertionEffect:Qo,useLayoutEffect:Ho,useMemo:$o,useReducer:No,useRef:Bo,useState:function(){return No(Mo)},useDebugValue:Go,useDeferredValue:function(e){var t=So();return null===mo?t.memoizedState=e:Zo(t,mo.memoizedState,e)},useTransition:function(){return[No(Mo)[0],So().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Do,useId:es,unstable_isNewReconciler:!1};function cs(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function hs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Ra(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wu||(Wu=!0,Qu=r),fs(0,t)},n}function vs(e,t,n){(n=Ra(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){fs(0,t),"function"!==typeof r&&(null===Hu?Hu=new Set([this]):Hu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cl.bind(null,e,t,n),t.then(e,e))}function ys(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ra(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ks=_.ReactCurrentOwner,_s=!1;function ws(e,t,n,r){t.child=null===e?$a(t,null,n,r):Xa(t,e.child,n,r)}function bs(e,t,n,r,i){n=n.render;var a=t.ref;return Ta(t,i),r=To(e,t,n,r,a,i),n=Co(),null===e||_s?(ia&&n&&ea(t),t.flags|=1,ws(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ws(e,t,i))}function xs(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Dl(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ol(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ts(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Ws(e,t,i)}return t.flags|=1,(e=Rl(a,r)).ref=t.ref,e.return=t,t.child=e}function Ts(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(ur(a,r)&&e.ref===t.ref){if(_s=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ws(e,t,i);0!==(131072&e.flags)&&(_s=!0)}}return Ss(e,t,n,r,i)}function Cs(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(Ru,Du),Du|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ei(Ru,Du),Du|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ei(Ru,Du),Du|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ei(Ru,Du),Du|=r;return ws(e,t,i,n),t.child}function Es(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ss(e,t,n,r,i){var a=Di(n)?Ni:Mi.current;return a=Ai(t,a),Ta(t,i),n=To(e,t,n,r,a,i),r=Co(),null===e||_s?(ia&&r&&ea(t),t.flags|=1,ws(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ws(e,t,i))}function Ms(e,t,n,r,i){if(Di(n)){var a=!0;Li(t)}else a=!1;if(Ta(t,i),null===t.stateNode)qs(e,t),qa(t,n,r),Qa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=Ca(l):l=Ai(t,l=Di(n)?Ni:Mi.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==l)&&Wa(t,o,r,l),Na=!1;var f=t.memoizedState;o.state=f,ja(t,r,o,i),u=t.memoizedState,s!==r||f!==u||Ii.current||Na?("function"===typeof c&&(Ba(t,n,c,r),u=t.memoizedState),(s=Na||za(t,n,s,r,f,u,l))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Da(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:ma(t.type,s),o.props=l,h=t.pendingProps,f=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=Ca(u):u=Ai(t,u=Di(n)?Ni:Mi.current);var d=n.getDerivedStateFromProps;(c="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||f!==u)&&Wa(t,o,r,u),Na=!1,f=t.memoizedState,o.state=f,ja(t,r,o,i);var p=t.memoizedState;s!==h||f!==p||Ii.current||Na?("function"===typeof d&&(Ba(t,n,d,r),p=t.memoizedState),(l=Na||za(t,n,l,r,f,p,u)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Is(e,t,n,r,a,i)}function Is(e,t,n,r,i,a){Es(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&ji(t,n,!1),Ws(e,t,a);r=t.stateNode,ks.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Xa(t,e.child,null,a),t.child=Xa(t,null,s,a)):ws(e,t,s,a),t.memoizedState=r.state,i&&ji(t,n,!0),t.child}function Ns(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function As(e,t,n,r,i){return da(),pa(i),t.flags|=256,ws(e,t,n,r),t.child}var Ds,Rs,Os,Ps={dehydrated:null,treeContext:null,retryLane:0};function Ls(e){return{baseLanes:e,cachePool:null,transitions:null}}function js(e,t,n){var r,i=t.pendingProps,o=so.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ei(so,1&o),null===e)return la(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Ll(u,i,0,null),e=Pl(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ls(n),t.memoizedState=Ps,e):Fs(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Us(e,t,s,r=hs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Ll({mode:"visible",children:r.children},i,0,null),(o=Pl(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Xa(t,e.child,null,s),t.child.memoizedState=Ls(s),t.memoizedState=Ps,o);if(0===(1&t.mode))return Us(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,Us(e,t,s,r=hs(o=Error(a(419)),r,void 0))}if(u=0!==(s&e.childLanes),_s||u){if(null!==(r=Iu)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ia(e,i),nl(r,e,i,-1))}return vl(),Us(e,t,s,r=hs(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Sl.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=li(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Yi[Ki++]=Xi,Yi[Ki++]=$i,Yi[Ki++]=Gi,Xi=e.id,$i=e.overflow,Gi=t),(t=Fs(t,r.children)).flags|=4096,t)}(e,t,u,i,r,o,n);if(s){s=i.fallback,u=t.mode,r=(o=e.child).sibling;var l={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=Rl(o,l)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Rl(r,s):(s=Pl(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?Ls(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ps,i}return e=(s=e.child).sibling,i=Rl(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fs(e,t){return(t=Ll({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Us(e,t,n,r){return null!==r&&pa(r),Xa(t,e.child,null,n),(e=Fs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function Vs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bs(e,n,t);else if(19===e.tag)Bs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ei(so,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Vs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===uo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Vs(t,!0,n,null,a);break;case"together":Vs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ws(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Lu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Rl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Qs(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ys(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hs(t),null;case 1:case 17:return Di(t.type)&&Ri(),Hs(t),null;case 3:return r=t.stateNode,io(),Ci(Ii),Ci(Mi),co(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(ol(aa),aa=null))),Hs(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Rs(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Hs(t),null}if(e=no(Ja.current),ha(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Pr.length;i++)Ur(Pr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":X(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var u in ge(n,o),i=null,o)if(o.hasOwnProperty(u)){var l=o[u];"children"===u?"string"===typeof l?r.textContent!==l&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,l,e),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,l,e),i=["children",""+l]):s.hasOwnProperty(u)&&null!=l&&"onScroll"===u&&Ur("scroll",r)}switch(n){case"input":H(r),J(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Jr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[fi]=t,e[di]=r,Ds(e,t),t.stateNode=e;e:{switch(u=ke(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Pr.length;i++)Ur(Pr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":X(e,r),i=G(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=j({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ge(n,i),l=i)if(l.hasOwnProperty(o)){var c=l[o];"style"===o?me(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&he(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&fe(e,c):"number"===typeof c&&fe(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Ur("scroll",e):null!=c&&k(e,o,c,u))}switch(n){case"input":H(e),J(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hs(t),null;case 6:if(e&&null!=t.stateNode)Os(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Ja.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Hs(t),null;case 13:if(Ci(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))fa(),da(),t.flags|=98560,o=!1;else if(o=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[fi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hs(t),o=!1}else null!==aa&&(ol(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Ou&&(Ou=3):vl())),null!==t.updateQueue&&(t.flags|=4),Hs(t),null);case 4:return io(),null===e&&zr(t.stateNode.containerInfo),Hs(t),null;case 10:return ba(t.type._context),Hs(t),null;case 19:if(Ci(so),null===(o=t.memoizedState))return Hs(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)Qs(o,!1);else{if(0!==Ou||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=uo(e))){for(t.flags|=128,Qs(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ei(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>zu&&(t.flags|=128,r=!0,Qs(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Qs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!ia)return Hs(t),null}else 2*$e()-o.renderingStartTime>zu&&1073741824!==n&&(t.flags|=128,r=!0,Qs(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=so.current,Ei(so,r?1&n|2:1&n),t):(Hs(t),null);case 22:case 23:return hl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Du)&&(Hs(t),6&t.subtreeFlags&&(t.flags|=8192)):Hs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Ks(e,t){switch(ta(t),t.tag){case 1:return Di(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ci(Ii),Ci(Mi),co(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ci(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ci(so),null;case 4:return io(),null;case 10:return ba(t.type._context),null;case 22:case 23:return hl(),null;default:return null}}Ds=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Rs=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Ja.current);var a,o=null;switch(n){case"input":i=G(e,i),r=G(e,r),o=[];break;case"select":i=j({},i,{value:void 0}),r=j({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(c in ge(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var u=i[c];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(u=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&l!==u&&(null!=l||null!=u))if("style"===c)if(u){for(a in u)!u.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&u[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(o||(o=[]),o.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(o=o||[]).push(c,l)):"children"===c?"string"!==typeof l&&"number"!==typeof l||(o=o||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&Ur("scroll",e),o||u===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Os=function(e,t,n,r){n!==r&&(t.flags|=4)};var Gs=!1,Xs=!1,$s="function"===typeof WeakSet?WeakSet:Set,Zs=null;function Js(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Tl(e,t,r)}else n.current=null}function eu(e,t,n){try{n()}catch(r){Tl(e,t,r)}}var tu=!1;function nu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&eu(t,n,a)}i=i.next}while(i!==r)}}function ru(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function iu(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function au(e){var t=e.alternate;null!==t&&(e.alternate=null,au(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ou(e){return 5===e.tag||3===e.tag||4===e.tag}function su(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ou(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function uu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(uu(e,t,n),e=e.sibling;null!==e;)uu(e,t,n),e=e.sibling}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}var cu=null,hu=!1;function fu(e,t,n){for(n=n.child;null!==n;)du(e,t,n),n=n.sibling}function du(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Xs||Js(n,t);case 6:var r=cu,i=hu;cu=null,fu(e,t,n),hu=i,null!==(cu=r)&&(hu?(e=cu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cu.removeChild(n.stateNode));break;case 18:null!==cu&&(hu?(e=cu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),zt(e)):ui(cu,n.stateNode));break;case 4:r=cu,i=hu,cu=n.stateNode.containerInfo,hu=!0,fu(e,t,n),cu=r,hu=i;break;case 0:case 11:case 14:case 15:if(!Xs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&eu(n,t,o),i=i.next}while(i!==r)}fu(e,t,n);break;case 1:if(!Xs&&(Js(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Tl(n,t,s)}fu(e,t,n);break;case 21:fu(e,t,n);break;case 22:1&n.mode?(Xs=(r=Xs)||null!==n.memoizedState,fu(e,t,n),Xs=r):fu(e,t,n);break;default:fu(e,t,n)}}function pu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $s),t.forEach((function(t){var r=Ml.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:cu=u.stateNode,hu=!1;break e;case 3:case 4:cu=u.stateNode.containerInfo,hu=!0;break e}u=u.return}if(null===cu)throw Error(a(160));du(o,s,i),cu=null,hu=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(c){Tl(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)mu(t,e),t=t.sibling}function mu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vu(t,e),yu(e),4&r){try{nu(3,e,e.return),ru(3,e)}catch(m){Tl(e,e.return,m)}try{nu(5,e,e.return)}catch(m){Tl(e,e.return,m)}}break;case 1:vu(t,e),yu(e),512&r&&null!==n&&Js(n,n.return);break;case 5:if(vu(t,e),yu(e),512&r&&null!==n&&Js(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(m){Tl(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===u&&"radio"===o.type&&null!=o.name&&$(i,o),ke(u,s);var c=ke(u,o);for(s=0;s<l.length;s+=2){var h=l[s],f=l[s+1];"style"===h?me(i,f):"dangerouslySetInnerHTML"===h?he(i,f):"children"===h?fe(i,f):k(i,h,f,c)}switch(u){case"input":Z(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Tl(e,e.return,m)}}break;case 6:if(vu(t,e),yu(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Tl(e,e.return,m)}}break;case 3:if(vu(t,e),yu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(m){Tl(e,e.return,m)}break;case 4:default:vu(t,e),yu(e);break;case 13:vu(t,e),yu(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Vu=$e())),4&r&&pu(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Xs=(c=Xs)||h,vu(t,e),Xs=c):vu(t,e),yu(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!==(1&e.mode))for(Zs=e,h=e.child;null!==h;){for(f=Zs=h;null!==Zs;){switch(p=(d=Zs).child,d.tag){case 0:case 11:case 14:case 15:nu(4,d,d.return);break;case 1:Js(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Tl(r,n,m)}}break;case 5:Js(d,d.return);break;case 22:if(null!==d.memoizedState){wu(f);continue}}null!==p?(p.return=d,Zs=p):wu(f)}h=h.sibling}e:for(h=null,f=e;;){if(5===f.tag){if(null===h){h=f;try{i=f.stateNode,c?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=f.stateNode,s=void 0!==(l=f.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,u.style.display=ve("display",s))}catch(m){Tl(e,e.return,m)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(m){Tl(e,e.return,m)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:vu(t,e),yu(e),4&r&&pu(e);case 21:}}function yu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ou(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),lu(e,su(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;uu(e,su(e),o);break;default:throw Error(a(161))}}catch(s){Tl(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gu(e,t,n){Zs=e,ku(e,t,n)}function ku(e,t,n){for(var r=0!==(1&e.mode);null!==Zs;){var i=Zs,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Gs;if(!o){var s=i.alternate,u=null!==s&&null!==s.memoizedState||Xs;s=Gs;var l=Xs;if(Gs=o,(Xs=u)&&!l)for(Zs=i;null!==Zs;)u=(o=Zs).child,22===o.tag&&null!==o.memoizedState?bu(i):null!==u?(u.return=o,Zs=u):bu(i);for(;null!==a;)Zs=a,ku(a,t,n),a=a.sibling;Zs=i,Gs=s,Xs=l}_u(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zs=a):_u(e)}}function _u(e){for(;null!==Zs;){var t=Zs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xs||ru(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xs)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Fa(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fa(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&zt(f)}}}break;default:throw Error(a(163))}Xs||512&t.flags&&iu(t)}catch(d){Tl(t,t.return,d)}}if(t===e){Zs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zs=n;break}Zs=t.return}}function wu(e){for(;null!==Zs;){var t=Zs;if(t===e){Zs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zs=n;break}Zs=t.return}}function bu(e){for(;null!==Zs;){var t=Zs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ru(4,t)}catch(u){Tl(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){Tl(t,i,u)}}var a=t.return;try{iu(t)}catch(u){Tl(t,a,u)}break;case 5:var o=t.return;try{iu(t)}catch(u){Tl(t,o,u)}}}catch(u){Tl(t,t.return,u)}if(t===e){Zs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Zs=s;break}Zs=t.return}}var xu,Tu=Math.ceil,Cu=_.ReactCurrentDispatcher,Eu=_.ReactCurrentOwner,Su=_.ReactCurrentBatchConfig,Mu=0,Iu=null,Nu=null,Au=0,Du=0,Ru=Ti(0),Ou=0,Pu=null,Lu=0,ju=0,Fu=0,Uu=null,Bu=null,Vu=0,zu=1/0,qu=null,Wu=!1,Qu=null,Hu=null,Yu=!1,Ku=null,Gu=0,Xu=0,$u=null,Zu=-1,Ju=0;function el(){return 0!==(6&Mu)?$e():-1!==Zu?Zu:Zu=$e()}function tl(e){return 0===(1&e.mode)?1:0!==(2&Mu)&&0!==Au?Au&-Au:null!==va.transition?(0===Ju&&(Ju=vt()),Ju):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function nl(e,t,n,r){if(50<Xu)throw Xu=0,$u=null,Error(a(185));yt(e,n,r),0!==(2&Mu)&&e===Iu||(e===Iu&&(0===(2&Mu)&&(ju|=n),4===Ou&&sl(e,Au)),rl(e,r),1===n&&0===Mu&&0===(1&t.mode)&&(zu=$e()+500,Ui&&zi()))}function rl(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,u=i[o];-1===u?0!==(s&n)&&0===(s&r)||(i[o]=dt(s,t)):u<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ft(e,e===Iu?Au:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Ui=!0,Vi(e)}(ul.bind(null,e)):Vi(ul.bind(null,e)),oi((function(){0===(6&Mu)&&zi()})),n=null;else{switch(_t(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Il(n,il.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function il(e,t){if(Zu=-1,Ju=0,0!==(6&Mu))throw Error(a(327));var n=e.callbackNode;if(bl()&&e.callbackNode!==n)return null;var r=ft(e,e===Iu?Au:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=ml(e,r);else{t=r;var i=Mu;Mu|=2;var o=pl();for(Iu===e&&Au===t||(qu=null,zu=$e()+500,fl(e,t));;)try{gl();break}catch(u){dl(e,u)}wa(),Cu.current=o,Mu=i,null!==Nu?t=0:(Iu=null,Au=0,t=Ou)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=al(e,i))),1===t)throw n=Pu,fl(e,0),sl(e,r),rl(e,$e()),n;if(6===t)sl(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=ml(e,r))&&(0!==(o=pt(e))&&(r=o,t=al(e,o))),1===t))throw n=Pu,fl(e,0),sl(e,r),rl(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wl(e,Bu,qu);break;case 3:if(sl(e,r),(130023424&r)===r&&10<(t=Vu+500-$e())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){el(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wl.bind(null,e,Bu,qu),t);break}wl(e,Bu,qu);break;case 4:if(sl(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tu(r/1960))-r)){e.timeoutHandle=ri(wl.bind(null,e,Bu,qu),r);break}wl(e,Bu,qu);break;default:throw Error(a(329))}}}return rl(e,$e()),e.callbackNode===n?il.bind(null,e):null}function al(e,t){var n=Uu;return e.current.memoizedState.isDehydrated&&(fl(e,t).flags|=256),2!==(e=ml(e,t))&&(t=Bu,Bu=n,null!==t&&ol(t)),e}function ol(e){null===Bu?Bu=e:Bu.push.apply(Bu,e)}function sl(e,t){for(t&=~Fu,t&=~ju,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function ul(e){if(0!==(6&Mu))throw Error(a(327));bl();var t=ft(e,0);if(0===(1&t))return rl(e,$e()),null;var n=ml(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=al(e,r))}if(1===n)throw n=Pu,fl(e,0),sl(e,t),rl(e,$e()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wl(e,Bu,qu),rl(e,$e()),null}function ll(e,t){var n=Mu;Mu|=1;try{return e(t)}finally{0===(Mu=n)&&(zu=$e()+500,Ui&&zi())}}function cl(e){null!==Ku&&0===Ku.tag&&0===(6&Mu)&&bl();var t=Mu;Mu|=1;var n=Su.transition,r=kt;try{if(Su.transition=null,kt=1,e)return e()}finally{kt=r,Su.transition=n,0===(6&(Mu=t))&&zi()}}function hl(){Du=Ru.current,Ci(Ru)}function fl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Nu)for(n=Nu.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:io(),Ci(Ii),Ci(Mi),co();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ci(so);break;case 10:ba(r.type._context);break;case 22:case 23:hl()}n=n.return}if(Iu=e,Nu=e=Rl(e.current,null),Au=Du=t,Ou=0,Pu=null,Fu=ju=Lu=0,Bu=Uu=null,null!==Ea){for(t=0;t<Ea.length;t++)if(null!==(r=(n=Ea[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ea=null}return e}function dl(e,t){for(;;){var n=Nu;try{if(wa(),ho.current=os,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,ko=!1,_o=0,Eu.current=null,null===n||null===n.return){Ou=1,Pu=t,Nu=null;break}e:{var o=e,s=n.return,u=n,l=t;if(t=Au,u.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l,h=u,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ys(s);if(null!==p){p.flags&=-257,gs(p,s,u,0,t),1&p.mode&&ms(o,c,t),l=c;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(l),t.updateQueue=m}else v.add(l);break e}if(0===(1&t)){ms(o,c,t),vl();break e}l=Error(a(426))}else if(ia&&1&u.mode){var y=ys(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gs(y,s,u,0,t),pa(cs(l,u));break e}}o=l=cs(l,u),4!==Ou&&(Ou=2),null===Uu?Uu=[o]:Uu.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,La(o,ps(0,l,t));break e;case 1:u=l;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Hu||!Hu.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,La(o,vs(o,u,t));break e}}o=o.return}while(null!==o)}_l(n)}catch(_){t=_,Nu===n&&null!==n&&(Nu=n=n.return);continue}break}}function pl(){var e=Cu.current;return Cu.current=os,null===e?os:e}function vl(){0!==Ou&&3!==Ou&&2!==Ou||(Ou=4),null===Iu||0===(268435455&Lu)&&0===(268435455&ju)||sl(Iu,Au)}function ml(e,t){var n=Mu;Mu|=2;var r=pl();for(Iu===e&&Au===t||(qu=null,fl(e,t));;)try{yl();break}catch(i){dl(e,i)}if(wa(),Mu=n,Cu.current=r,null!==Nu)throw Error(a(261));return Iu=null,Au=0,Ou}function yl(){for(;null!==Nu;)kl(Nu)}function gl(){for(;null!==Nu&&!Ge();)kl(Nu)}function kl(e){var t=xu(e.alternate,e,Du);e.memoizedProps=e.pendingProps,null===t?_l(e):Nu=t,Eu.current=null}function _l(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ys(n,t,Du)))return void(Nu=n)}else{if(null!==(n=Ks(n,t)))return n.flags&=32767,void(Nu=n);if(null===e)return Ou=6,void(Nu=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Nu=t);Nu=t=e}while(null!==t);0===Ou&&(Ou=5)}function wl(e,t,n){var r=kt,i=Su.transition;try{Su.transition=null,kt=1,function(e,t,n,r){do{bl()}while(null!==Ku);if(0!==(6&Mu))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Iu&&(Nu=Iu=null,Au=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yu||(Yu=!0,Il(tt,(function(){return bl(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Su.transition,Su.transition=null;var s=kt;kt=1;var u=Mu;Mu|=4,Eu.current=null,function(e,t){if(ei=Wt,dr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var s=0,u=-1,l=-1,c=0,h=0,f=e,d=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(u=s+i),f!==o||0!==r&&3!==f.nodeType||(l=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++c===i&&(u=s),d===o&&++h===r&&(l=s),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===u||-1===l?null:{start:u,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Zs=t;null!==Zs;)if(e=(t=Zs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zs=e;else for(;null!==Zs;){t=Zs;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(a(163))}}catch(w){Tl(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zs=e;break}Zs=t.return}v=tu,tu=!1}(e,n),mu(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,gu(n,e,i),Xe(),Mu=u,kt=s,Su.transition=o}else e.current=n;if(Yu&&(Yu=!1,Ku=e,Gu=i),0===(o=e.pendingLanes)&&(Hu=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rl(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Wu)throw Wu=!1,e=Qu,Qu=null,e;0!==(1&Gu)&&0!==e.tag&&bl(),0!==(1&(o=e.pendingLanes))?e===$u?Xu++:(Xu=0,$u=e):Xu=0,zi()}(e,t,n,r)}finally{Su.transition=i,kt=r}return null}function bl(){if(null!==Ku){var e=_t(Gu),t=Su.transition,n=kt;try{if(Su.transition=null,kt=16>e?16:e,null===Ku)var r=!1;else{if(e=Ku,Ku=null,Gu=0,0!==(6&Mu))throw Error(a(331));var i=Mu;for(Mu|=4,Zs=e.current;null!==Zs;){var o=Zs,s=o.child;if(0!==(16&Zs.flags)){var u=o.deletions;if(null!==u){for(var l=0;l<u.length;l++){var c=u[l];for(Zs=c;null!==Zs;){var h=Zs;switch(h.tag){case 0:case 11:case 15:nu(8,h,o)}var f=h.child;if(null!==f)f.return=h,Zs=f;else for(;null!==Zs;){var d=(h=Zs).sibling,p=h.return;if(au(h),h===c){Zs=null;break}if(null!==d){d.return=p,Zs=d;break}Zs=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Zs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Zs=s;else e:for(;null!==Zs;){if(0!==(2048&(o=Zs).flags))switch(o.tag){case 0:case 11:case 15:nu(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zs=g;break e}Zs=o.return}}var k=e.current;for(Zs=k;null!==Zs;){var _=(s=Zs).child;if(0!==(2064&s.subtreeFlags)&&null!==_)_.return=s,Zs=_;else e:for(s=k;null!==Zs;){if(0!==(2048&(u=Zs).flags))try{switch(u.tag){case 0:case 11:case 15:ru(9,u)}}catch(b){Tl(u,u.return,b)}if(u===s){Zs=null;break e}var w=u.sibling;if(null!==w){w.return=u.return,Zs=w;break e}Zs=u.return}}if(Mu=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(b){}r=!0}return r}finally{kt=n,Su.transition=t}}return!1}function xl(e,t,n){e=Oa(e,t=ps(0,t=cs(n,t),1),1),t=el(),null!==e&&(yt(e,1,t),rl(e,t))}function Tl(e,t,n){if(3===e.tag)xl(e,e,n);else for(;null!==t;){if(3===t.tag){xl(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hu||!Hu.has(r))){t=Oa(t,e=vs(t,e=cs(n,e),1),1),e=el(),null!==t&&(yt(t,1,e),rl(t,e));break}}t=t.return}}function Cl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=el(),e.pingedLanes|=e.suspendedLanes&n,Iu===e&&(Au&n)===n&&(4===Ou||3===Ou&&(130023424&Au)===Au&&500>$e()-Vu?fl(e,0):Fu|=n),rl(e,t)}function El(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=el();null!==(e=Ia(e,t))&&(yt(e,t,n),rl(e,n))}function Sl(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),El(e,n)}function Ml(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),El(e,n)}function Il(e,t){return Ye(e,t)}function Nl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Al(e,t,n,r){return new Nl(e,t,n,r)}function Dl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rl(e,t){var n=e.alternate;return null===n?((n=Al(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ol(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Dl(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case x:return Pl(n.children,i,o,t);case T:s=8,i|=8;break;case C:return(e=Al(12,n,t,2|i)).elementType=C,e.lanes=o,e;case I:return(e=Al(13,n,t,i)).elementType=I,e.lanes=o,e;case N:return(e=Al(19,n,t,i)).elementType=N,e.lanes=o,e;case R:return Ll(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:s=10;break e;case S:s=9;break e;case M:s=11;break e;case A:s=14;break e;case D:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Al(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Pl(e,t,n,r){return(e=Al(7,e,r,t)).lanes=n,e}function Ll(e,t,n,r){return(e=Al(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function jl(e,t,n){return(e=Al(6,e,null,t)).lanes=n,e}function Fl(e,t,n){return(t=Al(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ul(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bl(e,t,n,r,i,a,o,s,u){return e=new Ul(e,t,n,s,u),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Al(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Aa(a),e}function Vl(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:b,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function zl(e){if(!e)return Si;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Di(n))return Pi(e,n,t)}return t}function ql(e,t,n,r,i,a,o,s,u){return(e=Bl(n,r,!0,e,0,a,0,s,u)).context=zl(null),n=e.current,(a=Ra(r=el(),i=tl(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,yt(e,i,r),rl(e,r),e}function Wl(e,t,n,r){var i=t.current,a=el(),o=tl(i);return n=zl(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ra(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(nl(e,i,o,a),Pa(e,i,o)),o}function Ql(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Yl(e,t){Hl(e,t),(e=e.alternate)&&Hl(e,t)}xu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ii.current)_s=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return _s=!1,function(e,t,n){switch(t.tag){case 3:Ns(t),da();break;case 5:ao(t);break;case 1:Di(t.type)&&Li(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ei(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ei(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?js(e,t,n):(Ei(so,1&so.current),null!==(e=Ws(e,t,n))?e.sibling:null);Ei(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ei(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Cs(e,t,n)}return Ws(e,t,n)}(e,t,n);_s=0!==(131072&e.flags)}else _s=!1,ia&&0!==(1048576&t.flags)&&Ji(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qs(e,t),e=t.pendingProps;var i=Ai(t,Mi.current);Ta(t,n),i=To(null,t,r,e,i,n);var o=Co();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(o=!0,Li(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Aa(t),i.updater=Va,t.stateNode=i,i._reactInternals=t,Qa(t,r,e,n),t=Is(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),ws(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===M)return 11;if(e===A)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Ss(null,t,r,e,n);break e;case 1:t=Ms(null,t,r,e,n);break e;case 11:t=bs(null,t,r,e,n);break e;case 14:t=xs(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ss(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ms(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Ns(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Da(e,t),ja(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=As(e,t,r,n,i=cs(Error(a(423)),t));break e}if(r!==i){t=As(e,t,r,n,i=cs(Error(a(424)),t));break e}for(ra=li(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=$a(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Ws(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&la(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Es(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&la(t),null;case 13:return js(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Xa(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,bs(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Ei(ya,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ii.current){t=Ws(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var l=u.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=Ra(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),xa(o.return,n,t),u.lanes|=n;break}l=l.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),xa(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ta(t,n),r=r(i=Ca(i)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),xs(e,t,r,i=ma(r.type,i),n);case 15:return Ts(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),qs(e,t),t.tag=1,Di(r)?(e=!0,Li(t)):e=!1,Ta(t,n),qa(t,r,i),Qa(t,r,i,n),Is(null,t,r,!0,e,n);case 19:return zs(e,t,n);case 22:return Cs(e,t,n)}throw Error(a(156,t.tag))};var Kl="function"===typeof reportError?reportError:function(e){console.error(e)};function Gl(e){this._internalRoot=e}function Xl(e){this._internalRoot=e}function $l(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jl(){}function ec(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Ql(o);s.call(e)}}Wl(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Ql(o);a.call(e)}}var o=ql(t,r,e,0,null,!1,0,"",Jl);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),cl(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Ql(u);s.call(e)}}var u=Bl(e,0,!1,null,0,!1,0,"",Jl);return e._reactRootContainer=u,e[pi]=u.current,zr(8===e.nodeType?e.parentNode:e),cl((function(){Wl(t,u,n,r)})),u}(n,t,e,i,r);return Ql(o)}Xl.prototype.render=Gl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wl(e,t,null,null)},Xl.prototype.unmount=Gl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cl((function(){Wl(null,e,null,null)})),t[pi]=null}},Xl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Tt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&jt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(gt(t,1|n),rl(t,$e()),0===(6&Mu)&&(zu=$e()+500,zi()))}break;case 13:cl((function(){var t=Ia(e,1);if(null!==t){var n=el();nl(t,e,1,n)}})),Yl(e,1)}},bt=function(e){if(13===e.tag){var t=Ia(e,134217728);if(null!==t)nl(t,e,134217728,el());Yl(e,134217728)}},xt=function(e){if(13===e.tag){var t=tl(e),n=Ia(e,t);if(null!==n)nl(n,e,t,el());Yl(e,t)}},Tt=function(){return kt},Ct=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},be=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));Y(r),Z(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Me=ll,Ie=cl;var tc={usingClientEntryPoint:!1,Events:[ki,_i,wi,Ee,Se,ll]},nc={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Qe(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{it=ic.inject(rc),at=ic}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$l(t))throw Error(a(200));return Vl(e,t,null,n)},t.createRoot=function(e,t){if(!$l(e))throw Error(a(299));var n=!1,r="",i=Kl;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bl(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Gl(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Qe(t))?null:e.stateNode},t.flushSync=function(e){return cl(e)},t.hydrate=function(e,t,n){if(!Zl(t))throw Error(a(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$l(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Kl;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=ql(t,null,e,1,null!=n?n:null,i,0,o,s),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xl(t)},t.render=function(e,t,n){if(!Zl(t))throw Error(a(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zl(e))throw Error(a(40));return!!e._reactRootContainer&&(cl((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=ll,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zl(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return ec(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,a={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:c,props:a,_owner:s.current}}t.jsx=l,t.jsxs=l},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var _=k.prototype=new g;_.constructor=k,v(_,y.prototype),_.isPureReactComponent=!0;var w=Array.isArray,b=Object.prototype.hasOwnProperty,x={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)b.call(t,i)&&!T.hasOwnProperty(i)&&(a[i]=t[i]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];a.children=l}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===a[i]&&(a[i]=u[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:x.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var S=/\/+/g;function M(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===a?"."+M(u,0):a,w(o)?(i="",null!=e&&(i=e.replace(S,"$&/")+"/"),I(o,t,i,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(S,"$&/")+"/")+e)),t.push(o)),1;if(u=0,a=""===a?".":a+":",w(e))for(var l=0;l<e.length;l++){var c=a+M(s=e[l],l);u+=I(s,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=I(s=s.value,t,i,c=a+M(s,l++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function N(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},R={transition:null},O={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:R,ReactCurrentOwner:x};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)b.call(t,l)&&!T.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==u?u[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){u=Array(l);for(var c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,u=e[s],l=s+1,c=e[l];if(0>a(u,n))l<i&&0>a(c,u)?(e[r]=c,e[l]=n,r=l):(e[r]=u,e[s]=n,r=s);else{if(!(l<i&&0>a(c,n)))break e;e[r]=c,e[l]=n,r=l}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var l=[],c=[],h=1,f=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(l,t)}t=r(c)}}function w(e){if(m=!1,_(e),!v)if(null!==r(l))v=!0,R(b);else{var t=r(c);null!==t&&O(w,t.startTime-e)}}function b(e,n){v=!1,m&&(m=!1,g(E),E=-1),p=!0;var a=d;try{for(_(n),f=r(l);null!==f&&(!(f.expirationTime>n)||e&&!I());){var o=f.callback;if("function"===typeof o){f.callback=null,d=f.priorityLevel;var s=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?f.callback=s:f===r(l)&&i(l),_(n)}else i(l);f=r(l)}if(null!==f)var u=!0;else{var h=r(c);null!==h&&O(w,h.startTime-n),u=!1}return u}finally{f=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,T=!1,C=null,E=-1,S=5,M=-1;function I(){return!(t.unstable_now()-M<S)}function N(){if(null!==C){var e=t.unstable_now();M=e;var n=!0;try{n=C(!0,e)}finally{n?x():(T=!1,C=null)}}else T=!1}if("function"===typeof k)x=function(){k(N)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,D=A.port2;A.port1.onmessage=N,x=function(){D.postMessage(null)}}else x=function(){y(N,0)};function R(e){C=e,T||(T=!0,x())}function O(e,n){E=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,R(b))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===r(l)&&e===r(c)&&(m?(g(E),E=-1):m=!0,O(w,a-o))):(e.sortIndex=s,n(l,e),v||p||(v=!0,R(b))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".b7b50325.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="incommon:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var s,u;if(void 0!==a)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var h=l[c];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+a){s=h;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=r),e[r]=[i];var f=function(t,n){s.onerror=s.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/incommon/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),s=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,i[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],s=r[1],u=r[2],l=0;if(o.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(u)u(n)}for(t&&t(r);l<o.length;l++)a=o[l],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkincommon=self.webpackChunkincommon||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){var e=n(791),t=n.t(e,2),r=n(250);function i(e){if(Array.isArray(e))return e}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){return i(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||o(e,t)||s()}var l,c=n(164),h=n.t(c,2);function f(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function d(e){return function(e){if(Array.isArray(e))return a(e)}(e)||f(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function _(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t){if(t&&("object"===w(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function T(e){var t=_();return function(){var n,r=k(e);if(t){var i=k(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x(this,n)}}function C(e,t,n){return C=_()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&y(i,n.prototype),i},C.apply(null,arguments)}function E(e){var t="function"===typeof Map?new Map:void 0;return E=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return C(e,arguments,k(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),y(n,e)},E(e)}function S(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function M(){return M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(l||(l={}));var I,N="popstate";function A(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function D(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function R(e,t){return{usr:e.state,key:e.key,idx:t}}function O(e,t,n,r){return void 0===n&&(n=null),M({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?L(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function P(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function L(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function j(e,t,n,r){void 0===r&&(r={});var i=r,a=i.window,o=void 0===a?document.defaultView:a,s=i.v5Compat,u=void 0!==s&&s,c=o.history,h=l.Pop,f=null,d=p();function p(){return(c.state||{idx:null}).idx}function v(){h=l.Pop;var e=p(),t=null==e?null:e-d;d=e,f&&f({action:h,location:y.location,delta:t})}function m(e){var t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:P(e);return A(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==d&&(d=0,c.replaceState(M({},c.state,{idx:d}),""));var y={get action(){return h},get location(){return e(o,c)},listen:function(e){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(N,v),f=e,function(){o.removeEventListener(N,v),f=null}},createHref:function(e){return t(o,e)},createURL:m,encodeLocation:function(e){var t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){h=l.Push;var r=O(y.location,e,t);n&&n(r,e);var i=R(r,d=p()+1),a=y.createHref(r);try{c.pushState(i,"",a)}catch(zv){if(zv instanceof DOMException&&"DataCloneError"===zv.name)throw zv;o.location.assign(a)}u&&f&&f({action:h,location:y.location,delta:1})},replace:function(e,t){h=l.Replace;var r=O(y.location,e,t);n&&n(r,e);var i=R(r,d=p()),a=y.createHref(r);c.replaceState(i,"",a),u&&f&&f({action:h,location:y.location,delta:0})},go:function(e){return c.go(e)}};return y}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(I||(I={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function F(e,t,n){void 0===n&&(n="/");var r=Y(("string"===typeof t?L(t):t).pathname||"/",n);if(null==r)return null;var i=U(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=W(i[o],H(r));return a}function U(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(A(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var s=$([r,o.relativePath]),u=n.concat(o);e.children&&e.children.length>0&&(A(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),U(e.children,t,u,s)),(null!=e.path||e.index)&&t.push({path:s,score:q(s,e.index),routesMeta:u})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=S(B(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(s){a.e(s)}finally{a.f()}}else i(e,t)})),t}function B(e){var t=e.split("/");if(0===t.length)return[];var n,r=i(n=t)||f(n)||o(n)||s(),a=r[0],u=r.slice(1),l=a.endsWith("?"),c=a.replace(/\?$/,"");if(0===u.length)return l?[c,""]:[c];var h=B(u.join("/")),p=[];return p.push.apply(p,d(h.map((function(e){return""===e?c:[c,e].join("/")})))),l&&p.push.apply(p,d(h)),p.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var V=/^:\w+$/,z=function(e){return"*"===e};function q(e,t){var n=e.split("/"),r=n.length;return n.some(z)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!z(e)})).reduce((function(e,t){return e+(V.test(t)?3:""===t?1:10)}),r)}function W(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=Q({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);var h=s.route;a.push({params:r,pathname:$([i,c.pathname]),pathnameBase:Z($([i,c.pathnameBase])),route:h}),"/"!==c.pathnameBase&&(i=$([i,c.pathnameBase]))}return a}function Q(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);D("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,(function(e,t,n){return r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"}));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=u(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var s=o[0],l=s.replace(/(.)\/+$/,"$1"),c=o.slice(1),h=a.reduce((function(e,t,n){var r=t.paramName,i=t.isOptional;if("*"===r){var a=c[n]||"";l=s.slice(0,s.length-a.length).replace(/(.)\/+$/,"$1")}var o=c[n];return e[r]=i&&!o?void 0:function(e,t){try{return decodeURIComponent(e)}catch(zv){return D(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+zv+")."),e}}(o||"",r),e}),{});return{params:h,pathname:s,pathnameBase:l,pattern:e}}function H(e){try{return decodeURI(e)}catch(zv){return D(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+zv+")."),e}}function Y(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function K(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function G(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function X(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=L(e):(A(!(i=M({},e)).pathname||!i.pathname.includes("?"),K("?","pathname","search",i)),A(!i.pathname||!i.pathname.includes("#"),K("#","pathname","hash",i)),A(!i.search||!i.search.includes("#"),K("#","search","hash",i)));var a,o=""===e||""===i.pathname,s=o?"/":i.pathname;if(null==s)a=n;else if(r){var u=t[t.length-1].replace(/^\//,"").split("/");if(s.startsWith("..")){for(var l=s.split("/");".."===l[0];)l.shift(),u.pop();i.pathname=l.join("/")}a="/"+u.join("/")}else{var c=t.length-1;if(s.startsWith("..")){for(var h=s.split("/");".."===h[0];)h.shift(),c-=1;i.pathname=h.join("/")}a=c>=0?t[c]:"/"}var f=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?L(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:J(a),hash:ee(s)}}(i,a),d=s&&"/"!==s&&s.endsWith("/"),p=(o||"."===s)&&n.endsWith("/");return f.pathname.endsWith("/")||!d&&!p||(f.pathname+="/"),f}var $=function(e){return e.join("/").replace(/\/\/+/g,"/")},Z=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},J=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},ee=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},te=function(e){g(n,e);var t=T(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n)}(E(Error));function ne(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var re=["post","put","patch","delete"],ie=(new Set(re),["get"].concat(re));new Set(ie),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function ae(){return ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ae.apply(this,arguments)}var oe=e.createContext(null);var se=e.createContext(null);var ue=e.createContext(null);var le=e.createContext(null);var ce=e.createContext(null);var he=e.createContext({outlet:null,matches:[],isDataRoute:!1});var fe=e.createContext(null);function de(){return null!=e.useContext(ce)}function pe(){return de()||A(!1),e.useContext(ce).location}function ve(t){e.useContext(le).static||e.useLayoutEffect(t)}function me(){return e.useContext(he).isDataRoute?function(){var t=Se(Ce.UseNavigateStable).router,n=Ie(Ee.UseNavigateStable),r=e.useRef(!1);ve((function(){r.current=!0}));var i=e.useCallback((function(e,i){void 0===i&&(i={}),r.current&&("number"===typeof e?t.navigate(e):t.navigate(e,ae({fromRouteId:n},i)))}),[t,n]);return i}():function(){de()||A(!1);var t=e.useContext(oe),n=e.useContext(le),r=n.basename,i=n.navigator,a=e.useContext(he).matches,o=pe().pathname,s=JSON.stringify(G(a).map((function(e){return e.pathnameBase}))),u=e.useRef(!1);ve((function(){u.current=!0}));var l=e.useCallback((function(e,n){if(void 0===n&&(n={}),u.current)if("number"!==typeof e){var a=X(e,JSON.parse(s),o,"path"===n.relative);null==t&&"/"!==r&&(a.pathname="/"===a.pathname?r:$([r,a.pathname])),(n.replace?i.replace:i.push)(a,n.state,n)}else i.go(e)}),[r,i,s,o,t]);return l}()}function ye(){var t=e.useContext(he).matches,n=t[t.length-1];return n?n.params:{}}function ge(t,n){var r=(void 0===n?{}:n).relative,i=e.useContext(he).matches,a=pe().pathname,o=JSON.stringify(G(i).map((function(e){return e.pathnameBase})));return e.useMemo((function(){return X(t,JSON.parse(o),a,"path"===r)}),[t,o,a,r])}function ke(t,n,r){de()||A(!1);var i,a=e.useContext(le).navigator,o=e.useContext(he).matches,s=o[o.length-1],u=s?s.params:{},c=(s&&s.pathname,s?s.pathnameBase:"/"),h=(s&&s.route,pe());if(n){var f,d="string"===typeof n?L(n):n;"/"===c||(null==(f=d.pathname)?void 0:f.startsWith(c))||A(!1),i=d}else i=h;var p=i.pathname||"/",v=F(t,{pathname:"/"===c?p:p.slice(c.length)||"/"});var m=Te(v&&v.map((function(e){return Object.assign({},e,{params:Object.assign({},u,e.params),pathname:$([c,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:$([c,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),o,r);return n&&m?e.createElement(ce.Provider,{value:{location:ae({pathname:"/",search:"",hash:"",state:null,key:"default"},i),navigationType:l.Pop}},m):m}function _e(){var t=function(){var t,n=e.useContext(fe),r=Me(Ee.UseRouteError),i=Ie(Ee.UseRouteError);if(n)return n;return null==(t=r.errors)?void 0:t[i]}(),n=ne(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),r?e.createElement("pre",{style:a},r):null,null)}var we=e.createElement(_e,null),be=function(t){g(r,t);var n=T(r);function r(e){var t;return p(this,r),(t=n.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},t}return m(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?e.createElement(he.Provider,{value:this.props.routeContext},e.createElement(fe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),r}(e.Component);function xe(t){var n=t.routeContext,r=t.match,i=t.children,a=e.useContext(oe);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),e.createElement(he.Provider,{value:n},i)}function Te(t,n,r){var i;if(void 0===n&&(n=[]),void 0===r&&(r=null),null==t){var a;if(null==(a=r)||!a.errors)return null;t=r.matches}var o=t,s=null==(i=r)?void 0:i.errors;if(null!=s){var u=o.findIndex((function(e){return e.route.id&&(null==s?void 0:s[e.route.id])}));u>=0||A(!1),o=o.slice(0,Math.min(o.length,u+1))}return o.reduceRight((function(t,i,a){var u=i.route.id?null==s?void 0:s[i.route.id]:null,l=null;r&&(l=i.route.errorElement||we);var c=n.concat(o.slice(0,a+1)),h=function(){var n;return n=u?l:i.route.Component?e.createElement(i.route.Component,null):i.route.element?i.route.element:t,e.createElement(xe,{match:i,routeContext:{outlet:t,matches:c,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===a)?e.createElement(be,{location:r.location,revalidation:r.revalidation,component:l,error:u,children:h(),routeContext:{outlet:null,matches:c,isDataRoute:!0}}):h()}),null)}var Ce=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Ce||{}),Ee=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Ee||{});function Se(t){var n=e.useContext(oe);return n||A(!1),n}function Me(t){var n=e.useContext(se);return n||A(!1),n}function Ie(t){var n=function(t){var n=e.useContext(he);return n||A(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||A(!1),r.route.id}t.startTransition;function Ne(e){A(!1)}function Ae(t){var n=t.basename,r=void 0===n?"/":n,i=t.children,a=void 0===i?null:i,o=t.location,s=t.navigationType,u=void 0===s?l.Pop:s,c=t.navigator,h=t.static,f=void 0!==h&&h;de()&&A(!1);var d=r.replace(/^\/*/,"/"),p=e.useMemo((function(){return{basename:d,navigator:c,static:f}}),[d,c,f]);"string"===typeof o&&(o=L(o));var v=o,m=v.pathname,y=void 0===m?"/":m,g=v.search,k=void 0===g?"":g,_=v.hash,w=void 0===_?"":_,b=v.state,x=void 0===b?null:b,T=v.key,C=void 0===T?"default":T,E=e.useMemo((function(){var e=Y(y,d);return null==e?null:{location:{pathname:e,search:k,hash:w,state:x,key:C},navigationType:u}}),[d,y,k,w,x,C,u]);return null==E?null:e.createElement(le.Provider,{value:p},e.createElement(ce.Provider,{children:a,value:E}))}function De(e){var t=e.children,n=e.location;return ke(Pe(t),n)}var Re=function(e){return e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error",e}(Re||{}),Oe=new Promise((function(){}));e.Component;function Pe(t,n){void 0===n&&(n=[]);var r=[];return e.Children.forEach(t,(function(t,i){if(e.isValidElement(t)){var a=[].concat(d(n),[i]);if(t.type!==e.Fragment){t.type!==Ne&&A(!1),t.props.index&&t.props.children&&A(!1);var o={id:t.props.id||a.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(o.children=Pe(t.props.children,a)),r.push(o)}else r.push.apply(r,Pe(t.props.children,a))}})),r}function Le(){return Le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Le.apply(this,arguments)}function je(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);var Fe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];new Map;var Ue=t.startTransition;h.flushSync;function Be(t){var n,r=t.basename,i=t.children,a=t.future,o=t.window,s=e.useRef();null==s.current&&(s.current=(void 0===(n={window:o,v5Compat:!0})&&(n={}),j((function(e,t){var n=L(e.location.hash.substr(1)),r=n.pathname,i=void 0===r?"/":r,a=n.search,o=void 0===a?"":a,s=n.hash,u=void 0===s?"":s;return i.startsWith("/")||i.startsWith(".")||(i="/"+i),O("",{pathname:i,search:o,hash:u},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){var n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){var i=e.location.href,a=i.indexOf("#");r=-1===a?i:i.slice(0,a)}return r+"#"+("string"===typeof t?t:P(t))}),(function(e,t){D("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),n)));var l=s.current,c=u(e.useState({action:l.action,location:l.location}),2),h=c[0],f=c[1],d=(a||{}).v7_startTransition,p=e.useCallback((function(e){d&&Ue?Ue((function(){return f(e)})):f(e)}),[f,d]);return e.useLayoutEffect((function(){return l.listen(p)}),[l,p]),e.createElement(Ae,{basename:r,children:i,location:h.location,navigationType:h.action,navigator:l})}var Ve="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,ze=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qe=e.forwardRef((function(t,n){var r,i=t.onClick,a=t.relative,o=t.reloadDocument,s=t.replace,u=t.state,l=t.target,c=t.to,h=t.preventScrollReset,f=t.unstable_viewTransition,d=je(t,Fe),p=e.useContext(le).basename,v=!1;if("string"===typeof c&&ze.test(c)&&(r=c,Ve))try{var m=new URL(window.location.href),y=c.startsWith("//")?new URL(m.protocol+c):new URL(c),g=Y(y.pathname,p);y.origin===m.origin&&null!=g?c=g+y.search+y.hash:v=!0}catch(w){}var k=function(t,n){var r=(void 0===n?{}:n).relative;de()||A(!1);var i=e.useContext(le),a=i.basename,o=i.navigator,s=ge(t,{relative:r}),u=s.hash,l=s.pathname,c=s.search,h=l;return"/"!==a&&(h="/"===l?a:$([a,l])),o.createHref({pathname:h,search:c,hash:u})}(c,{relative:a}),_=function(t,n){var r=void 0===n?{}:n,i=r.target,a=r.replace,o=r.state,s=r.preventScrollReset,u=r.relative,l=r.unstable_viewTransition,c=me(),h=pe(),f=ge(t,{relative:u});return e.useCallback((function(e){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(e,i)){e.preventDefault();var n=void 0!==a?a:P(h)===P(f);c(t,{replace:n,state:o,preventScrollReset:s,relative:u,unstable_viewTransition:l})}}),[h,c,f,a,o,i,t,s,u,l])}(c,{replace:s,state:u,target:l,preventScrollReset:h,relative:a,unstable_viewTransition:f});return e.createElement("a",Le({},d,{href:r||k,onClick:v||o?i:function(e){i&&i(e),e.defaultPrevented||_(e)},ref:n,target:l}))}));var We,Qe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(We||(We={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Qe||(Qe={}));function He(){He=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(S){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),o=new T(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return E()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=_(o,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(S){return{type:"throw",arg:S}}}e.wrap=u;var c={};function h(){}function f(){}function d(){}var p={};s(p,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(C([])));m&&m!==t&&n.call(m,i)&&(p=m);var y=d.prototype=h.prototype=Object.create(p);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(i,a,o,s){var u=l(e[i],e,a);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==w(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(h).then((function(e){c.value=e,o(c)}),(function(e){return r("throw",e,o,s)}))}s(u.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,c;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function C(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:E}}function E(){return{value:void 0,done:!0}}return f.prototype=d,s(y,"constructor",d),s(d,"constructor",f),f.displayName=s(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,o,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(k.prototype),s(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new k(u(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(y),s(y,o,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=C,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}function Ye(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(zv){return void n(zv)}s.done?t(u):Promise.resolve(u).then(r,i)}function Ke(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Ye(a,r,i,o,s,"next",e)}function s(e){Ye(a,r,i,o,s,"throw",e)}o(void 0)}))}}function Ge(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}function Xe(){return Xe="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=Ge(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Xe.apply(this,arguments)}function $e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ze=!1,Je=!1,et="${JSCORE_VERSION}",tt=function(e,t){if(!e)throw nt(t)},nt=function(e){return new Error("Firebase Database ("+et+") INTERNAL ASSERT FAILED: "+e)},rt=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},it={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=a>>2,h=(3&a)<<4|s>>4,f=(15&s)<<2|l>>6,d=63&l;u||(d=64,o||(f=64)),r.push(n[c],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(rt(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw Error();var l=a<<2|o>>4;if(r.push(l),64!==s){var c=o<<4&240|s>>2;if(r.push(c),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},at=function(e){var t=rt(e);return it.encodeByteArray(t,!0)},ot=function(e){return at(e).replace(/\./g,"")},st=function(e){try{return it.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function ut(e){return lt(void 0,e)}function lt(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=lt(e[n],t[n]));return e}var ct=function(){function e(){var t=this;p(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return m(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function ht(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function ft(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ht())}function dt(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function pt(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function vt(){return!0===Ze||!0===Je}function mt(){return"object"===typeof indexedDB}function yt(){return new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(zv){t(zv)}}))}var gt=function(e){g(n,e);var t=T(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(b(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(b(a),kt.prototype.create),a}return m(n)}(E(Error)),kt=function(){function e(t,n,r){p(this,e),this.service=t,this.serviceName=n,this.errors=r}return m(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?_t(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new gt(n,a,t);return o}}]),e}();function _t(e,t){return e.replace(wt,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var wt=/\{\$([^}]+)}/g;function bt(e){return JSON.parse(e)}function xt(e){return JSON.stringify(e)}var Tt=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=bt(st(a[0])||""),n=bt(st(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function Ct(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Et(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function St(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Mt(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function It(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(Nt(s)&&Nt(u)){if(!It(s,u))return!1}else if(s!==u)return!1}for(var l=0,c=r;l<c.length;l++){var h=c[l];if(!n.includes(h))return!1}return!0}function Nt(e){return null!==e&&"object"===typeof e}function At(e){for(var t=[],n=function(){var e=u(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}var Dt=function(){function e(){p(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return m(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var s,u,l=this.chain_[0],c=this.chain_[1],h=this.chain_[2],f=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(s=f^c&(h^f),u=1518500249):(s=c^h^f,u=1859775393):p<60?(s=c&h|f&(c|h),u=2400959708):(s=c^h^f,u=3395469782);var v=(l<<5|l>>>27)+s+d+u+n[p]&4294967295;d=f,f=h,h=4294967295&(c<<30|c>>>2),c=l,l=v}this.chain_[0]=this.chain_[0]+l&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function Rt(e,t){return"".concat(e," failed: ").concat(t," argument ")}var Ot=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},Pt=144e5;function Lt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(Pt,r+i)}function jt(e){return e&&e._delegate?e._delegate:e}var Ft=function(){function e(t,n,r){p(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return m(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Ut="[DEFAULT]",Bt=function(){function e(t,n){p(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return m(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new ct;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ut})}catch(l){}var t,n=S(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=u(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(l){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Ke(He().mark((function e(){var t;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(d(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),d(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=S(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=u(i.value,2),l=s[0],c=s[1],h=this.normalizeInstanceIdentifier(l);r===h&&c.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=S(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(s){i.e(s)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Ut?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut;return this.component?this.component.multipleInstances?e:Ut:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Vt,zt,qt=function(){function e(t){p(this,e),this.name=t,this.providers=new Map}return m(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Bt(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Wt=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(zt||(zt={}));var Qt={debug:zt.DEBUG,verbose:zt.VERBOSE,info:zt.INFO,warn:zt.WARN,error:zt.ERROR,silent:zt.SILENT},Ht=zt.INFO,Yt=($e(Vt={},zt.DEBUG,"log"),$e(Vt,zt.VERBOSE,"log"),$e(Vt,zt.INFO,"info"),$e(Vt,zt.WARN,"warn"),$e(Vt,zt.ERROR,"error"),Vt),Kt=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Yt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Gt=function(){function e(t){p(this,e),this.name=t,this._logLevel=Ht,this._logHandler=Kt,this._userLogHandler=null,Wt.push(this)}return m(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in zt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Qt[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,zt.DEBUG].concat(t)),this._logHandler.apply(this,[this,zt.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,zt.VERBOSE].concat(t)),this._logHandler.apply(this,[this,zt.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,zt.INFO].concat(t)),this._logHandler.apply(this,[this,zt.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,zt.WARN].concat(t)),this._logHandler.apply(this,[this,zt.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,zt.ERROR].concat(t)),this._logHandler.apply(this,[this,zt.ERROR].concat(t))}}]),e}();function Xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xt(Object(n),!0).forEach((function(t){$e(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Zt,Jt;var en=new WeakMap,tn=new WeakMap,nn=new WeakMap,rn=new WeakMap,an=new WeakMap;var on={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return tn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||nn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ln(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function sn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Jt||(Jt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(cn(this),n),ln(en.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ln(e.apply(cn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[cn(this),t].concat(r));return nn.set(a,t.sort?t.sort():[t]),ln(a)}}function un(e){return"function"===typeof e?sn(e):(e instanceof IDBTransaction&&function(e){if(!tn.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));tn.set(e,t)}}(e),t=e,(Zt||(Zt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,on):e);var t}function ln(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(ln(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&en.set(t,e)})).catch((function(){})),an.set(t,e),t}(e);if(rn.has(e))return rn.get(e);var t=un(e);return t!==e&&(rn.set(e,t),an.set(t,e)),t}var cn=function(e){return an.get(e)};var hn,fn,dn,pn=["get","getKey","getAll","getAllKeys","count"],vn=["put","add","delete","clear"],mn=new Map;function yn(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(mn.get(t))return mn.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=vn.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||pn.includes(n))){var a=function(){var e=Ke(He().mark((function e(t){var a,o,s,u,l,c,h=arguments;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),s=o.store,u=h.length,l=new Array(u>1?u-1:0),c=1;c<u;c++)l[c-1]=h[c];return r&&(s=s.index(l.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,l),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return mn.set(t,a),a}}}hn=function(e){return $t($t({},e),{},{get:function(t,n,r){return yn(t,n)||e.get(t,n,r)},has:function(t,n){return!!yn(t,n)||e.has(t,n)}})},on=hn(on);var gn=function(){function e(t){p(this,e),this.container=t}return m(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var kn="@firebase/app",_n="0.7.31",wn=new Gt("@firebase/app"),bn="[DEFAULT]",xn=($e(fn={},kn,"fire-core"),$e(fn,"@firebase/app-compat","fire-core-compat"),$e(fn,"@firebase/analytics","fire-analytics"),$e(fn,"@firebase/analytics-compat","fire-analytics-compat"),$e(fn,"@firebase/app-check","fire-app-check"),$e(fn,"@firebase/app-check-compat","fire-app-check-compat"),$e(fn,"@firebase/auth","fire-auth"),$e(fn,"@firebase/auth-compat","fire-auth-compat"),$e(fn,"@firebase/database","fire-rtdb"),$e(fn,"@firebase/database-compat","fire-rtdb-compat"),$e(fn,"@firebase/functions","fire-fn"),$e(fn,"@firebase/functions-compat","fire-fn-compat"),$e(fn,"@firebase/installations","fire-iid"),$e(fn,"@firebase/installations-compat","fire-iid-compat"),$e(fn,"@firebase/messaging","fire-fcm"),$e(fn,"@firebase/messaging-compat","fire-fcm-compat"),$e(fn,"@firebase/performance","fire-perf"),$e(fn,"@firebase/performance-compat","fire-perf-compat"),$e(fn,"@firebase/remote-config","fire-rc"),$e(fn,"@firebase/remote-config-compat","fire-rc-compat"),$e(fn,"@firebase/storage","fire-gcs"),$e(fn,"@firebase/storage-compat","fire-gcs-compat"),$e(fn,"@firebase/firestore","fire-fst"),$e(fn,"@firebase/firestore-compat","fire-fst-compat"),$e(fn,"fire-js","fire-js"),$e(fn,"firebase","fire-js-all"),fn),Tn=new Map,Cn=new Map;function En(e,t){try{e.container.addComponent(t)}catch(n){wn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Sn(e){var t=e.name;if(Cn.has(t))return wn.debug("There were multiple attempts to register component ".concat(t,".")),!1;Cn.set(t,e);var n,r=S(Tn.values());try{for(r.s();!(n=r.n()).done;){En(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Mn(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}var In=($e(dn={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),$e(dn,"bad-app-name","Illegal App name: '{$appName}"),$e(dn,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),$e(dn,"app-deleted","Firebase App named '{$appName}' already deleted"),$e(dn,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),$e(dn,"invalid-log-argument","First argument to `onLog` must be null or a function."),$e(dn,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),$e(dn,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),$e(dn,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),$e(dn,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),dn),Nn=new kt("app","Firebase",In),An=function(){function e(t,n,r){var i=this;p(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ft("app",(function(){return i}),"PUBLIC"))}return m(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Nn.create("app-deleted",{appName:this._name})}}]),e}(),Dn="9.9.3";function Rn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bn,t=Tn.get(e);if(!t)throw Nn.create("no-app",{appName:e});return t}function On(e,t,n){var r,i=null!==(r=xn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void wn.warn(s.join(" "))}Sn(new Ft("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}var Pn="firebase-heartbeat-store",Ln=null;function jn(){return Ln||(Ln=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=ln(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(ln(s.result),e.oldVersion,e.newVersion,ln(s.transaction))})),r&&s.addEventListener("blocked",(function(){return r()})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),u}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(Pn)}}).catch((function(e){throw Nn.create("idb-open",{originalErrorMessage:e.message})}))),Ln}function Fn(e){return Un.apply(this,arguments)}function Un(){return Un=Ke(He().mark((function e(t){var n,r,i;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,jn();case 3:return r=e.sent,e.abrupt("return",r.transaction(Pn).objectStore(Pn).get(zn(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof gt?wn.warn(e.t0.message):(i=Nn.create("idb-get",{originalErrorMessage:null===(n=e.t0)||void 0===n?void 0:n.message}),wn.warn(i.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Un.apply(this,arguments)}function Bn(e,t){return Vn.apply(this,arguments)}function Vn(){return Vn=Ke(He().mark((function e(t,n){var r,i,a,o,s;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,jn();case 3:return i=e.sent,a=i.transaction(Pn,"readwrite"),o=a.objectStore(Pn),e.next=8,o.put(n,zn(t));case 8:return e.abrupt("return",a.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof gt?wn.warn(e.t0.message):(s=Nn.create("idb-set",{originalErrorMessage:null===(r=e.t0)||void 0===r?void 0:r.message}),wn.warn(s.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),Vn.apply(this,arguments)}function zn(e){return"".concat(e.name,"!").concat(e.options.appId)}var qn=function(){function e(t){var n=this;p(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Yn(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return m(e,[{key:"triggerHeartbeat",value:function(){var e=Ke(He().mark((function e(){var t,n,r;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Wn(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Ke(He().mark((function e(){var t,n,r,i,a;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Wn(),n=Qn(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=ot(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Wn(){return(new Date).toISOString().substring(0,10)}function Qn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=S(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Kn(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Kn(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var s=o();if("break"===s)break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Hn,Yn=function(){function e(t){p(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return m(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Ke(He().mark((function e(){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(mt()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",yt().then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Ke(He().mark((function e(){var t;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Fn(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Ke(He().mark((function e(t){var n,r;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Bn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Ke(He().mark((function e(t){var n,r;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Bn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(d(r.heartbeats),d(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Kn(e){return ot(JSON.stringify({version:2,heartbeats:e})).length}Hn="",Sn(new Ft("platform-logger",(function(e){return new gn(e)}),"PRIVATE")),Sn(new Ft("heartbeat",(function(e){return new qn(e)}),"PRIVATE")),On(kn,_n,Hn),On(kn,_n,"esm2017"),On("fire-js","");var Gn,Xn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},$n={},Zn=Zn||{},Jn=Xn||self;function er(){}function tr(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function nr(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var rr="closure_uid_"+(1e9*Math.random()>>>0),ir=0;function ar(e,t,n){return e.call.apply(e.bind,arguments)}function or(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function sr(e,t,n){return(sr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ar:or).apply(null,arguments)}function ur(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function lr(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function cr(){this.s=this.s,this.o=this.o}var hr={};cr.prototype.s=!1,cr.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,rr)&&e[rr]||(e[rr]=++ir)}(this);delete hr[e]}},cr.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var fr=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},dr=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function pr(e){return Array.prototype.concat.apply([],arguments)}function vr(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function mr(e){return/^[\s\xa0]*$/.test(e)}var yr,gr=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function kr(e,t){return-1!=e.indexOf(t)}function _r(e,t){return e<t?-1:e>t?1:0}e:{var wr=Jn.navigator;if(wr){var br=wr.userAgent;if(br){yr=br;break e}}yr=""}function xr(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Tr(e){var t={};for(var n in e)t[n]=e[n];return t}var Cr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Er(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Cr.length;a++)n=Cr[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Sr(e){return Sr[" "](e),e}Sr[" "]=er;var Mr,Ir=kr(yr,"Opera"),Nr=kr(yr,"Trident")||kr(yr,"MSIE"),Ar=kr(yr,"Edge"),Dr=Ar||Nr,Rr=kr(yr,"Gecko")&&!(kr(yr.toLowerCase(),"webkit")&&!kr(yr,"Edge"))&&!(kr(yr,"Trident")||kr(yr,"MSIE"))&&!kr(yr,"Edge"),Or=kr(yr.toLowerCase(),"webkit")&&!kr(yr,"Edge");function Pr(){var e=Jn.document;return e?e.documentMode:void 0}e:{var Lr="",jr=function(){var e=yr;return Rr?/rv:([^\);]+)(\)|;)/.exec(e):Ar?/Edge\/([\d\.]+)/.exec(e):Nr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Or?/WebKit\/(\S+)/.exec(e):Ir?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(jr&&(Lr=jr?jr[1]:""),Nr){var Fr=Pr();if(null!=Fr&&Fr>parseFloat(Lr)){Mr=String(Fr);break e}}Mr=Lr}var Ur,Br={};function Vr(){return function(e){var t=Br;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=gr(String(Mr)).split("."),n=gr("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=_r(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||_r(0==a[2].length,0==o[2].length)||_r(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Jn.document&&Nr){var zr=Pr();Ur=zr||(parseInt(Mr,10)||void 0)}else Ur=void 0;var qr=Ur,Wr=function(){if(!Jn.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Jn.addEventListener("test",er,t),Jn.removeEventListener("test",er,t)}catch(n){}return e}();function Qr(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Hr(e,t){if(Qr.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Rr){e:{try{Sr(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Yr[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Hr.Z.h.call(this)}}Qr.prototype.h=function(){this.defaultPrevented=!0},lr(Hr,Qr);var Yr={2:"touch",3:"pen",4:"mouse"};Hr.prototype.h=function(){Hr.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Kr="closure_listenable_"+(1e6*Math.random()|0),Gr=0;function Xr(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Gr,this.ca=this.fa=!1}function $r(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Zr(e){this.src=e,this.g={},this.h=0}function Jr(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=fr(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&($r(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ei(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}Zr.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=ei(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Xr(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var ti="closure_lm_"+(1e6*Math.random()|0),ni={};function ri(e,t,n,r,i){if(r&&r.once)return ai(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)ri(e,t[a],n,r,i);return null}return n=fi(n),e&&e[Kr]?e.N(t,n,nr(r)?!!r.capture:!!r,i):ii(e,t,n,!1,r,i)}function ii(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=nr(i)?!!i.capture:!!i,s=ci(e);if(s||(e[ti]=s=new Zr(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=li;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Wr||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ui(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ai(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)ai(e,t[a],n,r,i);return null}return n=fi(n),e&&e[Kr]?e.O(t,n,nr(r)?!!r.capture:!!r,i):ii(e,t,n,!0,r,i)}function oi(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)oi(e,t[a],n,r,i);else r=nr(r)?!!r.capture:!!r,n=fi(n),e&&e[Kr]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=ei(a=e.g[t],n,r,i))&&($r(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=ci(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ei(t,n,r,i)),(n=-1<e?t[e]:null)&&si(n))}function si(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Kr])Jr(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ui(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ci(t))?(Jr(n,e),0==n.h&&(n.src=null,t[ti]=null)):$r(e)}}}function ui(e){return e in ni?ni[e]:ni[e]="on"+e}function li(e,t){if(e.ca)e=!0;else{t=new Hr(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&si(e),e=n.call(r,t)}return e}function ci(e){return(e=e[ti])instanceof Zr?e:null}var hi="__closure_events_fn_"+(1e9*Math.random()>>>0);function fi(e){return"function"===typeof e?e:(e[hi]||(e[hi]=function(t){return e.handleEvent(t)}),e[hi])}function di(){cr.call(this),this.i=new Zr(this),this.P=this,this.I=null}function pi(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Qr(t,e);else if(t instanceof Qr)t.target=t.target||e;else{var i=t;Er(t=new Qr(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=vi(o,r,!0,t)&&i}if(i=vi(o=t.g=e,r,!0,t)&&i,i=vi(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=vi(o=t.g=n[a],r,!1,t)&&i}function vi(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var s=o.listener,u=o.ia||o.src;o.fa&&Jr(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}lr(di,cr),di.prototype[Kr]=!0,di.prototype.removeEventListener=function(e,t,n,r){oi(this,e,t,n,r)},di.prototype.M=function(){if(di.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)$r(n[r]);delete t.g[e],t.h--}}this.I=null},di.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},di.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var mi=Jn.JSON.stringify;function yi(){var e=Ci,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var gi,ki=function(){function e(){p(this,e),this.h=this.g=null}return m(e,[{key:"add",value:function(e,t){var n=_i.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),_i=new(function(){function e(t,n){p(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return m(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new wi}),(function(e){return e.reset()})),wi=function(){function e(){p(this,e),this.next=this.g=this.h=null}return m(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function bi(e){Jn.setTimeout((function(){throw e}),0)}function xi(e,t){gi||function(){var e=Jn.Promise.resolve(void 0);gi=function(){e.then(Ei)}}(),Ti||(gi(),Ti=!0),Ci.add(e,t)}var Ti=!1,Ci=new ki;function Ei(){for(var e;e=yi();){try{e.h.call(e.g)}catch(n){bi(n)}var t=_i;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ti=!1}function Si(e,t){di.call(this),this.h=e||1,this.g=t||Jn,this.j=sr(this.kb,this),this.l=Date.now()}function Mi(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Ii(e,t,n){if("function"===typeof e)n&&(e=sr(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=sr(e.handleEvent,e)}return 2147483647<Number(t)?-1:Jn.setTimeout(e,t||0)}function Ni(e){e.g=Ii((function(){e.g=null,e.i&&(e.i=!1,Ni(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}lr(Si,di),(Gn=Si.prototype).da=!1,Gn.S=null,Gn.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),pi(this,"tick"),this.da&&(Mi(this),this.start()))}},Gn.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Gn.M=function(){Si.Z.M.call(this),Mi(this),delete this.g};var Ai=function(e){g(n,e);var t=T(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return m(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Ni(this)}},{key:"M",value:function(){Xe(k(n.prototype),"M",this).call(this),this.g&&(Jn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(cr);function Di(e){cr.call(this),this.h=e,this.g={}}lr(Di,cr);var Ri=[];function Oi(e,t,n,r){Array.isArray(n)||(n&&(Ri[0]=n.toString()),n=Ri);for(var i=0;i<n.length;i++){var a=ri(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Pi(e){xr(e.g,(function(e,t){this.g.hasOwnProperty(t)&&si(e)}),e),e.g={}}function Li(){this.g=!0}function ji(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return mi(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}Di.prototype.M=function(){Di.Z.M.call(this),Pi(this)},Di.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Li.prototype.Aa=function(){this.g=!1},Li.prototype.info=function(){};var Fi={},Ui=null;function Bi(){return Ui=Ui||new di}function Vi(e){Qr.call(this,Fi.Ma,e)}function zi(e){var t=Bi();pi(t,new Vi(t,e))}function qi(e,t){Qr.call(this,Fi.STAT_EVENT,e),this.stat=t}function Wi(e){var t=Bi();pi(t,new qi(t,e))}function Qi(e,t){Qr.call(this,Fi.Na,e),this.size=t}function Hi(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Jn.setTimeout((function(){e()}),t)}Fi.Ma="serverreachability",lr(Vi,Qr),Fi.STAT_EVENT="statevent",lr(qi,Qr),Fi.Na="timingevent",lr(Qi,Qr);var Yi={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Ki={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Gi(){}function Xi(e){return e.h||(e.h=e.i())}function $i(){}Gi.prototype.h=null;var Zi,Ji={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ea(){Qr.call(this,"d")}function ta(){Qr.call(this,"c")}function na(){}function ra(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Di(this),this.P=aa,e=Dr?125:void 0,this.W=new Si(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ia}function ia(){this.i=null,this.g="",this.h=!1}lr(ea,Qr),lr(ta,Qr),lr(na,Gi),na.prototype.g=function(){return new XMLHttpRequest},na.prototype.i=function(){return{}},Zi=new na;var aa=45e3,oa={},sa={};function ua(e,t,n){e.K=1,e.v=Aa(Ca(t)),e.s=n,e.U=!0,la(e,null)}function la(e,t){e.F=Date.now(),da(e),e.A=Ca(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Wa(n.h,"t",r),e.C=0,n=e.l.H,e.h=new ia,e.g=Yo(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Ai(sr(e.Ia,e,e.g),e.O)),Oi(e.V,e.g,"readystatechange",e.gb),t=e.H?Tr(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),zi(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var l=s[u].split("=");if(1<l.length){var c=l[0];l=l[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+l+"&":o+(c+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function ca(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function ha(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=fa(e,n))==sa){4==t&&(e.o=4,Wi(14),i=!1),ji(e.j,e.m,null,"[Incomplete Response]");break}if(r==oa){e.o=4,Wi(15),ji(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}ji(e.j,e.m,r,null),ga(e,r)}ca(e)&&r!=sa&&r!=oa&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Wi(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Uo(t),t.L=!0,Wi(11))):(ji(e.j,e.m,n,"[Invalid Chunked Response]"),ya(e),ma(e))}function fa(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?sa:(n=Number(t.substring(n,r)),isNaN(n)?oa:(r+=1)+n>t.length?sa:(t=t.substr(r,n),e.C=r+n,t))}function da(e){e.Y=Date.now()+e.P,pa(e,e.P)}function pa(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Hi(sr(e.eb,e),t)}function va(e){e.B&&(Jn.clearTimeout(e.B),e.B=null)}function ma(e){0==e.l.G||e.I||zo(e.l,e)}function ya(e){va(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Mi(e.W),Pi(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function ga(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Za(n.i,e)))if(n.I=e.N,!e.J&&Za(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Vo(n),No(n)}Fo(n),Wi(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Hi(sr(n.ab,n),6e3));if(1>=$a(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Wo(n,11)}else if((e.J||n.g==e)&&Vo(n),!mr(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var s=a[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var l=e.g;if(l){var c=l.g?l.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(c){var h=r.i;!h.g&&(kr(c,"spdy")||kr(c,"quic")||kr(c,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(Ja(h,h.h),h.h=null))}if(r.D){var f=l.g?l.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,Na(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Ho(r,r.H?r.la:null,r.W),d.J){eo(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(va(p),da(p)),r.g=d}else jo(r);0<n.l.length&&Ro(n)}else"stop"!=a[0]&&"close"!=a[0]||Wo(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Wo(n,7):Io(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}zi(4)}catch(a){}}function ka(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(tr(e)||"string"===typeof e)dr(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(tr(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(tr(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function _a(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof _a)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function wa(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];ba(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)ba(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function ba(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Gn=ra.prototype).setTimeout=function(e){this.P=e},Gn.gb=function(e){e=e.target;var t=this.L;t&&3==To(e)?t.l():this.Ia(e)},Gn.Ia=function(e){try{if(e==this.g)e:{var t=To(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Dr||this.g&&(this.h.h||this.g.ga()||Co(this.g)))){this.I||4!=t||7==n||zi(8==n||0>=r?3:2),va(this);var i=this.g.ba();this.N=i;t:if(ca(this)){var a=Co(this.g);e="";var o=a.length,s=4==To(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){ya(this),ma(this);var u="";break t}this.h.i=new Jn.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:s&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!mr(l)){var h=l;break t}}h=null}if(!(i=h)){this.i=!1,this.o=3,Wi(12),ya(this),ma(this);break e}ji(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ga(this,i)}this.U?(ha(this,t,u),Dr&&this.i&&3==t&&(Oi(this.V,this.W,"tick",this.fb),this.W.start())):(ji(this.j,this.m,u,null),ga(this,u)),4==t&&ya(this),this.i&&!this.I&&(4==t?zo(this.l,this):(this.i=!1,da(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,Wi(12)):(this.o=0,Wi(13)),ya(this),ma(this)}}}catch(t){}},Gn.fb=function(){if(this.g){var e=To(this.g),t=this.g.ga();this.C<t.length&&(va(this),ha(this,e,t),this.i&&4!=e&&da(this))}},Gn.cancel=function(){this.I=!0,ya(this)},Gn.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(zi(3),Wi(17)),ya(this),this.o=2,ma(this)):pa(this,this.Y-e)},(Gn=_a.prototype).R=function(){wa(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Gn.T=function(){return wa(this),this.g.concat()},Gn.get=function(e,t){return ba(this.h,e)?this.h[e]:t},Gn.set=function(e,t){ba(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Gn.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var xa=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ta(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Ta){this.g=void 0!==t?t:e.g,Ea(this,e.j),this.s=e.s,Sa(this,e.i),Ma(this,e.m),this.l=e.l,t=e.h;var n=new Ba;n.i=t.i,t.g&&(n.g=new _a(t.g),n.h=t.h),Ia(this,n),this.o=e.o}else e&&(n=String(e).match(xa))?(this.g=!!t,Ea(this,n[1]||"",!0),this.s=Da(n[2]||""),Sa(this,n[3]||"",!0),Ma(this,n[4]),this.l=Da(n[5]||"",!0),Ia(this,n[6]||"",!0),this.o=Da(n[7]||"")):(this.g=!!t,this.h=new Ba(null,this.g))}function Ca(e){return new Ta(e)}function Ea(e,t,n){e.j=n?Da(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Sa(e,t,n){e.i=n?Da(t,!0):t}function Ma(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Ia(e,t,n){t instanceof Ba?(e.h=t,function(e,t){t&&!e.j&&(Va(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(za(this,t),Wa(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Ra(t,Fa)),e.h=new Ba(t,e.g))}function Na(e,t,n){e.h.set(t,n)}function Aa(e){return Na(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Da(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ra(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Oa),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Oa(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ta.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ra(t,Pa,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ra(t,Pa,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ra(n,"/"==n.charAt(0)?ja:La,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ra(n,Ua)),e.join("")};var Pa=/[#\/\?@]/g,La=/[#\?:]/g,ja=/[#\?]/g,Fa=/[#\?@]/g,Ua=/#/g;function Ba(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Va(e){e.g||(e.g=new _a,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function za(e,t){Va(e),t=Qa(e,t),ba(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,ba((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&wa(e)))}function qa(e,t){return Va(e),t=Qa(e,t),ba(e.g.h,t)}function Wa(e,t,n){za(e,t),0<n.length&&(e.i=null,e.g.set(Qa(e,t),vr(n)),e.h+=n.length)}function Qa(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Gn=Ba.prototype).add=function(e,t){Va(this),this.i=null,e=Qa(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Gn.forEach=function(e,t){Va(this),this.g.forEach((function(n,r){dr(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Gn.T=function(){Va(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Gn.R=function(e){Va(this);var t=[];if("string"===typeof e)qa(this,e)&&(t=pr(t,this.g.get(Qa(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=pr(t,e[n])}return t},Gn.set=function(e,t){return Va(this),this.i=null,qa(this,e=Qa(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Gn.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Gn.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Ha=m((function e(t,n){p(this,e),this.h=t,this.g=n}));function Ya(e){this.l=e||Ga,Jn.PerformanceNavigationTiming?e=0<(e=Jn.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Jn.g&&Jn.g.Ea&&Jn.g.Ea()&&Jn.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ka,Ga=10;function Xa(e){return!!e.h||!!e.g&&e.g.size>=e.j}function $a(e){return e.h?1:e.g?e.g.size:0}function Za(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ja(e,t){e.g?e.g.add(t):e.h=t}function eo(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function to(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=S(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return vr(e.i)}function no(){}function ro(){this.g=new no}function io(e,t,n){var r=n||"";try{ka(e,(function(e,n){var i=e;nr(e)&&(i=mi(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function ao(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function oo(e){this.l=e.$b||null,this.j=e.ib||!1}function so(e,t){di.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=uo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ya.prototype.cancel=function(){if(this.i=to(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=S(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},no.prototype.stringify=function(e){return Jn.JSON.stringify(e,void 0)},no.prototype.parse=function(e){return Jn.JSON.parse(e,void 0)},lr(oo,Gi),oo.prototype.g=function(){return new so(this.l,this.j)},oo.prototype.i=(Ka={},function(){return Ka}),lr(so,di);var uo=0;function lo(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function co(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ho(e)}function ho(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Gn=so.prototype).open=function(e,t){if(this.readyState!=uo)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ho(this)},Gn.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Jn).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Gn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,co(this)),this.readyState=uo},Gn.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ho(this)),this.g&&(this.readyState=3,ho(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof Jn.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;lo(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Gn.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?co(this):ho(this),3==this.readyState&&lo(this)}},Gn.Ua=function(e){this.g&&(this.response=this.responseText=e,co(this))},Gn.Ta=function(e){this.g&&(this.response=e,co(this))},Gn.ha=function(){this.g&&co(this)},Gn.setRequestHeader=function(e,t){this.v.append(e,t)},Gn.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Gn.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(so.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var fo=Jn.JSON.parse;function po(e){di.call(this),this.headers=new _a,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=vo,this.K=this.L=!1}lr(po,di);var vo="",mo=/^https?$/i,yo=["POST","PUT"];function go(e){return"content-type"==e.toLowerCase()}function ko(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,_o(e),bo(e)}function _o(e){e.D||(e.D=!0,pi(e,"complete"),pi(e,"error"))}function wo(e){if(e.h&&"undefined"!=typeof Zn&&(!e.C[1]||4!=To(e)||2!=e.ba()))if(e.v&&4==To(e))Ii(e.Fa,0,e);else if(pi(e,"readystatechange"),4==To(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(xa)[1]||null;if(!a&&Jn.self&&Jn.self.location){var o=Jn.self.location.protocol;a=o.substr(0,o.length-1)}i=!mo.test(a?a.toLowerCase():"")}t=i}if(t)pi(e,"complete"),pi(e,"success");else{e.m=6;try{var s=2<To(e)?e.g.statusText:""}catch(u){s=""}e.j=s+" ["+e.ba()+"]",_o(e)}}finally{bo(e)}}}function bo(e,t){if(e.g){xo(e);var n=e.g,r=e.C[0]?er:null;e.g=null,e.C=null,t||pi(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function xo(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Jn.clearTimeout(e.A),e.A=null)}function To(e){return e.g?e.g.readyState:0}function Co(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case vo:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Eo(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return xr(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Na(e,t,n))}function So(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Mo(e){this.za=0,this.l=[],this.h=new Li,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=So("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=So("baseRetryDelayMs",5e3,e),this.$a=So("retryDelaySeedMs",1e4,e),this.Ya=So("forwardChannelMaxRetries",2,e),this.ra=So("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Ya(e&&e.concurrentRequestLimit),this.Ca=new ro,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Io(e){if(Ao(e),3==e.G){var t=e.V++,n=Ca(e.F);Na(n,"SID",e.J),Na(n,"RID",t),Na(n,"TYPE","terminate"),Po(e,n),(t=new ra(e,e.h,t,void 0)).K=2,t.v=Aa(Ca(n)),n=!1,Jn.navigator&&Jn.navigator.sendBeacon&&(n=Jn.navigator.sendBeacon(t.v.toString(),"")),!n&&Jn.Image&&((new Image).src=t.v,n=!0),n||(t.g=Yo(t.l,null),t.g.ea(t.v)),t.F=Date.now(),da(t)}Qo(e)}function No(e){e.g&&(Uo(e),e.g.cancel(),e.g=null)}function Ao(e){No(e),e.u&&(Jn.clearTimeout(e.u),e.u=null),Vo(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Jn.clearTimeout(e.m),e.m=null)}function Do(e,t){e.l.push(new Ha(e.Za++,t)),3==e.G&&Ro(e)}function Ro(e){Xa(e.i)||e.m||(e.m=!0,xi(e.Ha,e),e.C=0)}function Oo(e,t){var n;n=t?t.m:e.V++;var r=Ca(e.F);Na(r,"SID",e.J),Na(r,"RID",n),Na(r,"AID",e.U),Po(e,r),e.o&&e.s&&Eo(r,e.o,e.s),n=new ra(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Lo(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Ja(e.i,n),ua(n,r,t)}function Po(e,t){e.j&&ka({},(function(e,n){Na(t,n,e)}))}function Lo(e,t,n){n=Math.min(e.l.length,n);var r=e.j?sr(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var l=i[u].h,c=i[u].g;if(0>(l-=a))a=Math.max(0,i[u].h-100),s=!1;else try{io(c,o,"req"+l+"_")}catch(ws){r&&r(c)}}if(s){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function jo(e){e.g||e.u||(e.Y=1,xi(e.Ga,e),e.A=0)}function Fo(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Hi(sr(e.Ga,e),qo(e,e.A)),e.A++,!0)}function Uo(e){null!=e.B&&(Jn.clearTimeout(e.B),e.B=null)}function Bo(e){e.g=new ra(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Ca(e.oa);Na(t,"RID","rpc"),Na(t,"SID",e.J),Na(t,"CI",e.N?"0":"1"),Na(t,"AID",e.U),Po(e,t),Na(t,"TYPE","xmlhttp"),e.o&&e.s&&Eo(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Aa(Ca(t)),n.s=null,n.U=!0,la(n,e)}function Vo(e){null!=e.v&&(Jn.clearTimeout(e.v),e.v=null)}function zo(e,t){var n=null;if(e.g==t){Vo(e),Uo(e),e.g=null;var r=2}else{if(!Za(e.i,t))return;n=t.D,eo(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;pi(r=Bi(),new Qi(r,n,t,i)),Ro(e)}else jo(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!($a(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=Hi(sr(e.Ha,e,t),qo(e,e.C)),e.C++,!0))}(e,t)||2==r&&Fo(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Wo(e,5);break;case 4:Wo(e,10);break;case 3:Wo(e,6);break;default:Wo(e,2)}}function qo(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Wo(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=sr(e.jb,e);n||(n=new Ta("//www.google.com/images/cleardot.gif"),Jn.location&&"http"==Jn.location.protocol||Ea(n,"https"),Aa(n)),function(e,t){var n=new Li;if(Jn.Image){var r=new Image;r.onload=ur(ao,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ur(ao,n,r,"TestLoadImage: error",!1,t),r.onabort=ur(ao,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ur(ao,n,r,"TestLoadImage: timeout",!1,t),Jn.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Wi(2);e.G=0,e.j&&e.j.va(t),Qo(e),Ao(e)}function Qo(e){e.G=0,e.I=-1,e.j&&(0==to(e.i).length&&0==e.l.length||(e.i.i.length=0,vr(e.l),e.l.length=0),e.j.ua())}function Ho(e,t,n){var r=function(e){return e instanceof Ta?Ca(e):new Ta(e,void 0)}(n);if(""!=r.i)t&&Sa(r,t+"."+r.i),Ma(r,r.m);else{var i=Jn.location;r=function(e,t,n,r){var i=new Ta(null,void 0);return e&&Ea(i,e),t&&Sa(i,t),n&&Ma(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&xr(e.aa,(function(e,t){Na(r,t,e)})),t=e.D,n=e.sa,t&&n&&Na(r,t,n),Na(r,"VER",e.ma),Po(e,r),r}function Yo(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new po(new oo({ib:!0})):new po(e.qa)).L=e.H,t}function Ko(){}function Go(){if(Nr&&!(10<=Number(qr)))throw Error("Environmental error: no available transport.")}function Xo(e,t){di.call(this),this.g=new Mo(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!mr(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!mr(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Jo(this)}function $o(e){ea.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Zo(){ta.call(this),this.status=1}function Jo(e){this.g=e}(Gn=po.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Zi.g(),this.C=this.u?Xi(this.u):Xi(Zi),this.g.onreadystatechange=sr(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void ko(this,a)}e=n||"";var i=new _a(this.headers);r&&ka(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=go,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=Jn.FormData&&e instanceof Jn.FormData,!(0<=fr(yo,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{xo(this),0<this.B&&((this.K=function(e){return Nr&&Vr()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=sr(this.pa,this)):this.A=Ii(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){ko(this,a)}},Gn.pa=function(){"undefined"!=typeof Zn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,pi(this,"timeout"),this.abort(8))},Gn.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,pi(this,"complete"),pi(this,"abort"),bo(this))},Gn.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),bo(this,!0)),po.Z.M.call(this)},Gn.Fa=function(){this.s||(this.F||this.v||this.l?wo(this):this.cb())},Gn.cb=function(){wo(this)},Gn.ba=function(){try{return 2<To(this)?this.g.status:-1}catch(Ka){return-1}},Gn.ga=function(){try{return this.g?this.g.responseText:""}catch(Ka){return""}},Gn.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),fo(t)}},Gn.Da=function(){return this.m},Gn.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Gn=Mo.prototype).ma=8,Gn.G=1,Gn.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Gn.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new ra(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Er(n=Tr(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Lo(this,t,r),Na(i=Ca(this.F),"RID",e),Na(i,"CVER",22),this.D&&Na(i,"X-HTTP-Session-Id",this.D),Po(this,i),this.o&&n&&Eo(i,this.o,n),Ja(this.i,t),this.Ra&&Na(i,"TYPE","init"),this.ja?(Na(i,"$req",r),Na(i,"SID","null"),t.$=!0,ua(t,i,null)):ua(t,i,r),this.G=2}}else 3==this.G&&(e?Oo(this,e):0==this.l.length||Xa(this.i)||Oo(this))},Gn.Ga=function(){if(this.u=null,Bo(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Hi(sr(this.bb,this),e)}},Gn.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Wi(10),No(this),Bo(this))},Gn.ab=function(){null!=this.v&&(this.v=null,No(this),Fo(this),Wi(19))},Gn.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Wi(2)):(this.h.info("Failed to ping google.com"),Wi(1))},(Gn=Ko.prototype).xa=function(){},Gn.wa=function(){},Gn.va=function(){},Gn.ua=function(){},Gn.Oa=function(){},Go.prototype.g=function(e,t){return new Xo(e,t)},lr(Xo,di),Xo.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),xi(sr(e.hb,e,t))),Wi(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Ho(e,null,e.W),Ro(e)},Xo.prototype.close=function(){Io(this.g)},Xo.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,Do(this.g,t)}else this.v?((t={}).__data__=mi(e),Do(this.g,t)):Do(this.g,e)},Xo.prototype.M=function(){this.g.j=null,delete this.j,Io(this.g),delete this.g,Xo.Z.M.call(this)},lr($o,ea),lr(Zo,ta),lr(Jo,Ko),Jo.prototype.xa=function(){pi(this.g,"a")},Jo.prototype.wa=function(e){pi(this.g,new $o(e))},Jo.prototype.va=function(e){pi(this.g,new Zo(e))},Jo.prototype.ua=function(){pi(this.g,"b")},Go.prototype.createWebChannel=Go.prototype.g,Xo.prototype.send=Xo.prototype.u,Xo.prototype.open=Xo.prototype.m,Xo.prototype.close=Xo.prototype.close,Yi.NO_ERROR=0,Yi.TIMEOUT=8,Yi.HTTP_ERROR=6,Ki.COMPLETE="complete",$i.EventType=Ji,Ji.OPEN="a",Ji.CLOSE="b",Ji.ERROR="c",Ji.MESSAGE="d",di.prototype.listen=di.prototype.N,po.prototype.listenOnce=po.prototype.O,po.prototype.getLastError=po.prototype.La,po.prototype.getLastErrorCode=po.prototype.Da,po.prototype.getStatus=po.prototype.ba,po.prototype.getResponseJson=po.prototype.Qa,po.prototype.getResponseText=po.prototype.ga,po.prototype.send=po.prototype.ea;var es=$n.createWebChannelTransport=function(){return new Go},ts=$n.getStatEventTarget=function(){return Bi()},ns=$n.ErrorCode=Yi,rs=$n.EventType=Ki,is=$n.Event=Fi,as=$n.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},os=$n.FetchXmlHttpFactory=oo,ss=$n.WebChannel=$i,us=$n.XhrIo=po,ls="@firebase/firestore",cs=function(){function e(t){p(this,e),this.uid=t}return m(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();cs.UNAUTHENTICATED=new cs(null),cs.GOOGLE_CREDENTIALS=new cs("google-credentials-uid"),cs.FIRST_PARTY=new cs("first-party-uid"),cs.MOCK_USER=new cs("mock-user");var hs="9.9.2",fs=new Gt("@firebase/firestore");function ds(){return fs.logLevel}function ps(e){if(fs.logLevel<=zt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ys);fs.debug.apply(fs,["Firestore (".concat(hs,"): ").concat(e)].concat(d(i)))}}function vs(e){if(fs.logLevel<=zt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ys);fs.error.apply(fs,["Firestore (".concat(hs,"): ").concat(e)].concat(d(i)))}}function ms(e){if(fs.logLevel<=zt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ys);fs.warn.apply(fs,["Firestore (".concat(hs,"): ").concat(e)].concat(d(i)))}}function ys(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function gs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(hs,") INTERNAL ASSERTION FAILED: ")+e;throw vs(t),new Error(t)}function ks(e,t){e||gs()}function _s(e,t){return e}var ws={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},bs=function(e){g(n,e);var t=T(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return m(n)}(gt),xs=m((function e(){var t=this;p(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Ts=m((function e(t,n){p(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Cs=function(){function e(){p(this,e)}return m(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(cs.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Es=function(){function e(t){p(this,e),this.t=t,this.currentUser=cs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return m(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new xs;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new xs,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Ke(He().mark((function e(){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){ps("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(ps("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new xs)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(ps("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(ks("string"==typeof n.accessToken),new Ts(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return ks(null===e||"string"==typeof e),new cs(e)}}]),e}(),Ss=m((function e(t,n,r){p(this,e),this.type="FirstParty",this.user=cs.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),Ms=function(){function e(t,n,r){p(this,e),this.h=t,this.l=n,this.m=r}return m(e,[{key:"getToken",value:function(){return Promise.resolve(new Ss(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(cs.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Is=m((function e(t){p(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Ns=function(){function e(t){p(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return m(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&ps("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,ps("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){ps("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):ps("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(ks("string"==typeof t.token),e.p=t.token,new Is(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function As(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Ds=function(){function e(){p(this,e)}return m(e,null,[{key:"I",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=As(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Rs(e,t){return e<t?-1:e>t?1:0}function Os(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}var Ps=function(){function e(t,n){if(p(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new bs(ws.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new bs(ws.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new bs(ws.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new bs(ws.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return m(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Rs(this.nanoseconds,e.nanoseconds):Rs(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Ls=function(){function e(t){p(this,e),this.timestamp=t}return m(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Ps(0,0))}},{key:"max",value:function(){return new e(new Ps(253402300799,999999999))}}]),e}(),js=function(){function e(t,n,r){p(this,e),void 0===n?n=0:n>t.length&&gs(),void 0===r?r=t.length-n:r>t.length-n&&gs(),this.segments=t,this.offset=n,this.len=r}return m(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Fs=function(e){g(n,e);var t=T(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new bs(ws.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,d(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(js),Us=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Bs=function(e){g(n,e);var t=T(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Us.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new bs(ws.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new bs(ws.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new bs(ws.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new bs(ws.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(js),Vs=function(){function e(t){p(this,e),this.path=t}return m(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Fs.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Fs.fromString(t))}},{key:"fromName",value:function(t){return new e(Fs.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Fs.emptyPath())}},{key:"comparator",value:function(e,t){return Fs.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Fs(t.slice()))}}]),e}(),zs=m((function e(t,n,r,i){p(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));zs.UNKNOWN_ID=-1;function qs(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Ls.fromTimestamp(1e9===r?new Ps(n+1,0):new Ps(n,r));return new Qs(i,Vs.empty(),t)}function Ws(e){return new Qs(e.readTime,e.key,-1)}var Qs=function(){function e(t,n,r){p(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return m(e,null,[{key:"min",value:function(){return new e(Ls.min(),Vs.empty(),-1)}},{key:"max",value:function(){return new e(Ls.max(),Vs.empty(),-1)}}]),e}();function Hs(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Vs.comparator(e.documentKey,t.documentKey))?n:Rs(e.largestBatchId,t.largestBatchId)}var Ys="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ks=function(){function e(){p(this,e),this.onCommittedListeners=[]}return m(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Gs(e){return Xs.apply(this,arguments)}function Xs(){return Xs=Ke(He().mark((function e(t){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===ws.FAILED_PRECONDITION&&t.message===Ys){e.next=2;break}throw t;case 2:ps("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Xs.apply(this,arguments)}var $s=function(){function e(t){var n=this;p(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return m(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&gs(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=S(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,s=function(s){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},u=0;u<i;u++)s(u)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}();function Zs(e){return"IndexedDbTransactionError"===e.name}var Js=function(){function e(t,n){var r=this;p(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.it(e)},this.rt=function(e){return n.writeSequenceNumber(e)})}return m(e,[{key:"it",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.rt&&this.rt(e),e}}]),e}();function eu(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function tu(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function nu(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}Js.ot=-1;var ru=function(){function e(t,n){p(this,e),this.comparator=t,this.root=n||au.EMPTY}return m(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,au.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,au.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new iu(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new iu(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new iu(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new iu(this.root,e,this.comparator,!0)}}]),e}(),iu=function(){function e(t,n,r,i){p(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return m(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),au=function(){function e(t,n,r,i,a){p(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return m(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw gs();if(this.right.isRed())throw gs();var e=this.left.check();if(e!==this.right.check())throw gs();return e+(this.isRed()?0:1)}}]),e}();au.EMPTY=null,au.RED=!0,au.BLACK=!1,au.EMPTY=new(function(){function e(){p(this,e),this.size=0}return m(e,[{key:"key",get:function(){throw gs()}},{key:"value",get:function(){throw gs()}},{key:"color",get:function(){throw gs()}},{key:"left",get:function(){throw gs()}},{key:"right",get:function(){throw gs()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new au(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var ou=function(){function e(t){p(this,e),this.comparator=t,this.data=new ru(this.comparator)}return m(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new su(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new su(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),su=function(){function e(t){p(this,e),this.iter=t}return m(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();var uu=function(){function e(t){p(this,e),this.fields=t,t.sort(Bs.comparator)}return m(e,[{key:"unionWith",value:function(t){var n,r=new ou(Bs.comparator),i=S(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(l){i.e(l)}finally{i.f()}var o,s=S(t);try{for(s.s();!(o=s.n()).done;){var u=o.value;r=r.add(u)}}catch(l){s.e(l)}finally{s.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=S(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Os(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}();var lu=function(e){function t(e){p(this,t),this.binaryString=e}return m(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Rs(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();lu.EMPTY_BYTE_STRING=new lu("");var cu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hu(e){if(ks(!!e),"string"==typeof e){var t=0,n=cu.exec(e);if(ks(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:fu(e.seconds),nanos:fu(e.nanos)}}function fu(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function du(e){return"string"==typeof e?lu.fromBase64String(e):lu.fromUint8Array(e)}function pu(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function vu(e){var t=e.mapValue.fields.__previous_value__;return pu(t)?vu(t):t}function mu(e){var t=hu(e.mapValue.fields.__local_write_time__.timestampValue);return new Ps(t.seconds,t.nanos)}var yu=m((function e(t,n,r,i,a,o,s,u){p(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u})),gu=function(){function e(t,n){p(this,e),this.projectId=t,this.database=n||"(default)"}return m(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function ku(e){return null==e}function _u(e){return 0===e&&1/e==-1/0}function wu(e){return"number"==typeof e&&Number.isInteger(e)&&!_u(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var bu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function xu(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?pu(e)?4:ju(e)?9007199254740991:10:gs()}function Tu(e,t){if(e===t)return!0;var n=xu(e);if(n!==xu(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return mu(e).isEqual(mu(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=hu(e.timestampValue),r=hu(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return du(e.bytesValue).isEqual(du(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return fu(e.geoPointValue.latitude)===fu(t.geoPointValue.latitude)&&fu(e.geoPointValue.longitude)===fu(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return fu(e.integerValue)===fu(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=fu(e.doubleValue),r=fu(t.doubleValue);return n===r?_u(n)===_u(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Os(e.arrayValue.values||[],t.arrayValue.values||[],Tu);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(eu(n)!==eu(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Tu(n[i],r[i])))return!1;return!0}(e,t);default:return gs()}}function Cu(e,t){return void 0!==(e.values||[]).find((function(e){return Tu(e,t)}))}function Eu(e,t){if(e===t)return 0;var n=xu(e),r=xu(t);if(n!==r)return Rs(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Rs(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=fu(e.integerValue||e.doubleValue),r=fu(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Su(e.timestampValue,t.timestampValue);case 4:return Su(mu(e),mu(t));case 5:return Rs(e.stringValue,t.stringValue);case 6:return function(e,t){var n=du(e),r=du(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Rs(n[i],r[i]);if(0!==a)return a}return Rs(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Rs(fu(e.latitude),fu(t.latitude));return 0!==n?n:Rs(fu(e.longitude),fu(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Eu(n[i],r[i]);if(a)return a}return Rs(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===bu.mapValue&&t===bu.mapValue)return 0;if(e===bu.mapValue)return 1;if(t===bu.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=Rs(r[o],a[o]);if(0!==s)return s;var u=Eu(n[r[o]],i[a[o]]);if(0!==u)return u}return Rs(r.length,a.length)}(e.mapValue,t.mapValue);default:throw gs()}}function Su(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Rs(e,t);var n=hu(e),r=hu(t),i=Rs(n.seconds,r.seconds);return 0!==i?i:Rs(n.nanos,r.nanos)}function Mu(e){return Iu(e)}function Iu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=hu(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?du(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Vs.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=S(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Iu(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=S(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Iu(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):gs();var t,n}function Nu(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Au(e){return!!e&&"integerValue"in e}function Du(e){return!!e&&"arrayValue"in e}function Ru(e){return!!e&&"nullValue"in e}function Ou(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Pu(e){return!!e&&"mapValue"in e}function Lu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return tu(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Lu(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Lu(e.arrayValue.values[r]);return n}return Object.assign({},e)}function ju(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}var Fu=function(){function e(t){p(this,e),this.value=t}return m(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Pu(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lu(t)}},{key:"setAll",value:function(e){var t=this,n=Bs.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Lu(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Pu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Tu(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Pu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){tu(t,(function(t,n){return e[t]=n}));var r,i=S(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Lu(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Uu(e){var t=[];return tu(e.fields,(function(e,n){var r=new Bs([e]);if(Pu(n)){var i=Uu(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=S(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new uu(t)}var Bu=function(){function e(t,n,r,i,a,o){p(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return m(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Fu.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Fu.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Ls.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Ls.min(),Ls.min(),Fu.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Ls.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Ls.min(),Fu.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Ls.min(),Fu.empty(),2)}}]),e}(),Vu=m((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;p(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.ut=null}));function zu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Vu(e,t,n,r,i,a,o)}function qu(e){var t=_s(e);if(null===t.ut){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+Mu(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),ku(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Mu(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Mu(e)})).join(",")),t.ut=n}return t.ut}function Wu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!rl(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!Tu(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!al(e.startAt,t.startAt)&&al(e.endAt,t.endAt)}function Qu(e){return Vs.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var Hu=function(e){g(n,e);var t=T(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return m(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(Eu(t,this.value)):null!==t&&xu(this.value)===xu(t)&&this.at(Eu(t,this.value))}},{key:"at",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return gs()}}},{key:"ht",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new Yu(e,t,r):"array-contains"===t?new $u(e,r):"in"===t?new Zu(e,r):"not-in"===t?new Ju(e,r):"array-contains-any"===t?new el(e,r):new n(e,t,r)}},{key:"ct",value:function(e,t,n){return"in"===t?new Ku(e,n):new Gu(e,n)}}]),n}(function(){return m((function e(){p(this,e)}))}()),Yu=function(e){g(n,e);var t=T(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this,e,r,i)).key=Vs.fromName(i.referenceValue),a}return m(n,[{key:"matches",value:function(e){var t=Vs.comparator(e.key,this.key);return this.at(t)}}]),n}(Hu),Ku=function(e){g(n,e);var t=T(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,"in",r)).keys=Xu("in",r),i}return m(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Hu),Gu=function(e){g(n,e);var t=T(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,"not-in",r)).keys=Xu("not-in",r),i}return m(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Hu);function Xu(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Vs.fromName(e.referenceValue)}))}var $u=function(e){g(n,e);var t=T(n);function n(e,r){return p(this,n),t.call(this,e,"array-contains",r)}return m(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Du(t)&&Cu(t.arrayValue,this.value)}}]),n}(Hu),Zu=function(e){g(n,e);var t=T(n);function n(e,r){return p(this,n),t.call(this,e,"in",r)}return m(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Cu(this.value.arrayValue,t)}}]),n}(Hu),Ju=function(e){g(n,e);var t=T(n);function n(e,r){return p(this,n),t.call(this,e,"not-in",r)}return m(n,[{key:"matches",value:function(e){if(Cu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Cu(this.value.arrayValue,t)}}]),n}(Hu),el=function(e){g(n,e);var t=T(n);function n(e,r){return p(this,n),t.call(this,e,"array-contains-any",r)}return m(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Du(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Cu(t.value.arrayValue,e)}))}}]),n}(Hu),tl=m((function e(t,n){p(this,e),this.position=t,this.inclusive=n})),nl=m((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";p(this,e),this.field=t,this.dir=n}));function rl(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function il(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Vs.comparator(Vs.fromName(o.referenceValue),n.key):Eu(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function al(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Tu(e.position[n],t.position[n]))return!1;return!0}var ol=m((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;p(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.lt=null,this.ft=null,this.startAt,this.endAt}));function sl(e,t,n,r,i,a,o,s){return new ol(e,t,n,r,i,a,o,s)}function ul(e){return new ol(e)}function ll(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function cl(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function hl(e){var t,n=S(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.ht())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function fl(e){return null!==e.collectionGroup}function dl(e){var t=_s(e);if(null===t.lt){t.lt=[];var n=hl(t),r=cl(t);if(null!==n&&null===r)n.isKeyField()||t.lt.push(new nl(n)),t.lt.push(new nl(Bs.keyField(),"asc"));else{var i,a=!1,o=S(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.lt.push(s),s.field.isKeyField()&&(a=!0)}}catch(l){o.e(l)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.lt.push(new nl(Bs.keyField(),u))}}}return t.lt}function pl(e){var t=_s(e);if(!t.ft)if("F"===t.limitType)t.ft=zu(t.path,t.collectionGroup,dl(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=S(dl(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new nl(a.field,o))}}catch(l){i.e(l)}finally{i.f()}var s=t.endAt?new tl(t.endAt.position,t.endAt.inclusive):null,u=t.startAt?new tl(t.startAt.position,t.startAt.inclusive):null;t.ft=zu(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t.ft}function vl(e,t,n){return new ol(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ml(e,t){return Wu(pl(e),pl(t))&&e.limitType===t.limitType}function yl(e){return"".concat(qu(pl(e)),"|lt:").concat(e.limitType)}function gl(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(Mu(t.value));var t})).join(", "),"]")),ku(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Mu(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Mu(e)})).join(",")),"Target(".concat(t,")")}(pl(e)),"; limitType=").concat(e.limitType,")")}function kl(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Vs.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=S(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=S(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=il(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,dl(e),t))&&!(e.endAt&&!function(e,t,n){var r=il(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,dl(e),t))}(e,t)}function _l(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function wl(e){return function(t,n){var r,i=!1,a=S(dl(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=bl(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function bl(e,t,n){var r=e.field.isKeyField()?Vs.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Eu(r,i):gs()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return gs()}}function xl(e,t){if(e.dt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_u(t)?"-0":t}}function Tl(e){return{integerValue:""+e}}function Cl(e,t){return wu(t)?Tl(t):xl(e,t)}var El=m((function e(){p(this,e),this._=void 0}));function Sl(e,t,n){return e instanceof Nl?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Al?Dl(e,t):e instanceof Rl?Ol(e,t):function(e,t){var n=Il(e,t),r=Ll(n)+Ll(e._t);return Au(n)&&Au(e._t)?Tl(r):xl(e.wt,r)}(e,t)}function Ml(e,t,n){return e instanceof Al?Dl(e,t):e instanceof Rl?Ol(e,t):n}function Il(e,t){return e instanceof Pl?Au(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Nl=function(e){g(n,e);var t=T(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n)}(El),Al=function(e){g(n,e);var t=T(n);function n(e){var r;return p(this,n),(r=t.call(this)).elements=e,r}return m(n)}(El);function Dl(e,t){var n,r=jl(t),i=S(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Tu(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Rl=function(e){g(n,e);var t=T(n);function n(e){var r;return p(this,n),(r=t.call(this)).elements=e,r}return m(n)}(El);function Ol(e,t){var n,r=jl(t),i=S(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Tu(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Pl=function(e){g(n,e);var t=T(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).wt=e,i._t=r,i}return m(n)}(El);function Ll(e){return fu(e.integerValue||e.doubleValue)}function jl(e){return Du(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Fl=m((function e(t,n){p(this,e),this.version=t,this.transformResults=n})),Ul=function(){function e(t,n){p(this,e),this.updateTime=t,this.exists=n}return m(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Bl(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Vl=m((function e(){p(this,e)}));function zl(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new ec(e.key,Ul.none()):new Yl(e.key,e.data,Ul.none());var n,r=e.data,i=Fu.empty(),a=new ou(Bs.comparator),o=S(t.fields);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(!a.has(s)){var u=r.field(s);null===u&&s.length>1&&(s=s.popLast(),u=r.field(s)),null===u?i.delete(s):i.set(s,u),a=a.add(s)}}}catch(l){o.e(l)}finally{o.f()}return new Kl(e.key,i,new uu(a.toArray()),Ul.none())}function ql(e,t,n){e instanceof Yl?function(e,t,n){var r=e.value.clone(),i=Xl(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Kl?function(e,t,n){if(Bl(e.precondition,t)){var r=Xl(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Gl(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Wl(e,t,n,r){return e instanceof Yl?function(e,t,n,r){if(!Bl(e.precondition,t))return n;var i=e.value.clone(),a=$l(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Kl?function(e,t,n,r){if(!Bl(e.precondition,t))return n;var i=$l(e.fieldTransforms,r,t),a=t.data;return a.setAll(Gl(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Bl(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Ql(e,t){var n,r=null,i=S(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=Il(a.transform,o||null);null!=s&&(null===r&&(r=Fu.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function Hl(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Os(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Al&&t instanceof Al||e instanceof Rl&&t instanceof Rl?Os(e.elements,t.elements,Tu):e instanceof Pl&&t instanceof Pl?Tu(e._t,t._t):e instanceof Nl&&t instanceof Nl}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Yl=function(e){g(n,e);var t=T(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return p(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return m(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Vl),Kl=function(e){g(n,e);var t=T(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return p(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return m(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(Vl);function Gl(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Xl(e,t,n){var r=new Map;ks(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,Ml(o,s,n[i]))}return r}function $l(e,t,n){var r,i=new Map,a=S(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,Sl(s,u,t))}}catch(l){a.e(l)}finally{a.f()}return i}var Zl,Jl,ec=function(e){g(n,e);var t=T(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return m(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Vl),tc=function(e){g(n,e);var t=T(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return m(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Vl),nc=m((function e(t){p(this,e),this.count=t}));function rc(e){switch(e){default:return gs();case ws.CANCELLED:case ws.UNKNOWN:case ws.DEADLINE_EXCEEDED:case ws.RESOURCE_EXHAUSTED:case ws.INTERNAL:case ws.UNAVAILABLE:case ws.UNAUTHENTICATED:return!1;case ws.INVALID_ARGUMENT:case ws.NOT_FOUND:case ws.ALREADY_EXISTS:case ws.PERMISSION_DENIED:case ws.FAILED_PRECONDITION:case ws.ABORTED:case ws.OUT_OF_RANGE:case ws.UNIMPLEMENTED:case ws.DATA_LOSS:return!0}}function ic(e){if(void 0===e)return vs("GRPC error has no .code"),ws.UNKNOWN;switch(e){case Zl.OK:return ws.OK;case Zl.CANCELLED:return ws.CANCELLED;case Zl.UNKNOWN:return ws.UNKNOWN;case Zl.DEADLINE_EXCEEDED:return ws.DEADLINE_EXCEEDED;case Zl.RESOURCE_EXHAUSTED:return ws.RESOURCE_EXHAUSTED;case Zl.INTERNAL:return ws.INTERNAL;case Zl.UNAVAILABLE:return ws.UNAVAILABLE;case Zl.UNAUTHENTICATED:return ws.UNAUTHENTICATED;case Zl.INVALID_ARGUMENT:return ws.INVALID_ARGUMENT;case Zl.NOT_FOUND:return ws.NOT_FOUND;case Zl.ALREADY_EXISTS:return ws.ALREADY_EXISTS;case Zl.PERMISSION_DENIED:return ws.PERMISSION_DENIED;case Zl.FAILED_PRECONDITION:return ws.FAILED_PRECONDITION;case Zl.ABORTED:return ws.ABORTED;case Zl.OUT_OF_RANGE:return ws.OUT_OF_RANGE;case Zl.UNIMPLEMENTED:return ws.UNIMPLEMENTED;case Zl.DATA_LOSS:return ws.DATA_LOSS;default:return gs()}}(Jl=Zl||(Zl={}))[Jl.OK=0]="OK",Jl[Jl.CANCELLED=1]="CANCELLED",Jl[Jl.UNKNOWN=2]="UNKNOWN",Jl[Jl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jl[Jl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jl[Jl.NOT_FOUND=5]="NOT_FOUND",Jl[Jl.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jl[Jl.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jl[Jl.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jl[Jl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jl[Jl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jl[Jl.ABORTED=10]="ABORTED",Jl[Jl.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jl[Jl.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jl[Jl.INTERNAL=13]="INTERNAL",Jl[Jl.UNAVAILABLE=14]="UNAVAILABLE",Jl[Jl.DATA_LOSS=15]="DATA_LOSS";var ac=function(){function e(t,n){p(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return m(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=S(n);try{for(i.s();!(r=i.n()).done;){var a=u(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(l){i.e(l)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){tu(this.inner,(function(t,n){var r,i=S(n);try{for(i.s();!(r=i.n()).done;){var a=u(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(l){i.e(l)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return nu(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),oc=new ru(Vs.comparator);function sc(){return oc}var uc=new ru(Vs.comparator);function lc(){for(var e=uc,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function cc(e){var t=uc;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function hc(){return dc()}function fc(){return dc()}function dc(){return new ac((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var pc=new ru(Vs.comparator),vc=new ou(Vs.comparator);function mc(){for(var e=vc,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var yc=new ou(Rs);function gc(){return yc}var kc=function(){function e(t,n,r,i,a){p(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return m(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,_c.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Ls.min(),r,gc(),sc(),mc())}}]),e}(),_c=function(){function e(t,n,r,i,a){p(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return m(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(lu.EMPTY_BYTE_STRING,n,mc(),mc(),mc())}}]),e}(),wc=m((function e(t,n,r,i){p(this,e),this.gt=t,this.removedTargetIds=n,this.key=r,this.yt=i})),bc=m((function e(t,n){p(this,e),this.targetId=t,this.It=n})),xc=m((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:lu.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;p(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Tc=function(){function e(){p(this,e),this.Tt=0,this.Et=Sc(),this.At=lu.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}return m(e,[{key:"current",get:function(){return this.Rt}},{key:"resumeToken",get:function(){return this.At}},{key:"Pt",get:function(){return 0!==this.Tt}},{key:"vt",get:function(){return this.bt}},{key:"Vt",value:function(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}},{key:"St",value:function(){var e=mc(),t=mc(),n=mc();return this.Et.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:gs()}})),new _c(this.At,this.Rt,e,t,n)}},{key:"Dt",value:function(){this.bt=!1,this.Et=Sc()}},{key:"Ct",value:function(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}},{key:"xt",value:function(e){this.bt=!0,this.Et=this.Et.remove(e)}},{key:"Nt",value:function(){this.Tt+=1}},{key:"kt",value:function(){this.Tt-=1}},{key:"Mt",value:function(){this.bt=!0,this.Rt=!0}}]),e}(),Cc=function(){function e(t){p(this,e),this.Ot=t,this.Ft=new Map,this.$t=sc(),this.Bt=Ec(),this.Lt=new ou(Rs)}return m(e,[{key:"Ut",value:function(e){var t,n=S(e.gt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.yt&&e.yt.isFoundDocument()?this.qt(r,e.yt):this.Kt(r,e.key,e.yt)}}catch(s){n.e(s)}finally{n.f()}var i,a=S(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Kt(o,e.key,e.yt)}}catch(s){a.e(s)}finally{a.f()}}},{key:"Gt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Qt(n);switch(e.state){case 0:t.jt(n)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||t.removeTarget(n);break;case 3:t.jt(n)&&(r.Mt(),r.Vt(e.resumeToken));break;case 4:t.jt(n)&&(t.Wt(n),r.Vt(e.resumeToken));break;default:gs()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((function(e,r){n.jt(r)&&t(r)}))}},{key:"zt",value:function(e){var t=e.targetId,n=e.It.count,r=this.Ht(t);if(r){var i=r.target;if(Qu(i))if(0===n){var a=new Vs(i.path);this.Kt(t,a,Bu.newNoDocument(a,Ls.min()))}else ks(1===n);else this.Jt(t)!==n&&(this.Wt(t),this.Lt=this.Lt.add(t))}}},{key:"Yt",value:function(e){var t=this,n=new Map;this.Ft.forEach((function(r,i){var a=t.Ht(i);if(a){if(r.current&&Qu(a.target)){var o=new Vs(a.target.path);null!==t.$t.get(o)||t.Xt(i,o)||t.Kt(i,o,Bu.newNoDocument(o,e))}r.vt&&(n.set(i,r.St()),r.Dt())}}));var r=mc();this.Bt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Ht(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.$t.forEach((function(t,n){return n.setReadTime(e)}));var i=new kc(e,n,this.Lt,this.$t,r);return this.$t=sc(),this.Bt=Ec(),this.Lt=new ou(Rs),i}},{key:"qt",value:function(e,t){if(this.jt(e)){var n=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,n),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}}},{key:"Kt",value:function(e,t,n){if(this.jt(e)){var r=this.Qt(e);this.Xt(e,t)?r.Ct(t,1):r.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),n&&(this.$t=this.$t.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Ft.delete(e)}},{key:"Jt",value:function(e){var t=this.Qt(e).St();return this.Ot.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Nt",value:function(e){this.Qt(e).Nt()}},{key:"Qt",value:function(e){var t=this.Ft.get(e);return t||(t=new Tc,this.Ft.set(e,t)),t}},{key:"Zt",value:function(e){var t=this.Bt.get(e);return t||(t=new ou(Rs),this.Bt=this.Bt.insert(e,t)),t}},{key:"jt",value:function(e){var t=null!==this.Ht(e);return t||ps("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Ht",value:function(e){var t=this.Ft.get(e);return t&&t.Pt?null:this.Ot.te(e)}},{key:"Wt",value:function(e){var t=this;this.Ft.set(e,new Tc),this.Ot.getRemoteKeysForTarget(e).forEach((function(n){t.Kt(e,n,null)}))}},{key:"Xt",value:function(e,t){return this.Ot.getRemoteKeysForTarget(e).has(t)}}]),e}();function Ec(){return new ru(Vs.comparator)}function Sc(){return new ru(Vs.comparator)}var Mc={asc:"ASCENDING",desc:"DESCENDING"},Ic={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Nc=m((function e(t,n){p(this,e),this.databaseId=t,this.dt=n}));function Ac(e,t){return e.dt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Dc(e,t){return e.dt?t.toBase64():t.toUint8Array()}function Rc(e,t){return Ac(e,t.toTimestamp())}function Oc(e){return ks(!!e),Ls.fromTimestamp(function(e){var t=hu(e);return new Ps(t.seconds,t.nanos)}(e))}function Pc(e,t){return function(e){return new Fs(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Lc(e){var t=Fs.fromString(e);return ks(nh(t)),t}function jc(e,t){return Pc(e.databaseId,t.path)}function Fc(e,t){var n=Lc(t);if(n.get(1)!==e.databaseId.projectId)throw new bs(ws.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new bs(ws.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Vs(zc(n))}function Uc(e,t){return Pc(e.databaseId,t)}function Bc(e){var t=Lc(e);return 4===t.length?Fs.emptyPath():zc(t)}function Vc(e){return new Fs(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function zc(e){return ks(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function qc(e,t,n){return{name:jc(e,t),fields:n.value.mapValue.fields}}function Wc(e,t){var n;if(t instanceof Yl)n={update:qc(e,t.key,t.value)};else if(t instanceof ec)n={delete:jc(e,t.key)};else if(t instanceof Kl)n={update:qc(e,t.key,t.data),updateMask:th(t.fieldMask)};else{if(!(t instanceof tc))return gs();n={verify:jc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Nl)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Al)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Rl)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Pl)return{fieldPath:t.field.canonicalString(),increment:n._t};throw gs()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Rc(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:gs()}(e,t.precondition)),n}function Qc(e,t){return{documents:[Uc(e,t.path)]}}function Hc(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Uc(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Uc(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(Ou(e.value))return{unaryFilter:{field:$c(e.field),op:"IS_NAN"}};if(Ru(e.value))return{unaryFilter:{field:$c(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ou(e.value))return{unaryFilter:{field:$c(e.field),op:"IS_NOT_NAN"}};if(Ru(e.value))return{unaryFilter:{field:$c(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$c(e.field),op:Xc(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:$c(e.field),direction:Gc(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,s=function(e,t){return e.dt||ku(t)?t:{value:t}}(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Yc(e){var t=Bc(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ks(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Kc(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new nl(Zc(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return ku(t="object"==typeof e?e.value:e)?null:t}(n.limit));var l=null;n.startAt&&(l=function(e){var t=!!e.before,n=e.values||[];return new tl(n,t)}(n.startAt));var c=null;return n.endAt&&(c=function(e){var t=!e.before,n=e.values||[];return new tl(n,t)}(n.endAt)),sl(t,i,s,o,u,"F",l,c)}function Kc(e){return e?void 0!==e.unaryFilter?[eh(e)]:void 0!==e.fieldFilter?[Jc(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Kc(e)})).reduce((function(e,t){return e.concat(t)})):gs():[]}function Gc(e){return Mc[e]}function Xc(e){return Ic[e]}function $c(e){return{fieldPath:e.canonicalString()}}function Zc(e){return Bs.fromServerFormat(e.fieldPath)}function Jc(e){return Hu.create(Zc(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return gs()}}(e.fieldFilter.op),e.fieldFilter.value)}function eh(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Zc(e.unaryFilter.field);return Hu.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Zc(e.unaryFilter.field);return Hu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Zc(e.unaryFilter.field);return Hu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Zc(e.unaryFilter.field);return Hu.create(i,"!=",{nullValue:"NULL_VALUE"});default:return gs()}}function th(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function nh(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var rh=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),ih=([].concat(d(rh),["documentOverlays"]),["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"]),ah=ih;[].concat(ah,["indexConfiguration","indexState","indexEntries"]);var oh=function(){function e(t,n,r,i){p(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return m(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&ql(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=S(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Wl(i,e,t,this.localWriteTime))}}catch(u){r.e(u)}finally{r.f()}var a,o=S(this.mutations);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.key.isEqual(e.key)&&(t=Wl(s,e,t,this.localWriteTime))}}catch(u){o.e(u)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=fc();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,s=n.applyToLocalView(o,a.mutatedFields),u=zl(o,s=t.has(i.key)?null:s);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Ls.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),mc())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Os(this.mutations,e.mutations,(function(e,t){return Hl(e,t)}))&&Os(this.baseMutations,e.baseMutations,(function(e,t){return Hl(e,t)}))}}]),e}(),sh=function(){function e(t,n,r,i){p(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return m(e,null,[{key:"from",value:function(t,n,r){ks(t.mutations.length===r.length);for(var i=pc,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),uh=function(){function e(t,n){p(this,e),this.largestBatchId=t,this.mutation=n}return m(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),lh=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ls.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ls.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:lu.EMPTY_BYTE_STRING;p(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return m(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),ch=m((function e(t){p(this,e),this.ne=t}));function hh(e){var t=Yc({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?vl(t,t.limit,"L"):t}var fh=function(){function e(){p(this,e)}return m(e,[{key:"re",value:function(e,t){this.oe(e,t),t.ue()}},{key:"oe",value:function(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(fu(e.integerValue));else if("doubleValue"in e){var n=fu(e.doubleValue);isNaN(n)?this.ce(t,13):(this.ce(t,15),_u(n)?t.ae(0):t.ae(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he("".concat(r.seconds||"")),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(du(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ce(t,45),t.ae(i.latitude||0),t.ae(i.longitude||0)}else"mapValue"in e?ju(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):gs()}},{key:"le",value:function(e,t){this.ce(t,25),this.ge(e,t)}},{key:"ge",value:function(e,t){t.he(e)}},{key:"we",value:function(e,t){var n=e.fields||{};this.ce(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.le(a,t),this.oe(n[a],t)}}},{key:"me",value:function(e,t){var n=e.values||[];this.ce(t,50);var r,i=S(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.oe(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"_e",value:function(e,t){var n=this;this.ce(t,37),Vs.fromName(e).path.forEach((function(e){n.ce(t,60),n.ge(e,t)}))}},{key:"ce",value:function(e,t){e.ae(t)}},{key:"fe",value:function(e){e.ae(2)}}]),e}();fh.ye=new fh;var dh=function(){function e(){p(this,e),this.ze=new ph}return m(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.ze.add(t),$s.resolve()}},{key:"getCollectionParents",value:function(e,t){return $s.resolve(this.ze.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return $s.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return $s.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return $s.resolve(null)}},{key:"getIndexType",value:function(e,t){return $s.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return $s.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return $s.resolve(null)}},{key:"getMinOffset",value:function(e,t){return $s.resolve(Qs.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return $s.resolve(Qs.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return $s.resolve()}},{key:"updateIndexEntries",value:function(e,t){return $s.resolve()}}]),e}(),ph=function(){function e(){p(this,e),this.index={}}return m(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new ou(Fs.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new ou(Fs.comparator)).toArray()}}]),e}();new Uint8Array(0);var vh=function(){function e(t,n,r){p(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return m(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();vh.DEFAULT_COLLECTION_PERCENTILE=10,vh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vh.DEFAULT=new vh(41943040,vh.DEFAULT_COLLECTION_PERCENTILE,vh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vh.DISABLED=new vh(-1,0,0);var mh=function(){function e(t){p(this,e),this.En=t}return m(e,[{key:"next",value:function(){return this.En+=2,this.En}}],[{key:"An",value:function(){return new e(0)}},{key:"Rn",value:function(){return new e(-1)}}]),e}();var yh=function(){function e(){p(this,e),this.changes=new ac((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return m(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Bu.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?$s.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}();var gh=m((function e(t,n){p(this,e),this.overlayedDocument=t,this.mutatedFields=n})),kh=function(){function e(t,n,r,i){p(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return m(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.getBaseDocument(e,t,r)})).next((function(e){return null!==r&&Wl(r.mutation,e,uu.empty(),Ps.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,mc()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mc(),i=hc();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=lc();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=hc();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,mc())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=sc(),a=dc(),o=dc();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Kl)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),Wl(o.mutation,t,o.mutation.getFieldMask(),Ps.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new gh(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=dc(),i=new ru((function(e,t){return e-t})),a=mc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=S(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||uu.empty();o=e.applyToLocalView(a,o),r.set(n,o);var s=(i.get(e.batchId)||mc()).add(n);i=i.insert(e.batchId,s)}}))};for(a.s();!(n=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}})).next((function(){for(var o=[],s=i.getReverseIterator(),u=function(){var i=s.getNext(),u=i.key,l=i.value,c=fc();l.forEach((function(e){if(!a.has(e)){var n=zl(t.get(e),r.get(e));null!==n&&c.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,u,c))};s.hasNext();)u();return $s.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Vs.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):fl(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):$s.resolve(hc()),s=-1,u=a;return o.next((function(t){return $s.forEach(t,(function(t,n){return s<n.largestBatchId&&(s=n.largestBatchId),a.get(t)?$s.resolve():i.getBaseDocument(e,t,n).next((function(e){u=u.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,u,t,mc())})).next((function(e){return{batchId:s,changes:cc(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Vs(t)).next((function(e){var t=lc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=lc();return this.indexManager.getCollectionParents(e,i).next((function(o){return $s.forEach(o,(function(o){var s=function(e,t){return new ol(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,Bu.newInvalidDocument(n)))}));var n=lc();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&Wl(a.mutation,i,uu.empty(),Ps.now()),kl(t,i)&&(n=n.insert(r,i))})),n}))}},{key:"getBaseDocument",value:function(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):$s.resolve(Bu.newInvalidDocument(t))}}]),e}(),_h=function(){function e(t){p(this,e),this.wt=t,this.Jn=new Map,this.Yn=new Map}return m(e,[{key:"getBundleMetadata",value:function(e,t){return $s.resolve(this.Jn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Jn.set(t.id,{id:(n=t).id,version:n.version,createTime:Oc(n.createTime)}),$s.resolve()}},{key:"getNamedQuery",value:function(e,t){return $s.resolve(this.Yn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Yn.set(t.name,function(e){return{name:e.name,query:hh(e.bundledQuery),readTime:Oc(e.readTime)}}(t)),$s.resolve()}}]),e}(),wh=function(){function e(){p(this,e),this.overlays=new ru(Vs.comparator),this.Xn=new Map}return m(e,[{key:"getOverlay",value:function(e,t){return $s.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=hc();return $s.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ie(e,t,i)})),$s.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Xn.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Xn.delete(n)),$s.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=hc(),i=t.length+1,a=new Vs(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return $s.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new ru((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=hc(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=hc(),l=i.getIterator();l.hasNext()&&(l.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return $s.resolve(u)}},{key:"ie",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Xn.get(r.largestBatchId).delete(n.key);this.Xn.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new uh(t,n));var a=this.Xn.get(t);void 0===a&&(a=mc(),this.Xn.set(t,a)),this.Xn.set(t,a.add(n.key))}}]),e}(),bh=function(){function e(){p(this,e),this.Zn=new ou(xh.ts),this.es=new ou(xh.ns)}return m(e,[{key:"isEmpty",value:function(){return this.Zn.isEmpty()}},{key:"addReference",value:function(e,t){var n=new xh(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}},{key:"ss",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.rs(new xh(e,t))}},{key:"os",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"us",value:function(e){var t=this,n=new Vs(new Fs([])),r=new xh(n,e),i=new xh(n,e+1),a=[];return this.es.forEachInRange([r,i],(function(e){t.rs(e),a.push(e.key)})),a}},{key:"cs",value:function(){var e=this;this.Zn.forEach((function(t){return e.rs(t)}))}},{key:"rs",value:function(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}},{key:"hs",value:function(e){var t=new Vs(new Fs([])),n=new xh(t,e),r=new xh(t,e+1),i=mc();return this.es.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new xh(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),xh=function(){function e(t,n){p(this,e),this.key=t,this.ls=n}return m(e,null,[{key:"ts",value:function(e,t){return Vs.comparator(e.key,t.key)||Rs(e.ls,t.ls)}},{key:"ns",value:function(e,t){return Rs(e.ls,t.ls)||Vs.comparator(e.key,t.key)}}]),e}(),Th=function(){function e(t,n){p(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.fs=1,this.ds=new ou(xh.ts)}return m(e,[{key:"checkEmpty",value:function(e){return $s.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.fs;this.fs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new oh(i,t,n,r);this.mutationQueue.push(a);var o,s=S(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.ds=this.ds.add(new xh(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(l){s.e(l)}finally{s.f()}return $s.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return $s.resolve(this._s(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ws(n),i=r<0?0:r;return $s.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return $s.resolve(0===this.mutationQueue.length?-1:this.fs-1)}},{key:"getAllMutationBatches",value:function(e){return $s.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new xh(t,0),i=new xh(t,Number.POSITIVE_INFINITY),a=[];return this.ds.forEachInRange([r,i],(function(e){var t=n._s(e.ls);a.push(t)})),$s.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new ou(Rs);return t.forEach((function(e){var t=new xh(e,0),i=new xh(e,Number.POSITIVE_INFINITY);n.ds.forEachInRange([t,i],(function(e){r=r.add(e.ls)}))})),$s.resolve(this.gs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Vs.isDocumentKey(i)||(i=i.child(""));var a=new xh(new Vs(i),0),o=new ou(Rs);return this.ds.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ls)),!0)}),a),$s.resolve(this.gs(o))}},{key:"gs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t._s(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;ks(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();var r=this.ds;return $s.forEach(t.mutations,(function(i){var a=new xh(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ds=r}))}},{key:"In",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new xh(t,0),r=this.ds.firstAfterOrEqual(n);return $s.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,$s.resolve()}},{key:"ys",value:function(e,t){return this.ws(e)}},{key:"ws",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"_s",value:function(e){var t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),Ch=function(){function e(t){p(this,e),this.ps=t,this.docs=new ru(Vs.comparator),this.size=0}return m(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ps(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return $s.resolve(n?n.document.mutableCopy():Bu.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=sc();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Bu.newInvalidDocument(e))})),$s.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=sc(),i=new Vs(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),s=o.key,u=o.value.document;if(!t.isPrefixOf(s.path))break;s.path.length>t.length+1||Hs(Ws(u),n)<=0||(r=r.insert(u.key,u.mutableCopy()))}return $s.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){gs()}},{key:"Is",value:function(e,t){return $s.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Eh(this)}},{key:"getSize",value:function(e){return $s.resolve(this.size)}}]),e}(),Eh=function(e){g(n,e);var t=T(n);function n(e){var r;return p(this,n),(r=t.call(this)).zn=e,r}return m(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.zn.addEntry(e,i)):t.zn.removeEntry(r)})),$s.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.zn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.zn.getEntries(e,t)}}]),n}(yh),Sh=function(){function e(t){p(this,e),this.persistence=t,this.Ts=new ac((function(e){return qu(e)}),Wu),this.lastRemoteSnapshotVersion=Ls.min(),this.highestTargetId=0,this.Es=0,this.As=new bh,this.targetCount=0,this.Rs=mh.An()}return m(e,[{key:"forEachTarget",value:function(e,t){return this.Ts.forEach((function(e,n){return t(n)})),$s.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return $s.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return $s.resolve(this.Es)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Rs.next(),$s.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Es&&(this.Es=t),$s.resolve()}},{key:"vn",value:function(e){this.Ts.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Rs=new mh(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.vn(t),this.targetCount+=1,$s.resolve()}},{key:"updateTargetData",value:function(e,t){return this.vn(t),$s.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,$s.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Ts.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Ts.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),$s.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return $s.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Ts.get(t)||null;return $s.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.As.ss(t,n),$s.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.As.os(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),$s.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.As.us(t),$s.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.As.hs(t);return $s.resolve(n)}},{key:"containsKey",value:function(e,t){return $s.resolve(this.As.containsKey(t))}}]),e}(),Mh=function(){function e(t,n){var r=this;p(this,e),this.bs={},this.overlays={},this.Ps=new Js(0),this.vs=!1,this.vs=!0,this.referenceDelegate=t(this),this.Vs=new Sh(this),this.indexManager=new dh,this.remoteDocumentCache=new Ch((function(e){return r.referenceDelegate.Ss(e)})),this.wt=new ch(n),this.Ds=new _h(this.wt)}return m(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.vs=!1,Promise.resolve()}},{key:"started",get:function(){return this.vs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new wh,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.bs[e.toKey()];return n||(n=new Th(t,this.referenceDelegate),this.bs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;ps("MemoryPersistence","Starting transaction:",e);var i=new Ih(this.Ps.next());return this.referenceDelegate.Cs(),n(i).next((function(e){return r.referenceDelegate.xs(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ns",value:function(e,t){return $s.or(Object.values(this.bs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Ih=function(e){g(n,e);var t=T(n);function n(e){var r;return p(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return m(n)}(Ks),Nh=function(){function e(t){p(this,e),this.persistence=t,this.ks=new bh,this.Ms=null}return m(e,[{key:"Fs",get:function(){if(this.Ms)return this.Ms;throw gs()}},{key:"addReference",value:function(e,t,n){return this.ks.addReference(n,t),this.Fs.delete(n.toString()),$s.resolve()}},{key:"removeReference",value:function(e,t,n){return this.ks.removeReference(n,t),this.Fs.add(n.toString()),$s.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Fs.add(t.toString()),$s.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.ks.us(t.targetId).forEach((function(e){return n.Fs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Fs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Cs",value:function(){this.Ms=new Set}},{key:"xs",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $s.forEach(this.Fs,(function(r){var i=Vs.fromPath(r);return t.$s(e,i).next((function(e){e||n.removeEntry(i,Ls.min())}))})).next((function(){return t.Ms=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.$s(e,t).next((function(e){e?n.Fs.delete(t.toString()):n.Fs.add(t.toString())}))}},{key:"Ss",value:function(e){return 0}},{key:"$s",value:function(e,t){var n=this;return $s.or([function(){return $s.resolve(n.ks.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ns(e,t)}])}}],[{key:"Os",value:function(t){return new e(t)}}]),e}();var Ah=function(){function e(t,n,r,i){p(this,e),this.targetId=t,this.fromCache=n,this.Pi=r,this.vi=i}return m(e,null,[{key:"Vi",value:function(t,n){var r,i=mc(),a=mc(),o=S(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Dh=function(){function e(){p(this,e),this.Si=!1}return m(e,[{key:"initialize",value:function(e,t){this.Di=e,this.indexManager=t,this.Si=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ci(e,t).next((function(a){return a||i.xi(e,t,r,n)})).next((function(n){return n||i.Ni(e,t)}))}},{key:"Ci",value:function(e,t){var n=this;if(ll(t))return $s.resolve(null);var r=pl(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=vl(t,null,"F"),r=pl(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=mc.apply(void 0,d(i));return n.Di.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.ki(t,i);return n.Mi(t,o,a,r.readTime)?n.Ci(e,vl(t,null,"F")):n.Oi(e,o,t,r)}))}))})))}))}},{key:"xi",value:function(e,t,n,r){var i=this;return ll(t)||r.isEqual(Ls.min())?this.Ni(e,t):this.Di.getDocuments(e,n).next((function(a){var o=i.ki(t,a);return i.Mi(t,o,n,r)?i.Ni(e,t):(ds()<=zt.DEBUG&&ps("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),gl(t)),i.Oi(e,o,t,qs(r,-1)))}))}},{key:"ki",value:function(e,t){var n=new ou(wl(e));return t.forEach((function(t,r){kl(e,r)&&(n=n.add(r))})),n}},{key:"Mi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Ni",value:function(e,t){return ds()<=zt.DEBUG&&ps("QueryEngine","Using full collection scan to execute query:",gl(t)),this.Di.getDocumentsMatchingQuery(e,t,Qs.min())}},{key:"Oi",value:function(e,t,n,r){return this.Di.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Rh=function(){function e(t,n,r,i){p(this,e),this.persistence=t,this.Fi=n,this.wt=i,this.$i=new ru(Rs),this.Bi=new ac((function(e){return qu(e)}),Wu),this.Li=new Map,this.Ui=t.getRemoteDocumentCache(),this.Vs=t.getTargetCache(),this.Ds=t.getBundleCache(),this.qi(r)}return m(e,[{key:"qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kh(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.$i)}))}}]),e}();function Oh(e,t,n,r){return new Rh(e,t,n,r)}function Ph(e,t){return Lh.apply(this,arguments)}function Lh(){return Lh=Ke(He().mark((function e(t,n){var r;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_s(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=mc(),u=S(t);try{for(u.s();!(i=u.n()).done;){var l=i.value;a.push(l.batchId);var c,h=S(l.mutations);try{for(h.s();!(c=h.n()).done;){var f=c.value;s=s.add(f.key)}}catch(k){h.e(k)}finally{h.f()}}}catch(k){u.e(k)}finally{u.f()}var d,p=S(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=S(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;s=s.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,s).next((function(e){return{Ki:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Lh.apply(this,arguments)}function jh(e,t){var n=_s(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Ui.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=$s.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);ks(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=mc(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Fh(e){var t=_s(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Vs.getLastRemoteSnapshotVersion(e)}))}function Uh(e,t){var n=_s(e),r=t.snapshotVersion,i=n.$i;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Ui.newChangeBuffer({trackRemovals:!0});i=n.$i;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.Vs.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.Vs.addMatchingKeys(e,a.addedDocuments,s)})));var l=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(s)?l=l.withResumeToken(lu.EMPTY_BYTE_STRING,Ls.min()).withLastLimboFreeSnapshotVersion(Ls.min()):a.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(a.resumeToken,r)),i=i.insert(s,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,l,a)&&o.push(n.Vs.updateTargetData(e,l))}}));var s=sc(),u=mc();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Bh(e,a,t.documentUpdates).next((function(e){s=e.Gi,u=e.Qi}))),!r.isEqual(Ls.min())){var l=n.Vs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Vs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(l)}return $s.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,s,u)})).next((function(){return s}))})).then((function(e){return n.$i=i,e}))}function Bh(e,t,n){var r=mc(),i=mc();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=sc();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Ls.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):ps("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Gi:r,Qi:i}}))}function Vh(e,t){var n=_s(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function zh(e,t){var n=_s(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Vs.getTargetData(e,t).next((function(i){return i?(r=i,$s.resolve(r)):n.Vs.allocateTargetId(e).next((function(i){return r=new lh(t,i,0,e.currentSequenceNumber),n.Vs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.$i.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.$i=n.$i.insert(e.targetId,e),n.Bi.set(t,e.targetId)),e}))}function qh(e,t,n){return Wh.apply(this,arguments)}function Wh(){return Wh=Ke(He().mark((function e(t,n,r){var i,a,o;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=_s(t),a=i.$i.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Zs(e.t1)){e.next=12;break}throw e.t1;case 12:ps("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.$i=i.$i.remove(n),i.Bi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Wh.apply(this,arguments)}function Qh(e,t,n){var r=_s(e),i=Ls.min(),a=mc();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=_s(e),i=r.Bi.get(n);return void 0!==i?$s.resolve(r.$i.get(i)):r.Vs.getTargetData(t,n)}(r,e,pl(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Fi.getDocumentsMatchingQuery(e,t,n?i:Ls.min(),n?a:mc())})).next((function(e){return Hh(r,_l(t),e),{documents:e,ji:a}}))}))}function Hh(e,t,n){var r=Ls.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Li.set(t,r)}var Yh=function(){function e(){p(this,e),this.activeTargetIds=gc()}return m(e,[{key:"Xi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Yi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Kh=function(){function e(){p(this,e),this.Fr=new Yh,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return m(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.$r[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Fr.Zi(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.$r[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Fr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Fr=new Yh,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Gh=function(){function e(){p(this,e)}return m(e,[{key:"Br",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Xh=function(){function e(){var t=this;p(this,e),this.Lr=function(){return t.Ur()},this.qr=function(){return t.Kr()},this.Gr=[],this.Qr()}return m(e,[{key:"Br",value:function(e){this.Gr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}},{key:"Qr",value:function(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}},{key:"Ur",value:function(){ps("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=S(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Kr",value:function(){ps("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=S(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"V",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),$h={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Zh=function(){function e(t){p(this,e),this.jr=t.jr,this.Wr=t.Wr}return m(e,[{key:"zr",value:function(e){this.Hr=e}},{key:"Jr",value:function(e){this.Yr=e}},{key:"onMessage",value:function(e){this.Xr=e}},{key:"close",value:function(){this.Wr()}},{key:"send",value:function(e){this.jr(e)}},{key:"Zr",value:function(){this.Hr()}},{key:"eo",value:function(e){this.Yr(e)}},{key:"no",value:function(e){this.Xr(e)}}]),e}(),Jh=function(e){g(n,e);var t=T(n);function n(e){var r;return p(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return m(n,[{key:"co",value:function(e,t,n,r){return new Promise((function(i,a){var o=new us;o.listenOnce(rs.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case ns.NO_ERROR:var t=o.getResponseJson();ps("Connection","XHR received:",JSON.stringify(t)),i(t);break;case ns.TIMEOUT:ps("Connection",'RPC "'+e+'" timed out'),a(new bs(ws.DEADLINE_EXCEEDED,"Request time out"));break;case ns.HTTP_ERROR:var n=o.getStatus();if(ps("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(ws).indexOf(t)>=0?t:ws.UNKNOWN}(r.status);a(new bs(s,r.message))}else a(new bs(ws.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new bs(ws.UNAVAILABLE,"Connection failed."));break;default:gs()}}finally{ps("Connection",'RPC "'+e+'" completed.')}}));var s=JSON.stringify(r);o.send(t,"POST",s,n,15)}))}},{key:"ho",value:function(e,t,n){var r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=es(),a=ts(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new os({})),this.uo(o.initMessageHeaders,t,n),ft()||pt()||ht().indexOf("Electron/")>=0||function(){var e=ht();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()||ht().indexOf("MSAppHost/")>=0||dt()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");ps("Connection","Creating WebChannel: "+s,o);var u=i.createWebChannel(s,o),l=!1,c=!1,h=new Zh({jr:function(e){c?ps("Connection","Not sending because WebChannel is closed:",e):(l||(ps("Connection","Opening WebChannel transport."),u.open(),l=!0),ps("Connection","WebChannel sending:",e),u.send(e))},Wr:function(){return u.close()}}),f=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return f(u,ss.EventType.OPEN,(function(){c||ps("Connection","WebChannel transport opened.")})),f(u,ss.EventType.CLOSE,(function(){c||(c=!0,ps("Connection","WebChannel transport closed"),h.eo())})),f(u,ss.EventType.ERROR,(function(e){c||(c=!0,ms("Connection","WebChannel transport errored:",e),h.eo(new bs(ws.UNAVAILABLE,"The operation could not be completed")))})),f(u,ss.EventType.MESSAGE,(function(e){var t;if(!c){var n=e.data[0];ks(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){ps("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Zl[e];if(void 0!==t)return ic(t)}(a),s=i.message;void 0===o&&(o=ws.INTERNAL,s="Unknown error status: "+a+" with message "+i.message),c=!0,h.eo(new bs(o,s)),u.close()}else ps("Connection","WebChannel received:",n),h.no(n)}})),f(a,is.STAT_EVENT,(function(e){e.stat===as.PROXY?ps("Connection","Detected buffering proxy"):e.stat===as.NOPROXY&&ps("Connection","Detected no buffering proxy")})),setTimeout((function(){h.Zr()}),0),h}}]),n}(function(){function e(t){p(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.so=n+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return m(e,[{key:"ro",value:function(e,t,n,r,i){var a=this.oo(e,t);ps("RestConnection","Sending: ",a,n);var o={};return this.uo(o,r,i),this.co(e,a,o,n).then((function(e){return ps("RestConnection","Received: ",e),e}),(function(t){throw ms("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"ao",value:function(e,t,n,r,i,a){return this.ro(e,t,n,r,i)}},{key:"uo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+hs,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"oo",value:function(e,t){var n=$h[e];return"".concat(this.so,"/v1/").concat(t,":").concat(n)}}]),e}());function ef(){return"undefined"!=typeof document?document:null}function tf(e){return new Nc(e,!0)}var nf=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;p(this,e),this.js=t,this.timerId=n,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}return m(e,[{key:"reset",value:function(){this.wo=0}},{key:"po",value:function(){this.wo=this._o}},{key:"Io",value:function(e){var t=this;this.cancel();var n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,n-r);i>0&&ps("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.wo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.mo=this.js.enqueueAfterDelay(this.timerId,i,(function(){return t.yo=Date.now(),e()})),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}},{key:"Eo",value:function(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}},{key:"cancel",value:function(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}},{key:"To",value:function(){return(Math.random()-.5)*this.wo}}]),e}(),rf=function(){function e(t,n,r,i,a,o,s,u){p(this,e),this.js=t,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new nf(t,n)}return m(e,[{key:"Do",value:function(){return 1===this.state||5===this.state||this.Co()}},{key:"Co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.xo()}},{key:"stop",value:function(){var e=Ke(He().mark((function e(){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Do(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"No",value:function(){this.state=0,this.So.reset()}},{key:"ko",value:function(){var e=this;this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,(function(){return e.Mo()})))}},{key:"Oo",value:function(e){this.Fo(),this.stream.send(e)}},{key:"Mo",value:function(){var e=Ke(He().mark((function e(){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Co()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"$o",value:function(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}},{key:"close",value:function(){var e=Ke(He().mark((function e(t,n){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fo(),this.$o(),this.So.cancel(),this.Po++,4!==t?this.So.reset():n&&n.code===ws.RESOURCE_EXHAUSTED?(vs(n.toString()),vs("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):n&&n.code===ws.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Bo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Jr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=u(t,2),i=r[0],a=r[1];e.Po===n&&e.Uo(i,a)}),(function(n){t((function(){var t=new bs(ws.UNKNOWN,"Fetching auth token failed: "+n.message);return e.qo(t)}))}))}},{key:"Uo",value:function(e,t){var n=this,r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr((function(){r((function(){return n.state=2,n.Vo=n.js.enqueueAfterDelay(n.Ro,1e4,(function(){return n.Co()&&(n.state=3),Promise.resolve()})),n.listener.zr()}))})),this.stream.Jr((function(e){r((function(){return n.qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"xo",value:function(){var e=this;this.state=5,this.So.Io(Ke(He().mark((function t(){return He().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"qo",value:function(e){return ps("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Lo",value:function(e){var t=this;return function(n){t.js.enqueueAndForget((function(){return t.Po===e?n():(ps("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),af=function(e){g(n,e);var t=T(n);function n(e,r,i,a,o,s){var u;return p(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).wt=o,u}return m(n,[{key:"Ko",value:function(e,t){return this.bo.ho("Listen",e,t)}},{key:"onMessage",value:function(e){this.So.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:gs()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.dt?(ks(void 0===t||"string"==typeof t),lu.fromBase64String(t||"")):(ks(void 0===t||t instanceof Uint8Array),lu.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?ws.UNKNOWN:ic(e.code);return new bs(t,e.message||"")}(o);n=new xc(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var l=Fc(e,u.document.name),c=Oc(u.document.updateTime),h=new Fu({mapValue:{fields:u.document.fields}}),f=Bu.newFoundDocument(l,c,h),d=u.targetIds||[],p=u.removedTargetIds||[];n=new wc(d,p,f.key,f)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var m=Fc(e,v.document),y=v.readTime?Oc(v.readTime):Ls.min(),g=Bu.newNoDocument(m,y),k=v.removedTargetIds||[];n=new wc([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var _=t.documentRemove;_.document;var w=Fc(e,_.document),b=_.removedTargetIds||[];n=new wc([],b,w,null)}else{if(!("filter"in t))return gs();t.filter;var x=t.filter;x.targetId;var T=x.count||0,C=new nc(T),E=x.targetId;n=new bc(E,C)}return n}(this.wt,e),n=function(e){if(!("targetChange"in e))return Ls.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Ls.min():t.readTime?Oc(t.readTime):Ls.min()}(e);return this.listener.Go(t,n)}},{key:"Qo",value:function(e){var t={};t.database=Vc(this.wt),t.addTarget=function(e,t){var n,r=t.target;return(n=Qu(r)?{documents:Qc(e,r)}:{query:Hc(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Dc(e,t.resumeToken):t.snapshotVersion.compareTo(Ls.min())>0&&(n.readTime=Ac(e,t.snapshotVersion.toTimestamp())),n}(this.wt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return gs()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.wt,e);n&&(t.labels=n),this.Oo(t)}},{key:"jo",value:function(e){var t={};t.database=Vc(this.wt),t.removeTarget=e,this.Oo(t)}}]),n}(rf),of=function(e){g(n,e);var t=T(n);function n(e,r,i,a,o,s){var u;return p(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).wt=o,u.Wo=!1,u}return m(n,[{key:"zo",get:function(){return this.Wo}},{key:"start",value:function(){this.Wo=!1,this.lastStreamToken=void 0,Xe(k(n.prototype),"start",this).call(this)}},{key:"Bo",value:function(){this.Wo&&this.Ho([])}},{key:"Ko",value:function(e,t){return this.bo.ho("Write",e,t)}},{key:"onMessage",value:function(e){if(ks(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();var t=function(e,t){return e&&e.length>0?(ks(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Oc(e.updateTime):Oc(t);return n.isEqual(Ls.min())&&(n=Oc(t)),new Fl(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Oc(e.commitTime);return this.listener.Jo(n,t)}return ks(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}},{key:"Xo",value:function(){var e={};e.database=Vc(this.wt),this.Oo(e)}},{key:"Ho",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Wc(t.wt,e)}))};this.Oo(n)}}]),n}(rf),sf=function(e){g(n,e);var t=T(n);function n(e,r,i,a){var o;return p(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.bo=i,o.wt=a,o.Zo=!1,o}return m(n,[{key:"tu",value:function(){if(this.Zo)throw new bs(ws.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ro",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=u(i,2),o=a[0],s=a[1];return r.bo.ro(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===ws.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new bs(ws.UNKNOWN,e.toString())}))}},{key:"ao",value:function(e,t,n,r){var i=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=u(a,2),s=o[0],l=o[1];return i.bo.ao(e,t,n,s,l,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===ws.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new bs(ws.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Zo=!0}}]),n}(function(){return m((function e(){p(this,e)}))}()),uf=function(){function e(t,n){p(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}return m(e,[{key:"iu",value:function(){var e=this;0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.nu=null,e.ou("Backend didn't respond within 10 seconds."),e.ru("Offline"),Promise.resolve()})))}},{key:"uu",value:function(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ru("Offline")))}},{key:"set",value:function(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}},{key:"ru",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"ou",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.su?(vs(t),this.su=!1):ps("OnlineStateTracker",t)}},{key:"cu",value:function(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}]),e}(),lf=m((function e(t,n,r,i,a){var o=this;p(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br((function(e){r.enqueueAndForget(Ke(He().mark((function e(){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=_f(o),!e.t0){e.next=5;break}return ps("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Ke(He().mark((function e(t){var n;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=_s(t)).lu.add(4),e.next=4,ff(n);case 4:return n._u.set("Unknown"),n.lu.delete(4),e.next=8,cf(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this._u=new uf(r,i)}));function cf(e){return hf.apply(this,arguments)}function hf(){return hf=Ke(He().mark((function e(t){var n,r,i;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_f(t)){e.next=18;break}n=S(t.fu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),hf.apply(this,arguments)}function ff(e){return df.apply(this,arguments)}function df(){return df=Ke(He().mark((function e(t){var n,r,i;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=S(t.fu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),df.apply(this,arguments)}function pf(e,t){var n=_s(e);n.hu.has(t.targetId)||(n.hu.set(t.targetId,t),kf(n)?gf(n):Gf(n).Co()&&mf(n,t))}function vf(e,t){var n=_s(e),r=Gf(n);n.hu.delete(t),r.Co()&&yf(n,t),0===n.hu.size&&(r.Co()?r.ko():_f(n)&&n._u.set("Unknown"))}function mf(e,t){e.wu.Nt(t.targetId),Gf(e).Qo(t)}function yf(e,t){e.wu.Nt(t),Gf(e).jo(t)}function gf(e){e.wu=new Cc({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},te:function(t){return e.hu.get(t)||null}}),Gf(e).start(),e._u.iu()}function kf(e){return _f(e)&&!Gf(e).Do()&&e.hu.size>0}function _f(e){return 0===_s(e).lu.size}function wf(e){e.wu=void 0}function bf(e){return xf.apply(this,arguments)}function xf(){return xf=Ke(He().mark((function e(t){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.hu.forEach((function(e,n){mf(t,e)}));case 1:case"end":return e.stop()}}),e)}))),xf.apply(this,arguments)}function Tf(e,t){return Cf.apply(this,arguments)}function Cf(){return Cf=Ke(He().mark((function e(t,n){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:wf(t),kf(t)?(t._u.uu(n),gf(t)):t._u.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Cf.apply(this,arguments)}function Ef(e,t,n){return Sf.apply(this,arguments)}function Sf(){return Sf=Ke(He().mark((function e(t,n,r){var i;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._u.set("Online"),!(n instanceof xc&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Ke(He().mark((function e(t,n){var r,i,a,o;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=S(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.hu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.hu.delete(o),t.wu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),ps("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Mf(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof wc?t.wu.Ut(n):n instanceof bc?t.wu.zt(n):t.wu.Gt(n),r.isEqual(Ls.min())){e.next=29;break}return e.prev=14,e.next=17,Fh(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.wu.Yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.hu.get(r);i&&e.hu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.hu.get(t);if(n){e.hu.set(t,n.withResumeToken(lu.EMPTY_BYTE_STRING,n.snapshotVersion)),yf(e,t);var r=new lh(n.target,t,1,n.sequenceNumber);mf(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),ps("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Mf(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Sf.apply(this,arguments)}function Mf(e,t,n){return If.apply(this,arguments)}function If(){return If=Ke(He().mark((function e(t,n,r){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Zs(n)){e.next=2;break}throw n;case 2:return t.lu.add(1),e.next=5,ff(t);case 5:t._u.set("Offline"),r||(r=function(){return Fh(t.localStore)}),t.asyncQueue.enqueueRetryable(Ke(He().mark((function e(){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ps("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.lu.delete(1),e.next=6,cf(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),If.apply(this,arguments)}function Nf(e,t){return t().catch((function(n){return Mf(e,n,t)}))}function Af(e){return Df.apply(this,arguments)}function Df(){return Df=Ke(He().mark((function e(t){var n,r,i,a;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=_s(t),r=Xf(n),i=n.au.length>0?n.au[n.au.length-1].batchId:-1;case 2:if(!Rf(n)){e.next=19;break}return e.prev=3,e.next=6,Vh(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.au.length&&r.ko(),e.abrupt("break",19);case 10:i=a.batchId,Of(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Mf(n,e.t0);case 17:e.next=2;break;case 19:Pf(n)&&Lf(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Df.apply(this,arguments)}function Rf(e){return _f(e)&&e.au.length<10}function Of(e,t){e.au.push(t);var n=Xf(e);n.Co()&&n.zo&&n.Ho(t.mutations)}function Pf(e){return _f(e)&&!Xf(e).Do()&&e.au.length>0}function Lf(e){Xf(e).start()}function jf(e){return Ff.apply(this,arguments)}function Ff(){return Ff=Ke(He().mark((function e(t){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Xf(t).Xo();case 1:case"end":return e.stop()}}),e)}))),Ff.apply(this,arguments)}function Uf(e){return Bf.apply(this,arguments)}function Bf(){return Bf=Ke(He().mark((function e(t){var n,r,i,a;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Xf(t),r=S(t.au);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Ho(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Bf.apply(this,arguments)}function Vf(e,t,n){return zf.apply(this,arguments)}function zf(){return zf=Ke(He().mark((function e(t,n,r){var i,a;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.au.shift(),a=sh.from(i,n,r),e.next=3,Nf(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Af(t);case 5:case"end":return e.stop()}}),e)}))),zf.apply(this,arguments)}function qf(e,t){return Wf.apply(this,arguments)}function Wf(){return Wf=Ke(He().mark((function e(t,n){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Xf(t).zo,!e.t0){e.next=4;break}return e.next=4,function(){var e=Ke(He().mark((function e(t,n){var r,i;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!rc(i=n.code)||i===ws.ABORTED){e.next=7;break}return r=t.au.shift(),Xf(t).No(),e.next=5,Nf(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Af(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Pf(t)&&Lf(t);case 5:case"end":return e.stop()}}),e)}))),Wf.apply(this,arguments)}function Qf(e,t){return Hf.apply(this,arguments)}function Hf(){return Hf=Ke(He().mark((function e(t,n){var r,i;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=_s(t)).asyncQueue.verifyOperationInProgress(),ps("RemoteStore","RemoteStore received new credentials"),i=_f(r),r.lu.add(3),e.next=6,ff(r);case 6:return i&&r._u.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.lu.delete(3),e.next=12,cf(r);case 12:case"end":return e.stop()}}),e)}))),Hf.apply(this,arguments)}function Yf(e,t){return Kf.apply(this,arguments)}function Kf(){return Kf=Ke(He().mark((function e(t,n){var r;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=_s(t),!n){e.next=7;break}return r.lu.delete(2),e.next=5,cf(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.lu.add(2),e.next=12,ff(r);case 12:r._u.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),Kf.apply(this,arguments)}function Gf(e){return e.mu||(e.mu=function(e,t,n){var r=_s(e);return r.tu(),new af(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:bf.bind(null,e),Jr:Tf.bind(null,e),Go:Ef.bind(null,e)}),e.fu.push(function(){var t=Ke(He().mark((function t(n){return He().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.mu.No(),kf(e)?gf(e):e._u.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.mu.stop();case 6:wf(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.mu}function Xf(e){return e.gu||(e.gu=function(e,t,n){var r=_s(e);return r.tu(),new of(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:jf.bind(null,e),Jr:qf.bind(null,e),Yo:Uf.bind(null,e),Jo:Vf.bind(null,e)}),e.fu.push(function(){var t=Ke(He().mark((function t(n){return He().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.gu.No(),t.next=4,Af(e);case 4:t.next=9;break;case 6:return t.next=8,e.gu.stop();case 8:e.au.length>0&&(ps("RemoteStore","Stopping write stream with ".concat(e.au.length," pending writes")),e.au=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}var $f=function(){function e(t,n,r,i,a){p(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new xs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return m(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new bs(ws.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Zf(e,t){if(vs("AsyncQueue","".concat(t,": ").concat(e)),Zs(e))return new bs(ws.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Jf=function(){function e(t){p(this,e),this.comparator=t?function(e,n){return t(e,n)||Vs.comparator(e.key,n.key)}:function(e,t){return Vs.comparator(e.key,t.key)},this.keyedMap=lc(),this.sortedSet=new ru(this.comparator)}return m(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),ed=function(){function e(){p(this,e),this.yu=new ru(Vs.comparator)}return m(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.yu.get(t);n?0!==e.type&&3===n.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==n.type?this.yu=this.yu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.yu=this.yu.remove(t):1===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):gs():this.yu=this.yu.insert(t,e)}},{key:"pu",value:function(){var e=[];return this.yu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),td=function(){function e(t,n,r,i,a,o,s,u){p(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u}return m(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ml(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,Jf.emptySet(n),a,r,i,!0,!1)}}]),e}(),nd=m((function e(){p(this,e),this.Iu=void 0,this.listeners=[]})),rd=m((function e(){p(this,e),this.queries=new ac((function(e){return yl(e)}),ml),this.onlineState="Unknown",this.Tu=new Set}));function id(e,t){return ad.apply(this,arguments)}function ad(){return ad=Ke(He().mark((function e(t,n){var r,i,a,o,s;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=_s(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new nd),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Iu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=Zf(e.t0,"Initialization of query '".concat(gl(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.Eu(r.onlineState),o.Iu&&n.Au(o.Iu)&&cd(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),ad.apply(this,arguments)}function od(e,t){return sd.apply(this,arguments)}function sd(){return sd=Ke(He().mark((function e(t,n){var r,i,a,o,s;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=_s(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),sd.apply(this,arguments)}function ud(e,t){var n,r=_s(e),i=!1,a=S(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var l,c=S(u.listeners);try{for(c.s();!(l=c.n()).done;){l.value.Au(o)&&(i=!0)}}catch(h){c.e(h)}finally{c.f()}u.Iu=o}}}catch(h){a.e(h)}finally{a.f()}i&&cd(r)}function ld(e,t,n){var r=_s(e),i=r.queries.get(t);if(i){var a,o=S(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function cd(e){e.Tu.forEach((function(e){e.next()}))}var hd=function(){function e(t,n,r){p(this,e),this.query=t,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}return m(e,[{key:"Au",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=S(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new td(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),a=!0):this.Vu(e,this.onlineState)&&(this.Su(e),a=!0),this.Pu=e,a}},{key:"onError",value:function(e){this.Ru.error(e)}},{key:"Eu",value:function(e){this.onlineState=e;var t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}},{key:"Vu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Du||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Su",value:function(e){e=td.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}]),e}();var fd=m((function e(t){p(this,e),this.key=t})),dd=m((function e(t){p(this,e),this.key=t})),pd=function(){function e(t,n){p(this,e),this.query=t,this.Fu=n,this.$u=null,this.current=!1,this.Bu=mc(),this.mutatedKeys=mc(),this.Lu=wl(t),this.Uu=new Jf(this.Lu)}return m(e,[{key:"qu",get:function(){return this.Fu}},{key:"Ku",value:function(e,t){var n=this,r=t?t.Gu:new ed,i=t?t.Uu:this.Uu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var c=i.get(e),h=kl(n.query,t)?t:null,f=!!c&&n.mutatedKeys.has(c.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;c&&h?c.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Qu(c,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.Lu(h,u)>0||l&&n.Lu(h,l)<0)&&(s=!0)):!c&&h?(r.track({type:0,doc:h}),p=!0):c&&!h&&(r.track({type:1,doc:c}),p=!0,(u||l)&&(s=!0)),p&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var c="F"===this.query.limitType?o.last():o.first();o=o.delete(c.key),a=a.delete(c.key),r.track({type:1,doc:c})}return{Uu:o,Gu:r,Mi:s,mutatedKeys:a}}},{key:"Qu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;var a=e.Gu.pu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gs()}};return n(e)-n(t)}(e.type,t.type)||r.Lu(e.doc,t.doc)})),this.ju(n);var o=t?this.Wu():[],s=0===this.Bu.size&&this.current?1:0,u=s!==this.$u;return this.$u=s,0!==a.length||u?{snapshot:new td(this.query,e.Uu,i,a,e.mutatedKeys,0===s,u,!1),zu:o}:{zu:o}}},{key:"Eu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new ed,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{zu:[]}}},{key:"Hu",value:function(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}},{key:"ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Fu=t.Fu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Fu=t.Fu.delete(e)})),this.current=e.current)}},{key:"Wu",value:function(){var e=this;if(!this.current)return[];var t=this.Bu;this.Bu=mc(),this.Uu.forEach((function(t){e.Hu(t.key)&&(e.Bu=e.Bu.add(t.key))}));var n=[];return t.forEach((function(t){e.Bu.has(t)||n.push(new dd(t))})),this.Bu.forEach((function(e){t.has(e)||n.push(new fd(e))})),n}},{key:"Ju",value:function(e){this.Fu=e.ji,this.Bu=mc();var t=this.Ku(e.documents);return this.applyChanges(t,!0)}},{key:"Yu",value:function(){return td.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}]),e}(),vd=m((function e(t,n,r){p(this,e),this.query=t,this.targetId=n,this.view=r})),md=m((function e(t){p(this,e),this.key=t,this.Xu=!1})),yd=function(){function e(t,n,r,i,a,o){p(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Zu={},this.tc=new ac((function(e){return yl(e)}),ml),this.ec=new Map,this.nc=new Set,this.sc=new ru(Vs.comparator),this.ic=new Map,this.rc=new bh,this.oc={},this.uc=new Map,this.cc=mh.Rn(),this.onlineState="Unknown",this.ac=void 0}return m(e,[{key:"isPrimaryClient",get:function(){return!0===this.ac}}]),e}();function gd(e,t){return kd.apply(this,arguments)}function kd(){return kd=Ke(He().mark((function e(t,n){var r,i,a,o,s,u;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Yd(t),!(o=r.tc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Yu(),e.next=15;break;case 6:return e.next=8,zh(r.localStore,pl(n));case 8:return s=e.sent,r.isPrimaryClient&&pf(r.remoteStore,s),u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=14,_d(r,n,i,"current"===u);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),kd.apply(this,arguments)}function _d(e,t,n,r){return wd.apply(this,arguments)}function wd(){return wd=Ke(He().mark((function e(t,n,r,i){var a,o,s,u,l,c;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.hc=function(e,n,r){return function(){var e=Ke(He().mark((function e(t,n,r,i){var a,o,s;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Ku(r),e.t0=a.Mi,!e.t0){e.next=6;break}return e.next=5,Qh(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Ku(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Ud(t,n.targetId,s.zu),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Qh(t.localStore,n,!0);case 3:return a=e.sent,o=new pd(n,a.ji),s=o.Ku(a.documents),u=_c.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),l=o.applyChanges(s,t.isPrimaryClient,u),Ud(t,r,l.zu),c=new vd(n,r,o),e.abrupt("return",(t.tc.set(n,c),t.ec.has(r)?t.ec.get(r).push(n):t.ec.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),wd.apply(this,arguments)}function bd(e,t){return xd.apply(this,arguments)}function xd(){return xd=Ke(He().mark((function e(t,n){var r,i,a;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=_s(t),i=r.tc.get(n),!((a=r.ec.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ec.set(i.targetId,a.filter((function(e){return!ml(e,n)}))),void r.tc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,qh(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),vf(r.remoteStore,i.targetId),jd(r,i.targetId)})).catch(Gs);case 9:e.next=14;break;case 11:return jd(r,i.targetId),e.next=14,qh(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),xd.apply(this,arguments)}function Td(e,t,n){return Cd.apply(this,arguments)}function Cd(){return Cd=Ke(He().mark((function e(t,n,r){var i,a,o;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Kd(t),e.prev=1,e.next=4,function(e,t){var n,r,i=_s(e),a=Ps.now(),o=t.reduce((function(e,t){return e.add(t.key)}),mc());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var s=sc(),u=mc();return i.Ui.getEntries(e,o).next((function(e){(s=e).forEach((function(e,t){t.isValidDocument()||(u=u.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,s)})).next((function(r){n=r;var o,s=[],u=S(t);try{for(u.s();!(o=u.n()).done;){var l=o.value,c=Ql(l,n.get(l.key).overlayedDocument);null!=c&&s.push(new Kl(l.key,c,Uu(c.value.mapValue),Ul.exists(!0)))}}catch(h){u.e(h)}finally{u.f()}return i.mutationQueue.addMutationBatch(e,a,s,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,u);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:cc(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.oc[e.currentUser.toKey()];r||(r=new ru(Rs)),r=r.insert(t,n),e.oc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,zd(i,a.changes);case 9:return e.next=11,Af(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Zf(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Cd.apply(this,arguments)}function Ed(e,t){return Sd.apply(this,arguments)}function Sd(){return Sd=Ke(He().mark((function e(t,n){var r,i;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_s(t),e.prev=1,e.next=4,Uh(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ic.get(t);n&&(ks(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Xu=!0:e.modifiedDocuments.size>0?ks(n.Xu):e.removedDocuments.size>0&&(ks(n.Xu),n.Xu=!1))})),e.next=8,zd(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Gs(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Sd.apply(this,arguments)}function Md(e,t,n){var r=_s(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.tc.forEach((function(e,n){var r=n.view.Eu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=_s(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=S(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Eu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&cd(n)}(r.eventManager,t),i.length&&r.Zu.Go(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Id(e,t,n){return Nd.apply(this,arguments)}function Nd(){return Nd=Ke(He().mark((function e(t,n,r){var i,a,o,s,u,l;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=_s(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.ic.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new ru(Vs.comparator)).insert(o,Bu.newNoDocument(o,Ls.min())),u=mc().add(o),l=new kc(Ls.min(),new Map,new ou(Rs),s,u),e.next=9,Ed(i,l);case 9:i.sc=i.sc.remove(o),i.ic.delete(n),Vd(i),e.next=16;break;case 14:return e.next=16,qh(i.localStore,n,!1).then((function(){return jd(i,n,r)})).catch(Gs);case 16:case"end":return e.stop()}}),e)}))),Nd.apply(this,arguments)}function Ad(e,t){return Dd.apply(this,arguments)}function Dd(){return Dd=Ke(He().mark((function e(t,n){var r,i,a;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_s(t),i=n.batch.batchId,e.prev=1,e.next=4,jh(r.localStore,n);case 4:return a=e.sent,Ld(r,i,null),Pd(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,zd(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Gs(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Dd.apply(this,arguments)}function Rd(e,t,n){return Od.apply(this,arguments)}function Od(){return Od=Ke(He().mark((function e(t,n,r){var i,a;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_s(t),e.prev=1,e.next=4,function(e,t){var n=_s(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return ks(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Ld(i,n,r),Pd(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,zd(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Gs(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Od.apply(this,arguments)}function Pd(e,t){(e.uc.get(t)||[]).forEach((function(e){e.resolve()})),e.uc.delete(t)}function Ld(e,t,n){var r=_s(e),i=r.oc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.oc[r.currentUser.toKey()]=i}}function jd(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=S(e.ec.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.tc.delete(a),n&&e.Zu.lc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ec.delete(t),e.isPrimaryClient&&e.rc.us(t).forEach((function(t){e.rc.containsKey(t)||Fd(e,t)}))}function Fd(e,t){e.nc.delete(t.path.canonicalString());var n=e.sc.get(t);null!==n&&(vf(e.remoteStore,n),e.sc=e.sc.remove(t),e.ic.delete(n),Vd(e))}function Ud(e,t,n){var r,i=S(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof fd?(e.rc.addReference(a.key,t),Bd(e,a)):a instanceof dd?(ps("SyncEngine","Document no longer in limbo: "+a.key),e.rc.removeReference(a.key,t),e.rc.containsKey(a.key)||Fd(e,a.key)):gs()}}catch(o){i.e(o)}finally{i.f()}}function Bd(e,t){var n=t.key,r=n.path.canonicalString();e.sc.get(n)||e.nc.has(r)||(ps("SyncEngine","New document in limbo: "+n),e.nc.add(r),Vd(e))}function Vd(e){for(;e.nc.size>0&&e.sc.size<e.maxConcurrentLimboResolutions;){var t=e.nc.values().next().value;e.nc.delete(t);var n=new Vs(Fs.fromString(t)),r=e.cc.next();e.ic.set(r,new md(n)),e.sc=e.sc.insert(n,r),pf(e.remoteStore,new lh(pl(ul(n.path)),r,2,Js.ot))}}function zd(e,t,n){return qd.apply(this,arguments)}function qd(){return qd=Ke(He().mark((function e(t,n,r){var i,a,o,s;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=_s(t),a=[],o=[],s=[],e.t0=i.tc.isEmpty(),e.t0){e.next=9;break}return i.tc.forEach((function(e,t){s.push(i.hc(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=Ah.Vi(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.Zu.Go(a),e.next=9,function(){var e=Ke(He().mark((function e(t,n){var r,i,a,o,s,u,l,c;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_s(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return $s.forEach(n,(function(t){return $s.forEach(t.Pi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return $s.forEach(t.vi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Zs(e.t0)){e.next=10;break}throw e.t0;case 10:ps("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=S(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.$i.get(s),l=u.snapshotVersion,c=u.withLastLimboFreeSnapshotVersion(l),r.$i=r.$i.insert(s,c))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),qd.apply(this,arguments)}function Wd(e,t){return Qd.apply(this,arguments)}function Qd(){return Qd=Ke(He().mark((function e(t,n){var r,i;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=_s(t)).currentUser.isEqual(n)){e.next=11;break}return ps("SyncEngine","User change. New user:",n.toKey()),e.next=5,Ph(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.uc.forEach((function(e){e.forEach((function(e){e.reject(new bs(ws.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.uc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,zd(r,i.Ki);case 11:case"end":return e.stop()}}),e)}))),Qd.apply(this,arguments)}function Hd(e,t){var n=_s(e),r=n.ic.get(t);if(r&&r.Xu)return mc().add(r.key);var i=mc(),a=n.ec.get(t);if(!a)return i;var o,s=S(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,l=n.tc.get(u);i=i.unionWith(l.view.qu)}}catch(c){s.e(c)}finally{s.f()}return i}function Yd(e){var t=_s(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Ed.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Hd.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Id.bind(null,t),t.Zu.Go=ud.bind(null,t.eventManager),t.Zu.lc=ld.bind(null,t.eventManager),t}function Kd(e){var t=_s(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Ad.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Rd.bind(null,t),t}var Gd=function(){function e(){p(this,e),this.synchronizeTabs=!1}return m(e,[{key:"initialize",value:function(){var e=Ke(He().mark((function e(t){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.wt=tf(t.databaseInfo.databaseId),this.sharedClientState=this.dc(t),this.persistence=this._c(t),e.next=5,this.persistence.start();case 5:this.localStore=this.wc(t),this.gcScheduler=this.mc(t,this.localStore),this.indexBackfillerScheduler=this.gc(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"mc",value:function(e,t){return null}},{key:"gc",value:function(e,t){return null}},{key:"wc",value:function(e){return Oh(this.persistence,new Dh,e.initialUser,this.wt)}},{key:"_c",value:function(e){return new Mh(Nh.Os,this.wt)}},{key:"dc",value:function(e){return new Kh}},{key:"terminate",value:function(){var e=Ke(He().mark((function e(){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Xd=function(){function e(){p(this,e)}return m(e,[{key:"initialize",value:function(){var e=Ke(He().mark((function e(t,n){var r=this;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Md(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Wd.bind(null,this.syncEngine),e.next=12,Yf(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new rd}},{key:"createDatastore",value:function(e){var t,n=tf(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Jh(t));return function(e,t,n,r){return new sf(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Md(o.syncEngine,e,0)},a=Xh.V()?new Xh:new Gh,new lf(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new yd(e,t,n,r,i,a);return o&&(s.ac=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Ke(He().mark((function e(t){var n;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_s(t),ps("RemoteStore","RemoteStore shutting down."),n.lu.add(5),e.next=5,ff(n);case 5:n.du.shutdown(),n._u.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();var $d=function(){function e(t){p(this,e),this.observer=t,this.muted=!1}return m(e,[{key:"next",value:function(e){this.observer.next&&this.Ic(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ic(this.observer.error,e):vs("Uncaught Error in snapshot listener:",e)}},{key:"Tc",value:function(){this.muted=!0}},{key:"Ic",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Zd=function(){function e(t,n,r,i){var a=this;p(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=cs.UNAUTHENTICATED,this.clientId=Ds.I(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Ke(He().mark((function e(t){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ps("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return ps("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return m(e,[{key:"getConfiguration",value:function(){var e=Ke(He().mark((function e(){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new bs(ws.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new xs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Ke(He().mark((function n(){var r;return He().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Zf(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function Jd(e,t){return ep.apply(this,arguments)}function ep(){return ep=Ke(He().mark((function e(t,n){var r,i;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),ps("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Ke(He().mark((function e(t){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Ph(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),ep.apply(this,arguments)}function tp(e,t){return np.apply(this,arguments)}function np(){return np=Ke(He().mark((function e(t,n){var r,i;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,rp(t);case 3:return r=e.sent,ps("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Qf(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Qf(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),np.apply(this,arguments)}function rp(e){return ip.apply(this,arguments)}function ip(){return ip=Ke(He().mark((function e(t){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return ps("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,Jd(t,new Gd);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),ip.apply(this,arguments)}function ap(e){return op.apply(this,arguments)}function op(){return op=Ke(He().mark((function e(t){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return ps("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,tp(t,new Xd);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),op.apply(this,arguments)}function sp(e){return ap(e).then((function(e){return e.syncEngine}))}function up(e){return lp.apply(this,arguments)}function lp(){return lp=Ke(He().mark((function e(t){var n,r;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ap(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=gd.bind(null,n.syncEngine),r.onUnlisten=bd.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),lp.apply(this,arguments)}function cp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new xs;return e.asyncQueue.enqueueAndForget(Ke(He().mark((function i(){return He().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new $d({next:function(n){t.enqueueAndForget((function(){return od(e,o)})),n.fromCache&&"server"===r.source?i.reject(new bs(ws.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new hd(n,a,{includeMetadataChanges:!0,Du:!0});return id(e,o)},i.next=3,up(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var hp=new Map;function fp(e,t,n){if(!n)throw new bs(ws.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function dp(e){if(!Vs.isDocumentKey(e))throw new bs(ws.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function pp(e){if(Vs.isDocumentKey(e))throw new bs(ws.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function vp(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":gs()}function mp(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new bs(ws.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=vp(e);throw new bs(ws.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}var yp=function(){function e(t){var n;if(p(this,e),void 0===t.host){if(void 0!==t.ssl)throw new bs(ws.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new bs(ws.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,function(e,t,n,r){if(!0===t&&!0===r)throw new bs(ws.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return m(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),gp=function(){function e(t,n,r){p(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yp({}),this._settingsFrozen=!1,t instanceof gu?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new bs(ws.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gu(e.options.projectId)}(t))}return m(e,[{key:"app",get:function(){if(!this._app)throw new bs(ws.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new bs(ws.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yp(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Cs;switch(e.type){case"gapi":var t=e.client;return ks(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Ms(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new bs(ws.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=hp.get(e);t&&(ps("ComponentProvider","Removing Datastore"),hp.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();var kp=function(){function e(t,n,r){p(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return m(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new wp(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),_p=function(){function e(t,n,r){p(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return m(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),wp=function(e){g(n,e);var t=T(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this,e,r,ul(i)))._path=i,a.type="collection",a}return m(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new kp(this.firestore,null,new Vs(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(_p);function bp(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=jt(e),fp("collection","path",t),e instanceof gp){var a=Fs.fromString.apply(Fs,[t].concat(r));return pp(a),new wp(e,null,a)}if(!(e instanceof kp||e instanceof wp))throw new bs(ws.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Fs.fromString.apply(Fs,[t].concat(r)));return pp(o),new wp(e.firestore,null,o)}function xp(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=jt(e),1===arguments.length&&(t=Ds.I()),fp("doc","path",t),e instanceof gp){var a=Fs.fromString.apply(Fs,[t].concat(r));return dp(a),new kp(e,null,new Vs(a))}if(!(e instanceof kp||e instanceof wp))throw new bs(ws.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Fs.fromString.apply(Fs,[t].concat(r)));return dp(o),new kp(e.firestore,e instanceof wp?e.converter:null,new Vs(o))}var Tp=function(){function e(){var t=this;p(this,e),this.Mc=Promise.resolve(),this.Oc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new nf(this,"async_queue_retry"),this.Kc=function(){var e=ef();e&&ps("AsyncQueue","Visibility state changed to "+e.visibilityState),t.So.Eo()};var n=ef();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Kc)}return m(e,[{key:"isShuttingDown",get:function(){return this.Fc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Gc(),this.Qc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;var t=ef();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Gc(),this.Fc)return new Promise((function(){}));var n=new xs;return this.Qc((function(){return t.Fc&&t.Uc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Oc.push(e),t.jc()}))}},{key:"jc",value:function(){var e=Ke(He().mark((function e(){var t=this;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Oc.length){e.next=14;break}return e.prev=1,e.next=4,this.Oc[0]();case 4:this.Oc.shift(),this.So.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Zs(e.t0)){e.next=12;break}throw e.t0;case 12:ps("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Oc.length>0&&this.So.Io((function(){return t.jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Qc",value:function(e){var t=this,n=this.Mc.then((function(){return t.Lc=!0,e().catch((function(e){t.Bc=e,t.Lc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw vs("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Lc=!1,e}))}));return this.Mc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Gc(),this.qc.indexOf(e)>-1&&(t=0);var i=$f.createAndSchedule(this,e,t,n,(function(e){return r.Wc(e)}));return this.$c.push(i),i}},{key:"Gc",value:function(){this.Bc&&gs()}},{key:"verifyOperationInProgress",value:function(){}},{key:"zc",value:function(){var e=Ke(He().mark((function e(){var t;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Mc,e.next=3,t;case 3:if(t!==this.Mc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t,n=S(this.$c);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Jc",value:function(e){var t=this;return this.zc().then((function(){t.$c.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=S(t.$c);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.zc()}))}},{key:"Yc",value:function(e){this.qc.push(e)}},{key:"Wc",value:function(e){var t=this.$c.indexOf(e);this.$c.splice(t,1)}}]),e}();function Cp(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=S(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var Ep=function(e){g(n,e);var t=T(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new Tp,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return m(n,[{key:"_terminate",value:function(){return this._firestoreClient||Mp(this),this._firestoreClient.terminate()}}]),n}(gp);function Sp(e){return e._firestoreClient||Mp(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Mp(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new yu(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Zd(e._authCredentials,e._appCheckCredentials,e._queue,r)}var Ip=function(){function e(){p(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new bs(ws.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bs(n)}return m(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var Np=function(){function e(t){p(this,e),this._byteString=t}return m(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(lu.fromBase64String(t))}catch(t){throw new bs(ws.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(lu.fromUint8Array(t))}}]),e}(),Ap=m((function e(t){p(this,e),this._methodName=t})),Dp=function(){function e(t,n){if(p(this,e),!isFinite(t)||t<-90||t>90)throw new bs(ws.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new bs(ws.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return m(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Rs(this._lat,e._lat)||Rs(this._long,e._long)}}]),e}(),Rp=/^__.*__$/,Op=function(){function e(t,n,r){p(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return m(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Kl(e,this.data,this.fieldMask,t,this.fieldTransforms):new Yl(e,this.data,t,this.fieldTransforms)}}]),e}(),Pp=function(){function e(t,n,r){p(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return m(e,[{key:"toMutation",value:function(e,t){return new Kl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function Lp(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gs()}}var jp=function(){function e(t,n,r,i,a,o){p(this,e),this.settings=t,this.databaseId=n,this.wt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Xc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return m(e,[{key:"path",get:function(){return this.settings.path}},{key:"Zc",get:function(){return this.settings.Zc}},{key:"ta",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ea",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.sa(e),r}},{key:"ia",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.Xc(),r}},{key:"ra",value:function(e){return this.ta({path:void 0,na:!0})}},{key:"oa",value:function(e){return Zp(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Xc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.sa(this.path.get(e))}},{key:"sa",value:function(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(Lp(this.Zc)&&Rp.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}]),e}(),Fp=function(){function e(t,n,r){p(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.wt=r||tf(t)}return m(e,[{key:"aa",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new jp({Zc:e,methodName:t,ca:n,path:Bs.emptyPath(),na:!1,ua:r},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}]),e}();function Up(e){var t=e._freezeSettings(),n=tf(e._databaseId);return new Fp(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Bp(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.aa(a.merge||a.mergeFields?2:0,t,n,i);Kp("Data must be an object, but it was:",o,r);var s,u,l=Hp(r,o);if(a.merge)s=new uu(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var c,h=[],f=S(a.mergeFields);try{for(f.s();!(c=f.n()).done;){var d=c.value,p=Gp(t,d,n);if(!o.contains(p))throw new bs(ws.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));Jp(h,p)||h.push(p)}}catch(v){f.e(v)}finally{f.f()}s=new uu(h),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new Op(new Fu(l),s,u)}var Vp=function(e){g(n,e);var t=T(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Zc)throw 1===e.Zc?e.oa("".concat(this._methodName,"() can only appear at the top level of your update data")):e.oa("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Ap);function zp(e,t,n,r){var i=e.aa(1,t,n);Kp("Data must be an object, but it was:",i,r);var a=[],o=Fu.empty();tu(r,(function(e,r){var s=$p(t,e,n);r=jt(r);var u=i.ia(s);if(r instanceof Vp)a.push(s);else{var l=Qp(r,u);null!=l&&(a.push(s),o.set(s,l))}}));var s=new uu(a);return new Pp(o,s,i.fieldTransforms)}function qp(e,t,n,r,i,a){var o=e.aa(1,t,n),s=[Gp(t,r,n)],u=[i];if(a.length%2!=0)throw new bs(ws.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var l=0;l<a.length;l+=2)s.push(Gp(t,a[l])),u.push(a[l+1]);for(var c=[],h=Fu.empty(),f=s.length-1;f>=0;--f)if(!Jp(c,s[f])){var d=s[f],p=u[f];p=jt(p);var v=o.ia(d);if(p instanceof Vp)c.push(d);else{var m=Qp(p,v);null!=m&&(c.push(d),h.set(d,m))}}var y=new uu(c);return new Pp(h,y,o.fieldTransforms)}function Wp(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Qp(n,e.aa(r?4:3,t))}function Qp(e,t){if(Yp(e=jt(e)))return Kp("Unsupported field value:",t,e),Hp(e,t);if(e instanceof Ap)return function(e,t){if(!Lp(t.Zc))throw t.oa("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.oa("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.na&&4!==t.Zc)throw t.oa("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=S(e);try{for(a.s();!(n=a.n()).done;){var o=Qp(n.value,t.ra(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=jt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Cl(t.wt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Ps.fromDate(e);return{timestampValue:Ac(t.wt,n)}}if(e instanceof Ps){var r=new Ps(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ac(t.wt,r)}}if(e instanceof Dp)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Np)return{bytesValue:Dc(t.wt,e._byteString)};if(e instanceof kp){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.oa("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Pc(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.oa("Unsupported field value: ".concat(vp(e)))}(e,t)}function Hp(e,t){var n={};return nu(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):tu(e,(function(e,r){var i=Qp(r,t.ea(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Yp(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ps||e instanceof Dp||e instanceof Np||e instanceof kp||e instanceof Ap)}function Kp(e,t,n){if(!Yp(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=vp(n);throw"an object"===r?t.oa(e+" a custom object"):t.oa(e+" "+r)}}function Gp(e,t,n){if((t=jt(t))instanceof Ip)return t._internalPath;if("string"==typeof t)return $p(e,t);throw Zp("Field path arguments must be of type string or ",e,!1,void 0,n)}var Xp=new RegExp("[~\\*/\\[\\]]");function $p(e,t,n){if(t.search(Xp)>=0)throw Zp("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return C(Ip,d(t.split(".")))._internalPath}catch(r){throw Zp("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Zp(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new bs(ws.INVALID_ARGUMENT,s+e+u)}function Jp(e,t){return e.some((function(e){return e.isEqual(t)}))}var ev=function(){function e(t,n,r,i,a){p(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return m(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new kp(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new tv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(nv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),tv=function(e){g(n,e);var t=T(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"data",value:function(){return Xe(k(n.prototype),"data",this).call(this)}}]),n}(ev);function nv(e,t){return"string"==typeof t?$p(e,t):t instanceof Ip?t._internalPath:t._delegate._internalPath}var rv=function(){function e(t,n){p(this,e),this.hasPendingWrites=t,this.fromCache=n}return m(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),iv=function(e){g(n,e);var t=T(n);function n(e,r,i,a,o,s){var u;return p(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return m(n,[{key:"exists",value:function(){return Xe(k(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new av(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(nv("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(ev),av=function(e){g(n,e);var t=T(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Xe(k(n.prototype),"data",this).call(this,e)}}]),n}(iv),ov=function(){function e(t,n,r,i){p(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new rv(i.hasPendingWrites,i.fromCache),this.query=r}return m(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new av(n._firestore,n._userDataWriter,r.key,r,new rv(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new bs(ws.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new av(e._firestore,e._userDataWriter,t.doc.key,t.doc,new rv(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new av(e._firestore,e._userDataWriter,t.doc.key,t.doc,new rv(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:sv(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function sv(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gs()}}function uv(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new bs(ws.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var lv=m((function e(){p(this,e)}));function cv(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var hv=function(e){g(n,e);var t=T(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this)).fa=e,a.da=r,a._a=i,a.type="where",a}return m(n,[{key:"_apply",value:function(e){var t=Up(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new bs(ws.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){pv(o,a);var u,l=[],c=S(o);try{for(c.s();!(u=c.n()).done;){var h=u.value;l.push(dv(r,e,h))}}catch(d){c.e(d)}finally{c.f()}s={arrayValue:{values:l}}}else s=dv(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||pv(o,a),s=Wp(n,"where",o,"in"===a||"not-in"===a);var f=Hu.create(i,a,s);return function(e,t){if(t.ht()){var n=hl(e);if(null!==n&&!n.isEqual(t.field))throw new bs(ws.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=cl(e);null!==r&&vv(e,t.field,r)}var i=function(e,t){var n,r=S(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new bs(ws.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new bs(ws.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,f),f}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new _p(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new ol(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(lv);function fv(e,t,n){var r=t,i=nv("where",e);return new hv(i,r,n)}function dv(e,t,n){if("string"==typeof(n=jt(n))){if(""===n)throw new bs(ws.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fl(t)&&-1!==n.indexOf("/"))throw new bs(ws.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Fs.fromString(n));if(!Vs.isDocumentKey(r))throw new bs(ws.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Nu(e,new Vs(r))}if(n instanceof kp)return Nu(e,n._key);throw new bs(ws.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(vp(n),"."))}function pv(e,t){if(!Array.isArray(e)||0===e.length)throw new bs(ws.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new bs(ws.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function vv(e,t,n){if(!n.isEqual(t))throw new bs(ws.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var mv=function(){function e(){p(this,e)}return m(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(xu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(du(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw gs()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return tu(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new Dp(fu(e.latitude),fu(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=vu(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(mu(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=hu(e);return new Ps(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Fs.fromString(e);ks(nh(n));var r=new gu(n.get(1),n.get(3)),i=new Vs(n.popFirst(5));return r.isEqual(t)||vs("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function yv(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var gv=function(e){g(n,e);var t=T(n);function n(e){var r;return p(this,n),(r=t.call(this)).firestore=e,r}return m(n,[{key:"convertBytes",value:function(e){return new Np(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new kp(this.firestore,null,t)}}]),n}(mv);function kv(e){e=mp(e,_p);var t=mp(e.firestore,Ep),n=Sp(t),r=new gv(t);return uv(e._query),cp(n,e._query).then((function(n){return new ov(t,r,e,n)}))}function _v(e,t,n){e=mp(e,kp);for(var r=mp(e.firestore,Ep),i=Up(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return xv(r,[("string"==typeof(t=jt(t))||t instanceof Ip?qp(i,"updateDoc",e._key,t,n,o):zp(i,"updateDoc",e._key,t)).toMutation(e._key,Ul.exists(!0))])}function wv(e,t){var n=mp(e.firestore,Ep),r=xp(e),i=yv(e.converter,t);return xv(n,[Bp(Up(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Ul.exists(!1))]).then((function(){return r}))}function bv(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=jt(e);var s={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||Cp(n[u])||(s=n[u],u++);var l,c,h,f={includeMetadataChanges:s.includeMetadataChanges};if(Cp(n[u])){var d=n[u];n[u]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[u+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[u+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof kp)c=mp(e.firestore,Ep),h=ul(e._key.path),l={next:function(t){n[u]&&n[u](Tv(c,e,t))},error:n[u+1],complete:n[u+2]};else{var p=mp(e,_p);c=mp(p.firestore,Ep),h=p._query;var v=new gv(c);l={next:function(e){n[u]&&n[u](new ov(c,v,p,e))},error:n[u+1],complete:n[u+2]},uv(e._query)}return function(e,t,n,r){var i=new $d(r),a=new hd(t,i,n);return e.asyncQueue.enqueueAndForget(Ke(He().mark((function t(){return He().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=id,t.next=3,up(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Tc(),e.asyncQueue.enqueueAndForget(Ke(He().mark((function t(){return He().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=od,t.next=3,up(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Sp(c),h,f,l)}function xv(e,t){return function(e,t){var n=new xs;return e.asyncQueue.enqueueAndForget(Ke(He().mark((function r(){return He().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Td,r.next=3,sp(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(Sp(e),t)}function Tv(e,t,n){var r=n.docs.get(t._key),i=new gv(e);return new iv(e,i,t._key,r,new rv(n.hasPendingWrites,n.fromCache),t.converter)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];hs="9.9.3",Sn(new Ft("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new Ep(i,new Es(e.getProvider("auth-internal")),new Ns(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),On(ls,"3.4.14",e),On(ls,"3.4.14","esm2017")}();On("firebase","9.9.3","app");var Cv="@firebase/database",Ev="0.13.5",Sv="";var Mv=function(){function e(t){p(this,e),this.domStorage_=t,this.prefix_="firebase:"}return m(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),xt(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:bt(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),Iv=function(){function e(){p(this,e),this.cache_={},this.isInMemoryStorage=!0}return m(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return Ct(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),Nv=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Mv(t)}}catch(n){}return new Iv},Av=Nv("localStorage"),Dv=Nv("sessionStorage"),Rv=new Gt("@firebase/database"),Ov=function(){var e=1;return function(){return e++}}(),Pv=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,tt(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new Dt;n.update(t);var r=n.digest();return it.encodeByteArray(r)},Lv=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?xt(r):r,t+=" "}return t},jv=null,Fv=!0,Uv=function(e,t){tt(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(Rv.logLevel=zt.VERBOSE,jv=Rv.log.bind(Rv),t&&Dv.set("logging_enabled",!0)):"function"===typeof e?jv=e:(jv=null,Dv.remove("logging_enabled"))},Bv=function(){if(!0===Fv&&(Fv=!1,null===jv&&!0===Dv.get("logging_enabled")&&Uv(!0)),jv){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Lv.apply(null,t);jv(r)}},Vv=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Bv.apply(void 0,[e].concat(n))}},zv=function(){var e="FIREBASE INTERNAL ERROR: "+Lv.apply(void 0,arguments);Rv.error(e)},qv=function(){var e="FIREBASE FATAL ERROR: ".concat(Lv.apply(void 0,arguments));throw Rv.error(e),new Error(e)},Wv=function(){var e="FIREBASE WARNING: "+Lv.apply(void 0,arguments);Rv.warn(e)},Qv=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Hv="[MIN_NAME]",Yv="[MAX_NAME]",Kv=function(e,t){if(e===t)return 0;if(e===Hv||t===Yv)return-1;if(t===Hv||e===Yv)return 1;var n=im(e),r=im(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},Gv=function(e,t){return e===t?0:e<t?-1:1},Xv=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+xt(t))},$v=function e(t){if("object"!==typeof t||null===t)return xt(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=xt(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},Zv=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Jv(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var em=function(e){tt(!Qv(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var u=s.join(""),l="";for(a=0;a<64;a+=8){var c=parseInt(u.substr(a,8),2).toString(16);1===c.length&&(c="0"+c),l+=c}return l.toLowerCase()};var tm=new RegExp("^-?(0*)\\d{1,10}$"),nm=-2147483648,rm=2147483647,im=function(e){if(tm.test(e)){var t=Number(e);if(t>=nm&&t<=rm)return t}return null},am=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw Wv("Exception was thrown by user callback.",e),t}),Math.floor(0))}},om=function(e,t){var n=setTimeout(e,t);return"object"===typeof n&&n.unref&&n.unref(),n},sm=function(){function e(t,n){var r=this;p(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return m(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){Wv('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),um=function(){function e(t,n,r){var i=this;p(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return m(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(Bv("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Wv(e)}}]),e}(),lm=function(){function e(t){p(this,e),this.accessToken=t}return m(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();lm.OWNER="owner";var cm="5",hm=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,fm="websocket",dm="long_polling",pm=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];p(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Av.get("host:"+t)||this._host}return m(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Av.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function vm(e,t,n){var r;if(tt("string"===typeof t,"typeof type must == string"),tt("object"===typeof n,"typeof params must == object"),t===fm)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==dm)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return Jv(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var mm=function(){function e(){p(this,e),this.counters_={}}return m(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Ct(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return ut(this.counters_)}}]),e}(),ym={},gm={};function km(e){var t=e.toString();return ym[t]||(ym[t]=new mm),ym[t]}var _m=function(){function e(t){p(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return m(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&am((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),wm="start",bm="close",xm=function(){function e(t,n,r,i,a,o,s){var u=this;p(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Vv(t),this.stats_=km(n),this.urlFn=function(e){return u.appCheckToken&&(e.ac=u.appCheckToken),vm(n,dm,e)}}return m(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new _m(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(vt()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Tm((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===wm)n.id=a,n.password=o;else{if(i!==bm)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=cm,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&hm.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=xt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=at(t),r=Zv(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!vt()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=xt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!vt()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),Tm=function(){function e(t,n,r,i){if(p(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,vt())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=Ov(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(s){Bv("frame writing exception"),s.stack&&Bv(s.stack),Bv(s)}}}return m(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;vt()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){Bv("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Bv("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),Cm=null;"undefined"!==typeof MozWebSocket?Cm=MozWebSocket:"undefined"!==typeof WebSocket&&(Cm=WebSocket);var Em=function(){function e(t,n,r,i,a,o,s){p(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Vv(this.connId),this.stats_=km(n),this.connURL=e.connectionURL_(n,o,s,i,r),this.nodeAdmin=n.nodeAdmin}return m(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Av.set("previous_websocket_failure",!0);try{var r;if(vt()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(cm,"/").concat(Sv,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/incommon",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new Cm(this.connURL,[],r)}catch(u){this.log_("Error instantiating WebSocket.");var s=u.message||u.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){Av.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=bt(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(tt(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=xt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=Zv(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=cm,!vt()&&"undefined"!==typeof location&&location.hostname&&hm.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a.ac=r),i&&(a.p=i),vm(e,fm,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==Cm&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return Av.isInMemoryStorage||!0===Av.get("previous_websocket_failure")}}]),e}();Em.responsesRequiredToBeHealthy=2,Em.healthyTimeout=3e4;var Sm=function(){function e(t){p(this,e),this.initTransports_(t)}return m(e,[{key:"initTransports_",value:function(t){var n=Em&&Em.isAvailable(),r=n&&!Em.previouslyFailed();if(t.webSocketOnly&&(n||Wv("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Em];else{var i,a=this.transports_=[],o=S(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var s=i.value;s&&s.isAvailable()&&a.push(s)}}catch(u){o.e(u)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[xm,Em]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();Sm.globalTransportInitialized_=!1;var Mm=function(){function e(t,n,r,i,a,o,s,u,l,c){p(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=u,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Vv("c:"+this.id+":"),this.transportManager_=new Sm(n),this.log_("Connection created"),this.start_()}return m(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=om((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=Xv("t",e),n=Xv("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=Xv("t",e),n=Xv("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=Xv("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?zv("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):zv("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),cm!==n&&Wv("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),om((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):om((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Av.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),Im=function(){function e(){p(this,e)}return m(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),Nm=function(){function e(t){p(this,e),this.allowedEvents_=t,this.listeners_={},tt(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return m(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=d(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){tt(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),Am=function(e){g(n,e);var t=T(n);function n(){var e;return p(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||ft()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return m(n,[{key:"getInitialEvent",value:function(e){return tt("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(Nm),Dm=function(){function e(t,n){if(p(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return m(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function Rm(){return new Dm("")}function Om(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Pm(e){return e.pieces_.length-e.pieceNum_}function Lm(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new Dm(e.pieces_,t)}function jm(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Fm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function Um(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Dm(t,0)}function Bm(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Dm)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new Dm(n,0)}function Vm(e){return e.pieceNum_>=e.pieces_.length}function zm(e,t){var n=Om(e),r=Om(t);if(null===n)return t;if(n===r)return zm(Lm(e),Lm(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function qm(e,t){if(Pm(e)!==Pm(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Wm(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(Pm(e)>Pm(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Qm=m((function e(t,n){p(this,e),this.errorPrefix_=n,this.parts_=Fm(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=Ot(this.parts_[r]);Hm(this)}));function Hm(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ym(e))}function Ym(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var Km=function(e){g(n,e);var t=T(n);function n(){var e,r,i;return p(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return m(n,[{key:"getInitialEvent",value:function(e){return tt("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(Nm),Gm=1e3,Xm=function(e){g(n,e);var t=T(n);function n(e,r,i,a,o,s,u,l){var c;if(p(this,n),(c=t.call(this)).repoInfo_=e,c.applicationId_=r,c.onDataUpdate_=i,c.onConnectStatus_=a,c.onServerInfoUpdate_=o,c.authTokenProvider_=s,c.appCheckTokenProvider_=u,c.authOverride_=l,c.id=n.nextPersistentConnectionId_++,c.log_=Vv("p:"+c.id+":"),c.interruptReasons_={},c.listens=new Map,c.outstandingPuts_=[],c.outstandingGets_=[],c.outstandingPutCount_=0,c.outstandingGetCount_=0,c.onDisconnectRequestQueue_=[],c.connected_=!1,c.reconnectDelay_=Gm,c.maxReconnectDelay_=3e5,c.securityDebugCallback_=null,c.lastSessionId=null,c.establishConnectionTimer_=null,c.visible_=!1,c.requestCBHash_={},c.requestNumber_=0,c.realtime_=null,c.authToken_=null,c.appCheckToken_=null,c.forceTokenRefresh_=!1,c.invalidAuthTokenCount_=0,c.invalidAppCheckTokenCount_=0,c.firstConnection_=!0,c.lastConnectionAttemptTime_=null,c.lastConnectionEstablishedTime_=null,l&&!vt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Km.getInstance().on("visible",c.onVisible_,b(c)),-1===e.host.indexOf("fblocal")&&Am.getInstance().on("online",c.onOnline_,b(c)),c}return m(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(xt(i)),tt(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new ct,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),tt(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),tt(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var s=o.d,u=o.s;n.warnOnListenWarnings_(s,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==u&&t.removeListen_(i,a),e.onComplete&&e.onComplete(u,s))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=Tt(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=Tt(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),tt(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+xt(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):zv("Unrecognized action received from server: "+xt(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;tt(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Gm,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Gm,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Gm),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=Ke(He().mark((function e(){var t,r,i,a,o,s,l,c,h,f,d,p,v,m,y=this;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,s=!1,l=null,c=function(){l?l.close():(s=!0,i())},h=function(e){tt(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(e)},this.realtime_={close:c,sendRequest:h},f=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);case 19:d=e.sent,p=u(d,2),v=p[0],m=p[1],s?Bv("getToken() completed but was canceled"):(Bv("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=m&&m.token,l=new Mm(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){Wv(e+" ("+y.repoInfo_.toString()+")"),y.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),s||(this.repoInfo_.nodeAdmin&&Wv(e.t0),c());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){Bv("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){Bv("Resuming connection for reason: "+e),delete this.interruptReasons_[e],St(this.interruptReasons_)&&(this.reconnectDelay_=Gm,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return $v(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new Dm(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){Bv("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){Bv("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=S(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=S(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(u){r.e(u)}finally{r.f()}}}catch(u){t.e(u)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}},{key:"sendConnectStats_",value:function(){var e={},t="js";vt()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+Sv.replace(/\./g,"-")]=1,ft()?e["framework.cordova"]=1:pt()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=Am.getInstance().currentlyOnline();return St(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&Ct(e,"w")){var n=Et(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();Wv("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(Im);Xm.nextPersistentConnectionId_=0,Xm.nextConnectionId_=0;var $m,Zm=function(){function e(t,n){p(this,e),this.name=t,this.node=n}return m(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),Jm=function(){function e(){p(this,e)}return m(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new Zm(Hv,e),r=new Zm(Hv,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return Zm.MIN}}]),e}(),ey=function(e){g(n,e);var t=T(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"compare",value:function(e,t){return Kv(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw nt("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return Zm.MIN}},{key:"maxPost",value:function(){return new Zm(Yv,$m)}},{key:"makePost",value:function(e,t){return tt("string"===typeof e,"KeyIndex indexValue must always be a string."),new Zm(e,$m)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return $m},set:function(e){$m=e}}]),n}(Jm),ty=new ey,ny=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;p(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return m(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),ry=function(){function e(t,n,r,i,a){p(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:oy.EMPTY_NODE,this.right=null!=a?a:oy.EMPTY_NODE}return m(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return oy.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return oy.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();ry.RED=!0,ry.BLACK=!1;var iy,ay=function(){function e(){p(this,e)}return m(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new ry(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),oy=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;p(this,e),this.comparator_=t,this.root_=n}return m(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,ry.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,ry.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new ny(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new ny(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new ny(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new ny(this.root_,null,this.comparator_,!0,e)}}]),e}();function sy(e,t){return Kv(e.name,t.name)}function uy(e,t){return Kv(e,t)}oy.EMPTY_NODE=new ay;var ly,cy,hy,fy=function(e){return"number"===typeof e?"number:"+em(e):"string:"+e},dy=function(e){if(e.isLeafNode()){var t=e.val();tt("string"===typeof t||"number"===typeof t||"object"===typeof t&&Ct(t,".sv"),"Priority must be a string or number.")}else tt(e===iy||e.isEmpty(),"priority of unexpected type.");tt(e===iy||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},py=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;p(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,tt(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),dy(this.priorityNode_)}return m(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return Vm(t)?this:".priority"===Om(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=Om(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(tt(".priority"!==r||1===Pm(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(Lm(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+fy(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?em(this.value_):this.value_,this.lazyHash_=Pv(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(tt(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return tt(i>=0,"Unknown leaf type: "+n),tt(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return ly},set:function(e){ly=e}}]),e}();py.VALUE_TYPE_ORDER=["object","boolean","number","string"];var vy,my,yy=function(e){g(n,e);var t=T(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Kv(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return Zm.MIN}},{key:"maxPost",value:function(){return new Zm(Yv,new py("[PRIORITY-POST]",hy))}},{key:"makePost",value:function(e,t){var n=cy(e);return new Zm(t,new py("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(Jm),gy=new yy,ky=Math.log(2),_y=function(){function e(t){p(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/ky,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return m(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),wy=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,s=i-r;if(0===s)return null;if(1===s)return a=e[r],o=n?n(a):a,new ry(o,a.node,ry.BLACK,null,null);var u=parseInt(s/2,10)+r,l=t(r,u),c=t(u+1,i);return a=e[u],o=n?n(a):a,new ry(o,a.node,ry.BLACK,l,c)},a=function(t){for(var r=null,a=null,o=e.length,s=function(t,r){var a=o-t,s=o;o-=t;var l=i(a+1,s),c=e[a],h=n?n(c):c;u(new ry(h,c.node,r,null,l))},u=function(e){r?(r.left=e,r=e):(a=e,r=e)},l=0;l<t.count;++l){var c=t.nextBitIsOne(),h=Math.pow(2,t.count-(l+1));c?s(h,ry.BLACK):(s(h,ry.BLACK),s(h,ry.RED))}return a}(new _y(e.length));return new oy(r||t,a)},by={},xy=function(){function e(t,n){p(this,e),this.indexes_=t,this.indexSet_=n}return m(e,[{key:"get",value:function(e){var t=Et(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof oy?t:null}},{key:"hasIndex",value:function(e){return Ct(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){tt(t!==ty,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(Zm.Wrap),s=o.getNext();s;)a=a||t.isDefinedOn(s.node),i.push(s),s=o.getNext();r=a?wy(i,t.getCompare()):by;var u=t.toString(),l=Object.assign({},this.indexSet_);l[u]=t;var c=Object.assign({},this.indexes_);return c[u]=r,new e(c,l)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(Mt(this.indexes_,(function(e,i){var a=Et(r.indexSet_,i);if(tt(a,"Missing index implementation for "+i),e===by){if(a.isDefinedOn(t.node)){for(var o=[],s=n.getIterator(Zm.Wrap),u=s.getNext();u;)u.name!==t.name&&o.push(u),u=s.getNext();return o.push(t),wy(o,a.getCompare())}return by}var l=n.get(t.name),c=e;return l&&(c=c.remove(new Zm(t.name,l))),c.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(Mt(this.indexes_,(function(e){if(e===by)return e;var r=n.get(t.name);return r?e.remove(new Zm(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return tt(by&&gy,"ChildrenNode.ts has not been loaded"),vy=vy||new e({".priority":by},{".priority":gy})}}]),e}(),Ty=function(){function e(t,n,r){p(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&dy(this.priorityNode_),this.children_.isEmpty()&&tt(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return m(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||my}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?my:t}},{key:"getChild",value:function(e){var t=Om(e);return null===t?this:this.getImmediateChild(t).getChild(Lm(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(tt(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new Zm(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?my:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=Om(e);if(null===n)return t;tt(".priority"!==Om(e)||1===Pm(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(Lm(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(gy,(function(o,s){n[o]=s.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var s in n)o[s]=n[s];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+fy(this.getPriority().val())+":"),this.forEachChild(gy,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":Pv(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Zm(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new Zm(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new Zm(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,Zm.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,Zm.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Cy?-1:0}},{key:"withIndex",value:function(t){if(t===ty||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===ty||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(gy),r=t.getIterator(gy),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===ty?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return my||(my=new e(new oy(uy),null,xy.Default))}}]),e}();Ty.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var Cy=new(function(e){g(n,e);var t=T(n);function n(){return p(this,n),t.call(this,new oy(uy),Ty.EMPTY_NODE,xy.Default)}return m(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return Ty.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(Ty));Object.defineProperties(Zm,{MIN:{value:new Zm(Hv,Ty.EMPTY_NODE)},MAX:{value:new Zm(Yv,Cy)}}),ey.__EMPTY_NODE=Ty.EMPTY_NODE,py.__childrenNodeConstructor=Ty,iy=Cy,function(e){hy=e}(Cy);function Ey(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return Ty.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),tt(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new py(n,Ey(t))}if(e instanceof Array){var r=Ty.EMPTY_NODE;return Jv(e,(function(t,n){if(Ct(e,t)&&"."!==t.substring(0,1)){var i=Ey(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(Ey(t))}var i=[],a=!1,o=e;if(Jv(o,(function(e,t){if("."!==e.substring(0,1)){var n=Ey(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new Zm(e,n)))}})),0===i.length)return Ty.EMPTY_NODE;var s=wy(i,sy,(function(e){return e.name}),uy);if(a){var u=wy(i,gy.getCompare());return new Ty(s,Ey(t),new xy({".priority":u},{".priority":gy}))}return new Ty(s,Ey(t),xy.Default)}!function(e){cy=e}(Ey);var Sy=function(e){g(n,e);var t=T(n);function n(e){var r;return p(this,n),(r=t.call(this)).indexPath_=e,tt(!Vm(e)&&".priority"!==Om(e),"Can't create PathIndex with empty path or .priority key"),r}return m(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Kv(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=Ey(e),r=Ty.EMPTY_NODE.updateChild(this.indexPath_,n);return new Zm(t,r)}},{key:"maxPost",value:function(){var e=Ty.EMPTY_NODE.updateChild(this.indexPath_,Cy);return new Zm(Yv,e)}},{key:"toString",value:function(){return Fm(this.indexPath_,0).join("/")}}]),n}(Jm),My=function(e){g(n,e);var t=T(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?Kv(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return Zm.MIN}},{key:"maxPost",value:function(){return Zm.MAX}},{key:"makePost",value:function(e,t){var n=Ey(e);return new Zm(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(Jm),Iy=new My,Ny="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){var e=0,t=[]}();function Ay(e){return{type:"value",snapshotNode:e}}function Dy(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Ry(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Oy(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var Py=function(){function e(){p(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=gy}return m(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"hasStartAfter",value:function(){return this.startAfterSet_}},{key:"hasEndBefore",value:function(){return this.endBeforeSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return tt(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return tt(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Hv}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return tt(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return tt(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Yv}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return tt(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===gy}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function Ly(e){var t,n={};return e.isDefault()||(e.index_===gy?t="$priority":e.index_===Iy?t="$value":e.index_===ty?t="$key":(tt(e.index_ instanceof Sy,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=xt(t),e.startSet_&&(n.startAt=xt(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+xt(e.indexStartName_))),e.endSet_&&(n.endAt=xt(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+xt(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function jy(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==gy&&(t.i=e.index_.toString()),t}var Fy=function(e){g(n,e);var t=T(n);function n(e,r,i,a){var o;return p(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=Vv("p:rest:"),o.listens_={},o}return m(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var s=n.getListenId_(e,r),u={};this.listens_[s]=u;var l=Ly(e._queryParams);this.restRequest_(o+".json",l,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),Et(a.listens_,s)===u)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=Ly(e._queryParams),r=e._path.toString(),i=new ct;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=u(i,2),o=a[0],s=a[1];o&&o.accessToken&&(n.auth=o.accessToken),s&&s.token&&(n.ac=s.token);var l=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+At(n);t.log_("Sending REST request for "+l);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(r&&4===c.readyState){t.log_("REST Response for "+l+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=bt(c.responseText)}catch(n){Wv("Failed to parse JSON response for "+l+": "+c.responseText)}r(null,e)}else 401!==c.status&&404!==c.status&&Wv("Got unsuccessful REST response for "+l+" Status: "+c.status),r(c.status);r=null}},c.open("GET",l,!0),c.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(tt(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(Im),Uy=function(){function e(){p(this,e),this.rootNode_=Ty.EMPTY_NODE}return m(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function By(){return{value:null,children:new Map}}function Vy(e,t,n){if(Vm(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=Om(t);e.children.has(r)||e.children.set(r,By()),Vy(e.children.get(r),t=Lm(t),n)}}function zy(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){zy(r,new Dm(t.toString()+"/"+e),n)}))}var qy,Wy=function(){function e(t){p(this,e),this.collection_=t,this.last_=null}return m(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Jv(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),Qy=function(){function e(t,n){p(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new Wy(t);var r=1e4+2e4*Math.random();om(this.reportStats_.bind(this),Math.floor(r))}return m(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;Jv(t,(function(t,i){i>0&&Ct(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),om(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function Hy(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(qy||(qy={}));var Yy,Ky=function(){function e(t,n,r){p(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=qy.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return m(e,[{key:"operationForChild",value:function(t){if(Vm(this.path)){if(null!=this.affectedTree.value)return tt(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Dm(t));return new e(Rm(),n,this.revert)}return tt(Om(this.path)===t,"operationForChild called for unrelated child."),new e(Lm(this.path),this.affectedTree,this.revert)}}]),e}(),Gy=function(){function e(t,n,r){p(this,e),this.source=t,this.path=n,this.snap=r,this.type=qy.OVERWRITE}return m(e,[{key:"operationForChild",value:function(t){return Vm(this.path)?new e(this.source,Rm(),this.snap.getImmediateChild(t)):new e(this.source,Lm(this.path),this.snap)}}]),e}(),Xy=function(){function e(t,n,r){p(this,e),this.source=t,this.path=n,this.children=r,this.type=qy.MERGE}return m(e,[{key:"operationForChild",value:function(t){if(Vm(this.path)){var n=this.children.subtree(new Dm(t));return n.isEmpty()?null:n.value?new Gy(this.source,Rm(),n.value):new e(this.source,Rm(),n)}return tt(Om(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,Lm(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),$y=function(){function e(t,n,r){p(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return m(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(Vm(e))return this.isFullyInitialized()&&!this.filtered_;var t=Om(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}();function Zy(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw nt("Should only compare child_ events.");var r=new Zm(t.childName,t.snapshotNode),i=new Zm(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function Jy(e,t){return{eventCache:e,serverCache:t}}function eg(e,t,n,r){return Jy(new $y(t,n,r),e.serverCache)}function tg(e,t,n,r){return Jy(e.eventCache,new $y(t,n,r))}function ng(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function rg(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var ig=function(){return Yy||(Yy=new oy(Gv)),Yy},ag=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ig();p(this,e),this.value=t,this.children=n}return m(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:Rm(),value:this.value};if(Vm(e))return null;var n=Om(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(Lm(e),t);return null!=i?{path:Bm(new Dm(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(Vm(t))return this;var n=Om(t),r=this.children.get(n);return null!==r?r.subtree(Lm(t)):new e(null)}},{key:"set",value:function(t,n){if(Vm(t))return new e(n,this.children);var r=Om(t),i=(this.children.get(r)||new e(null)).set(Lm(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(Vm(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=Om(t),r=this.children.get(n);if(r){var i,a=r.remove(Lm(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(Vm(e))return this.value;var t=Om(e),n=this.children.get(t);return n?n.get(Lm(e)):null}},{key:"setTree",value:function(t,n){if(Vm(t))return n;var r,i=Om(t),a=(this.children.get(i)||new e(null)).setTree(Lm(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(Rm(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(Bm(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,Rm(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(Vm(e))return null;var i=Om(e),a=this.children.get(i);return a?a.findOnPath_(Lm(e),Bm(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,Rm(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(Vm(t))return this;this.value&&r(n,this.value);var i=Om(t),a=this.children.get(i);return a?a.foreachOnPath_(Lm(t),Bm(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(Rm(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(Bm(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return Jv(t,(function(e,t){n=n.set(new Dm(e),t)})),n}}]),e}(),og=function(){function e(t){p(this,e),this.writeTree_=t}return m(e,null,[{key:"empty",value:function(){return new e(new ag(null))}}]),e}();function sg(e,t,n){if(Vm(t))return new og(new ag(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=zm(i,t);return a=a.updateChild(o,n),new og(e.writeTree_.set(i,a))}var s=new ag(n),u=e.writeTree_.setTree(t,s);return new og(u)}function ug(e,t,n){var r=e;return Jv(n,(function(e,n){r=sg(r,Bm(t,e),n)})),r}function lg(e,t){if(Vm(t))return og.empty();var n=e.writeTree_.setTree(t,new ag(null));return new og(n)}function cg(e,t){return null!=hg(e,t)}function hg(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(zm(n.path,t)):null}function fg(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(gy,(function(e,n){t.push(new Zm(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Zm(e,n.value))})),t}function dg(e,t){if(Vm(t))return e;var n=hg(e,t);return new og(null!=n?new ag(n):e.writeTree_.subtree(t))}function pg(e){return e.writeTree_.isEmpty()}function vg(e,t){return mg(Rm(),e.writeTree_,t)}function mg(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(tt(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=mg(Bm(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(Bm(e,".priority"),r)),n}function yg(e,t){return Ag(t,e)}function gg(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function kg(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));tt(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var s=e.allWrites[o];s.visible&&(o>=n&&_g(s,r.path)?i=!1:Wm(r.path,s.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=bg(e.allWrites,wg,Rm()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=lg(e.visibleWrites,r.path):Jv(r.children,(function(t){e.visibleWrites=lg(e.visibleWrites,Bm(r.path,t))}));return!0}return!1}function _g(e,t){if(e.snap)return Wm(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&Wm(Bm(e.path,n),t))return!0;return!1}function wg(e){return e.visible}function bg(e,t,n){for(var r=og.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,s=void 0;if(a.snap)Wm(n,o)?r=sg(r,s=zm(n,o),a.snap):Wm(o,n)&&(s=zm(o,n),r=sg(r,Rm(),a.snap.getChild(s)));else{if(!a.children)throw nt("WriteRecord should have .snap or .children");if(Wm(n,o))r=ug(r,s=zm(n,o),a.children);else if(Wm(o,n))if(Vm(s=zm(o,n)))r=ug(r,Rm(),a.children);else{var u=Et(a.children,Om(s));if(u){var l=u.getChild(Lm(s));r=sg(r,Rm(),l)}}}}}return r}function xg(e,t,n,r,i){if(r||i){var a=dg(e.visibleWrites,t);if(!i&&pg(a))return n;if(i||null!=n||cg(a,Rm())){return vg(bg(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Wm(e.path,t)||Wm(t,e.path))}),t),n||Ty.EMPTY_NODE)}return null}var o=hg(e.visibleWrites,t);if(null!=o)return o;var s=dg(e.visibleWrites,t);return pg(s)?n:null!=n||cg(s,Rm())?vg(s,n||Ty.EMPTY_NODE):null}function Tg(e,t,n,r){return xg(e.writeTree,e.treePath,t,n,r)}function Cg(e,t){return function(e,t,n){var r=Ty.EMPTY_NODE,i=hg(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(gy,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=dg(e.visibleWrites,t);return n.forEachChild(gy,(function(e,t){var n=vg(dg(a,new Dm(e)),t);r=r.updateImmediateChild(e,n)})),fg(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return fg(dg(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function Eg(e,t,n,r){return function(e,t,n,r,i){tt(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=Bm(t,n);if(cg(e.visibleWrites,a))return null;var o=dg(e.visibleWrites,a);return pg(o)?i.getChild(n):vg(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function Sg(e,t){return function(e,t){return hg(e.visibleWrites,t)}(e.writeTree,Bm(e.treePath,t))}function Mg(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var s,u=dg(e.visibleWrites,t),l=hg(u,Rm());if(null!=l)s=l;else{if(null==n)return[];s=vg(u,n)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],h=o.getCompare(),f=a?s.getReverseIteratorFrom(r,o):s.getIteratorFrom(r,o),d=f.getNext();d&&c.length<i;)0!==h(d,r)&&c.push(d),d=f.getNext();return c}(e.writeTree,e.treePath,t,n,r,i,a)}function Ig(e,t,n){return function(e,t,n,r){var i=Bm(t,n),a=hg(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?vg(dg(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function Ng(e,t){return Ag(Bm(e.treePath,t),e.writeTree)}function Ag(e,t){return{treePath:e,writeTree:t}}var Dg=function(){function e(){p(this,e),this.changeMap=new Map}return m(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;tt("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),tt(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Oy(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Ry(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Dy(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw nt("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Oy(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),Rg=new(function(){function e(){p(this,e)}return m(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),Og=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;p(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return m(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new $y(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ig(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:rg(this.viewCache_),i=Mg(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function Pg(e,t,n,r,i){var a,o,s=new Dg;if(n.type===qy.OVERWRITE){var u=n;u.source.fromUser?a=Fg(e,t,u.path,u.snap,r,i,s):(tt(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.serverCache.isFiltered()&&!Vm(u.path),a=jg(e,t,u.path,u.snap,r,i,o,s))}else if(n.type===qy.MERGE){var l=n;l.source.fromUser?a=function(e,t,n,r,i,a,o){var s=t;return r.foreach((function(r,u){var l=Bm(n,r);Ug(t,Om(l))&&(s=Fg(e,s,l,u,i,a,o))})),r.foreach((function(r,u){var l=Bm(n,r);Ug(t,Om(l))||(s=Fg(e,s,l,u,i,a,o))})),s}(e,t,l.path,l.children,r,i,s):(tt(l.source.fromServer,"Unknown source."),o=l.source.tagged||t.serverCache.isFiltered(),a=Vg(e,t,l.path,l.children,r,i,o,s))}else if(n.type===qy.ACK_USER_WRITE){var c=n;a=c.revert?function(e,t,n,r,i,a){var o;if(null!=Sg(r,n))return t;var s,u=new Og(r,t,i),l=t.eventCache.getNode();if(Vm(n)||".priority"===Om(n)){var c;if(t.serverCache.isFullyInitialized())c=Tg(r,rg(t));else{var h=t.serverCache.getNode();tt(h instanceof Ty,"serverChildren would be complete if leaf node"),c=Cg(r,h)}s=e.filter.updateFullNode(l,c,a)}else{var f=Om(n),d=Ig(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=l.getImmediateChild(f)),(s=null!=d?e.filter.updateChild(l,f,d,Lm(n),u,a):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(l,f,Ty.EMPTY_NODE,Lm(n),u,a):l).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Tg(r,rg(t))).isLeafNode()&&(s=e.filter.updateFullNode(s,o,a))}return o=t.serverCache.isFullyInitialized()||null!=Sg(r,Rm()),eg(t,s,o,e.filter.filtersNodes())}(e,t,c.path,r,i,s):function(e,t,n,r,i,a,o){if(null!=Sg(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(Vm(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return jg(e,t,n,u.getNode().getChild(n),i,a,s,o);if(Vm(n)){var l=new ag(null);return u.getNode().forEachChild(ty,(function(e,t){l=l.set(new Dm(e),t)})),Vg(e,t,n,l,i,a,s,o)}return t}var c=new ag(null);return r.foreach((function(e,t){var r=Bm(n,e);u.isCompleteForPath(r)&&(c=c.set(e,u.getNode().getChild(r)))})),Vg(e,t,n,c,i,a,s,o)}(e,t,c.path,c.affectedTree,r,i,s)}else{if(n.type!==qy.LISTEN_COMPLETE)throw nt("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=tg(t,a.getNode(),a.isFullyInitialized()||Vm(n),a.isFiltered());return Lg(e,o,n,r,Rg,i)}(e,t,n.path,r,s)}var h=s.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=ng(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(Ay(ng(t)))}}(t,a,h),{viewCache:a,changes:h}}function Lg(e,t,n,r,i,a){var o,s,u=t.eventCache;if(null!=Sg(r,n))return t;if(Vm(n))if(tt(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var l=rg(t),c=Cg(r,l instanceof Ty?l:Ty.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),c,a)}else{var h=Tg(r,rg(t));o=e.filter.updateFullNode(t.eventCache.getNode(),h,a)}else{var f=Om(n);if(".priority"===f){tt(1===Pm(n),"Can't have a priority with additional path components");var d=u.getNode(),p=Eg(r,n,d,s=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):u.getNode()}else{var v,m=Lm(n);if(u.isCompleteForChild(f)){s=t.serverCache.getNode();var y=Eg(r,n,u.getNode(),s);v=null!=y?u.getNode().getImmediateChild(f).updateChild(m,y):u.getNode().getImmediateChild(f)}else v=Ig(r,f,t.serverCache);o=null!=v?e.filter.updateChild(u.getNode(),f,v,m,i,a):u.getNode()}}return eg(t,o,u.isFullyInitialized()||Vm(n),e.filter.filtersNodes())}function jg(e,t,n,r,i,a,o,s){var u,l=t.serverCache,c=o?e.filter:e.filter.getIndexedFilter();if(Vm(n))u=c.updateFullNode(l.getNode(),r,null);else if(c.filtersNodes()&&!l.isFiltered()){var h=l.getNode().updateChild(n,r);u=c.updateFullNode(l.getNode(),h,null)}else{var f=Om(n);if(!l.isCompleteForPath(n)&&Pm(n)>1)return t;var d=Lm(n),p=l.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?c.updatePriority(l.getNode(),p):c.updateChild(l.getNode(),f,p,d,Rg,null)}var v=tg(t,u,l.isFullyInitialized()||Vm(n),c.filtersNodes());return Lg(e,v,n,i,new Og(i,v,a),s)}function Fg(e,t,n,r,i,a,o){var s,u,l=t.eventCache,c=new Og(i,t,a);if(Vm(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,o),s=eg(t,u,!0,e.filter.filtersNodes());else{var h=Om(n);if(".priority"===h)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=eg(t,u,l.isFullyInitialized(),l.isFiltered());else{var f,d=Lm(n),p=l.getNode().getImmediateChild(h);if(Vm(d))f=r;else{var v=c.getCompleteChild(h);f=null!=v?".priority"===jm(d)&&v.getChild(Um(d)).isEmpty()?v:v.updateChild(d,r):Ty.EMPTY_NODE}if(p.equals(f))s=t;else s=eg(t,e.filter.updateChild(l.getNode(),h,f,d,c,o),l.isFullyInitialized(),e.filter.filtersNodes())}}return s}function Ug(e,t){return e.eventCache.isCompleteForChild(t)}function Bg(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function Vg(e,t,n,r,i,a,o,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,l=t;u=Vm(n)?r:new ag(null).setTree(n,r);var c=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(c.hasChild(n)){var u=Bg(0,t.serverCache.getNode().getImmediateChild(n),r);l=jg(e,l,new Dm(n),u,i,a,o,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!c.hasChild(n)&&!u){var h=Bg(0,t.serverCache.getNode().getImmediateChild(n),r);l=jg(e,l,new Dm(n),h,i,a,o,s)}})),l}var zg;function qg(e,t){var n=rg(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Vm(t)&&!n.getImmediateChild(Om(t)).isEmpty())?n.getChild(t):null}function Wg(e,t,n,r){t.type===qy.MERGE&&null!==t.source.queryId&&(tt(rg(e.viewCache_),"We should always have a full cache before handling merges"),tt(ng(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,s=Pg(e.processor_,o,t,n,r);return i=e.processor_,a=s.viewCache,tt(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),tt(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),tt(s.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,Qg(e,s.changes,s.viewCache.eventCache.getNode(),null)}function Qg(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Zy(e,i,"child_removed",t,r,n),Zy(e,i,"child_added",t,r,n),Zy(e,i,"child_moved",a,r,n),Zy(e,i,"child_changed",t,r,n),Zy(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var Hg;function Yg(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return tt(null!=a,"SyncTree gave us an op for an invalid query."),Wg(a,t,n,r)}var o,s=[],u=S(e.views.values());try{for(u.s();!(o=u.n()).done;){var l=o.value;s=s.concat(Wg(l,t,n,r))}}catch(c){u.e(c)}finally{u.f()}return s}function Kg(e,t){var n,r=null,i=S(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||qg(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}var Gg=m((function e(t){p(this,e),this.listenProvider_=t,this.syncPointTree_=new ag(null),this.pendingWriteTree_={visibleWrites:og.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function Xg(e,t,n,r,i){return function(e,t,n,r,i){tt(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=sg(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?tk(e,new Gy({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function $g(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=gg(e.pendingWriteTree_,t),i=kg(e.pendingWriteTree_,t);if(i){var a=new ag(null);return null!=r.snap?a=a.set(Rm(),!0):Jv(r.children,(function(e){a=a.set(new Dm(e),!0)})),tk(e,new Ky(r.path,a,n))}return[]}function Zg(e,t,n){return tk(e,new Gy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Jg(e,t,n,r){var i=ik(e,r);if(null!=i){var a=ak(i),o=a.path,s=a.queryId,u=zm(o,t);return ok(e,o,new Gy(Hy(s),u,n))}return[]}function ek(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=Kg(n,zm(e,t));if(r)return r}));return xg(r,t,i,n,!0)}function tk(e,t){return nk(t,e.syncPointTree_,null,yg(e.pendingWriteTree_,Rm()))}function nk(e,t,n,r){if(Vm(e.path))return rk(e,t,n,r);var i=t.get(Rm());null==n&&null!=i&&(n=Kg(i,Rm()));var a=[],o=Om(e.path),s=e.operationForChild(o),u=t.children.get(o);if(u&&s){var l=n?n.getImmediateChild(o):null,c=Ng(r,o);a=a.concat(nk(s,u,l,c))}return i&&(a=a.concat(Yg(i,e,r,n))),a}function rk(e,t,n,r){var i=t.get(Rm());null==n&&null!=i&&(n=Kg(i,Rm()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,s=Ng(r,t),u=e.operationForChild(t);u&&(a=a.concat(rk(u,i,o,s)))})),i&&(a=a.concat(Yg(i,e,r,n))),a}function ik(e,t){return e.tagToQueryMap.get(t)}function ak(e){var t=e.indexOf("$");return tt(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Dm(e.substr(0,t))}}function ok(e,t,n){var r=e.syncPointTree_.get(t);return tt(r,"Missing sync point for query tag that we're tracking"),Yg(r,n,yg(e.pendingWriteTree_,t),null)}var sk=function(){function e(t){p(this,e),this.node_=t}return m(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),uk=function(){function e(t,n){p(this,e),this.syncTree_=t,this.path_=n}return m(e,[{key:"getImmediateChild",value:function(t){var n=Bm(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return ek(this.syncTree_,this.path_)}}]),e}(),lk=function(e,t,n){return e&&"object"===typeof e?(tt(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?ck(e[".sv"],t,n):"object"===typeof e[".sv"]?hk(e[".sv"],t):void tt(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},ck=function(e,t,n){if("timestamp"===e)return n.timestamp;tt(!1,"Unexpected server value: "+e)},hk=function(e,t,n){e.hasOwnProperty("increment")||tt(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&tt(!1,"Unexpected increment value: "+r);var i=t.node();if(tt(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},fk=function(e,t,n,r){return pk(t,new uk(n,e),r)},dk=function(e,t,n){return pk(e,new sk(t),n)};function pk(e,t,n){var r,i=e.getPriority().val(),a=lk(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,s=lk(o.getValue(),t,n);return s!==o.getValue()||a!==o.getPriority().val()?new py(s,Ey(a)):e}var u=e;return r=u,a!==u.getPriority().val()&&(r=r.updatePriority(new py(a))),u.forEachChild(gy,(function(e,i){var a=pk(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var vk=m((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};p(this,e),this.name=t,this.parent=n,this.node=r}));function mk(e,t){for(var n=t instanceof Dm?t:new Dm(t),r=e,i=Om(n);null!==i;){var a=Et(r.node.children,i)||{children:{},childCount:0};r=new vk(i,r,a),i=Om(n=Lm(n))}return r}function yk(e){return e.node.value}function gk(e,t){e.node.value=t,xk(e)}function kk(e){return e.node.childCount>0}function _k(e,t){Jv(e.node.children,(function(n,r){t(new vk(n,e,r))}))}function wk(e,t,n,r){n&&!r&&t(e),_k(e,(function(e){wk(e,t,!0,r)})),n&&r&&t(e)}function bk(e){return new Dm(null===e.parent?e.name:bk(e.parent)+"/"+e.name)}function xk(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===yk(e)&&!kk(e)}(n),i=Ct(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,xk(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,xk(e))}(e.parent,e.name,e)}var Tk=/[\[\].#$\/\u0000-\u001F\u007F]/,Ck=/[\[\].#$\u0000-\u001F\u007F]/,Ek=10485760,Sk=function(e){return"string"===typeof e&&0!==e.length&&!Tk.test(e)},Mk=function(e){return"string"===typeof e&&0!==e.length&&!Ck.test(e)},Ik=function e(t,n,r){var i=r instanceof Dm?new Qm(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+Ym(i));if("function"===typeof n)throw new Error(t+"contains a function "+Ym(i)+" with contents = "+n.toString());if(Qv(n))throw new Error(t+"contains "+n.toString()+" "+Ym(i));if("string"===typeof n&&n.length>Ek/3&&Ot(n)>Ek)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+Ym(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(Jv(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!Sk(n)))throw new Error(t+" contains an invalid key ("+n+") "+Ym(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var s,u;u=n,(s=i).parts_.length>0&&(s.byteLength_+=1),s.parts_.push(u),s.byteLength_+=Ot(u),Hm(s),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=Ot(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+Ym(i)+" in addition to actual children.")}},Nk=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!Sk(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Mk(e)}(n))throw new Error(Rt(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Ak=m((function e(){p(this,e),this.eventLists_=[],this.recursionDepth_=0}));function Dk(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||qm(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function Rk(e,t,n){Dk(e,n),Ok(e,(function(e){return Wm(e,t)||Wm(t,e)}))}function Ok(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(Pk(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function Pk(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();jv&&Bv("event: "+n.toString()),am(r)}}}var Lk="repo_interrupt",jk=function(){function e(t,n,r,i){p(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ak,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=By(),this.transactionQueueTree_=new vk,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return m(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function Fk(e,t,n){if(e.stats_=km(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Fy(e.repoInfo_,(function(t,n,r,i){Vk(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return zk(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{xt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Xm(e.repoInfo_,t,(function(t,n,r,i){Vk(e,t,n,r,i)}),(function(t){zk(e,t)}),(function(t){!function(e,t){Jv(t,(function(t,n){qk(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return gm[n]||(gm[n]=t()),gm[n]}(e.repoInfo_,(function(){return new Qy(e.stats_,e.server_)})),e.infoData_=new Uy,e.infoSyncTree_=new Gg({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=Zg(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),qk(e,"connected",!1),e.serverSyncTree_=new Gg({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);Rk(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function Uk(e){var t=e.infoData_.getNode(new Dm(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Bk(e){return(t=(t={timestamp:Uk(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function Vk(e,t,n,r,i){e.dataUpdateCount++;var a=new Dm(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var s=Mt(n,(function(e){return Ey(e)}));o=function(e,t,n,r){var i=ik(e,r);if(i){var a=ak(i),o=a.path,s=a.queryId,u=zm(o,t),l=ag.fromObject(n);return ok(e,o,new Xy(Hy(s),u,l))}return[]}(e.serverSyncTree_,a,s,i)}else{var u=Ey(n);o=Jg(e.serverSyncTree_,a,u,i)}else if(r){var l=Mt(n,(function(e){return Ey(e)}));o=function(e,t,n){var r=ag.fromObject(n);return tk(e,new Xy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,l)}else{var c=Ey(n);o=Zg(e.serverSyncTree_,a,c)}var h=a;o.length>0&&(h=Xk(e,a)),Rk(e.eventQueue_,h,o)}function zk(e,t){qk(e,"connected",t),!1===t&&function(e){Hk(e,"onDisconnectEvents");var t=Bk(e),n=By();zy(e.onDisconnect_,Rm(),(function(r,i){var a=fk(r,i,e.serverSyncTree_,t);Vy(n,r,a)}));var r=[];zy(n,Rm(),(function(t,n){r=r.concat(Zg(e.serverSyncTree_,t,n));var i=t_(e,t);Xk(e,i)})),e.onDisconnect_=By(),Rk(e.eventQueue_,Rm(),r)}(e)}function qk(e,t,n){var r=new Dm("/.info/"+t),i=Ey(n);e.infoData_.updateSnapshot(r,i);var a=Zg(e.infoSyncTree_,r,i);Rk(e.eventQueue_,r,a)}function Wk(e){return e.nextWriteId_++}function Qk(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Lk)}function Hk(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Bv.apply(void 0,[t].concat(r))}function Yk(e,t,n){return ek(e.serverSyncTree_,t,n)||Ty.EMPTY_NODE}function Kk(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||e_(e,t),yk(t)){var n=Zk(e,t);tt(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&Gk(e,bk(t),n)}else kk(t)&&_k(t,(function(t){Kk(e,t)}))}function Gk(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=Yk(e,t,r),a=i,o=i.hash(),s=0;s<n.length;s++){var u=n[s];tt(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var l=zm(t,u.path);a=a.updateChild(l,u.currentOutputSnapshotRaw)}var c=a.val(!0),h=t;e.server_.put(h.toString(),c,(function(r){Hk(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat($g(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)o(s);e_(e,mk(e.transactionQueueTree_,t)),Kk(e,e.transactionQueueTree_),Rk(e.eventQueue_,t,i);for(var u=0;u<a.length;u++)am(a[u])}else{if("datastale"===r)for(var l=0;l<n.length;l++)3===n[l].status?n[l].status=4:n[l].status=0;else{Wv("transaction at "+h.toString()+" failed: "+r);for(var c=0;c<n.length;c++)n[c].status=4,n[c].abortReason=r}Xk(e,t)}}),o)}function Xk(e,t){var n=$k(e,t),r=bk(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),s=function(a){var s,u=t[a],l=zm(n,u.path),c=!1,h=void 0;if(tt(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)c=!0,h=u.abortReason,i=i.concat($g(e.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=25)c=!0,h="maxretry",i=i.concat($g(e.serverSyncTree_,u.currentWriteId,!0));else{var f=Yk(e,u.path,o);u.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){Ik("transaction failed: Data returned ",d,u.path);var p=Ey(d);"object"===typeof d&&null!=d&&Ct(d,".priority")||(p=p.updatePriority(f.getPriority()));var v=u.currentWriteId,m=Bk(e),y=dk(p,f,m);u.currentOutputSnapshotRaw=p,u.currentOutputSnapshotResolved=y,u.currentWriteId=Wk(e),o.splice(o.indexOf(v),1),i=(i=i.concat(Xg(e.serverSyncTree_,u.path,y,u.currentWriteId,u.applyLocally))).concat($g(e.serverSyncTree_,v,!0))}else c=!0,h="nodata",i=i.concat($g(e.serverSyncTree_,u.currentWriteId,!0))}Rk(e.eventQueue_,n,i),i=[],c&&(t[a].status=2,s=t[a].unwatcher,setTimeout(s,Math.floor(0)),t[a].onComplete&&("nodata"===h?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(h),!1,null)}))))},u=0;u<t.length;u++)s(u);e_(e,e.transactionQueueTree_);for(var l=0;l<r.length;l++)am(r[l]);Kk(e,e.transactionQueueTree_)}(e,Zk(e,n),r),r}function $k(e,t){var n,r=e.transactionQueueTree_;for(n=Om(t);null!==n&&void 0===yk(r);)r=mk(r,n),n=Om(t=Lm(t));return r}function Zk(e,t){var n=[];return Jk(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function Jk(e,t,n){var r=yk(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);_k(t,(function(t){Jk(e,t,n)}))}function e_(e,t){var n=yk(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,gk(t,n.length>0?n:void 0)}_k(t,(function(t){e_(e,t)}))}function t_(e,t){var n=bk($k(e,t)),r=mk(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){n_(e,t)})),n_(e,r),wk(r,(function(t){n_(e,t)})),n}function n_(e,t){var n=yk(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(tt(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(tt(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat($g(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?gk(t,void 0):n.length=a+1,Rk(e.eventQueue_,bk(t),i);for(var s=0;s<r.length;s++)am(r[s])}}var r_=function(e,t){var n=i_(e),r=n.namespace;"firebase.com"===n.domain&&qv(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||qv("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Wv("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new pm(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new Dm(n.pathString)}},i_=function(e){var t="",n="",r="",i="",a="",o=!0,s="https",u=443;if("string"===typeof e){var l=e.indexOf("//");l>=0&&(s=e.substring(0,l-1),e=e.substring(l+2));var c=e.indexOf("/");-1===c&&(c=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(c,h)),c<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(c,h)));var f=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=S(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):Wv("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,h)));(l=t.indexOf(":"))>=0?(o="https"===s||"wss"===s,u=parseInt(t.substring(l+1),10)):l=t.length;var d=t.slice(0,l);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in f&&(a=f.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:o,scheme:s,pathString:i,namespace:a}},a_=function(){function e(t,n,r,i){p(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return m(e,[{key:"key",get:function(){return Vm(this._path)?null:jm(this._path)}},{key:"ref",get:function(){return new o_(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=jy(this._queryParams),t=$v(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return jy(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=jt(t))instanceof e))return!1;var n=this._repo===t._repo,r=qm(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();var o_=function(e){g(n,e);var t=T(n);function n(e,r){return p(this,n),t.call(this,e,r,new Py,!1)}return m(n,[{key:"parent",get:function(){var e=Um(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(a_);!function(e){tt(!zg,"__referenceConstructor has already been defined"),zg=e}(o_),function(e){tt(!Hg,"__referenceConstructor has already been defined"),Hg=e}(o_);var s_={},u_=!1;function l_(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||qv("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Bv("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,s=r_(a,i),u=s.repoInfo,l=void 0;"undefined"!==typeof process&&(l={NODE_ENV:"production",PUBLIC_URL:"/incommon",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),l?(o=!0,a="http://".concat(l,"?ns=").concat(u.namespace),u=(s=r_(a,i)).repoInfo):o=!s.repoInfo.secure;var c=i&&o?new lm(lm.OWNER):new um(e.name,e.options,t);Nk("Invalid Firebase Database URL",s),Vm(s.path)||qv("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=s_[t.name];i||(i={},s_[t.name]=i);var a=i[e.toURLString()];a&&qv("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new jk(e,u_,n,r),i[e.toURLString()]=a,a}(u,e,c,new sm(e.name,n));return new c_(h,e)}var c_=function(){function e(t,n){p(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return m(e,[{key:"_repo",get:function(){return this._instanceStarted||(Fk(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new o_(this._repo,Rm())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=s_[t];n&&n[e.key]===e||qv("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),Qk(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&qv("Cannot call "+e+" on a deleted database.")}}]),e}();Xm.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Xm.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){!function(e){Sv=e}(Dn),Sn(new Ft("database",(function(e,t){var n=t.instanceIdentifier;return l_(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),On(Cv,Ev,e),On(Cv,Ev,"esm2017")}();var h_,f_;var d_=new WeakMap,p_=new WeakMap,v_=new WeakMap,m_=new WeakMap,y_=new WeakMap;var g_={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return p_.get(e);if("objectStoreNames"===t)return e.objectStoreNames||v_.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return w_(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function k_(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(f_||(f_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(b_(this),n),w_(d_.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return w_(e.apply(b_(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[b_(this),t].concat(r));return v_.set(a,t.sort?t.sort():[t]),w_(a)}}function __(e){return"function"===typeof e?k_(e):(e instanceof IDBTransaction&&function(e){if(!p_.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));p_.set(e,t)}}(e),t=e,(h_||(h_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,g_):e);var t}function w_(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(w_(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&d_.set(t,e)})).catch((function(){})),y_.set(t,e),t}(e);if(m_.has(e))return m_.get(e);var t=__(e);return t!==e&&(m_.set(e,t),y_.set(t,e)),t}var b_=function(e){return y_.get(e)};var x_,T_=["get","getKey","getAll","getAllKeys","count"],C_=["put","add","delete","clear"],E_=new Map;function S_(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(E_.get(t))return E_.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=C_.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||T_.includes(n))){var a=function(){var e=Ke(He().mark((function e(t){var a,o,s,u,l,c,h=arguments;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),s=o.store,u=h.length,l=new Array(u>1?u-1:0),c=1;c<u;c++)l[c-1]=h[c];return r&&(s=s.index(l.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,l),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return E_.set(t,a),a}}}!function(e){g_=e(g_)}((function(e){return $t($t({},e),{},{get:function(t,n,r){return S_(t,n)||e.get(t,n,r)},has:function(t,n){return!!S_(t,n)||e.has(t,n)}})}));var M_="@firebase/installations",I_="0.5.12",N_=1e4,A_="w:".concat(I_),D_="FIS_v2",R_=36e5,O_=($e(x_={},"missing-app-config-values",'Missing App configuration value: "{$valueName}"'),$e(x_,"not-registered","Firebase Installation is not registered."),$e(x_,"installation-not-found","Firebase Installation not found."),$e(x_,"request-failed",'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"'),$e(x_,"app-offline","Could not process request. Application offline."),$e(x_,"delete-pending-registration","Can't delete installation while there is a pending registration request."),x_),P_=new kt("installations","Installations",O_);function L_(e){return e instanceof gt&&e.code.includes("request-failed")}function j_(e){var t=e.projectId;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(t,"/installations")}function F_(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function U_(e,t){return B_.apply(this,arguments)}function B_(){return(B_=Ke(He().mark((function e(t,n){var r,i;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:return r=e.sent,i=r.error,e.abrupt("return",P_.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V_(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function z_(e,t){var n=t.refreshToken,r=V_(e);return r.append("Authorization",function(e){return"".concat(D_," ").concat(e)}(n)),r}function q_(e){return W_.apply(this,arguments)}function W_(){return W_=Ke(He().mark((function e(t){var n;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:if(!((n=e.sent).status>=500&&n.status<600)){e.next=5;break}return e.abrupt("return",t());case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)}))),W_.apply(this,arguments)}function Q_(e,t){return H_.apply(this,arguments)}function H_(){return(H_=Ke(He().mark((function e(t,n){var r,i,a,o,s,u,l,c,h,f,d,p;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.appConfig,i=t.heartbeatServiceProvider,a=n.fid,o=j_(r),s=V_(r),!(u=i.getImmediate({optional:!0}))){e.next=10;break}return e.next=8,u.getHeartbeatsHeader();case 8:(l=e.sent)&&s.append("x-firebase-client",l);case 10:return c={fid:a,authVersion:D_,appId:r.appId,sdkVersion:A_},h={method:"POST",headers:s,body:JSON.stringify(c)},e.next=14,q_((function(){return fetch(o,h)}));case 14:if(!(f=e.sent).ok){e.next=23;break}return e.next=18,f.json();case 18:return d=e.sent,p={fid:d.fid||a,registrationStatus:2,refreshToken:d.refreshToken,authToken:F_(d.authToken)},e.abrupt("return",p);case 23:return e.next=25,U_("Create Installation",f);case 25:throw e.sent;case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y_(e){return new Promise((function(t){setTimeout(t,e)}))}var K_=/^[cdef][\w-]{21}$/;function G_(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){return(t=e,btoa(String.fromCharCode.apply(String,d(t))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return K_.test(t)?t:""}catch(n){return""}}function X_(e){return"".concat(e.appName,"!").concat(e.appId)}var $_=new Map;function Z_(e,t){var n=X_(e);J_(n,t),function(e,t){var n=tw();n&&n.postMessage({key:e,fid:t});nw()}(n,t)}function J_(e,t){var n=$_.get(e);if(n){var r,i=S(n);try{for(i.s();!(r=i.n()).done;){(0,r.value)(t)}}catch(a){i.e(a)}finally{i.f()}}}var ew=null;function tw(){return!ew&&"BroadcastChannel"in self&&((ew=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){J_(e.data.key,e.data.fid)}),ew}function nw(){0===$_.size&&ew&&(ew.close(),ew=null)}var rw="firebase-installations-store",iw=null;function aw(){return iw||(iw=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=w_(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(w_(s.result),e.oldVersion,e.newVersion,w_(s.transaction))})),r&&s.addEventListener("blocked",(function(){return r()})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),u}("firebase-installations-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(rw)}})),iw}function ow(e,t){return sw.apply(this,arguments)}function sw(){return sw=Ke(He().mark((function e(t,n){var r,i,a,o,s;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=X_(t),e.next=3,aw();case 3:return i=e.sent,a=i.transaction(rw,"readwrite"),o=a.objectStore(rw),e.next=8,o.get(r);case 8:return s=e.sent,e.next=11,o.put(n,r);case 11:return e.next=13,a.done;case 13:return s&&s.fid===n.fid||Z_(t,n.fid),e.abrupt("return",n);case 15:case"end":return e.stop()}}),e)}))),sw.apply(this,arguments)}function uw(e){return lw.apply(this,arguments)}function lw(){return lw=Ke(He().mark((function e(t){var n,r,i;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=X_(t),e.next=3,aw();case 3:return r=e.sent,i=r.transaction(rw,"readwrite"),e.next=7,i.objectStore(rw).delete(n);case 7:return e.next=9,i.done;case 9:case"end":return e.stop()}}),e)}))),lw.apply(this,arguments)}function cw(e,t){return hw.apply(this,arguments)}function hw(){return hw=Ke(He().mark((function e(t,n){var r,i,a,o,s,u;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=X_(t),e.next=3,aw();case 3:return i=e.sent,a=i.transaction(rw,"readwrite"),o=a.objectStore(rw),e.next=8,o.get(r);case 8:if(s=e.sent,void 0!==(u=n(s))){e.next=15;break}return e.next=13,o.delete(r);case 13:e.next=17;break;case 15:return e.next=17,o.put(u,r);case 17:return e.next=19,a.done;case 19:return!u||s&&s.fid===u.fid||Z_(t,u.fid),e.abrupt("return",u);case 21:case"end":return e.stop()}}),e)}))),hw.apply(this,arguments)}function fw(e){return dw.apply(this,arguments)}function dw(){return(dw=Ke(He().mark((function e(t){var n,r;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cw(t.appConfig,(function(e){var r=pw(e),i=vw(t,r);return n=i.registrationPromise,i.installationEntry}));case 2:if(""!==(r=e.sent).fid){e.next=8;break}return e.next=6,n;case 6:return e.t0=e.sent,e.abrupt("return",{installationEntry:e.t0});case 8:return e.abrupt("return",{installationEntry:r,registrationPromise:n});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pw(e){return _w(e||{fid:G_(),registrationStatus:0})}function vw(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(P_.create("app-offline"))};var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=function(e,t){return mw.apply(this,arguments)}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:yw(e)}:{installationEntry:t}}function mw(){return(mw=Ke(He().mark((function e(t,n){var r;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q_(t,n);case 3:return r=e.sent,e.abrupt("return",ow(t.appConfig,r));case 7:if(e.prev=7,e.t0=e.catch(0),!L_(e.t0)||409!==e.t0.customData.serverCode){e.next=14;break}return e.next=12,uw(t.appConfig);case 12:e.next=16;break;case 14:return e.next=16,ow(t.appConfig,{fid:n.fid,registrationStatus:0});case 16:throw e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function yw(e){return gw.apply(this,arguments)}function gw(){return(gw=Ke(He().mark((function e(t){var n,r,i,a;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kw(t.appConfig);case 2:n=e.sent;case 3:if(1!==n.registrationStatus){e.next=11;break}return e.next=6,Y_(100);case 6:return e.next=8,kw(t.appConfig);case 8:n=e.sent,e.next=3;break;case 11:if(0!==n.registrationStatus){e.next=22;break}return e.next=14,fw(t);case 14:if(r=e.sent,i=r.installationEntry,!(a=r.registrationPromise)){e.next=21;break}return e.abrupt("return",a);case 21:return e.abrupt("return",i);case 22:return e.abrupt("return",n);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kw(e){return cw(e,(function(e){if(!e)throw P_.create("installation-not-found");return _w(e)}))}function _w(e){return 1===(t=e).registrationStatus&&t.registrationTime+N_<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function ww(e,t){return bw.apply(this,arguments)}function bw(){return(bw=Ke(He().mark((function e(t,n){var r,i,a,o,s,u,l,c,h,f,d;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.appConfig,i=t.heartbeatServiceProvider,a=xw(r,n),o=z_(r,n),!(s=i.getImmediate({optional:!0}))){e.next=9;break}return e.next=7,s.getHeartbeatsHeader();case 7:(u=e.sent)&&o.append("x-firebase-client",u);case 9:return l={installation:{sdkVersion:A_,appId:r.appId}},c={method:"POST",headers:o,body:JSON.stringify(l)},e.next=13,q_((function(){return fetch(a,c)}));case 13:if(!(h=e.sent).ok){e.next=22;break}return e.next=17,h.json();case 17:return f=e.sent,d=F_(f),e.abrupt("return",d);case 22:return e.next=24,U_("Generate Auth Token",h);case 24:throw e.sent;case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xw(e,t){var n=t.fid;return"".concat(j_(e),"/").concat(n,"/authTokens:generate")}function Tw(e){return Cw.apply(this,arguments)}function Cw(){return Cw=Ke(He().mark((function e(t){var n,r,i,a,o=arguments;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]&&o[1],e.next=3,cw(t.appConfig,(function(e){if(!Aw(e))throw P_.create("not-registered");var i=e.authToken;if(!n&&Dw(i))return e;if(1===i.requestStatus)return r=Ew(t,n),e;if(!navigator.onLine)throw P_.create("app-offline");var a=Rw(e);return r=Iw(t,a),a}));case 3:if(i=e.sent,!r){e.next=10;break}return e.next=7,r;case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=i.authToken;case 11:return a=e.t0,e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),Cw.apply(this,arguments)}function Ew(e,t){return Sw.apply(this,arguments)}function Sw(){return(Sw=Ke(He().mark((function e(t,n){var r,i;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mw(t.appConfig);case 2:r=e.sent;case 3:if(1!==r.authToken.requestStatus){e.next=11;break}return e.next=6,Y_(100);case 6:return e.next=8,Mw(t.appConfig);case 8:r=e.sent,e.next=3;break;case 11:if(0!==(i=r.authToken).requestStatus){e.next=16;break}return e.abrupt("return",Tw(t,n));case 16:return e.abrupt("return",i);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mw(e){return cw(e,(function(e){if(!Aw(e))throw P_.create("not-registered");var t,n=e.authToken;return 1===(t=n).requestStatus&&t.requestTime+N_<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e}))}function Iw(e,t){return Nw.apply(this,arguments)}function Nw(){return(Nw=Ke(He().mark((function e(t,n){var r,i,a;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ww(t,n);case 3:return r=e.sent,i=Object.assign(Object.assign({},n),{authToken:r}),e.next=7,ow(t.appConfig,i);case 7:return e.abrupt("return",r);case 10:if(e.prev=10,e.t0=e.catch(0),!L_(e.t0)||401!==e.t0.customData.serverCode&&404!==e.t0.customData.serverCode){e.next=17;break}return e.next=15,uw(t.appConfig);case 15:e.next=20;break;case 17:return a=Object.assign(Object.assign({},n),{authToken:{requestStatus:0}}),e.next=20,ow(t.appConfig,a);case 20:throw e.t0;case 21:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function Aw(e){return void 0!==e&&2===e.registrationStatus}function Dw(e){return 2===e.requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+R_}(e)}function Rw(e){var t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function Ow(){return(Ow=Ke(He().mark((function e(t){var n,r,i,a;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.next=3,fw(n);case 3:return r=e.sent,i=r.installationEntry,(a=r.registrationPromise)?a.catch(console.error):Tw(n).catch(console.error),e.abrupt("return",i.fid);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pw(){return Pw=Ke(He().mark((function e(t){var n,r,i,a=arguments;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]&&a[1],r=t,e.next=4,Lw(r);case 4:return e.next=6,Tw(r,n);case 6:return i=e.sent,e.abrupt("return",i.token);case 8:case"end":return e.stop()}}),e)}))),Pw.apply(this,arguments)}function Lw(e){return jw.apply(this,arguments)}function jw(){return(jw=Ke(He().mark((function e(t){var n,r;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fw(t);case 2:if(n=e.sent,!(r=n.registrationPromise)){e.next=7;break}return e.next=7,r;case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fw(e){return P_.create("missing-app-config-values",{valueName:e})}var Uw,Bw="installations",Vw=function(e){var t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw Fw("App Configuration");if(!e.name)throw Fw("App Name");for(var t=0,n=["projectId","apiKey","appId"];t<n.length;t++){var r=n[t];if(!e.options[r])throw Fw(r)}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:Mn(t,"heartbeat"),_delete:function(){return Promise.resolve()}}},zw=function(e){var t=Mn(e.getProvider("app").getImmediate(),Bw).getImmediate(),n={getId:function(){return function(e){return Ow.apply(this,arguments)}(t)},getToken:function(e){return function(e){return Pw.apply(this,arguments)}(t,e)}};return n};Sn(new Ft(Bw,Vw,"PUBLIC")),Sn(new Ft("installations-internal",zw,"PRIVATE")),On(M_,I_),On(M_,I_,"esm2017");var qw="analytics",Ww=6e4,Qw="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Hw="https://www.googletagmanager.com/gtag/js",Yw=new Gt("@firebase/analytics");function Kw(e){return Promise.all(e.map((function(e){return e.catch((function(e){return e}))})))}function Gw(e,t){var n=document.createElement("script");n.src="".concat(Hw,"?l=").concat(e,"&id=").concat(t),n.async=!0,document.head.appendChild(n)}function Xw(e,t,n,r,i,a){return $w.apply(this,arguments)}function $w(){return $w=Ke(He().mark((function e(t,n,r,i,a,o){var s,u,l;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=i[a],e.prev=1,!s){e.next=7;break}return e.next=5,n[s];case 5:e.next=14;break;case 7:return e.next=9,Kw(r);case 9:if(u=e.sent,l=u.find((function(e){return e.measurementId===a})),!l){e.next=14;break}return e.next=14,n[l.appId];case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),Yw.error(e.t0);case 19:t("config",a,o);case 20:case"end":return e.stop()}}),e,null,[[1,16]])}))),$w.apply(this,arguments)}function Zw(e,t,n,r,i){return Jw.apply(this,arguments)}function Jw(){return Jw=Ke(He().mark((function e(t,n,r,i,a){var o,s,u,l,c,h;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o=[],!a||!a.send_to){e.next=26;break}return s=a.send_to,Array.isArray(s)||(s=[s]),e.next=7,Kw(r);case 7:u=e.sent,l=S(s),e.prev=9,h=function(){var e=c.value,t=u.find((function(t){return t.measurementId===e})),r=t&&n[t.appId];if(!r)return o=[],"break";o.push(r)},l.s();case 12:if((c=l.n()).done){e.next=18;break}if("break"!==h()){e.next=16;break}return e.abrupt("break",18);case 16:e.next=12;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(9),l.e(e.t0);case 23:return e.prev=23,l.f(),e.finish(23);case 26:return 0===o.length&&(o=Object.values(n)),e.next=29,Promise.all(o);case 29:t("event",i,a||{}),e.next=35;break;case 32:e.prev=32,e.t1=e.catch(0),Yw.error(e.t1);case 35:case"end":return e.stop()}}),e,null,[[0,32],[9,20,23,26]])}))),Jw.apply(this,arguments)}function eb(e,t,n,r,i){var a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(a=window[i]),window[i]=function(e,t,n,r){function i(){return(i=Ke(He().mark((function i(a,o,s){return He().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,"event"!==a){i.next=6;break}return i.next=4,Zw(e,t,n,o,s);case 4:i.next=12;break;case 6:if("config"!==a){i.next=11;break}return i.next=9,Xw(e,t,n,r,o,s);case 9:i.next=12;break;case 11:"consent"===a?e("consent","update",s):e("set",o);case 12:i.next=17;break;case 14:i.prev=14,i.t0=i.catch(0),Yw.error(i.t0);case 17:case"end":return i.stop()}}),i,null,[[0,14]])})))).apply(this,arguments)}return function(e,t,n){return i.apply(this,arguments)}}(a,e,t,n),{gtagCore:a,wrappedGtag:window[i]}}function tb(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(Hw))return r}return null}var nb=($e(Uw={},"already-exists","A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId."),$e(Uw,"already-initialized","initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance."),$e(Uw,"already-initialized-settings","Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect."),$e(Uw,"interop-component-reg-failed","Firebase Analytics Interop Component failed to instantiate: {$reason}"),$e(Uw,"invalid-analytics-context","Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),$e(Uw,"indexeddb-unavailable","IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),$e(Uw,"fetch-throttle","The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}."),$e(Uw,"config-fetch-failed","Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}"),$e(Uw,"no-api-key",'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.'),$e(Uw,"no-app-id",'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'),Uw),rb=new kt("analytics","Analytics",nb),ib=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;p(this,e),this.throttleMetadata=t,this.intervalMillis=n}return m(e,[{key:"getThrottleMetadata",value:function(e){return this.throttleMetadata[e]}},{key:"setThrottleMetadata",value:function(e,t){this.throttleMetadata[e]=t}},{key:"deleteThrottleMetadata",value:function(e){delete this.throttleMetadata[e]}}]),e}(),ab=new ib;function ob(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function sb(e){return ub.apply(this,arguments)}function ub(){return ub=Ke(He().mark((function e(t){var n,r,i,a,o,s,u,l;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.appId,i=t.apiKey,a={method:"GET",headers:ob(i)},o=Qw.replace("{app-id}",r),e.next=5,fetch(o,a);case 5:if(200===(s=e.sent).status||304===s.status){e.next=18;break}return u="",e.prev=8,e.next=11,s.json();case 11:l=e.sent,(null===(n=l.error)||void 0===n?void 0:n.message)&&(u=l.error.message),e.next=17;break;case 15:e.prev=15,e.t0=e.catch(8);case 17:throw rb.create("config-fetch-failed",{httpStatus:s.status,responseMessage:u});case 18:return e.abrupt("return",s.json());case 19:case"end":return e.stop()}}),e,null,[[8,15]])}))),ub.apply(this,arguments)}function lb(e){return cb.apply(this,arguments)}function cb(){return cb=Ke(He().mark((function e(t){var n,r,i,a,o,s,u,l,c=arguments;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.length>1&&void 0!==c[1]?c[1]:ab,r=c.length>2?c[2]:void 0,i=t.options,a=i.appId,o=i.apiKey,s=i.measurementId,a){e.next=5;break}throw rb.create("no-app-id");case 5:if(o){e.next=9;break}if(!s){e.next=8;break}return e.abrupt("return",{measurementId:s,appId:a});case 8:throw rb.create("no-api-key");case 9:return u=n.getThrottleMetadata(a)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new yb,setTimeout(Ke(He().mark((function e(){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.abort();case 1:case"end":return e.stop()}}),e)}))),void 0!==r?r:Ww),e.abrupt("return",hb({appId:a,apiKey:o,measurementId:s},u,l,n));case 13:case"end":return e.stop()}}),e)}))),cb.apply(this,arguments)}function hb(e,t,n){return fb.apply(this,arguments)}function fb(){return fb=Ke(He().mark((function e(t,n,r){var i,a,o,s,u,l,c,h,f,d,p,v=arguments;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.throttleEndTimeMillis,a=n.backoffCount,o=v.length>3&&void 0!==v[3]?v[3]:ab,l=t.appId,c=t.measurementId,e.prev=3,e.next=6,db(r,i);case 6:e.next=14;break;case 8:if(e.prev=8,e.t0=e.catch(3),!c){e.next=13;break}return Yw.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(c)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===(s=e.t0)||void 0===s?void 0:s.message,"]")),e.abrupt("return",{appId:l,measurementId:c});case 13:throw e.t0;case 14:return e.prev=14,e.next=17,sb(t);case 17:return h=e.sent,o.deleteThrottleMetadata(l),e.abrupt("return",h);case 22:if(e.prev=22,e.t1=e.catch(14),pb(f=e.t1)){e.next=33;break}if(o.deleteThrottleMetadata(l),!c){e.next=32;break}return Yw.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(c)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===f||void 0===f?void 0:f.message,"]")),e.abrupt("return",{appId:l,measurementId:c});case 32:throw e.t1;case 33:return d=503===Number(null===(u=null===f||void 0===f?void 0:f.customData)||void 0===u?void 0:u.httpStatus)?Lt(a,o.intervalMillis,30):Lt(a,o.intervalMillis),p={throttleEndTimeMillis:Date.now()+d,backoffCount:a+1},o.setThrottleMetadata(l,p),Yw.debug("Calling attemptFetch again in ".concat(d," millis")),e.abrupt("return",hb(t,p,r,o));case 38:case"end":return e.stop()}}),e,null,[[3,8],[14,22]])}))),fb.apply(this,arguments)}function db(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),a=setTimeout(n,i);e.addEventListener((function(){clearTimeout(a),r(rb.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}function pb(e){if(!(e instanceof gt)||!e.customData)return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}var vb,mb,yb=function(){function e(){p(this,e),this.listeners=[]}return m(e,[{key:"addEventListener",value:function(e){this.listeners.push(e)}},{key:"abort",value:function(){this.listeners.forEach((function(e){return e()}))}}]),e}();function gb(){return(gb=Ke(He().mark((function e(t,n,r,i,a){var o,s;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a||!a.global){e.next=5;break}return t("event",r,i),e.abrupt("return");case 5:return e.next=7,n;case 7:o=e.sent,s=Object.assign(Object.assign({},i),{send_to:o}),t("event",r,s);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kb(e){mb=e}function _b(e){vb=e}function wb(){return bb.apply(this,arguments)}function bb(){return bb=Ke(He().mark((function e(){var t;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(mt()){e.next=5;break}return Yw.warn(rb.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),e.abrupt("return",!1);case 5:return e.prev=5,e.next=8,yt();case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(5),Yw.warn(rb.create("indexeddb-unavailable",{errorInfo:null===(t=e.t0)||void 0===t?void 0:t.toString()}).message),e.abrupt("return",!1);case 14:return e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e,null,[[5,10]])}))),bb.apply(this,arguments)}function xb(){return xb=Ke(He().mark((function e(t,n,r,i,a,o,s){var l,c,h,f,d,p,v,m;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=lb(t)).then((function(e){r[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&Yw.warn("The measurement ID in the local Firebase config (".concat(t.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(e.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(e){return Yw.error(e)})),n.push(c),h=wb().then((function(e){return e?i.getId():void 0})),e.next=6,Promise.all([c,h]);case 6:return f=e.sent,d=u(f,2),p=d[0],v=d[1],tb()||Gw(o,p.measurementId),mb&&(a("consent","default",mb),kb(void 0)),a("js",new Date),(m=null!==(l=null===s||void 0===s?void 0:s.config)&&void 0!==l?l:{}).origin="firebase",m.update=!0,null!=v&&(m.firebase_id=v),a("config",p.measurementId,m),vb&&(a("set",vb),_b(void 0)),e.abrupt("return",p.measurementId);case 20:case"end":return e.stop()}}),e)}))),xb.apply(this,arguments)}var Tb,Cb,Eb=function(){function e(t){p(this,e),this.app=t}return m(e,[{key:"_delete",value:function(){return delete Sb[this.app.options.appId],Promise.resolve()}}]),e}(),Sb={},Mb=[],Ib={},Nb="dataLayer",Ab="gtag",Db=!1;function Rb(){var e=[];if(dt()&&e.push("This is a browser extension environment."),"undefined"!==typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){var t=e.map((function(e,t){return"(".concat(t+1,") ").concat(e)})).join(" "),n=rb.create("invalid-analytics-context",{errorInfo:t});Yw.warn(n.message)}}function Ob(e,t,n){Rb();var r=e.options.appId;if(!r)throw rb.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw rb.create("no-api-key");Yw.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=Sb[r])throw rb.create("already-exists",{id:r});if(!Db){!function(e){var t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Nb);var i=eb(Sb,Mb,Ib,Nb,Ab),a=i.wrappedGtag,o=i.gtagCore;Cb=a,Tb=o,Db=!0}return Sb[r]=function(e,t,n,r,i,a,o){return xb.apply(this,arguments)}(e,Mb,Ib,t,Tb,Nb,n),new Eb(e)}function Pb(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Mn(e,qw);if(n.isInitialized()){var r=n.getImmediate();if(It(t,n.getOptions()))return r;throw rb.create("already-initialized")}var i=n.initialize({options:t});return i}function Lb(e,t,n,r){e=jt(e),function(e,t,n,r,i){return gb.apply(this,arguments)}(Cb,Sb[e.app.options.appId],t,n,r).catch((function(e){return Yw.error(e)}))}var jb="@firebase/analytics",Fb="0.8.0";Sn(new Ft(qw,(function(e,t){var n=t.options;return Ob(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),Sn(new Ft("analytics-internal",(function(e){try{var t=e.getProvider(qw).getImmediate();return{logEvent:function(e,n,r){return Lb(t,e,n,r)}}}catch(n){throw rb.create("interop-component-reg-failed",{reason:n})}}),"PRIVATE")),On(jb,Fb),On(jb,Fb,"esm2017");var Ub=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:bn,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Nn.create("bad-app-name",{appName:String(i)});var a=Tn.get(i);if(a){if(It(e,a.options)&&It(r,a.config))return a;throw Nn.create("duplicate-app",{appName:i})}var o,s=new qt(i),u=S(Cn.values());try{for(u.s();!(o=u.n()).done;){var l=o.value;s.addComponent(l)}}catch(h){u.e(h)}finally{u.f()}var c=new An(e,r,s);return Tn.set(i,c),c}({apiKey:"AIzaSyBdLzhc6y-wl1WgUGZtLM-KwEVMJzGLXUg",authDomain:"incommon-5a80d.firebaseapp.com",projectId:"incommon-5a80d",storageBucket:"incommon-5a80d.appspot.com",messagingSenderId:"628109166184",appId:"1:628109166184:web:c32f3050c96227bcfb9ddd",measurementId:"G-1DGT55E1YT"}),Bb=(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rn(),t=Mn(e=jt(e),qw);t.isInitialized()?t.getImmediate():Pb(e)}(Ub),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rn();return Mn(e,"firestore").getImmediate()}()),Vb=JSON.parse('[{"name":"Johnny Depp","imageUrl":"https://m.media-amazon.com/images/M/MV5BOTBhMTI1NDQtYmU4Mi00MjYyLTk5MjEtZjllMDkxOWY3ZGRhXkEyXkFqcGdeQXVyNzI1NzMxNzM@._V1_UY209_CR1,0,140,209_AL_.jpg"},{"name":"Arnold Schwarzenegger","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTI3MDc4NzUyMV5BMl5BanBnXkFtZTcwMTQyMTc5MQ@@._V1_UY209_CR13,0,140,209_AL_.jpg"},{"name":"Jim Carrey","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTQwMjAwNzI0M15BMl5BanBnXkFtZTcwOTY1MTMyOQ@@._V1_UY209_CR15,0,140,209_AL_.jpg"},{"name":"Emma Watson","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTQ3ODE2NTMxMV5BMl5BanBnXkFtZTgwOTIzOTQzMjE@._V1_UY209_CR14,0,140,209_AL_.jpg"},{"name":"Robert Downey Jr.","imageUrl":"https://m.media-amazon.com/images/M/MV5BNzg1MTUyNDYxOF5BMl5BanBnXkFtZTgwNTQ4MTE2MjE@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Daniel Radcliffe","imageUrl":"https://m.media-amazon.com/images/M/MV5BZmE0NzNiNzQtYTVlYS00MjljLWE4MTgtYzYxNjU2NjZkM2M4XkEyXkFqcGdeQXVyNjY5NDgzNjQ@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Chris Evans","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTU2NTg1OTQzMF5BMl5BanBnXkFtZTcwNjIyMjkyMg@@._V1_UY209_CR4,0,140,209_AL_.jpg"},{"name":"Leonardo DiCaprio","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjI0MTg3MzI0M15BMl5BanBnXkFtZTcwMzQyODU2Mw@@._V1_UY209_CR7,0,140,209_AL_.jpg"},{"name":"Tom Cruise","imageUrl":"https://m.media-amazon.com/images/M/MV5BYTFlOTdjMjgtNmY0ZC00MDgxLThjNmEtZGIxZTQyZDdkMTRjXkEyXkFqcGdeQXVyMTkxNjUyNQ@@._V1_UY209_CR7,0,140,209_AL_.jpg"},{"name":"Brad Pitt","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjA1MjE2MTQ2MV5BMl5BanBnXkFtZTcwMjE5MDY0Nw@@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Charles Chaplin","imageUrl":"https://m.media-amazon.com/images/M/MV5BNDcwMDc0ODAzOF5BMl5BanBnXkFtZTgwNTY2OTI1MDE@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Morgan Freeman","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTc0MDMyMzI2OF5BMl5BanBnXkFtZTcwMzM2OTk1MQ@@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Tom Hanks","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTQ2MjMwNDA3Nl5BMl5BanBnXkFtZTcwMTA2NDY3NQ@@._V1_UY209_CR2,0,140,209_AL_.jpg"},{"name":"Hugh Jackman","imageUrl":"https://m.media-amazon.com/images/M/MV5BNDExMzIzNjk3Nl5BMl5BanBnXkFtZTcwOTE4NDU5OA@@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Matt Damon","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTM0NzYzNDgxMl5BMl5BanBnXkFtZTcwMDg2MTMyMw@@._V1_UY209_CR8,0,140,209_AL_.jpg"},{"name":"Sylvester Stallone","imageUrl":"https://m.media-amazon.com/images/M/MV5BOGU0Y2JiMGEtYzc0Ni00MDIwLTgxZGYtOWE2ZDMzYWQ5MjI0XkEyXkFqcGdeQXVyMTI3NjAxODc0._V1_UY209_CR22,0,140,209_AL_.jpg"},{"name":"Will Smith","imageUrl":"https://m.media-amazon.com/images/M/MV5BNTczMzk1MjU1MV5BMl5BanBnXkFtZTcwNDk2MzAyMg@@._V1_UY209_CR2,0,140,209_AL_.jpg"},{"name":"Clint Eastwood","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTg3MDc0MjY0OV5BMl5BanBnXkFtZTcwNzU1MDAxOA@@._V1_UY209_CR7,0,140,209_AL_.jpg"},{"name":"Cameron Diaz","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTkxNTI5NzM4MV5BMl5BanBnXkFtZTcwMTI3ODY3Mg@@._V1_UY209_CR1,0,140,209_AL_.jpg"},{"name":"George Clooney","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjEyMTEyOTQ0MV5BMl5BanBnXkFtZTcwNzU3NTMzNw@@._V1_UY209_CR7,0,140,209_AL_.jpg"},{"name":"Steven Spielberg","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTY1NjAzNzE1MV5BMl5BanBnXkFtZTYwNTk0ODc0._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Harrison Ford","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTY4Mjg0NjIxOV5BMl5BanBnXkFtZTcwMTM2NTI3MQ@@._V1_UY209_CR0,0,140,209_AL_.jpg"},{"name":"Robert De Niro","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjAwNDU3MzcyOV5BMl5BanBnXkFtZTcwMjc0MTIxMw@@._V1_UY209_CR9,0,140,209_AL_.jpg"},{"name":"Al Pacino","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTQzMzg1ODAyNl5BMl5BanBnXkFtZTYwMjAxODQ1._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Robert Downey Jr.","imageUrl":"https://m.media-amazon.com/images/M/MV5BNzg1MTUyNDYxOF5BMl5BanBnXkFtZTgwNTQ4MTE2MjE@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Russell Crowe","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTQyMTExNTMxOF5BMl5BanBnXkFtZTcwNDg1NzkzNw@@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Liam Neeson","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjA1MTQ3NzU1MV5BMl5BanBnXkFtZTgwMDE3Mjg0MzE@._V1_UY209_CR35,0,140,209_AL_.jpg"},{"name":"Kate Winslet","imageUrl":"https://m.media-amazon.com/images/M/MV5BODgzMzM2NTE0Ml5BMl5BanBnXkFtZTcwMTcyMTkyOQ@@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Mark Wahlberg","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTU0MTQ4OTMyMV5BMl5BanBnXkFtZTcwMTQxOTY1NA@@._V1_UY209_CR10,0,140,209_AL_.jpg"},{"name":"Natalie Portman","imageUrl":"https://m.media-amazon.com/images/M/MV5BYzU0ZGRhZWItMGJlNy00YzlkLWIzOWYtNDA2NzlhMDg3YjMwXkEyXkFqcGdeQXVyMDM2NDM2MQ@@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Pierce Brosnan","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTMwMjMxNzM4OV5BMl5BanBnXkFtZTcwNDM5NzkxMw@@._V1_UY209_CR6,0,140,209_AL_.jpg"},{"name":"Sean Connery","imageUrl":"https://m.media-amazon.com/images/M/MV5BMzcwNTM4MzctYjQzMi00NTA2LTljYWItNTYzNmE1MTYxN2RlXkEyXkFqcGdeQXVyMDI2NDg0NQ@@._V1_UY209_CR11,0,140,209_AL_.jpg"},{"name":"Orlando Bloom","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjE1MDkxMjQ3NV5BMl5BanBnXkFtZTcwMzQ3Mjc4MQ@@._V1_UY209_CR6,0,140,209_AL_.jpg"},{"name":"Dwayne Johnson","imageUrl":"https://m.media-amazon.com/images/M/MV5BOWU1ODBiNGUtMzVjNi00MzdhLTk0OTktOWRiOTIxMWNhOGI2XkEyXkFqcGdeQXVyMTU2OTM5NDQw._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Jackie Chan","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTk4MDM0MDUzM15BMl5BanBnXkFtZTcwOTI4MzU1Mw@@._V1_UY209_CR5,0,140,209_AL_.jpg"},{"name":"Angelina Jolie","imageUrl":"https://m.media-amazon.com/images/M/MV5BODg3MzYwMjE4N15BMl5BanBnXkFtZTcwMjU5NzAzNw@@._V1_UY209_CR15,0,140,209_AL_.jpg"},{"name":"Adam Sandler","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjQyNzM2MjM1Ml5BMl5BanBnXkFtZTcwMDE5NjI3Mg@@._V1_UY209_CR5,0,140,209_AL_.jpg"},{"name":"Scarlett Johansson","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTM3OTUwMDYwNl5BMl5BanBnXkFtZTcwNTUyNzc3Nw@@._V1_UY209_CR16,0,140,209_AL_.jpg"},{"name":"Heath Ledger","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTI2NTY0NzA4MF5BMl5BanBnXkFtZTYwMjE1MDE0._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Anne Hathaway","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTRhNzQ3NGMtZmQ1Mi00ZTViLTk3OTgtOTk0YzE2YTgwMmFjXkEyXkFqcGdeQXVyNzg5MzIyOA@@._V1_UY209_CR14,0,140,209_AL_.jpg"},{"name":"Jessica Alba","imageUrl":"https://m.media-amazon.com/images/M/MV5BODYxNzE4OTk5Nl5BMl5BanBnXkFtZTcwODYyMDYzMw@@._V1_UY209_CR8,0,140,209_AL_.jpg"},{"name":"Edward Norton","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTYwNjQ5MTI1NF5BMl5BanBnXkFtZTcwMzU5MTI2Mw@@._V1_UY209_CR11,0,140,209_AL_.jpg"},{"name":"Keira Knightley","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTYwNDM0NDA3M15BMl5BanBnXkFtZTcwNTkzMjQ3OA@@._V1_UY209_CR4,0,140,209_AL_.jpg"},{"name":"Bradley Cooper","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjM0OTIyMzY1M15BMl5BanBnXkFtZTgwMTg0OTE0NzE@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Will Ferrell","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTMxMDIzMDEzNF5BMl5BanBnXkFtZTcwODcxMjE2Mg@@._V1_UY209_CR2,0,140,209_AL_.jpg"},{"name":"Julia Roberts","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTQzNjU3MDczN15BMl5BanBnXkFtZTYwNzY2Njc4._V1_UY209_CR0,0,140,209_AL_.jpg"},{"name":"Nicolas Cage","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjUxMjE4MTQxMF5BMl5BanBnXkFtZTcwNzc2MDM1NA@@._V1_UY209_CR6,0,140,209_AL_.jpg"},{"name":"Daniel Craig","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjEzMjk4NDU4MF5BMl5BanBnXkFtZTcwMDMyNjQzMg@@._V1_UY209_CR0,0,140,209_AL_.jpg"},{"name":"Keanu Reeves","imageUrl":"https://m.media-amazon.com/images/M/MV5BNGJmMWEzOGQtMWZkNS00MGNiLTk5NGEtYzg1YzAyZTgzZTZmXkEyXkFqcGdeQXVyMTE1MTYxNDAw._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Ian McKellen","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTQ2MjgyNjk3MV5BMl5BanBnXkFtZTcwNTA3NTY5Mg@@._V1_UY209_CR7,0,140,209_AL_.jpg"},{"name":"Halle Berry","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjIxNzc5MDAzOV5BMl5BanBnXkFtZTcwMDUxMjMxMw@@._V1_UY209_CR7,0,140,209_AL_.jpg"},{"name":"Bruce Willis","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjA0MjMzMTE5OF5BMl5BanBnXkFtZTcwMzQ2ODE3Mw@@._V1_UY209_CR19,0,140,209_AL_.jpg"},{"name":"Samuel L. Jackson","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTQ1NTQwMTYxNl5BMl5BanBnXkFtZTYwMjA1MzY1._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Ben Stiller","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjc4NDc3NDkzMl5BMl5BanBnXkFtZTcwMTAyNTQwMw@@._V1_UY209_CR9,0,140,209_AL_.jpg"},{"name":"Tommy Lee Jones","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTkyNjc4MDc0OV5BMl5BanBnXkFtZTcwOTc5OTUwOQ@@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Antonio Banderas","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTUyOTQ3NTYyNF5BMl5BanBnXkFtZTcwMTY2NjIzNQ@@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Denzel Washington","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjE5NDU2Mzc3MV5BMl5BanBnXkFtZTcwNjAwNTE5OQ@@._V1_UY209_CR8,0,140,209_AL_.jpg"},{"name":"Steve Carell","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjMyOTM2OTk1Ml5BMl5BanBnXkFtZTgwMTI3MzkyNjM@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Shia LaBeouf","imageUrl":"https://m.media-amazon.com/images/M/MV5BZjNjNTI5NGMtMmMzZS00ZWRhLWJhZDQtMWEwODlkMzEyNWJlXkEyXkFqcGdeQXVyMjQwMDg0Ng@@._V1_UY209_CR11,0,140,209_AL_.jpg"},{"name":"Megan Fox","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTc5MjgyMzk4NF5BMl5BanBnXkFtZTcwODk2OTM4Mg@@._V1_UY209_CR3,0,140,209_AL_.jpg"},{"name":"James Franco","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjA4MzMzNDM5MF5BMl5BanBnXkFtZTgwMjQ0MDk0NDM@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Mel Gibson","imageUrl":"https://m.media-amazon.com/images/M/MV5BNTUzOTMwNTM0OV5BMl5BanBnXkFtZTcwNDQwMTUxMw@@._V1_UY209_CR6,0,140,209_AL_.jpg"},{"name":"Vin Diesel","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjExNzA4MDYxN15BMl5BanBnXkFtZTcwOTI1MDAxOQ@@._V1_UY209_CR5,0,140,209_AL_.jpg"},{"name":"Tim Allen","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTI5ODY0NTAwOF5BMl5BanBnXkFtZTcwOTI3NjQxMw@@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Robin Williams","imageUrl":"https://m.media-amazon.com/images/M/MV5BNTYzMjc2Mjg4MF5BMl5BanBnXkFtZTcwODc1OTQwNw@@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Kevin Spacey","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTY1NzMyODc3Nl5BMl5BanBnXkFtZTgwNzE2MzA1NDM@._V1_UY209_CR58,0,140,209_AL_.jpg"},{"name":"Jason Biggs","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjAzMTM0NzkwM15BMl5BanBnXkFtZTcwMDQwMjU0NA@@._V1_UY209_CR13,0,140,209_AL_.jpg"},{"name":"Seann William Scott","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjEzMjk1NTA1Ml5BMl5BanBnXkFtZTcwNjQyNjAwOQ@@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Jean-Claude Van Damme","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTA2OTE1Njg4NjVeQTJeQWpwZ15BbWU3MDAyNjU4MDM@._V1_UY209_CR15,0,140,209_AL_.jpg"},{"name":"Zach Galifianakis","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTQwNzI3NjIwMV5BMl5BanBnXkFtZTcwMzA1OTIwMw@@._V1_UY209_CR1,0,140,209_AL_.jpg"},{"name":"Owen Wilson","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTgwMzQ4ODYxMV5BMl5BanBnXkFtZTcwNDAwMTc2NQ@@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Christian Bale","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTkxMzk4MjQ4MF5BMl5BanBnXkFtZTcwMzExODQxOA@@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Peter Jackson","imageUrl":"https://m.media-amazon.com/images/M/MV5BYjFjOThjMjgtYzM5ZS00Yjc0LTk5OTAtYWE4Y2IzMDYyZTI5XkEyXkFqcGdeQXVyMTMxMTIwMTE0._V1_UY209_CR75,0,140,209_AL_.jpg"},{"name":"Sandra Bullock","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTI5NDY5NjU3NF5BMl5BanBnXkFtZTcwMzQ0MTMyMw@@._V1_UY209_CR1,0,140,209_AL_.jpg"},{"name":"Bruce Lee","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTUwMTg4NDkzMV5BMl5BanBnXkFtZTYwMjU4Nzc2._V1_UY209_CR59,0,140,209_AL_.jpg"},{"name":"Drew Barrymore","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjEyOTMzODIxM15BMl5BanBnXkFtZTcwODM2NTY5Mg@@._V1_UY209_CR4,0,140,209_AL_.jpg"},{"name":"Macaulay Culkin","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTM1NzUwMjY2M15BMl5BanBnXkFtZTcwOTI5MTMyMw@@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Jack Nicholson","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTQ3OTY0ODk0M15BMl5BanBnXkFtZTYwNzE4Njc4._V1_UY209_CR5,0,140,209_AL_.jpg"},{"name":"Bill Murray","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTQ1OTM0MjEwOF5BMl5BanBnXkFtZTYwNTQwNzI1._V1_UY209_CR1,0,140,209_AL_.jpg"},{"name":"Sigourney Weaver","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTk1MTcyNTE3OV5BMl5BanBnXkFtZTcwMTA0MTMyMw@@._V1_UY209_CR8,0,140,209_AL_.jpg"},{"name":"Jake Gyllenhaal","imageUrl":"https://m.media-amazon.com/images/M/MV5BNjA0MTU2NDY3MF5BMl5BanBnXkFtZTgwNDU4ODkzMzE@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Jason Statham","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTkxMzk2MDkwOV5BMl5BanBnXkFtZTcwMDAxODQwMg@@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Jet Li","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjAxNjc0MjIyM15BMl5BanBnXkFtZTcwNTM2NDA4MQ@@._V1_UY209_CR16,0,140,209_AL_.jpg"},{"name":"Kate Beckinsale","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTM3MzY2MDYwOF5BMl5BanBnXkFtZTcwODQ3MDA0Nw@@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Rowan Atkinson","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTg3NDUzOTc3MV5BMl5BanBnXkFtZTcwNjcxMDkxNw@@._V1_UY209_CR0,0,140,209_AL_.jpg"},{"name":"Marlon Brando","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTg3MDYyMDE5OF5BMl5BanBnXkFtZTcwNjgyNTEzNA@@._V1_UY209_CR65,0,140,209_AL_.jpg"},{"name":"John Travolta","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTMyMjZlYzgtZWRjMC00OTRmLTllZTktMmM1ODVmNjljMTQyXkEyXkFqcGdeQXVyMTExNzQ3MzAw._V1_UY209_CR15,0,140,209_AL_.jpg"},{"name":"Channing Tatum","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTUyOTc2NTEwNV5BMl5BanBnXkFtZTgwNDgxMjMxNjE@._V1_UY209_CR39,0,140,209_AL_.jpg"},{"name":"Ben Affleck","imageUrl":"https://m.media-amazon.com/images/M/MV5BMzczNzNiMDAtMmUzZS00MTkwLWIwOTYtNmYyNjg3MTVkNThhXkEyXkFqcGdeQXVyMjA4MjI5MTA@._V1_UY209_CR8,0,140,209_AL_.jpg"},{"name":"Shah Rukh Khan","imageUrl":"https://m.media-amazon.com/images/M/MV5BZDk1ZmU0NGYtMzQ2Yi00N2NjLTkyNWEtZWE2NTU4NTJiZGUzXkEyXkFqcGdeQXVyMTExNDQ2MTI@._V1_UY209_CR3,0,140,209_AL_.jpg"},{"name":"Jennifer Aniston","imageUrl":"https://m.media-amazon.com/images/M/MV5BNjk1MjIxNjUxNF5BMl5BanBnXkFtZTcwODk2NzM4Mg@@._V1_UY209_CR3,0,140,209_AL_.jpg"},{"name":"Emma Stone","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjI4NjM1NDkyN15BMl5BanBnXkFtZTgwODgyNTY1MjE@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Chris Hemsworth","imageUrl":"https://m.media-amazon.com/images/M/MV5BOTU2MTI0NTIyNV5BMl5BanBnXkFtZTcwMTA4Nzc3OA@@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"James McAvoy","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTQzNzIxOTYzMl5BMl5BanBnXkFtZTcwNjYxNTk1Nw@@._V1_UY209_CR10,0,140,209_AL_.jpg"},{"name":"James Cameron","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjI0MjMzOTg2MF5BMl5BanBnXkFtZTcwMTM3NjQxMw@@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Amitabh Bachchan","imageUrl":"https://m.media-amazon.com/images/M/MV5BNTk1OTUxMzIzMV5BMl5BanBnXkFtZTcwMzMxMjI0Nw@@._V1_UY209_CR6,0,140,209_AL_.jpg"},{"name":"Brendan Fraser","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjA5MjExMzY0M15BMl5BanBnXkFtZTgwNTMxOTg4MTI@._V1_UY209_CR8,0,140,209_AL_.jpg"},{"name":"Rachel McAdams","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTY5ODcxMDU4NV5BMl5BanBnXkFtZTcwMjAzNjQyNQ@@._V1_UY209_CR2,0,140,209_AL_.jpg"},{"name":"Tom Hiddleston","imageUrl":"https://m.media-amazon.com/images/M/MV5BNWYwODAyZjAtOTQ1My00MDY2LTg0NDQtZGFiMDRiYzY4ZmM2XkEyXkFqcGdeQXVyNjg2NjQwMDQ@._V1_UY209_CR7,0,140,209_AL_.jpg"},{"name":"Aamir Khan","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjAwMjk3NDUzN15BMl5BanBnXkFtZTcwNjI4MTY0NA@@._V1_UX140_CR0,0,140,209_AL_.jpg"}]');function zb(e){return e.slice(0,4).toUpperCase()}function qb(e){if("actors"===e)return Vb.filter((function(e,t){return t<52})).map((function(e){return e.imageUrl}));for(var t=[],n=0;n<52;n++){var r="".concat(e,"-").concat(n,".jpg"),i="decks/".concat(e,"/").concat(r);t.push(i)}return t.sort((function(){return Math.random()-.5})),t}var Wb=n(184),Qb=(0,e.createContext)({gameRef:null,currentPlayerName:"",cards:[],setGameRef:function(){},setCurrentPlayerName:function(){},setCards:function(){}}),Hb=function(t){var n=t.children,r=u((0,e.useState)((function(){return localStorage.getItem("currentPlayerName")||""})),2),i=r[0],a=r[1],o=u((0,e.useState)(null),2),s=o[0],l=o[1],c=u((0,e.useState)([]),2),h=c[0],f=c[1],d={gameRef:s,currentPlayerName:i,cards:h,setGameRef:l,setCurrentPlayerName:function(e){a(e),function(e){localStorage.setItem("currentPlayerName",e)}(e)},setCards:f};return(0,Wb.jsx)(Qb.Provider,{value:d,children:n})},Yb=function(e){var t=e.children,n=e.onClick,r=e.className,i=e.disabled,a=void 0!==i&&i,o=e.type,s=void 0===o?"button":o;return(0,Wb.jsx)("button",{type:s,onClick:n,className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded ".concat(r),disabled:a,children:t})};var Kb=function(){var t=(0,e.useContext)(Qb),n=t.setCurrentPlayerName,r=t.setGameRef;(0,e.useEffect)((function(){var e=localStorage.getItem("currentPlayerName");e&&n(e)}),[]);var i=u((0,e.useState)(""),2),a=i[0],o=i[1],s=u((0,e.useState)(""),2),l=s[0],c=s[1],h=me(),f={players:[],teams:[{name:"red",players:[],score:0},{name:"green",players:[],score:0},{name:"blue",players:[],score:0}],category:"",phrase:"",scores:{}},d=function(){var e=Ke(He().mark((function e(){var t,n,i;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wv(bp(Bb,"games"),f);case 2:return t=e.sent,r(t),n=t.id,i=zb(n),e.next=8,_v(t,{shortId:i});case 8:h("/host/".concat(i));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Ke(He().mark((function e(){var t,i;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a&&l){e.next=3;break}return alert("Please enter your name and game ID."),e.abrupt("return");case 3:return n(a),t=bp(Bb,"games"),i=cv(t,fv("shortId","==",l)),e.next=8,kv(i).then((function(e){if(1===e.size){var t=e.docs[0].id,n=e.docs[0].data().players;n.push({name:a,score:0,chosenCards:[],team:""});var i=xp(Bb,"games",t);r(i),_v(i,{players:n}).then((function(){h("/player/".concat(l))})).catch((function(e){console.error(e)}))}else alert("Invalid game ID.")}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,Wb.jsxs)("div",{className:"container mx-auto p-4",children:[(0,Wb.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Start a Game or Join"}),(0,Wb.jsxs)("div",{className:"mb-6",children:[(0,Wb.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Host a Game"}),(0,Wb.jsx)(Yb,{onClick:d,children:"Start Game"})]}),(0,Wb.jsxs)("div",{children:[(0,Wb.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Join a Game"}),(0,Wb.jsxs)("div",{className:"mb-4",children:[(0,Wb.jsx)("label",{htmlFor:"playerName",className:"block text-gray-700 text-sm font-bold mb-2",children:"Your Name:"}),(0,Wb.jsx)("input",{type:"text",id:"playerName",value:a,onChange:function(e){return o(e.target.value)},className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})]}),(0,Wb.jsxs)("div",{className:"mb-4",children:[(0,Wb.jsx)("label",{htmlFor:"shortId",className:"block text-gray-700 text-sm font-bold mb-2",children:"Game ID:"}),(0,Wb.jsx)("input",{type:"text",id:"shortId",value:l,onChange:function(e){return c(e.target.value)},className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})]}),(0,Wb.jsx)(Yb,{onClick:p,children:"Join Game"})]})]})},Gb=function(e){var t=e.gameData,n=t.players,r=t.shortId;return(0,Wb.jsxs)("div",{className:"container mx-auto p-4",children:[(0,Wb.jsxs)("h2",{className:"text-2xl font-bold mb-4",children:["Game ID: ",r]}),(0,Wb.jsx)("h2",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Joined Players:"}),(0,Wb.jsx)("div",{className:"overflow-x-auto",children:(0,Wb.jsxs)("table",{className:"min-w-full leading-normal",children:[(0,Wb.jsx)("thead",{children:(0,Wb.jsxs)("tr",{className:"bg-gray-100",children:[(0,Wb.jsx)("th",{className:"px-5 py-3 border-b-2 border-gray-200 text-gray-800 text-left text-sm uppercase font-normal",children:"Player Name"}),(0,Wb.jsx)("th",{className:"px-5 py-3 border-b-2 border-gray-200 text-gray-800 text-left text-sm uppercase font-normal",children:"Team"})]})}),(0,Wb.jsx)("tbody",{children:n.map((function(e){return(0,Wb.jsxs)("tr",{className:"hover:bg-gray-100",children:[(0,Wb.jsx)("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.name}),(0,Wb.jsx)("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.team})]},e.name)}))})]})})]})},Xb=n.p+"static/media/card-back.194153f79ebbb9055fda.jpg";var $b=function(e){var t=e.deck,n=e.cardIndex,r=e.flipped;return(0,Wb.jsx)("div",{className:"card",style:{width:100,height:140,backgroundImage:"url(".concat(r?t[n]:Xb,")")}})},Zb=function(t){var n=t.deck,r=t.gameData,i=t.gameRef,a=r.players,o=r.teams,s=(r.gameState,r.currentRound),l=s%a.length,c=a[l].name,h=u((0,e.useState)(null),2),f=h[0],p=h[1],v=u((0,e.useState)(null),2),m=v[0],y=v[1],g=u((0,e.useState)(!1),2),k=g[0],_=g[1],w=u((0,e.useState)([]),2),b=w[0],x=w[1],T=u((0,e.useState)(!1),2),C=T[0],E=T[1],M=function(){var e=Ke(He().mark((function e(){var t,n,r,i,a,s,u;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=S(o),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=14;break}if(0!==(r=n.value).players.length){e.next=7;break}return e.abrupt("continue",12);case 7:for(i=0,a=r.players[0].chosenCards,s=r.players[1].chosenCards,u=0;u<a.length;u++)a[u]===s[u]?i+=3:-1!==a.indexOf(s[u])&&(i+=2);r.score=i;case 12:e.next=3;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),t.e(e.t0);case 19:return e.prev=19,t.f(),e.finish(19);case 22:return E(!0),e.prev=23,e.next=26,_v(m,{teams:o,scoresCalculated:!0});case 26:console.log("Update successful"),e.next=32;break;case 29:e.prev=29,e.t1=e.catch(23),console.error("Error updating document: ",e.t1);case 32:case"end":return e.stop()}}),e,null,[[1,16,19,22],[23,29]])})));return function(){return e.apply(this,arguments)}}();if((0,e.useEffect)((function(){f&&m&&function(e){var t,n=d(o),r=S(n);try{var i=function(){var n=t.value;n.players=e.players.filter((function(e){return e.team===n.name}))};for(r.s();!(t=r.n()).done;)i()}catch(u){r.e(u)}finally{r.f()}var s=0;e.players.forEach((function(e){s+=e.chosenCards.length})),x(n),C||s/5===a.length&&(_(!0),M())}(f)}),[f]),(0,e.useEffect)((function(){_(!1),E(!1);var e=bp(i,"rounds");kv(cv(e,fv("roundNumber","==",s))).then((function(t){if(1===t.size){var n=t.docs[0].id,r=xp(e,n);bv(r,(function(e){y(r),p(e.data())}))}else console.error("Invalid short ID.")}))}),[s]),!f)return(0,Wb.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,Wb.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})});var I=f.phrase;return(0,Wb.jsxs)("div",{children:[(0,Wb.jsx)("nav",{className:"bg-gray-800 text-white shadow-lg",children:(0,Wb.jsxs)("div",{className:"mx-auto px-4 py-3 flex justify-between items-center",children:[(0,Wb.jsx)(qe,{to:"/",children:(0,Wb.jsx)("h1",{className:"text-xl font-bold",children:"Incommon"})}),(0,Wb.jsx)("div",{children:(0,Wb.jsxs)("p",{className:"text-md",children:["Phrase: ",I]})}),(0,Wb.jsx)("div",{className:"mr-6",children:(0,Wb.jsxs)("p",{className:"text-md",children:["Round ",s]})})]})}),(0,Wb.jsxs)("div",{className:"mx-auto p-4",children:[!I&&(0,Wb.jsx)("div",{className:"mb-4 flex justify-center items-center",children:(0,Wb.jsxs)("p",{className:"text-lg font-semibold text-gray-700 bg-gray-100 px-4 py-2 rounded-lg shadow",children:["Waiting for ",(0,Wb.jsx)("span",{className:"text-blue-500",children:c})," to choose the phrase"]})}),(0,Wb.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4",children:b.map((function(e){return 2===e.players.length&&(0,Wb.jsxs)("div",{className:"bg-blue-800 text-white p-4 rounded shadow",children:[(0,Wb.jsxs)("div",{className:"flex justify-between",children:[(0,Wb.jsxs)("h3",{className:"font-semibold text-lg mb-3",children:["Team ",e.name]}),(0,Wb.jsxs)("h3",{children:["Score: ",e.score]})]}),e.players.map((function(e){return(0,Wb.jsx)("div",{className:"mb-4",children:(0,Wb.jsxs)("div",{className:"mt-2 grid grid-cols-6 gap-2",children:[(0,Wb.jsx)("span",{className:"font-semibold text-lg",children:e.name}),5===e.chosenCards.length&&e.chosenCards.map((function(e){return(0,Wb.jsx)("div",{children:(0,Wb.jsx)($b,{deck:n,cardIndex:e,flipped:k})})}))]})},e.name)}))]},e.name)}))})]})]})},Jb=function(){var t=u((0,e.useState)(null),2),n=t[0],r=t[1],i=u((0,e.useState)(null),2),a=i[0],o=i[1],s=ye().shortId;if((0,e.useEffect)((function(){kv(cv(bp(Bb,"games"),fv("shortId","==",s))).then((function(e){if(1===e.size){var t=e.docs[0].id,n=xp(Bb,"games",t);o(n),bv(n,(function(e){r(e.data())}))}else console.error("Invalid short ID.")}))}),[s]),!n)return(0,Wb.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,Wb.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})});var l=n.deckType,c=n.gameState;return(0,Wb.jsx)("div",{className:"flex justify-center h-screen",children:"started"===c?(0,Wb.jsx)(Zb,{deck:qb(l),gameData:n,gameRef:a}):(0,Wb.jsx)(Gb,{gameData:n,gameRef:a})})};function ex(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var tx=Object.defineProperty,nx={};!function(e,t){for(var n in t)tx(e,n,{get:t[n],enumerable:!0})}(nx,{assign:function(){return Px},colors:function(){return Dx},createStringInterpolator:function(){return Mx},skipAnimation:function(){return Rx},to:function(){return Ix},willAdvance:function(){return Ox}});var rx=kx(),ix=function(e){return vx(e,rx)},ax=kx();ix.write=function(e){return vx(e,ax)};var ox=kx();ix.onStart=function(e){return vx(e,ox)};var sx=kx();ix.onFrame=function(e){return vx(e,sx)};var ux=kx();ix.onFinish=function(e){return vx(e,ux)};var lx=[];ix.setTimeout=function(e,t){var n=ix.now()+t,r={time:n,handler:e,cancel:function e(){var t=lx.findIndex((function(t){return t.cancel==e}));~t&&lx.splice(t,1),dx-=~t?1:0}};return lx.splice(cx(n),0,r),dx+=1,mx(),r};var cx=function(e){return~(~lx.findIndex((function(t){return t.time>e}))||~lx.length)};ix.cancel=function(e){ox.delete(e),sx.delete(e),ux.delete(e),rx.delete(e),ax.delete(e)},ix.sync=function(e){px=!0,ix.batchedUpdates(e),px=!1},ix.throttle=function(e){var t;function n(){try{e.apply(void 0,d(t))}finally{t=null}}function r(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];t=r,ix.onStart(n)}return r.handler=e,r.cancel=function(){ox.delete(n),t=null},r};var hx="undefined"!=typeof window?window.requestAnimationFrame:function(){};ix.use=function(e){return hx=e},ix.now="undefined"!=typeof performance?function(){return performance.now()}:Date.now,ix.batchedUpdates=function(e){return e()},ix.catch=console.error,ix.frameLoop="always",ix.advance=function(){"demand"!==ix.frameLoop?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):gx()};var fx=-1,dx=0,px=!1;function vx(e,t){px?(t.delete(e),e(0)):(t.add(e),mx())}function mx(){fx<0&&(fx=0,"demand"!==ix.frameLoop&&hx(yx))}function yx(){~fx&&(hx(yx),ix.batchedUpdates(gx))}function gx(){var e=fx;fx=ix.now();var t=cx(fx);t&&(_x(lx.splice(0,t),(function(e){return e.handler()})),dx-=t),dx?(ox.flush(),rx.flush(e?Math.min(64,fx-e):16.667),sx.flush(),ax.flush(),ux.flush()):fx=-1}function kx(){var e=new Set,t=e;return{add:function(n){dx+=t!=e||e.has(n)?0:1,e.add(n)},delete:function(n){return dx-=t==e&&e.has(n)?1:0,e.delete(n)},flush:function(n){t.size&&(e=new Set,dx-=t.size,_x(t,(function(t){return t(n)&&e.add(t)})),dx+=e.size,t=e)}}}function _x(e,t){e.forEach((function(e){try{t(e)}catch(n){ix.catch(n)}}))}function wx(){}var bx={arr:Array.isArray,obj:function(e){return!!e&&"Object"===e.constructor.name},fun:function(e){return"function"===typeof e},str:function(e){return"string"===typeof e},num:function(e){return"number"===typeof e},und:function(e){return void 0===e}};function xx(e,t){if(bx.arr(e)){if(!bx.arr(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t}var Tx=function(e,t){return e.forEach(t)};function Cx(e,t,n){if(bx.arr(e))for(var r=0;r<e.length;r++)t.call(n,e[r],"".concat(r));else for(var i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i)}var Ex=function(e){return bx.und(e)?[]:bx.arr(e)?e:[e]};function Sx(e,t){if(e.size){var n=Array.from(e);e.clear(),Tx(n,t)}}var Mx,Ix,Nx=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Sx(e,(function(e){return e.apply(void 0,n)}))},Ax=function(){return"undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)},Dx=null,Rx=!1,Ox=wx,Px=function(e){e.to&&(Ix=e.to),e.now&&(ix.now=e.now),void 0!==e.colors&&(Dx=e.colors),null!=e.skipAnimation&&(Rx=e.skipAnimation),e.createStringInterpolator&&(Mx=e.createStringInterpolator),e.requestAnimationFrame&&ix.use(e.requestAnimationFrame),e.batchedUpdates&&(ix.batchedUpdates=e.batchedUpdates),e.willAdvance&&(Ox=e.willAdvance),e.frameLoop&&(ix.frameLoop=e.frameLoop)},Lx=new Set,jx=[],Fx=[],Ux=0,Bx={get idle(){return!Lx.size&&!jx.length},start:function(e){Ux>e.priority?(Lx.add(e),ix.onStart(Vx)):(zx(e),ix(Wx))},advance:Wx,sort:function(e){if(Ux)ix.onFrame((function(){return Bx.sort(e)}));else{var t=jx.indexOf(e);~t&&(jx.splice(t,1),qx(e))}},clear:function(){jx=[],Lx.clear()}};function Vx(){Lx.forEach(zx),Lx.clear(),ix(Wx)}function zx(e){jx.includes(e)||qx(e)}function qx(e){jx.splice(function(e,t){var n=e.findIndex(t);return n<0?e.length:n}(jx,(function(t){return t.priority>e.priority})),0,e)}function Wx(e){for(var t=Fx,n=0;n<jx.length;n++){var r=jx[n];Ux=r.priority,r.idle||(Ox(r),r.advance(e),r.idle||t.push(r))}return Ux=0,(Fx=jx).length=0,(jx=t).length>0}var Qx=function(e,t,n){return Math.min(Math.max(n,e),t)},Hx="[-+]?\\d*\\.?\\d+",Yx=Hx+"%";function Kx(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var Gx=new RegExp("rgb"+Kx(Hx,Hx,Hx)),Xx=new RegExp("rgba"+Kx(Hx,Hx,Hx,Hx)),$x=new RegExp("hsl"+Kx(Hx,Yx,Yx)),Zx=new RegExp("hsla"+Kx(Hx,Yx,Yx,Hx)),Jx=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,eT=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,tT=/^#([0-9a-fA-F]{6})$/,nT=/^#([0-9a-fA-F]{8})$/;function rT(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function iT(e,t,n){var r=n<.5?n*(1+t):n+t-n*t,i=2*n-r,a=rT(i,r,e+1/3),o=rT(i,r,e),s=rT(i,r,e-1/3);return Math.round(255*a)<<24|Math.round(255*o)<<16|Math.round(255*s)<<8}function aT(e){var t=parseInt(e,10);return t<0?0:t>255?255:t}function oT(e){return(parseFloat(e)%360+360)%360/360}function sT(e){var t=parseFloat(e);return t<0?0:t>1?255:Math.round(255*t)}function uT(e){var t=parseFloat(e);return t<0?0:t>100?1:t/100}function lT(e){var t=function(e){var t;return"number"===typeof e?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=tT.exec(e))?parseInt(t[1]+"ff",16)>>>0:Dx&&void 0!==Dx[e]?Dx[e]:(t=Gx.exec(e))?(aT(t[1])<<24|aT(t[2])<<16|aT(t[3])<<8|255)>>>0:(t=Xx.exec(e))?(aT(t[1])<<24|aT(t[2])<<16|aT(t[3])<<8|sT(t[4]))>>>0:(t=Jx.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=nT.exec(e))?parseInt(t[1],16)>>>0:(t=eT.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=$x.exec(e))?(255|iT(oT(t[1]),uT(t[2]),uT(t[3])))>>>0:(t=Zx.exec(e))?(iT(oT(t[1]),uT(t[2]),uT(t[3]))|sT(t[4]))>>>0:null}(e);if(null===t)return e;var n=(16711680&(t=t||0))>>>16,r=(65280&t)>>>8,i=(255&t)/255;return"rgba(".concat((4278190080&t)>>>24,", ").concat(n,", ").concat(r,", ").concat(i,")")}var cT=function e(t,n,r){if(bx.fun(t))return t;if(bx.arr(t))return e({range:t,output:n,extrapolate:r});if(bx.str(t.output[0]))return Mx(t);var i=t,a=i.output,o=i.range||[0,1],s=i.extrapolateLeft||i.extrapolate||"extend",u=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||function(e){return e};return function(e){var t=function(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}(e,o);return function(e,t,n,r,i,a,o,s,u){var l=u?u(e):e;if(l<t){if("identity"===o)return l;"clamp"===o&&(l=t)}if(l>n){if("identity"===s)return l;"clamp"===s&&(l=n)}if(r===i)return r;if(t===n)return e<=t?r:i;t===-1/0?l=-l:n===1/0?l-=t:l=(l-t)/(n-t);l=a(l),r===-1/0?l=-l:i===1/0?l+=r:l=l*(i-r)+r;return l}(e,o[t],o[t+1],a[t],a[t+1],l,s,u,i.map)}};var hT=1.70158,fT=1.525*hT,dT=hT+1,pT=2*Math.PI/3,vT=2*Math.PI/4.5,mT=function(e){var t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},yT={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return 1-(1-e)*(1-e)},easeInOutQuad:function(e){return e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return 1-Math.pow(1-e,3)},easeInOutCubic:function(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1-Math.pow(1-e,4)},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1-Math.pow(1-e,5)},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2},easeInSine:function(e){return 1-Math.cos(e*Math.PI/2)},easeOutSine:function(e){return Math.sin(e*Math.PI/2)},easeInOutSine:function(e){return-(Math.cos(Math.PI*e)-1)/2},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*e-10)},easeOutExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2},easeInCirc:function(e){return 1-Math.sqrt(1-Math.pow(e,2))},easeOutCirc:function(e){return Math.sqrt(1-Math.pow(e-1,2))},easeInOutCirc:function(e){return e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2},easeInBack:function(e){return dT*e*e*e-hT*e*e},easeOutBack:function(e){return 1+dT*Math.pow(e-1,3)+hT*Math.pow(e-1,2)},easeInOutBack:function(e){return e<.5?Math.pow(2*e,2)*(7.189819*e-fT)/2:(Math.pow(2*e-2,2)*((fT+1)*(2*e-2)+fT)+2)/2},easeInElastic:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*e-10)*Math.sin((10*e-10.75)*pT)},easeOutElastic:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin((10*e-.75)*pT)+1},easeInOutElastic:function(e){return 0===e?0:1===e?1:e<.5?-Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*vT)/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*vT)/2+1},easeInBounce:function(e){return 1-mT(1-e)},easeOutBounce:mT,easeInOutBounce:function(e){return e<.5?(1-mT(1-2*e))/2:(1+mT(2*e-1))/2},steps:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"end";return function(n){var r=(n="end"===t?Math.min(n,.999):Math.max(n,.001))*e,i="end"===t?Math.floor(r):Math.ceil(r);return Qx(0,1,i/e)}}},gT=Symbol.for("FluidValue.get"),kT=Symbol.for("FluidValue.observers"),_T=function(e){return Boolean(e&&e[gT])},wT=function(e){return e&&e[gT]?e[gT]():e},bT=function(e){return e[kT]||null};function xT(e,t){var n=e[kT];n&&n.forEach((function(e){!function(e,t){e.eventObserved?e.eventObserved(t):e(t)}(e,t)}))}var TT=m((function e(t){if(p(this,e),!t&&!(t=this.get))throw Error("Unknown getter");CT(this,t)})),CT=function(e,t){return IT(e,gT,t)};function ET(e,t){if(e[gT]){var n=e[kT];n||IT(e,kT,n=new Set),n.has(t)||(n.add(t),e.observerAdded&&e.observerAdded(n.size,t))}return t}function ST(e,t){var n=e[kT];if(n&&n.has(t)){var r=n.size-1;r?n.delete(t):e[kT]=null,e.observerRemoved&&e.observerRemoved(r,t)}}var MT,IT=function(e,t,n){return Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})},NT=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,AT=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,DT=new RegExp("(".concat(NT.source,")(%|[a-z]+)"),"i"),RT=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,OT=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,PT=function e(t){var n=u(LT(t),2),r=n[0],i=n[1];if(!r||Ax())return t;var a=window.getComputedStyle(document.documentElement).getPropertyValue(r);if(a)return a.trim();if(i&&i.startsWith("--")){var o=window.getComputedStyle(document.documentElement).getPropertyValue(i);return o||t}return i&&OT.test(i)?e(i):i||t},LT=function(e){var t=OT.exec(e);if(!t)return[,];var n=u(t,3);return[n[1],n[2]]},jT=function(e,t,n,r,i){return"rgba(".concat(Math.round(t),", ").concat(Math.round(n),", ").concat(Math.round(r),", ").concat(i,")")},FT=function(e){MT||(MT=Dx?new RegExp("(".concat(Object.keys(Dx).join("|"),")(?!\\w)"),"g"):/^\b$/);var t=e.output.map((function(e){return wT(e).replace(OT,PT).replace(AT,lT).replace(MT,lT)})),n=t.map((function(e){return e.match(NT).map(Number)})),r=n[0].map((function(e,t){return n.map((function(e){if(!(t in e))throw Error('The arity of each "output" value must be equal');return e[t]}))})).map((function(t){return cT($t($t({},e),{},{output:t}))}));return function(e){var n,i=!DT.test(t[0])&&(null===(n=t.find((function(e){return DT.test(e)})))||void 0===n?void 0:n.replace(NT,"")),a=0;return t[0].replace(NT,(function(){return"".concat(r[a++](e)).concat(i||"")})).replace(RT,jT)}},UT="react-spring: ",BT=function(e){var t=e,n=!1;if("function"!=typeof t)throw new TypeError("".concat(UT,"once requires a function parameter"));return function(){n||(t.apply(void 0,arguments),n=!0)}},VT=BT(console.warn);function zT(){VT("".concat(UT,'The "interpolate" function is deprecated in v9 (use "to" instead)'))}var qT=BT(console.warn);function WT(e){return bx.str(e)&&("#"==e[0]||/\d/.test(e)||!Ax()&&OT.test(e)||e in(Dx||{}))}var QT=Ax()?e.useEffect:e.useLayoutEffect;function HT(){var t=(0,e.useState)()[1],n=function(){var t=(0,e.useRef)(!1);return QT((function(){return t.current=!0,function(){t.current=!1}}),[]),t}();return function(){n.current&&t(Math.random())}}var YT=function(t){return(0,e.useEffect)(t,KT)},KT=[];function GT(t){var n=(0,e.useRef)();return(0,e.useEffect)((function(){n.current=t})),n.current}var XT=Symbol.for("Animated:node"),$T=function(e){return e&&e[XT]},ZT=function(e,t){return n=e,r=XT,i=t,Object.defineProperty(n,r,{value:i,writable:!0,configurable:!0});var n,r,i},JT=function(e){return e&&e[XT]&&e[XT].getPayload()},eC=function(){function e(){p(this,e),ZT(this,this)}return m(e,[{key:"getPayload",value:function(){return this.payload||[]}}]),e}(),tC=function(e){g(n,e);var t=T(n);function n(e){var r;return p(this,n),(r=t.call(this))._value=e,r.done=!0,r.durationProgress=0,bx.num(r._value)&&(r.lastPosition=r._value),r}return m(n,[{key:"getPayload",value:function(){return[this]}},{key:"getValue",value:function(){return this._value}},{key:"setValue",value:function(e,t){return bx.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value!==e&&(this._value=e,!0)}},{key:"reset",value:function(){var e=this.done;this.done=!1,bx.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}}],[{key:"create",value:function(e){return new n(e)}}]),n}(eC),nC=function(e){g(n,e);var t=T(n);function n(e){var r;return p(this,n),(r=t.call(this,0))._string=null,r._toString=cT({output:[e,e]}),r}return m(n,[{key:"getValue",value:function(){var e=this._string;return null==e?this._string=this._toString(this._value):e}},{key:"setValue",value:function(e){if(bx.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else{if(!Xe(k(n.prototype),"setValue",this).call(this,e))return!1;this._string=null}return!0}},{key:"reset",value:function(e){e&&(this._toString=cT({output:[this.getValue(),e]})),this._value=0,Xe(k(n.prototype),"reset",this).call(this)}}],[{key:"create",value:function(e){return new n(e)}}]),n}(tC),rC={dependencies:null},iC=function(e){g(n,e);var t=T(n);function n(e){var r;return p(this,n),(r=t.call(this)).source=e,r.setValue(e),r}return m(n,[{key:"getValue",value:function(e){var t={};return Cx(this.source,(function(n,r){var i;(i=n)&&i[XT]===i?t[r]=n.getValue(e):_T(n)?t[r]=wT(n):e||(t[r]=n)})),t}},{key:"setValue",value:function(e){this.source=e,this.payload=this._makePayload(e)}},{key:"reset",value:function(){this.payload&&Tx(this.payload,(function(e){return e.reset()}))}},{key:"_makePayload",value:function(e){if(e){var t=new Set;return Cx(e,this._addToPayload,t),Array.from(t)}}},{key:"_addToPayload",value:function(e){var t=this;rC.dependencies&&_T(e)&&rC.dependencies.add(e);var n=JT(e);n&&Tx(n,(function(e){return t.add(e)}))}}]),n}(eC),aC=function(e){g(n,e);var t=T(n);function n(e){return p(this,n),t.call(this,e)}return m(n,[{key:"getValue",value:function(){return this.source.map((function(e){return e.getValue()}))}},{key:"setValue",value:function(e){var t=this.getPayload();return e.length==t.length?t.map((function(t,n){return t.setValue(e[n])})).some(Boolean):(Xe(k(n.prototype),"setValue",this).call(this,e.map(oC)),!0)}}],[{key:"create",value:function(e){return new n(e)}}]),n}(iC);function oC(e){return(WT(e)?nC:tC).create(e)}function sC(e){var t=$T(e);return t?t.constructor:bx.arr(e)?aC:WT(e)?nC:tC}var uC=function(t,n){var r=!bx.fun(t)||t.prototype&&t.prototype.isReactComponent;return(0,e.forwardRef)((function(i,a){var o=(0,e.useRef)(null),s=r&&(0,e.useCallback)((function(e){o.current=function(e,t){e&&(bx.fun(e)?e(t):e.current=t);return t}(a,e)}),[a]),l=function(e,t){var n=new Set;rC.dependencies=n,e.style&&(e=$t($t({},e),{},{style:t.createAnimatedStyle(e.style)}));return e=new iC(e),rC.dependencies=null,[e,n]}(i,n),c=u(l,2),h=c[0],f=c[1],d=HT(),p=function(){var e=o.current;r&&!e||!1===(!!e&&n.applyAnimatedValues(e,h.getValue(!0)))&&d()},v=new lC(p,f),m=(0,e.useRef)();QT((function(){return m.current=v,Tx(f,(function(e){return ET(e,v)})),function(){m.current&&(Tx(m.current.deps,(function(e){return ST(e,m.current)})),ix.cancel(m.current.update))}})),(0,e.useEffect)(p,[]),YT((function(){return function(){var e=m.current;Tx(e.deps,(function(t){return ST(t,e)}))}}));var y=n.getComponentProps(h.getValue());return e.createElement(t,$t($t({},y),{},{ref:s}))}))},lC=function(){function e(t,n){p(this,e),this.update=t,this.deps=n}return m(e,[{key:"eventObserved",value:function(e){"change"==e.type&&ix.write(this.update)}}]),e}();var cC=Symbol.for("AnimatedComponent"),hC=function(e){return bx.str(e)?e:e&&bx.str(e.displayName)?e.displayName:bx.fun(e)&&e.name||null},fC=["children"];function dC(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return bx.fun(e)?e.apply(void 0,n):e}var pC=function(e,t){return!0===e||!!(t&&e&&(bx.fun(e)?e(t):Ex(e).includes(t)))},vC=function(e,t){return bx.obj(e)?t&&e[t]:e},mC=function(e,t){return!0===e.default?e[t]:e.default?e.default[t]:void 0},yC=function(e){return e},gC=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yC,n=kC;e.default&&!0!==e.default&&(e=e.default,n=Object.keys(e));var r,i={},a=S(n);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=t(e[o],o);bx.und(s)||(i[o]=s)}}catch(u){a.e(u)}finally{a.f()}return i},kC=["config","onProps","onStart","onChange","onPause","onResume","onRest"],_C={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function wC(e){var t=function(e){var t={},n=0;if(Cx(e,(function(e,r){_C[r]||(t[r]=e,n++)})),n)return t}(e);if(t){var n={to:t};return Cx(e,(function(e,r){return r in t||(n[r]=e)})),n}return $t({},e)}function bC(e){return e=wT(e),bx.arr(e)?e.map(bC):WT(e)?nx.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function xC(e){for(var t in e)return!0;return!1}function TC(e){return bx.fun(e)||bx.arr(e)&&bx.obj(e[0])}function CC(e,t){var n;null===(n=e.ref)||void 0===n||n.delete(e),null===t||void 0===t||t.delete(e)}function EC(e,t){var n;t&&e.ref!==t&&(null===(n=e.ref)||void 0===n||n.delete(e),t.add(e),e.ref=t)}var SC=$t($t({},{tension:170,friction:26}),{},{mass:1,damping:1,easing:yT.linear,clamp:!1}),MC=m((function e(){p(this,e),this.velocity=0,Object.assign(this,SC)}));function IC(e,t){if(bx.und(t.decay)){var n=!bx.und(t.tension)||!bx.und(t.friction);!n&&bx.und(t.frequency)&&bx.und(t.damping)&&bx.und(t.mass)||(e.duration=void 0,e.decay=void 0),n&&(e.frequency=void 0)}else e.duration=void 0}var NC=[],AC=m((function e(){p(this,e),this.changed=!1,this.values=NC,this.toValues=null,this.fromValues=NC,this.config=new MC,this.immediate=!1}));function DC(e,t){var n=t.key,r=t.props,i=t.defaultProps,a=t.state,o=t.actions;return new Promise((function(t,s){var u,l,c,h=pC(null!==(u=r.cancel)&&void 0!==u?u:null===i||void 0===i?void 0:i.cancel,n);if(h)v();else{bx.und(r.pause)||(a.paused=pC(r.pause,n));var f=null===i||void 0===i?void 0:i.pause;!0!==f&&(f=a.paused||pC(f,n)),l=dC(r.delay||0,n),f?(a.resumeQueue.add(p),o.pause()):(o.resume(),p())}function d(){a.resumeQueue.add(p),a.timeouts.delete(c),c.cancel(),l=c.time-ix.now()}function p(){l>0&&!nx.skipAnimation?(a.delayed=!0,c=ix.setTimeout(v,l),a.pauseQueue.add(d),a.timeouts.add(c)):v()}function v(){a.delayed&&(a.delayed=!1),a.pauseQueue.delete(d),a.timeouts.delete(c),e<=(a.cancelId||0)&&(h=!0);try{o.start($t($t({},r),{},{callId:e,cancel:h}),t)}catch(n){s(n)}}}))}var RC=function(e,t){return 1==t.length?t[0]:t.some((function(e){return e.cancelled}))?LC(e.get()):t.every((function(e){return e.noop}))?OC(e.get()):PC(e.get(),t.every((function(e){return e.finished})))},OC=function(e){return{value:e,noop:!0,finished:!0,cancelled:!1}},PC=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{value:e,finished:t,cancelled:n}},LC=function(e){return{value:e,cancelled:!0,finished:!1}};function jC(e,t,n,r){var i=t.callId,a=t.parentId,o=t.onRest,s=n.asyncTo,u=n.promise;return a||e!==s||t.reset?n.promise=Ke(He().mark((function l(){var c,h,f,d,p,v,m,y;return He().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(n.asyncId=i,n.asyncTo=e,c=gC(t,(function(e,t){return"onRest"===t?void 0:e})),d=new Promise((function(e,t){return h=e,f=t})),p=function(e){var t=i<=(n.cancelId||0)&&LC(r)||i!==n.asyncId&&PC(r,!1);if(t)throw e.result=t,f(e),e},v=function(e,t){var a=new UC,o=new BC;return Ke(He().mark((function s(){var u,l;return He().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(!nx.skipAnimation){s.next=5;break}throw FC(n),o.result=PC(r,!1),f(o),o;case 5:return p(a),(u=bx.obj(e)?$t({},e):$t($t({},t),{},{to:e})).parentId=i,Cx(c,(function(e,t){bx.und(u[t])&&(u[t]=e)})),s.next=11,r.start(u);case 11:if(l=s.sent,p(a),!n.paused){s.next=16;break}return s.next=16,new Promise((function(e){n.resumeQueue.add(e)}));case 16:return s.abrupt("return",l);case 17:case"end":return s.stop()}}),s)})))()},!nx.skipAnimation){l.next=9;break}return FC(n),l.abrupt("return",PC(r,!1));case 9:return l.prev=9,y=bx.arr(e)?function(){var e=Ke(He().mark((function e(t){var n,r,i;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=S(t),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,v(i);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(t){return e.apply(this,arguments)}}()(e):Promise.resolve(e(v,r.stop.bind(r))),l.next=13,Promise.all([y.then(h),d]);case 13:m=PC(r.get(),!0,!1),l.next=27;break;case 16:if(l.prev=16,l.t0=l.catch(9),!(l.t0 instanceof UC)){l.next=22;break}m=l.t0.result,l.next=27;break;case 22:if(!(l.t0 instanceof BC)){l.next=26;break}m=l.t0.result,l.next=27;break;case 26:throw l.t0;case 27:return l.prev=27,i==n.asyncId&&(n.asyncId=a,n.asyncTo=a?s:void 0,n.promise=a?u:void 0),l.finish(27);case 30:return bx.fun(o)&&ix.batchedUpdates((function(){o(m,r,r.item)})),l.abrupt("return",m);case 32:case"end":return l.stop()}}),l,null,[[9,16,27,30]])})))():u}function FC(e,t){Sx(e.timeouts,(function(e){return e.cancel()})),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var UC=function(e){g(n,e);var t=T(n);function n(){return p(this,n),t.call(this,"An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}return m(n)}(E(Error)),BC=function(e){g(n,e);var t=T(n);function n(){return p(this,n),t.call(this,"SkipAnimationSignal")}return m(n)}(E(Error)),VC=function(e){return e instanceof qC},zC=1,qC=function(e){g(n,e);var t=T(n);function n(){var e;return p(this,n),(e=t.apply(this,arguments)).id=zC++,e._priority=0,e}return m(n,[{key:"priority",get:function(){return this._priority},set:function(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}},{key:"get",value:function(){var e=$T(this);return e&&e.getValue()}},{key:"to",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return nx.to(this,t)}},{key:"interpolate",value:function(){zT();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return nx.to(this,t)}},{key:"toJSON",value:function(){return this.get()}},{key:"observerAdded",value:function(e){1==e&&this._attach()}},{key:"observerRemoved",value:function(e){0==e&&this._detach()}},{key:"_attach",value:function(){}},{key:"_detach",value:function(){}},{key:"_onChange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];xT(this,{type:"change",parent:this,value:e,idle:t})}},{key:"_onPriorityChange",value:function(e){this.idle||Bx.sort(this),xT(this,{type:"priority",parent:this,priority:e})}}]),n}(TT),WC=Symbol.for("SpringPhase"),QC=function(e){return(1&e[WC])>0},HC=function(e){return(2&e[WC])>0},YC=function(e){return(4&e[WC])>0},KC=function(e,t){return t?e[WC]|=3:e[WC]&=-3},GC=function(e,t){return t?e[WC]|=4:e[WC]&=-5},XC=function(e){g(n,e);var t=T(n);function n(e,r){var i;if(p(this,n),(i=t.call(this)).animation=new AC,i.defaultProps={},i._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},i._pendingCalls=new Set,i._lastCallId=0,i._lastToId=0,i._memoizedDuration=0,!bx.und(e)||!bx.und(r)){var a=bx.obj(e)?$t({},e):$t($t({},r),{},{from:e});bx.und(a.default)&&(a.default=!0),i.start(a)}return i}return m(n,[{key:"idle",get:function(){return!(HC(this)||this._state.asyncTo)||YC(this)}},{key:"goal",get:function(){return wT(this.animation.to)}},{key:"velocity",get:function(){var e=$T(this);return e instanceof tC?e.lastVelocity||0:e.getPayload().map((function(e){return e.lastVelocity||0}))}},{key:"hasAnimated",get:function(){return QC(this)}},{key:"isAnimating",get:function(){return HC(this)}},{key:"isPaused",get:function(){return YC(this)}},{key:"isDelayed",get:function(){return this._state.delayed}},{key:"advance",value:function(e){var t=this,n=!0,r=!1,i=this.animation,a=i.toValues,o=i.config,s=JT(i.to);!s&&_T(i.to)&&(a=Ex(wT(i.to))),i.values.forEach((function(u,l){if(!u.done){var c=u.constructor==nC?1:s?s[l].lastPosition:a[l],h=i.immediate,f=c;if(!h){if(f=u.lastPosition,o.tension<=0)return void(u.done=!0);var d,p=u.elapsedTime+=e,v=i.fromValues[l],m=null!=u.v0?u.v0:u.v0=bx.arr(o.velocity)?o.velocity[l]:o.velocity,y=o.precision||(v==c?.005:Math.min(1,.001*Math.abs(c-v)));if(bx.und(o.duration))if(o.decay){var g=!0===o.decay?.998:o.decay,k=Math.exp(-(1-g)*p);f=v+m/(1-g)*(1-k),h=Math.abs(u.lastPosition-f)<=y,d=m*k}else{d=null==u.lastVelocity?m:u.lastVelocity;for(var _=o.restVelocity||y/10,w=o.clamp?0:o.bounce,b=!bx.und(w),x=v==c?u.v0>0:v<c,T=Math.ceil(e/1),C=0;C<T&&(Math.abs(d)>_||!(h=Math.abs(c-f)<=y));++C){b&&(f==c||f>c==x)&&(d=-d*w,f=c),f+=1*(d+=1*((1e-6*-o.tension*(f-c)+.001*-o.friction*d)/o.mass))}}else{var E=1;o.duration>0&&(t._memoizedDuration!==o.duration&&(t._memoizedDuration=o.duration,u.durationProgress>0&&(u.elapsedTime=o.duration*u.durationProgress,p=u.elapsedTime+=e)),E=(E=(o.progress||0)+p/t._memoizedDuration)>1?1:E<0?0:E,u.durationProgress=E),d=((f=v+o.easing(E)*(c-v))-u.lastPosition)/e,h=1==E}u.lastVelocity=d,Number.isNaN(f)&&(console.warn("Got NaN while animating:",t),h=!0)}s&&!s[l].done&&(h=!1),h?u.done=!0:n=!1,u.setValue(f,o.round)&&(r=!0)}}));var u=$T(this),l=u.getValue();if(n){var c=wT(i.to);l===c&&!r||o.decay?r&&o.decay&&this._onChange(l):(u.setValue(c),this._onChange(c)),this._stop()}else r&&this._onChange(l)}},{key:"set",value:function(e){var t=this;return ix.batchedUpdates((function(){t._stop(),t._focus(e),t._set(e)})),this}},{key:"pause",value:function(){this._update({pause:!0})}},{key:"resume",value:function(){this._update({pause:!1})}},{key:"finish",value:function(){var e=this;if(HC(this)){var t=this.animation,n=t.to,r=t.config;ix.batchedUpdates((function(){e._onStart(),r.decay||e._set(n,!1),e._stop()}))}return this}},{key:"update",value:function(e){return(this.queue||(this.queue=[])).push(e),this}},{key:"start",value:function(e,t){var n,r=this;return bx.und(e)?(n=this.queue||[],this.queue=[]):n=[bx.obj(e)?e:$t($t({},t),{},{to:e})],Promise.all(n.map((function(e){return r._update(e)}))).then((function(e){return RC(r,e)}))}},{key:"stop",value:function(e){var t=this,n=this.animation.to;return this._focus(this.get()),FC(this._state,e&&this._lastCallId),ix.batchedUpdates((function(){return t._stop(n,e)})),this}},{key:"reset",value:function(){this._update({reset:!0})}},{key:"eventObserved",value:function(e){"change"==e.type?this._start():"priority"==e.type&&(this.priority=e.priority+1)}},{key:"_prepareNode",value:function(e){var t=this.key||"",n=e.to,r=e.from;(null==(n=bx.obj(n)?n[t]:n)||TC(n))&&(n=void 0),null==(r=bx.obj(r)?r[t]:r)&&(r=void 0);var i={to:n,from:r};if(!QC(this)){if(e.reverse){var a=[r,n];n=a[0],r=a[1]}r=wT(r),bx.und(r)?$T(this)||this._set(n):this._set(r)}return i}},{key:"_update",value:function(e,t){var n=this,r=Object.assign({},e),i=this.key,a=this.defaultProps;r.default&&Object.assign(a,gC(r,(function(e,t){return/^on/.test(t)?vC(e,i):e}))),rE(this,r,"onProps"),iE(this,"onProps",r,this);var o=this._prepareNode(r);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");var s=this._state;return DC(++this._lastCallId,{key:i,props:r,defaultProps:a,state:s,actions:{pause:function(){YC(n)||(GC(n,!0),Nx(s.pauseQueue),iE(n,"onPause",PC(n,$C(n,n.animation.to)),n))},resume:function(){YC(n)&&(GC(n,!1),HC(n)&&n._resume(),Nx(s.resumeQueue),iE(n,"onResume",PC(n,$C(n,n.animation.to)),n))},start:this._merge.bind(this,o)}}).then((function(e){if(r.loop&&e.finished&&(!t||!e.noop)){var i=ZC(r);if(i)return n._update(i,!0)}return e}))}},{key:"_merge",value:function(e,t,n){var r=this;if(t.cancel)return this.stop(!0),n(LC(this));var i=!bx.und(e.to),a=!bx.und(e.from);if(i||a){if(!(t.callId>this._lastToId))return n(LC(this));this._lastToId=t.callId}var o=this.key,s=this.defaultProps,u=this.animation,l=u.to,c=u.from,h=e.to,f=void 0===h?l:h,d=e.from,p=void 0===d?c:d;if(!a||i||t.default&&!bx.und(f)||(f=p),t.reverse){var v=[p,f];f=v[0],p=v[1]}var m=!xx(p,c);m&&(u.from=p),p=wT(p);var y=!xx(f,l);y&&this._focus(f);var g=TC(t.to),k=u.config,_=k.decay,w=k.velocity;(i||a)&&(k.velocity=0),t.config&&!g&&function(e,t,n){for(var r in n&&(IC(n=$t({},n),t),t=$t($t({},n),t)),IC(e,t),Object.assign(e,t),SC)null==e[r]&&(e[r]=SC[r]);var i=e.frequency,a=e.damping,o=e.mass;bx.und(i)||(i<.01&&(i=.01),a<0&&(a=0),e.tension=Math.pow(2*Math.PI/i,2)*o,e.friction=4*Math.PI*a*o/i)}(k,dC(t.config,o),t.config!==s.config?dC(s.config,o):void 0);var b=$T(this);if(!b||bx.und(f))return n(PC(this,!0));var x=bx.und(t.reset)?a&&!t.default:!bx.und(p)&&pC(t.reset,o),T=x?p:this.get(),C=bC(f),E=bx.num(C)||bx.arr(C)||WT(C),S=!g&&(!E||pC(s.immediate||t.immediate,o));if(y){var M=sC(f);if(M!==b.constructor){if(!S)throw Error("Cannot animate between ".concat(b.constructor.name," and ").concat(M.name,', as the "to" prop suggests'));b=this._set(C)}}var I=b.constructor,N=_T(f),A=!1;if(!N){var D=x||!QC(this)&&m;(y||D)&&(N=!(A=xx(bC(T),C))),(xx(u.immediate,S)||S)&&xx(k.decay,_)&&xx(k.velocity,w)||(N=!0)}if(A&&HC(this)&&(u.changed&&!x?N=!0:N||this._stop(l)),!g&&((N||_T(l))&&(u.values=b.getPayload(),u.toValues=_T(f)?null:I==nC?[1]:Ex(C)),u.immediate!=S&&(u.immediate=S,S||x||this._set(l)),N)){var R=u.onRest;Tx(nE,(function(e){return rE(r,t,e)}));var O=PC(this,$C(this,l));Nx(this._pendingCalls,O),this._pendingCalls.add(n),u.changed&&ix.batchedUpdates((function(){var e;(u.changed=!x,null===R||void 0===R||R(O,r),x)?dC(s.onRest,O):null===(e=u.onStart)||void 0===e||e.call(u,O,r)}))}x&&this._set(T),g?n(jC(t.to,t,this._state,this)):N?this._start():HC(this)&&!y?this._pendingCalls.add(n):n(OC(T))}},{key:"_focus",value:function(e){var t=this.animation;e!==t.to&&(bT(this)&&this._detach(),t.to=e,bT(this)&&this._attach())}},{key:"_attach",value:function(){var e=0,t=this.animation.to;_T(t)&&(ET(t,this),VC(t)&&(e=t.priority+1)),this.priority=e}},{key:"_detach",value:function(){var e=this.animation.to;_T(e)&&ST(e,this)}},{key:"_set",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=wT(e);if(!bx.und(r)){var i=$T(this);if(!i||!xx(r,i.getValue())){var a=sC(r);i&&i.constructor==a?i.setValue(r):ZT(this,a.create(r)),i&&ix.batchedUpdates((function(){t._onChange(r,n)}))}}return $T(this)}},{key:"_onStart",value:function(){var e=this.animation;e.changed||(e.changed=!0,iE(this,"onStart",PC(this,$C(this,e.to)),this))}},{key:"_onChange",value:function(e,t){t||(this._onStart(),dC(this.animation.onChange,e,this)),dC(this.defaultProps.onChange,e,this),Xe(k(n.prototype),"_onChange",this).call(this,e,t)}},{key:"_start",value:function(){var e=this.animation;$T(this).reset(wT(e.to)),e.immediate||(e.fromValues=e.values.map((function(e){return e.lastPosition}))),HC(this)||(KC(this,!0),YC(this)||this._resume())}},{key:"_resume",value:function(){nx.skipAnimation?this.finish():Bx.start(this)}},{key:"_stop",value:function(e,t){if(HC(this)){KC(this,!1);var n=this.animation;Tx(n.values,(function(e){e.done=!0})),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),xT(this,{type:"idle",parent:this});var r=t?LC(this.get()):PC(this.get(),$C(this,null!==e&&void 0!==e?e:n.to));Nx(this._pendingCalls,r),n.changed&&(n.changed=!1,iE(this,"onRest",r,this))}}}]),n}(qC);function $C(e,t){var n=bC(t);return xx(bC(e.get()),n)}function ZC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.loop,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.to,r=dC(t);if(r){var i=!0!==r&&wC(r),a=(i||e).reverse,o=!i||i.reset;return JC($t($t({},e),{},{loop:t,default:!1,pause:void 0,to:!a||TC(n)?n:void 0,from:o?e.from:void 0,reset:o},i))}}function JC(e){var t=e=wC(e),n=t.to,r=t.from,i=new Set;return bx.obj(n)&&tE(n,i),bx.obj(r)&&tE(r,i),e.keys=i.size?Array.from(i):null,e}function eE(e){var t=JC(e);return bx.und(t.default)&&(t.default=gC(t)),t}function tE(e,t){Cx(e,(function(e,n){return null!=e&&t.add(n)}))}var nE=["onStart","onRest","onChange","onPause","onResume"];function rE(e,t,n){e.animation[n]=t[n]!==mC(t,n)?vC(t[n],e.key):void 0}function iE(e,t){for(var n,r,i,a,o=arguments.length,s=new Array(o>2?o-2:0),u=2;u<o;u++)s[u-2]=arguments[u];null===(n=(r=e.animation)[t])||void 0===n||n.call.apply(n,[r].concat(s)),null===(i=(a=e.defaultProps)[t])||void 0===i||i.call.apply(i,[a].concat(s))}var aE=["onStart","onChange","onRest"],oE=1,sE=function(){function e(t,n){p(this,e),this.id=oE++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),n&&(this._flush=n),t&&this.start($t({default:!0},t))}return m(e,[{key:"idle",get:function(){return!this._state.asyncTo&&Object.values(this.springs).every((function(e){return e.idle&&!e.isDelayed&&!e.isPaused}))}},{key:"item",get:function(){return this._item},set:function(e){this._item=e}},{key:"get",value:function(){var e={};return this.each((function(t,n){return e[n]=t.get()})),e}},{key:"set",value:function(e){for(var t in e){var n=e[t];bx.und(n)||this.springs[t].set(n)}}},{key:"update",value:function(e){return e&&this.queue.push(JC(e)),this}},{key:"start",value:function(e){var t=this.queue;return e?t=Ex(e).map(JC):this.queue=[],this._flush?this._flush(this,t):(vE(this,t),uE(this,t))}},{key:"stop",value:function(e,t){if(e!==!!e&&(t=e),t){var n=this.springs;Tx(Ex(t),(function(t){return n[t].stop(!!e)}))}else FC(this._state,this._lastAsyncId),this.each((function(t){return t.stop(!!e)}));return this}},{key:"pause",value:function(e){if(bx.und(e))this.start({pause:!0});else{var t=this.springs;Tx(Ex(e),(function(e){return t[e].pause()}))}return this}},{key:"resume",value:function(e){if(bx.und(e))this.start({pause:!1});else{var t=this.springs;Tx(Ex(e),(function(e){return t[e].resume()}))}return this}},{key:"each",value:function(e){Cx(this.springs,e)}},{key:"_onFrame",value:function(){var e=this,t=this._events,n=t.onStart,r=t.onChange,i=t.onRest,a=this._active.size>0,o=this._changed.size>0;(a&&!this._started||o&&!this._started)&&(this._started=!0,Sx(n,(function(t){var n=u(t,2),r=n[0],i=n[1];i.value=e.get(),r(i,e,e._item)})));var s=!a&&this._started,l=o||s&&i.size?this.get():null;o&&r.size&&Sx(r,(function(t){var n=u(t,2),r=n[0],i=n[1];i.value=l,r(i,e,e._item)})),s&&(this._started=!1,Sx(i,(function(t){var n=u(t,2),r=n[0],i=n[1];i.value=l,r(i,e,e._item)})))}},{key:"eventObserved",value:function(e){if("change"==e.type)this._changed.add(e.parent),e.idle||this._active.add(e.parent);else{if("idle"!=e.type)return;this._active.delete(e.parent)}ix.onFrame(this._onFrame)}}]),e}();function uE(e,t){return Promise.all(t.map((function(t){return lE(e,t)}))).then((function(t){return RC(e,t)}))}function lE(e,t,n){return cE.apply(this,arguments)}function cE(){return cE=Ke(He().mark((function e(t,n,r){var i,a,o,s,u,l,c,h,f,d,p,v,m;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.keys,a=n.to,o=n.from,s=n.loop,u=n.onRest,l=n.onResolve,c=bx.obj(n.default)&&n.default,s&&(n.loop=!1),!1===a&&(n.to=null),!1===o&&(n.from=null),(h=bx.arr(a)||bx.fun(a)?a:void 0)?(n.to=void 0,n.onRest=void 0,c&&(c.onRest=void 0)):Tx(aE,(function(e){var r=n[e];if(bx.fun(r)){var i=t._events[e];n[e]=function(e){var t=e.finished,n=e.cancelled,a=i.get(r);a?(t||(a.finished=!1),n&&(a.cancelled=!0)):i.set(r,{value:null,finished:t||!1,cancelled:n||!1})},c&&(c[e]=n[e])}})),f=t._state,n.pause===!f.paused?(f.paused=n.pause,Nx(n.pause?f.pauseQueue:f.resumeQueue)):f.paused&&(n.pause=!0),d=(i||Object.keys(t.springs)).map((function(e){return t.springs[e].start(n)})),p=!0===n.cancel||!0===mC(n,"cancel"),(h||p&&f.asyncId)&&d.push(DC(++t._lastAsyncId,{props:n,state:f,actions:{pause:wx,resume:wx,start:function(e,n){p?(FC(f,t._lastAsyncId),n(LC(t))):(e.onRest=u,n(jC(h,e,f,t)))}}})),!f.paused){e.next=15;break}return e.next=15,new Promise((function(e){f.resumeQueue.add(e)}));case 15:return e.t0=RC,e.t1=t,e.next=19,Promise.all(d);case 19:if(e.t2=e.sent,v=(0,e.t0)(e.t1,e.t2),!s||!v.finished||r&&v.noop){e.next=26;break}if(!(m=ZC(n,s,a))){e.next=26;break}return vE(t,[m]),e.abrupt("return",lE(t,m,!0));case 26:return l&&ix.batchedUpdates((function(){return l(v,t,t.item)})),e.abrupt("return",v);case 28:case"end":return e.stop()}}),e)}))),cE.apply(this,arguments)}function hE(e,t){var n=$t({},e.springs);return t&&Tx(Ex(t),(function(e){bx.und(e.keys)&&(e=JC(e)),bx.obj(e.to)||(e=$t($t({},e),{},{to:void 0})),pE(n,e,(function(e){return dE(e)}))})),fE(e,n),n}function fE(e,t){Cx(t,(function(t,n){e.springs[n]||(e.springs[n]=t,ET(t,e))}))}function dE(e,t){var n=new XC;return n.key=e,t&&ET(n,t),n}function pE(e,t,n){t.keys&&Tx(t.keys,(function(r){(e[r]||(e[r]=n(r)))._prepareNode(t)}))}function vE(e,t){Tx(t,(function(t){pE(e.springs,t,(function(t){return dE(t,e)}))}))}var mE,yE,gE=function(t){var n=t.children,r=ex(t,fC),i=(0,e.useContext)(kE),a=r.pause||!!i.pause,o=r.immediate||!!i.immediate;r=function(t,n){var r=u((0,e.useState)((function(){return{inputs:n,result:t()}})),1)[0],i=(0,e.useRef)(),a=i.current,o=a;return o?Boolean(n&&o.inputs&&function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(n,o.inputs))||(o={inputs:n,result:t()}):o=r,(0,e.useEffect)((function(){i.current=o,a==r&&(r.inputs=r.result=void 0)}),[o]),o.result}((function(){return{pause:a,immediate:o}}),[a,o]);var s=kE.Provider;return e.createElement(s,{value:r},n)},kE=(mE=gE,yE={},Object.assign(mE,e.createContext(yE)),mE.Provider._context=mE,mE.Consumer._context=mE,mE);gE.Provider=kE.Provider,gE.Consumer=kE.Consumer;var _E=function(){var e=[],t=function(t){qT("".concat(UT,'Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions'));var r=[];return Tx(e,(function(e,i){if(bx.und(t))r.push(e.start());else{var a=n(t,e,i);a&&r.push(e.start(a))}})),r};t.current=e,t.add=function(t){e.includes(t)||e.push(t)},t.delete=function(t){var n=e.indexOf(t);~n&&e.splice(n,1)},t.pause=function(){var t=arguments;return Tx(e,(function(e){return e.pause.apply(e,d(t))})),this},t.resume=function(){var t=arguments;return Tx(e,(function(e){return e.resume.apply(e,d(t))})),this},t.set=function(t){Tx(e,(function(e,n){var r=bx.fun(t)?t(n,e):t;r&&e.set(r)}))},t.start=function(t){var n=this,r=[];return Tx(e,(function(e,i){if(bx.und(t))r.push(e.start());else{var a=n._getProps(t,e,i);a&&r.push(e.start(a))}})),r},t.stop=function(){var t=arguments;return Tx(e,(function(e){return e.stop.apply(e,d(t))})),this},t.update=function(t){var n=this;return Tx(e,(function(e,r){return e.update(n._getProps(t,e,r))})),this};var n=function(e,t,n){return bx.fun(e)?e(n,t):e};return t._getProps=n,t};function wE(t,n,r){var i=arguments,a=bx.fun(n)&&n;a&&!r&&(r=[]);var o=(0,e.useMemo)((function(){return a||3==i.length?_E():void 0}),[]),s=(0,e.useRef)(0),u=HT(),l=(0,e.useMemo)((function(){return{ctrls:[],queue:[],flush:function(e,t){var n=hE(e,t);return s.current>0&&!l.queue.length&&!Object.keys(n).some((function(t){return!e.springs[t]}))?uE(e,t):new Promise((function(r){fE(e,n),l.queue.push((function(){r(uE(e,t))})),u()}))}}}),[]),c=(0,e.useRef)(d(l.ctrls)),h=[],f=GT(t)||0;function p(e,t){for(var r=e;r<t;r++){var i=c.current[r]||(c.current[r]=new sE(null,l.flush)),o=a?a(r,i):n[r];o&&(h[r]=eE(o))}}(0,e.useMemo)((function(){Tx(c.current.slice(t,f),(function(e){CC(e,o),e.stop(!0)})),c.current.length=t,p(f,t)}),[t]),(0,e.useMemo)((function(){p(0,Math.min(f,t))}),r);var v=c.current.map((function(e,t){return hE(e,h[t])})),m=(0,e.useContext)(gE),y=GT(m),g=m!==y&&xC(m);QT((function(){s.current++,l.ctrls=c.current;var e=l.queue;e.length&&(l.queue=[],Tx(e,(function(e){return e()}))),Tx(c.current,(function(e,t){null===o||void 0===o||o.add(e),g&&e.start({default:m});var n=h[t];n&&(EC(e,n.ref),e.ref?e.queue.push(n):e.start(n))}))})),YT((function(){return function(){Tx(l.ctrls,(function(e){return e.stop(!0)}))}}));var k=v.map((function(e){return $t({},e)}));return o?[k,o]:k}function bE(e,t){var n=bx.fun(e),r=wE(1,n?e:[e],n?t||[]:t),i=u(r,2),a=u(i[0],1),o=a[0],s=i[1];return n||2==arguments.length?[o,s]:o}var xE=function(e){g(n,e);var t=T(n);function n(e,r){var i;p(this,n),(i=t.call(this)).source=e,i.idle=!0,i._active=new Set,i.calc=cT.apply(void 0,d(r));var a=i._get(),o=sC(a);return ZT(b(i),o.create(a)),i}return m(n,[{key:"advance",value:function(e){var t=this._get();xx(t,this.get())||($T(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&CE(this._active)&&EE(this)}},{key:"_get",value:function(){var e=bx.arr(this.source)?this.source.map(wT):Ex(wT(this.source));return this.calc.apply(this,d(e))}},{key:"_start",value:function(){var e=this;this.idle&&!CE(this._active)&&(this.idle=!1,Tx(JT(this),(function(e){e.done=!1})),nx.skipAnimation?(ix.batchedUpdates((function(){return e.advance()})),EE(this)):Bx.start(this))}},{key:"_attach",value:function(){var e=this,t=1;Tx(Ex(this.source),(function(n){_T(n)&&ET(n,e),VC(n)&&(n.idle||e._active.add(n),t=Math.max(t,n.priority+1))})),this.priority=t,this._start()}},{key:"_detach",value:function(){var e=this;Tx(Ex(this.source),(function(t){_T(t)&&ST(t,e)})),this._active.clear(),EE(this)}},{key:"eventObserved",value:function(e){"change"==e.type?e.idle?this.advance():(this._active.add(e.parent),this._start()):"idle"==e.type?this._active.delete(e.parent):"priority"==e.type&&(this.priority=Ex(this.source).reduce((function(e,t){return Math.max(e,(VC(t)?t.priority:0)+1)}),0))}}]),n}(qC);function TE(e){return!1!==e.idle}function CE(e){return!e.size||Array.from(e).every(TE)}function EE(e){e.idle||(e.idle=!0,Tx(JT(e),(function(e){e.done=!0})),xT(e,{type:"idle",parent:e}))}var SE=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new xE(e,n)};nx.assign({createStringInterpolator:FT,to:function(e,t){return new xE(e,t)}});Bx.advance;var ME=["style","children","scrollTop","scrollLeft","viewBox"],IE=["x","y","z"],NE=["scrollTop","scrollLeft"],AE=/^--/;function DE(e,t){return null==t||"boolean"===typeof t||""===t?"":"number"!==typeof t||0===t||AE.test(e)||OE.hasOwnProperty(e)&&OE[e]?(""+t).trim():t+"px"}var RE={};var OE={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},PE=["Webkit","Ms","Moz","O"];OE=Object.keys(OE).reduce((function(e,t){return PE.forEach((function(n){return e[function(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}(n,t)]=e[t]})),e}),OE);var LE=/^(matrix|translate|scale|rotate|skew)/,jE=/^(translate)/,FE=/^(rotate|skew)/,UE=function(e,t){return bx.num(e)&&0!==e?e+t:e},BE=function e(t,n){return bx.arr(t)?t.every((function(t){return e(t,n)})):bx.num(t)?t===n:parseFloat(t)===n},VE=function(e){g(n,e);var t=T(n);function n(e){var r=e.x,i=e.y,a=e.z,o=ex(e,IE);p(this,n);var s=[],l=[];return(r||i||a)&&(s.push([r||0,i||0,a||0]),l.push((function(e){return["translate3d(".concat(e.map((function(e){return UE(e,"px")})).join(","),")"),BE(e,0)]}))),Cx(o,(function(e,t){if("transform"===t)s.push([e||""]),l.push((function(e){return[e,""===e]}));else if(LE.test(t)){if(delete o[t],bx.und(e))return;var n=jE.test(t)?"px":FE.test(t)?"deg":"";s.push(Ex(e)),l.push("rotate3d"===t?function(e){var t=u(e,4),r=t[0],i=t[1],a=t[2],o=t[3];return["rotate3d(".concat(r,",").concat(i,",").concat(a,",").concat(UE(o,n),")"),BE(o,0)]}:function(e){return["".concat(t,"(").concat(e.map((function(e){return UE(e,n)})).join(","),")"),BE(e,t.startsWith("scale")?1:0)]})}})),s.length&&(o.transform=new zE(s,l)),t.call(this,o)}return m(n)}(iC),zE=function(e){g(n,e);var t=T(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).inputs=e,i.transforms=r,i._value=null,i}return m(n,[{key:"get",value:function(){return this._value||(this._value=this._get())}},{key:"_get",value:function(){var e=this,t="",n=!0;return Tx(this.inputs,(function(r,i){var a=wT(r[0]),o=u(e.transforms[i](bx.arr(a)?a:r.map(wT)),2),s=o[0],l=o[1];t+=" "+s,n=n&&l})),n?"none":t}},{key:"observerAdded",value:function(e){var t=this;1==e&&Tx(this.inputs,(function(e){return Tx(e,(function(e){return _T(e)&&ET(e,t)}))}))}},{key:"observerRemoved",value:function(e){var t=this;0==e&&Tx(this.inputs,(function(e){return Tx(e,(function(e){return _T(e)&&ST(e,t)}))}))}},{key:"eventObserved",value:function(e){"change"==e.type&&(this._value=null),xT(this,e)}}]),n}(TT);nx.assign({batchedUpdates:c.unstable_batchedUpdates,createStringInterpolator:FT,colors:{transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199}});var qE=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.applyAnimatedValues,r=void 0===n?function(){return!1}:n,i=t.createAnimatedStyle,a=void 0===i?function(e){return new iC(e)}:i,o=t.getComponentProps,s=void 0===o?function(e){return e}:o,u={applyAnimatedValues:r,createAnimatedStyle:a,getComponentProps:s},l=function e(t){var n=hC(t)||"Anonymous";return(t=bx.str(t)?e[t]||(e[t]=uC(t,u)):t[cC]||(t[cC]=uC(t,u))).displayName="Animated(".concat(n,")"),t};return Cx(e,(function(t,n){bx.arr(e)&&(n=hC(t)),l[n]=l(t)})),{animated:l}}(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],{applyAnimatedValues:function(e,t){if(!e.nodeType||!e.setAttribute)return!1;var n="filter"===e.nodeName||e.parentNode&&"filter"===e.parentNode.nodeName,r=t.style,i=t.children,a=t.scrollTop,o=t.scrollLeft,s=t.viewBox,u=ex(t,ME),l=Object.values(u),c=Object.keys(u).map((function(t){return n||e.hasAttribute(t)?t:RE[t]||(RE[t]=t.replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()})))}));for(var h in void 0!==i&&(e.textContent=i),r)if(r.hasOwnProperty(h)){var f=DE(h,r[h]);AE.test(h)?e.style.setProperty(h,f):e.style[h]=f}c.forEach((function(t,n){e.setAttribute(t,l[n])})),void 0!==a&&(e.scrollTop=a),void 0!==o&&(e.scrollLeft=o),void 0!==s&&e.setAttribute("viewBox",s)},createAnimatedStyle:function(e){return new VE(e)},getComponentProps:function(e){e.scrollTop,e.scrollLeft;return ex(e,NE)}}),WE=qE.animated;function QE(e,t,n){return Math.max(t,Math.min(e,n))}var HE=function(e,t){return void 0===e&&(e=t),Array.isArray(e)?e:[e,e]},YE=function(e,t){return[e[0]+t[0],e[1]+t[1]]},KE=function(e,t){return[e[0]-t[0],e[1]-t[1]]},GE=function(e,t){e[0]+=t[0],e[1]+=t[1]};function XE(e,t,n){return 0===t||Math.abs(t)===1/0?Math.pow(e,5*n):e*t*n/(t+n*e)}function $E(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.15;return 0===r?QE(e,t,n):e<t?-XE(t-e,n-t,r)+t:e>n?+XE(e-n,n-t,r)+n:e}function ZE(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function JE(e,t,n){return(t=ZE(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eS(Object(n),!0).forEach((function(t){JE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var nS={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function rS(e){return e?e[0].toUpperCase()+e.slice(1):""}var iS=["enter","leave"];function aS(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return e&&!iS.includes(t)}function oS(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=nS[e],i=r&&r[t]||t;return"on"+rS(e)+rS(i)+(aS(n,i)?"Capture":"")}var sS=["gotpointercapture","lostpointercapture"];function uS(e){var t=e.substring(2).toLowerCase(),n=!!~t.indexOf("passive");n&&(t=t.replace("passive",""));var r=sS.includes(t)?"capturecapture":"capture",i=!!~t.indexOf(r);return i&&(t=t.replace("capture","")),{device:t,capture:i,passive:n}}function lS(e){return"touches"in e}function cS(e){return lS(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function hS(e){return lS(e)?function(e){return"touchend"===e.type||"touchcancel"===e.type?e.changedTouches:e.targetTouches}(e)[0]:e}function fS(e){return function(e){return Array.from(e.touches).filter((function(t){var n,r;return t.target===e.currentTarget||(null===(n=e.currentTarget)||void 0===n||null===(r=n.contains)||void 0===r?void 0:r.call(n,t.target))}))}(e).map((function(e){return e.identifier}))}function dS(e){var t=hS(e);return lS(e)?t.identifier:t.pointerId}function pS(e){var t=hS(e);return[t.clientX,t.clientY]}function vS(e){if("function"===typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,n)}return e}function mS(){}function yS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?mS:1===t.length?t[0]:function(){var e,n,r=S(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;e=i.apply(this,arguments)||e}}catch(a){r.e(a)}finally{r.f()}return e}}function gS(e,t){return Object.assign({},t,e||{})}var kS=function(){function e(t,n,r){p(this,e),this.ctrl=t,this.args=n,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}return m(e,[{key:"state",get:function(){return this.ctrl.state[this.key]},set:function(e){this.ctrl.state[this.key]=e}},{key:"shared",get:function(){return this.ctrl.state.shared}},{key:"eventStore",get:function(){return this.ctrl.gestureEventStores[this.key]}},{key:"timeoutStore",get:function(){return this.ctrl.gestureTimeoutStores[this.key]}},{key:"config",get:function(){return this.ctrl.config[this.key]}},{key:"sharedConfig",get:function(){return this.ctrl.config.shared}},{key:"handler",get:function(){return this.ctrl.handlers[this.key]}},{key:"reset",value:function(){var e=this.state,t=this.shared,n=this.ingKey,r=this.args;t[n]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}},{key:"start",value:function(e){var t=this.state,n=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=n.from?vS(n.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}},{key:"computeValues",value:function(e){var t=this.state;t._values=e,t.values=this.config.transform(e)}},{key:"computeInitial",value:function(){var e=this.state;e._initial=e._values,e.initial=e.values}},{key:"compute",value:function(e){var t=this.state,n=this.config,r=this.shared;t.args=this.args;var i=0;if(e&&(t.event=e,n.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,function(e){var t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){var n=e.shiftKey,r=e.altKey,i=e.metaKey,a=e.ctrlKey;Object.assign(t,{shiftKey:n,altKey:r,metaKey:i,ctrlKey:a})}return t}(e)),r.down=r.pressed=r.buttons%2===1||r.touches>0,i=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){var a=t._delta.map(Math.abs);GE(t._distance,a)}this.axisIntent&&this.axisIntent(e);var o=u(t._movement,2),s=o[0],l=o[1],c=u(n.threshold,2),h=c[0],f=c[1],d=t._step,p=t.values;if(n.hasCustomTransform?(!1===d[0]&&(d[0]=Math.abs(s)>=h&&p[0]),!1===d[1]&&(d[1]=Math.abs(l)>=f&&p[1])):(!1===d[0]&&(d[0]=Math.abs(s)>=h&&Math.sign(s)*h),!1===d[1]&&(d[1]=Math.abs(l)>=f&&Math.sign(l)*f)),t.intentional=!1!==d[0]||!1!==d[1],t.intentional){var v=[0,0];if(n.hasCustomTransform){var m=u(p,2),y=m[0],g=m[1];v[0]=!1!==d[0]?y-d[0]:0,v[1]=!1!==d[1]?g-d[1]:0}else v[0]=!1!==d[0]?s-d[0]:0,v[1]=!1!==d[1]?l-d[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(v);var k=t.offset,_=t._active&&!t._blocked||t.active;_&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e&&(t.first&&("bounds"in n&&(t._bounds=vS(n.bounds,t)),this.setup&&this.setup()),t.movement=v,this.computeOffset()));var w=u(t.offset,2),b=w[0],x=w[1],T=u(t._bounds,2),C=u(T[0],2),E=C[0],S=C[1],M=u(T[1],2),I=M[0],N=M[1];t.overflow=[b<E?-1:b>S?1:0,x<I?-1:x>N?1:0],t._movementBound[0]=!!t.overflow[0]&&(!1===t._movementBound[0]?t._movement[0]:t._movementBound[0]),t._movementBound[1]=!!t.overflow[1]&&(!1===t._movementBound[1]?t._movement[1]:t._movementBound[1]);var A=t._active&&n.rubberband||[0,0];if(t.offset=function(e,t,n){var r=u(t,2),i=r[0],a=r[1],o=u(n,2),s=o[0],l=o[1],c=u(e,2),h=u(c[0],2),f=h[0],d=h[1],p=u(c[1],2),v=p[0],m=p[1];return[$E(i,f,d,s),$E(a,v,m,l)]}(t._bounds,t.offset,A),t.delta=KE(t.offset,k),this.computeMovement(),_&&(!t.last||i>32)){t.delta=KE(t.offset,k);var D=t.delta.map(Math.abs);GE(t.distance,D),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&i>0&&(t.velocity=[D[0]/i,D[1]/i],t.timeDelta=i)}}}},{key:"emit",value:function(){var e=this.state,t=this.shared,n=this.config;if(e._active||this.clean(),!e._blocked&&e.intentional||e._force||n.triggerAllEvents){var r=this.handler(tS(tS(tS({},t),e),{},$e({},this.aliasKey,e.values)));void 0!==r&&(e.memo=r)}}},{key:"clean",value:function(){this.eventStore.clean(),this.timeoutStore.clean()}}]),e}();var _S=function(e){g(n,e);var t=T(n);function n(){var e;p(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return JE(b(e=t.call.apply(t,[this].concat(i))),"aliasKey","xy"),e}return m(n,[{key:"reset",value:function(){Xe(k(n.prototype),"reset",this).call(this),this.state.axis=void 0}},{key:"init",value:function(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}},{key:"computeOffset",value:function(){this.state.offset=YE(this.state.lastOffset,this.state.movement)}},{key:"computeMovement",value:function(){this.state.movement=KE(this.state.offset,this.state.lastOffset)}},{key:"axisIntent",value:function(e){var t=this.state,n=this.config;if(!t.axis&&e){var r="object"===typeof n.axisThreshold?n.axisThreshold[cS(e)]:n.axisThreshold;t.axis=function(e,t){var n=u(e,2),r=n[0],i=n[1],a=Math.abs(r),o=Math.abs(i);return a>o&&a>t?"x":o>a&&o>t?"y":void 0}(t._movement,r)}t._blocked=(n.lockDirection||!!n.axis)&&!t.axis||!!n.axis&&n.axis!==t.axis}},{key:"restrictToAxis",value:function(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0}}}]),n}(kS),wS=function(e){return e},bS=.15,xS={enabled:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e},eventOptions:function(e,t,n){return tS(tS({},n.shared.eventOptions),e)},preventDefault:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e},triggerAllEvents:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e},rubberband:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e){case!0:return[bS,bS];case!1:return[0,0];default:return HE(e)}},from:function(e){return"function"===typeof e?e:null!=e?HE(e):void 0},transform:function(e,t,n){var r=e||n.shared.transform;return this.hasCustomTransform=!!r,r||wS},threshold:function(e){return HE(e,0)}};var TS=tS(tS({},xS),{},{axis:function(e,t,n){var r=n.axis;if(this.lockDirection="lock"===r,!this.lockDirection)return r},axisThreshold:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e},bounds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("function"===typeof e)return function(t){return TS.bounds(e(t))};if("current"in e)return function(){return e.current};if("function"===typeof HTMLElement&&e instanceof HTMLElement)return e;var t=e.left,n=void 0===t?-1/0:t,r=e.right,i=void 0===r?1/0:r,a=e.top,o=void 0===a?-1/0:a,s=e.bottom,u=void 0===s?1/0:s;return[[n,i],[o,u]]}}),CS={ArrowRight:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return[e*t,0]},ArrowLeft:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return[-1*e*t,0]},ArrowUp:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return[0,-1*e*t]},ArrowDown:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return[0,e*t]}},ES=function(e){g(n,e);var t=T(n);function n(){var e;p(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return JE(b(e=t.call.apply(t,[this].concat(i))),"ingKey","dragging"),e}return m(n,[{key:"reset",value:function(){Xe(k(n.prototype),"reset",this).call(this);var e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}},{key:"setup",value:function(){var e=this.state;if(e._bounds instanceof HTMLElement){var t=e._bounds.getBoundingClientRect(),n=e.currentTarget.getBoundingClientRect(),r={left:t.left-n.left+e.offset[0],right:t.right-n.right+e.offset[0],top:t.top-n.top+e.offset[1],bottom:t.bottom-n.bottom+e.offset[1]};e._bounds=TS.bounds(r)}}},{key:"cancel",value:function(){var e=this,t=this.state;t.canceled||(t.canceled=!0,t._active=!1,setTimeout((function(){e.compute(),e.emit()}),0))}},{key:"setActive",value:function(){this.state._active=this.state._pointerActive||this.state._keyboardActive}},{key:"clean",value:function(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,Xe(k(n.prototype),"clean",this).call(this)}},{key:"pointerDown",value:function(e){var t=this.config,n=this.state;if(null==e.buttons||(Array.isArray(t.pointerButtons)?t.pointerButtons.includes(e.buttons):-1===t.pointerButtons||t.pointerButtons===e.buttons)){var r=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),r&&r.size>1&&n._pointerActive||(this.start(e),this.setupPointer(e),n._pointerId=dS(e),n._pointerActive=!0,this.computeValues(pS(e)),this.computeInitial(),t.preventScrollAxis&&"mouse"!==cS(e)?(n._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}}},{key:"startPointerDrag",value:function(e){var t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}},{key:"pointerMove",value:function(e){var t=this.state,n=this.config;if(t._pointerActive){var r=dS(e);if(void 0===t._pointerId||r===t._pointerId){var i=pS(e);return document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=KE(i,t._values),this.computeValues(i)),GE(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional?(this.timeoutStore.remove("dragDelay"),t.active=!1,void this.startPointerDrag(e)):n.preventScrollAxis&&!t._preventScroll?t.axis?t.axis===n.preventScrollAxis||"xy"===n.preventScrollAxis?(t._active=!1,void this.clean()):(this.timeoutStore.remove("startPointerDrag"),void this.startPointerDrag(e)):void 0:void this.emit()}}}},{key:"pointerUp",value:function(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch(x){0}var t=this.state,n=this.config;if(t._active&&t._pointerActive){var r=dS(e);if(void 0===t._pointerId||r===t._pointerId){this.state._pointerActive=!1,this.setActive(),this.compute(e);var i=u(t._distance,2),a=i[0],o=i[1];if(t.tap=a<=n.tapsThreshold&&o<=n.tapsThreshold,t.tap&&n.filterTaps)t._force=!0;else{var s=u(t._delta,2),l=s[0],c=s[1],h=u(t._movement,2),f=h[0],d=h[1],p=u(n.swipe.velocity,2),v=p[0],m=p[1],y=u(n.swipe.distance,2),g=y[0],k=y[1],_=n.swipe.duration;if(t.elapsedTime<_){var w=Math.abs(l/t.timeDelta),b=Math.abs(c/t.timeDelta);w>v&&Math.abs(f)>g&&(t.swipe[0]=Math.sign(l)),b>m&&Math.abs(d)>k&&(t.swipe[1]=Math.sign(c))}}this.emit()}}}},{key:"pointerClick",value:function(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}},{key:"setupPointer",value:function(e){var t=this.config,n=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,n,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"cancel",this.pointerUp.bind(this)))}},{key:"pointerClean",value:function(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}},{key:"preventScroll",value:function(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}},{key:"setupScrollPrevention",value:function(e){this.state._preventScroll=!1,function(e){"persist"in e&&"function"===typeof e.persist&&e.persist()}(e);var t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}},{key:"setupDelayTrigger",value:function(e){var t=this;this.state._delayed=!0,this.timeoutStore.add("dragDelay",(function(){t.state._step=[0,0],t.startPointerDrag(e)}),this.config.delay)}},{key:"keyDown",value:function(e){var t=CS[e.key];if(t){var n=this.state,r=e.shiftKey?10:e.altKey?.1:1;this.start(e),n._delta=t(this.config.keyboardDisplacement,r),n._keyboardActive=!0,GE(n._movement,n._delta),this.compute(e),this.emit()}}},{key:"keyUp",value:function(e){e.key in CS&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}},{key:"bind",value:function(e){var t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}]),n}(_S);var SS="undefined"!==typeof window&&window.document&&window.document.createElement;function MS(){return SS&&"ontouchstart"in window||SS&&window.navigator.maxTouchPoints>1}var IS={isBrowser:SS,gesture:function(){try{return"constructor"in GestureEvent}catch(e){return!1}}(),touch:MS(),touchscreen:MS(),pointer:SS&&"onpointerdown"in window,pointerLock:SS&&"exitPointerLock"in window.document},NS={mouse:0,touch:0,pen:8},AS=tS(tS({},TS),{},{device:function(e,t,n){var r=n.pointer,i=(r=void 0===r?{}:r).touch,a=void 0!==i&&i,o=r.lock,s=void 0!==o&&o,u=r.mouse,l=void 0!==u&&u;return this.pointerLock=s&&IS.pointerLock,IS.touch&&a?"touch":this.pointerLock?"mouse":IS.pointer&&!l?"pointer":IS.touch?"touch":"mouse"},preventScrollAxis:function(e,t,n){var r=n.preventScroll;if(this.preventScrollDelay="number"===typeof r?r:r||void 0===r&&e?250:void 0,IS.touchscreen&&!1!==r)return e||(void 0!==r?"y":void 0)},pointerCapture:function(e,t,n){var r=n.pointer,i=(r=void 0===r?{}:r).capture,a=void 0===i||i,o=r.buttons,s=void 0===o?1:o,u=r.keys,l=void 0===u||u;return this.pointerButtons=s,this.keys=l,!this.pointerLock&&"pointer"===this.device&&a},threshold:function(e,t,n){var r=n.filterTaps,i=void 0!==r&&r,a=n.tapsThreshold,o=void 0===a?3:a,s=n.axis,u=HE(e,i?o:(void 0===s?void 0:s)?1:0);return this.filterTaps=i,this.tapsThreshold=o,u},swipe:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.velocity,n=void 0===t?.5:t,r=e.distance,i=void 0===r?50:r,a=e.duration,o=void 0===a?250:a;return{velocity:this.transform(HE(n)),distance:this.transform(HE(i)),duration:o}},delay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e){case!0:return 180;case!1:return 0;default:return e}},axisThreshold:function(e){return e?tS(tS({},NS),e):NS},keyboardDisplacement:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return e}});tS(tS({},xS),{},{device:function(e,t,n){var r=n.shared,i=n.pointer,a=(i=void 0===i?{}:i).touch,o=void 0!==a&&a;if(r.target&&!IS.touch&&IS.gesture)return"gesture";if(IS.touch&&o)return"touch";if(IS.touchscreen){if(IS.pointer)return"pointer";if(IS.touch)return"touch"}},bounds:function(e,t,n){var r=n.scaleBounds,i=void 0===r?{}:r,a=n.angleBounds,o=void 0===a?{}:a,s=function(e){var t=gS(vS(i,e),{min:-1/0,max:1/0});return[t.min,t.max]},u=function(e){var t=gS(vS(o,e),{min:-1/0,max:1/0});return[t.min,t.max]};return"function"!==typeof i&&"function"!==typeof o?[s(),u()]:function(e){return[s(e),u(e)]}},threshold:function(e,t,n){this.lockDirection="lock"===n.axis;var r=HE(e,this.lockDirection?[.1,3]:0);return r},modifierKey:function(e){return void 0===e?"ctrlKey":e},pinchOnWheel:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e}}),tS(tS({},TS),{},{mouseOnly:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e}}),tS(tS({},TS),{},{mouseOnly:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e}});var DS=new Map,RS=new Map;var OS={key:"drag",engine:ES,resolver:AS};function PS(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var LS={target:function(e){if(e)return function(){return"current"in e?e.current:e}},enabled:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e},window:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:IS.isBrowser?window:void 0;return e})),eventOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.passive,n=void 0===t||t,r=e.capture,i=void 0!==r&&r;return{passive:n,capture:i}},transform:function(e){return e}},jS=["target","eventOptions","window","enabled","transform"];function FS(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n={},r=0,i=Object.entries(t);r<i.length;r++){var a=u(i[r],2),o=a[0],s=a[1];switch(typeof s){case"function":n[o]=s.call(n,e[o],o,e);break;case"object":n[o]=FS(e[o],s);break;case"boolean":s&&(n[o]=e[o])}}return n}var US=function(){function e(t,n){p(this,e),JE(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=n}return m(e,[{key:"add",value:function(e,t,n,r,i){var a=this._listeners,o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=nS[e],r=n&&n[t]||t;return e+r}(t,n),s=tS(tS({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),i);e.addEventListener(o,r,s);var u=function t(){e.removeEventListener(o,r,s),a.delete(t)};return a.add(u),u}},{key:"clean",value:function(){this._listeners.forEach((function(e){return e()})),this._listeners.clear()}}]),e}(),BS=function(){function e(){p(this,e),JE(this,"_timeouts",new Map)}return m(e,[{key:"add",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:140;this.remove(e);for(var i=arguments.length,a=new Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];this._timeouts.set(e,(n=window).setTimeout.apply(n,[t,r].concat(a)))}},{key:"remove",value:function(e){var t=this._timeouts.get(e);t&&window.clearTimeout(t)}},{key:"clean",value:function(){this._timeouts.forEach((function(e){window.clearTimeout(e)})),this._timeouts.clear()}}]),e}(),VS=function(){function e(t){p(this,e),JE(this,"gestures",new Set),JE(this,"_targetEventStore",new US(this)),JE(this,"gestureEventStores",{}),JE(this,"gestureTimeoutStores",{}),JE(this,"handlers",{}),JE(this,"config",{}),JE(this,"pointerIds",new Set),JE(this,"touchIds",new Set),JE(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),function(e,t){t.drag&&zS(e,"drag");t.wheel&&zS(e,"wheel");t.scroll&&zS(e,"scroll");t.move&&zS(e,"move");t.pinch&&zS(e,"pinch");t.hover&&zS(e,"hover")}(this,t)}return m(e,[{key:"setEventIds",value:function(e){return lS(e)?(this.touchIds=new Set(fS(e)),this.touchIds):"pointerId"in e?("pointerup"===e.type||"pointercancel"===e.type?this.pointerIds.delete(e.pointerId):"pointerdown"===e.type&&this.pointerIds.add(e.pointerId),this.pointerIds):void 0}},{key:"applyHandlers",value:function(e,t){this.handlers=e,this.nativeHandlers=t}},{key:"applyConfig",value:function(e,t){this.config=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e,i=r.target,a=r.eventOptions,o=r.window,s=r.enabled,u=r.transform,l=PS(r,jS);if(n.shared=FS({target:i,eventOptions:a,window:o,enabled:s,transform:u},LS),t){var c=RS.get(t);n[t]=FS(tS({shared:n.shared},l),c)}else for(var h in l){var f=RS.get(h);f&&(n[h]=FS(tS({shared:n.shared},l[h]),f))}return n}(e,t,this.config)}},{key:"clean",value:function(){this._targetEventStore.clean();var e,t=S(this.gestures);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.gestureEventStores[n].clean(),this.gestureTimeoutStores[n].clean()}}catch(r){t.e(r)}finally{t.f()}}},{key:"effect",value:function(){var e=this;return this.config.shared.target&&this.bind(),function(){return e._targetEventStore.clean()}}},{key:"bind",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i,a=this.config.shared,o={};if(!a.target||(i=a.target())){if(a.enabled){var s,u=S(this.gestures);try{for(u.s();!(s=u.n()).done;){var l=s.value,c=this.config[l],h=qS(o,c.eventOptions,!!i);if(c.enabled){var f=DS.get(l);new f(this,n,l).bind(h)}}}catch(x){u.e(x)}finally{u.f()}var p=qS(o,a.eventOptions,!!i),v=function(t){p(t,"",(function(r){return e.nativeHandlers[t](tS(tS({},e.state.shared),{},{event:r,args:n}))}),void 0,!0)};for(var m in this.nativeHandlers)v(m)}for(var y in o)o[y]=yS.apply(void 0,d(o[y]));if(!i)return o;for(var g in o){var k=uS(g),_=k.device,w=k.capture,b=k.passive;this._targetEventStore.add(i,_,"",o[g],{capture:w,passive:b})}}}}]),e}();function zS(e,t){e.gestures.add(t),e.gestureEventStores[t]=new US(e,t),e.gestureTimeoutStores[t]=new BS}var qS=function(e,t,n){return function(r,i,a){var o,s,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=null!==(o=u.capture)&&void 0!==o?o:t.capture,h=null!==(s=u.passive)&&void 0!==s?s:t.passive,f=l?r:oS(r,i,c);n&&h&&(f+="Passive"),e[f]=e[f]||[],e[f].push(a)}};function WS(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=e.useMemo((function(){return new VS(t)}),[]);if(a.applyHandlers(t,i),a.applyConfig(n,r),e.useEffect(a.effect.bind(a)),e.useEffect((function(){return a.clean.bind(a)}),[]),void 0===n.target)return a.bind.bind(a)}function QS(e,t){var n;return n=OS,DS.set(n.key,n.engine),RS.set(n.key,n.resolver),WS({drag:e},t||{},"drag")}var HS=900,YS=220,KS=d(Array(52)).map((function(e){return"ready"}));var GS=function(t){var n=t.deck,r=t.handleSelectCards,i=t.gameData,a=u((0,e.useState)(!1),2),o=a[0],s=a[1],l=u((0,e.useState)(null),2),c=l[0],h=l[1],f=u((0,e.useState)([]),2),p=f[0],v=f[1],m=(0,e.useRef)([]);(0,e.useEffect)((function(){m.current=Array.from({length:5},(function(){return(0,e.createRef)()}))}),[]),(0,e.useEffect)((function(){KS=d(Array(52)).map((function(e){return"ready"}))}),i.currentRound);var y=bE({from:{y:1e3},to:{y:o?180:1e3},config:{tension:200,friction:20}}),g=(0,Wb.jsx)("div",{className:"box-container flex flex-wrap justify-center items-center mt-4 max-h-screen",children:m.current.length>0&&m.current.map((function(e,t){return(0,Wb.jsx)(WE.div,{ref:e,className:"box ".concat(c===t?"bg-[#EDAE49]":"bg-blue-500"," \n          text-white p-6 m-1 rounded-lg shadow-lg flex items-center justify-center \n          text-2xl font-bold w-28 h-[152px] ").concat(t>2?"mt-2":""),style:y,children:t+1},t)}))}),k=function(e){var t=KS[e].startsWith("box"),n="ready"===KS[e],r="marked"===KS[e],i=(KS[e],{width:150,height:210,scale:1,rot:6*Math.random()-3,delay:10*e});return $t($t({},i),{},o?t?{width:100,height:140,zIndex:1e3}:n?{x:0,y:0,width:120,height:168}:{x:0,y:-1e3}:t?{y:2e3}:r?{x:0,y:YS,zIndex:HS-e}:{x:0,y:0,zIndex:e})},_=function(e,t){return"perspective(1500px) rotateX(30deg) rotateY(".concat(e/10,"deg) rotateZ(").concat(e,"deg) scale(").concat(t,")")},w=function(){return"scale(1)"},b=u(wE(KS.length,(function(e){return $t($t({},k(e)),{},{from:{x:0,rot:0,scale:1,y:-1e3}})})),2),x=b[0],T=b[1];(0,e.useEffect)((function(){T.start((function(e){return $t({},k(e))}))}),[o]);var C=function(e){if(5===e)return{bx:0,by:0};var t=m.current[e].current;return{bx:t.offsetLeft-249,by:t.offsetTop+186}},E=function(){for(var e=0;e<5;e++)if(!Number.isInteger(p[e]))return!1;return!0};(0,e.useEffect)((function(){T.start((function(e){var t=KS.filter((function(e){return"ready"===e})).length,n=p.findIndex((function(t){return t===e}));if(-1!==n){if(5===n){var r=d(p);r[5]=void 0,v(r)}var i=C(n);return{x:i.bx,y:i.by,scale:1,rot:0,zIndex:5===n?t+HS:1e3}}return{}}))}),[p]);var S=function e(t,n,r){if(n>4)KS[t]="ready",r[n]=t;else{var i=r[n];r[n]=t,KS[t]="box"+n,Number.isInteger(i)&&e(i,n+1,r)}},M=QS((function(e){var t=u(e.args,1)[0],n=e.active,r=u(e.xy,2),i=r[0],a=r[1],s=u(e.movement,2),l=s[0],f=s[1],y=u(e.offset,2),g=(y[0],y[1],u(e.direction,2)),k=(g[0],g[1],u(e.velocity,2)),_=k[0],w=k[1],b=KS[t];if("ready"===b?f>110&&!o?KS[t]="readyToMarked":l<-80&&(KS[t]="toReviewed"):"reviewed"===b&&(f>90&&!o?KS[t]="reviewedToMarked":l>80&&(KS[t]="toReady")),n){var x=!1,E={width:90,height:160,x:i,y:a};m.current.forEach((function(e,t){if(e.current){var n=e.current.getBoundingClientRect();E.x+-90<n.right&&E.x+-90+E.width>n.left&&E.y+-160<n.bottom&&E.y+-160+E.height>n.top&&(h(t),x=!0)}})),x||h(null)}if(!n){if(Number.isInteger(c)&&Number.isInteger(t)&&!Object.hasOwn(p,t)){var M=d(p),I=M.findIndex((function(e){return e===t}));-1!==I&&(M[I]=null);var N=M[c];Number.isInteger(N)&&S(N,c+1,M),M[c]=t,v(M),KS[t]="box"+c}h(null)}T.start((function(e){if(t===e){b=KS[e];var r=l,i=f,s=2e3,u=KS.filter((function(e){return"ready"===e})).length,c=KS.filter((function(e){return"reviewed"===e})).length,h=KS.filter((function(e){return"marked"===e})).length;switch(b){case"ready":n||(r=0,i=0,s=u+HS);break;case"toReviewed":n||(r=-180,i=0,s=c+HS,KS[e]="reviewed");break;case"reviewed":n?r=l-180:(r=-180,i=0,s=c+HS);break;case"toReady":n?r=l-180:(r=0,i=0,s=u+HS,KS[e]="ready")}if(o){if(b.startsWith("box")){var m=parseInt(b.charAt(3)),y=C(m),g=y.bx,k=y.by;if(n)r=l+g,i=f+k;else if(a<325){r=0,i=0,s=u+HS,KS[e]="ready";var x=d(p);x[m]=null,v(x)}}}else switch(b){case"readyToMarked":n||(r=0,i=YS,s=h+HS,KS[e]="marked");break;case"reviewedToMarked":n?r=l-180:(r=0,i=YS,s=h+HS,KS[e]="marked");break;case"marked":r=0,i=YS,s=h+HS}return{x:r,y:i,zIndex:s,vx:_,vy:w,scale:n?1.1:1,delay:0,config:{friction:40,tension:400,mass:1},immediate:function(e){return"zIndex"===e&&n}}}}))}));return(0,Wb.jsxs)("div",{children:[(0,Wb.jsxs)("div",{className:"px-4 flex items-center justify-between",children:[!o&&(0,Wb.jsxs)("div",{className:"flex items-center",children:[(0,Wb.jsxs)("label",{htmlFor:"firstPassCheckbox",className:"switch flex items-center cursor-pointer ",children:[(0,Wb.jsx)("input",{type:"checkbox",checked:o,onChange:function(){if(s(!o),o)for(var e=0;e<KS.length;e++)"deck"===KS[e]?KS[e]="ready":"ready"!==KS[e]&&"reviewed"!==KS[e]||(KS[e]="marked");else{for(var t=0;t<KS.length;t++)"reviewed"===KS[t]||"ready"===KS[t]?KS[t]="deck":"marked"===KS[t]&&(KS[t]="ready");var n=d(p);n[5]="placeholder"+Math.random(),v(n)}},id:"firstPassCheckbox",className:"hidden"}),(0,Wb.jsx)("span",{className:"slider round ".concat(o?"bg-blue-500":"bg-gray-200")})]}),o?(0,Wb.jsx)("span",{className:"text-sm ml-2",children:"Back to Deck"}):(0,Wb.jsx)("span",{className:"text-md ml-2",children:"Ready to Order"})]}),o&&(0,Wb.jsx)(Yb,{className:"".concat(E()?"bg-blue-500 hover:bg-blue-700":"bg-gray-200"),disabled:!E(),onClick:function(){return function(e){E()?r(e):alert("You must select 5 cards in order")}(p)},children:"Submit Cards"})]}),(0,Wb.jsxs)("div",{className:"relative",style:{top:-10},children:[x.map((function(e,t){var r=e.x,i=e.y,a=e.width,s=e.height,u=e.zIndex,l=e.rot,c=e.scale,h=(e.flip,e.vx,e.vy,_);if(o){var f=p.findIndex((function(e){return e===t})),d=-1!==f&&f<5;h=d?w:_,d?(a=100,s=140):(a=120,s=168)}return(0,Wb.jsx)(WE.div,{className:"deck",style:{x:r,y:i,zIndex:u},children:(0,Wb.jsx)(WE.div,$t($t({},M(t)),{},{style:{zIndex:u,width:a,height:s,transform:SE([l,c],h),backgroundImage:"url(".concat(n[t],")")}}))},t)})),g]})]})},XS=function(t){var n=t.deck,r=t.gameData,i=t.gameRef,a=r.players,o=(r.teams,r.gameState,r.currentRound),s=o%a.length,l=(0,e.useContext)(Qb).currentPlayerName,c=a[0].name===l,h=u((0,e.useState)(""),2),f=h[0],p=h[1],v=u((0,e.useState)(""),2),m=v[0],y=v[1],g=u((0,e.useState)(null),2),k=g[0],_=g[1],w=u((0,e.useState)(!1),2),b=w[0],x=w[1];(0,e.useEffect)((function(){var e=bp(i,"rounds");kv(cv(e,fv("roundNumber","==",o))).then((function(t){if(1===t.size){var n=t.docs[0].id,r=xp(e,n);bv(r,(function(e){_(r),y(e.data())}))}else console.error("Invalid short ID.")}))}),[o]),(0,e.useEffect)((function(){if(m){var e=m.players.find((function(e){return e.name===l}));x(e.chosenCards&&e.chosenCards.length>0)}}),[m]);var T=function(){var e=Ke(He().mark((function e(t){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,_v(k,{phrase:f});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Ke(He().mark((function e(t){var n,r,i;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object.values(t).slice(0,5),r=d(m.players),i=r.find((function(e){return e.name===l})),i.chosenCards=n,e.prev=4,e.next=7,_v(k,{players:r});case 7:x(!0),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),console.error("Error updating document: ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Ke(He().mark((function e(){var t;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=bp(i,"rounds"),e.next=4,wv(t,{roundNumber:o+1,phrase:"",players:a});case 4:return e.next=6,_v(i,{currentRound:o+1});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error updating document: ",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return(0,Wb.jsxs)("div",{children:[(0,Wb.jsx)("nav",{className:"bg-gray-800 text-white shadow-lg",children:(0,Wb.jsxs)("div",{className:"container mx-auto px-4 py-3 flex justify-between items-center",children:[(0,Wb.jsx)(qe,{to:"/",children:(0,Wb.jsx)("h1",{className:"text-xl font-bold",children:"Incommon"})}),(0,Wb.jsx)("div",{className:"mr-6",children:(0,Wb.jsxs)("p",{className:"text-md",children:["Round ",o]})}),(0,Wb.jsx)("div",{children:(0,Wb.jsx)("p",{className:"text-md",children:l})})]})}),(0,Wb.jsx)("div",{className:"container mx-auto text-center",children:m.phrase?b?c?(0,Wb.jsx)("div",{className:"mt-4",children:(0,Wb.jsx)(Yb,{onClick:E,children:"Start Next Round"})}):(0,Wb.jsx)("p",{className:"text-lg font-semibold text-gray-700 bg-gray-100 px-4 py-2 rounded-lg shadow mt-4",children:"Waiting for other players..."}):(0,Wb.jsxs)("div",{className:"mb-4",children:[(0,Wb.jsxs)("div",{className:"text-md my-2",children:["Phrase: ",m.phrase]}),(0,Wb.jsx)(GS,{deck:n,gameData:r,handleSelectCards:C})]}):a[s].name===l?(0,Wb.jsx)("div",{children:(0,Wb.jsxs)("form",{onSubmit:T,className:"flex flex-col items-center justify-center space-y-4 mt-4",children:[(0,Wb.jsx)("p",{className:"text-lg font-semibold",children:"Choose the phrase"}),(0,Wb.jsx)("input",{type:"text",placeholder:"Enter your phrase...",value:f,onChange:function(e){return p(e.target.value)},className:"px-3 py-2 border border-gray-300 rounded shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,Wb.jsx)(Yb,{type:"submit",children:"Choose Phrase"})]})}):(0,Wb.jsx)("div",{className:"mt-4 flex justify-center items-center",children:(0,Wb.jsxs)("p",{className:"text-lg font-semibold text-gray-700 bg-gray-100 px-4 py-2 rounded-lg shadow",children:["Waiting for ",(0,Wb.jsx)("span",{className:"text-blue-500",children:a[s].name})," to choose the phrase"]})})})]})},$S=function(t){var n=t.gameData,r=t.gameRef,i=(0,e.useContext)(Qb),a=i.currentPlayerName,o=(i.setCards,u((0,e.useState)(null),2)),s=o[0],l=o[1],c=u((0,e.useState)(!1),2),h=c[0],f=c[1],p=u((0,e.useState)("original"),2),v=p[0],m=p[1],y=n.players,g=n.teams,k=y[0].name===a,_=function(e){l(e.target.value)},w=function(){var e=Ke(He().mark((function e(){var t,i,o,u;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=3;break}return alert("Please choose a team."),e.abrupt("return");case 3:return t=n.teams.findIndex((function(e){return e.name===s})),(i=d(n.teams))[t].players.push(a),o=d(n.players),u=o.findIndex((function(e){return e.name===a})),o[[u]].team=s,console.log(r),e.next=12,_v(r,{teams:i,players:o});case 12:f(!0);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Ke(He().mark((function e(){var t;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=bp(r,"rounds"),e.next=3,wv(t,{roundNumber:1,phrase:"",players:y});case 3:return e.next=5,_v(r,{currentRound:1,deckType:v,gameState:"started"});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,Wb.jsxs)("div",{className:"container mx-auto p-4",children:[(0,Wb.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Joined Players:"}),(0,Wb.jsx)("div",{className:"overflow-x-auto",children:(0,Wb.jsxs)("table",{className:"min-w-full leading-normal",children:[(0,Wb.jsx)("thead",{children:(0,Wb.jsxs)("tr",{className:"bg-gray-100",children:[(0,Wb.jsx)("th",{className:"px-5 py-3 border-b-2 border-gray-200 text-gray-800  text-left text-sm uppercase font-normal",children:"Player Name"}),(0,Wb.jsx)("th",{className:"px-5 py-3 border-b-2 border-gray-200 text-gray-800  text-left text-sm uppercase font-normal",children:"Team"})]})}),(0,Wb.jsx)("tbody",{children:y.map((function(e){return e.name!==a?(0,Wb.jsxs)("tr",{className:"hover:bg-gray-100",children:[(0,Wb.jsx)("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.name}),(0,Wb.jsx)("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.team})]},e.name):(0,Wb.jsxs)("tr",{className:"hover:bg-gray-100",children:[(0,Wb.jsx)("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:a}),(0,Wb.jsx)("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:h?(0,Wb.jsx)("span",{children:s}):(0,Wb.jsxs)("div",{className:"flex items-center",children:[(0,Wb.jsxs)("select",{value:s,onChange:_,className:"mr-2 py-2 px-4 border rounded shadow",children:[(0,Wb.jsx)("option",{value:"",children:"Choose Team"}),g.map((function(e){return(0,Wb.jsx)("option",{value:e.name,children:e.name},e.name)}))]}),(0,Wb.jsx)(Yb,{onClick:w,disabled:!s,className:"".concat(s?"bg-blue-500 hover:bg-blue-700":"bg-gray-200"),children:"Join"})]})})]})}))})]})}),k&&(0,Wb.jsxs)("div",{children:[(0,Wb.jsxs)("div",{className:"mt-4",children:[(0,Wb.jsx)("label",{htmlFor:"deckType",className:"block text-gray-700 text-sm font-bold mb-2",children:"Choose your deck:"}),(0,Wb.jsxs)("select",{id:"deckType",value:v,onChange:function(e){m(e.target.value)},className:"block appearance-none w-full border border-gray-200 text-gray-700 py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-gray-500",children:[(0,Wb.jsx)("option",{value:"original",children:"Original"}),(0,Wb.jsx)("option",{value:"actors",children:"Actors"})]})]}),(0,Wb.jsx)(Yb,{onClick:b,className:"mt-4",children:"Start Game"})]})]})},ZS=function(){var t=ye().shortId,n=u((0,e.useState)(null),2),r=n[0],i=n[1],a=(0,e.useContext)(Qb),o=a.gameRef,s=a.setGameRef;if((0,e.useEffect)((function(){o?bv(o,(function(e){console.log(e.data()),i(e.data())})):kv(cv(bp(Bb,"games"),fv("shortId","==",t))).then((function(e){if(1===e.size){var t=e.docs[0].id,n=xp(Bb,"games",t);s(n),bv(n,(function(e){i(e.data())}))}else console.error("Invalid short ID.")}))}),[t]),!r)return(0,Wb.jsx)("p",{children:"Loading..."});var l=r.deckType,c=r.gameState;return(0,Wb.jsx)("div",{children:"started"===c?(0,Wb.jsx)(XS,{deck:qb(l),gameData:r,gameRef:o}):(0,Wb.jsx)($S,{gameData:r,gameRef:o})})},JS=function(){var t=u((0,e.useState)(null),2),n=t[0],r=t[1];return(0,e.useEffect)((function(){kv(cv(bp(Bb,"games"),fv("shortId","==","DA2L"))).then((function(e){if(1===e.size){var t=e.docs[0].id;bv(xp(Bb,"games",t),(function(e){console.log(e.data()),r(e.data())}))}else console.error("Invalid short ID.")}))}),[]),n?(0,Wb.jsxs)("div",{children:[(0,Wb.jsx)("h2",{children:"Test Page"}),(0,Wb.jsx)("h2",{children:"Swipe cards left and down"}),(0,Wb.jsx)(GS,{gameData:n})]}):(0,Wb.jsx)("p",{children:"Loading..."})};var eM=function(){return(0,Wb.jsx)(Hb,{children:(0,Wb.jsx)(Be,{children:(0,Wb.jsxs)(De,{children:[(0,Wb.jsx)(Ne,{path:"/",element:(0,Wb.jsx)(Kb,{})}),(0,Wb.jsx)(Ne,{path:"/host/:shortId",element:(0,Wb.jsx)(Jb,{})}),(0,Wb.jsx)(Ne,{path:"/player/:shortId",element:(0,Wb.jsx)(ZS,{})}),(0,Wb.jsx)(Ne,{path:"/test",element:(0,Wb.jsx)(JS,{})})]})})})},tM=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};r.createRoot(document.getElementById("root")).render((0,Wb.jsx)(eM,{})),tM()}()}();
//# sourceMappingURL=main.9112fc36.js.map