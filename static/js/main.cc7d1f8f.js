/*! For license information please see main.cc7d1f8f.js.LICENSE.txt */
!function(){"use strict";var e={463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(d,e)&&(f.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),b=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),E=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var L,j=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var B=!1;function U(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var u="\n"+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function V(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case b:return"Portal";case T:return"Profiler";case C:return"StrictMode";case M:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function Q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=Q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function G(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function Z(e,t){$(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ce,he=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _e=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var be=null,xe=null,Ce=null;function Te(e){if(e=ki(e)){if("function"!==typeof be)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),be(e.stateNode,e.type,t))}}function Se(e){xe?Ce?Ce.push(e):Ce=[e]:xe=e}function Ee(){if(xe){var e=xe,t=Ce;if(Ce=xe=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Ie(e,t){return e(t)}function Me(){}var Ne=!1;function Ae(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ie(e,t,n)}finally{Ne=!1,(null!==xe||null!==Ce)&&(Me(),Ee())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Re=!1;if(c)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(ce){Re=!1}function Oe(e,t,n,r,i,a,o,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var Le=!1,je=null,Fe=!1,Be=null,Ue={onError:function(e){Le=!0,je=e}};function Ve(e,t,n,r,i,a,o,s,u){Le=!1,je=null,Oe.apply(Ue,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(ze(e)!==e)throw Error(a(188))}function Qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ye=i.unstable_scheduleCallback,Ke=i.unstable_cancelCallback,Ge=i.unstable_shouldYield,Xe=i.unstable_requestPaint,$e=i.unstable_now,Ze=i.unstable_getCurrentPriorityLevel,Je=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var lt=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ht(s):0!==(a&=o)&&(r=ht(a))}else 0!==(o=n&~i)?r=ht(o):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function _t(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,bt,xt,Ct,Tt,St=!1,Et=[],It=null,Mt=null,Nt=null,At=new Map,Dt=new Map,Rt=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Mt=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Lt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&bt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function jt(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Tt(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&bt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);_e=r,n.target.dispatchEvent(r),_e=null,t.shift()}return!0}function Bt(e,t,n){Ft(e)&&n.delete(t)}function Ut(){St=!1,null!==It&&Ft(It)&&(It=null),null!==Mt&&Ft(Mt)&&(Mt=null),null!==Nt&&Ft(Nt)&&(Nt=null),At.forEach(Bt),Dt.forEach(Bt)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function zt(e){function t(t){return Vt(t,e)}if(0<Et.length){Vt(Et[0],e);for(var n=1;n<Et.length;n++){var r=Et[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&Vt(It,e),null!==Mt&&Vt(Mt,e),null!==Nt&&Vt(Nt,e),At.forEach(t),Dt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)jt(n),null===n.blockedOn&&Rt.shift()}var qt=_.ReactCurrentBatchConfig,Wt=!0;function Qt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Yt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Yt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Yt(e,t,n,r){if(Wt){var i=Gt(e,t,n,r);if(null===i)Wr(e,t,r,Kt,n),Ot(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Lt(It,e,t,n,r,i),!0;case"dragenter":return Mt=Lt(Mt,e,t,n,r,i),!0;case"mouseover":return Nt=Lt(Nt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return At.set(a,Lt(At.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Dt.set(a,Lt(Dt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Gt(e,t,n,r))&&Wr(e,t,r,Kt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Kt=null;function Gt(e,t,n,r){if(Kt=null,null!==(e=gi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Zt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Zt,r=n.length,i="value"in $t?$t.value:$t.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Jt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=an(ln),hn=j({},ln,{view:0,detail:0}),fn=an(hn),dn=j({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(dn),vn=an(j({},dn,{dataTransfer:0})),mn=an(j({},hn,{relatedTarget:0})),yn=an(j({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=j({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),_n=an(j({},ln,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function Tn(){return Cn}var Sn=j({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?bn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=an(Sn),In=an(j({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Mn=an(j({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),Nn=an(j({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=j({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=an(An),Rn=[9,13,27,32],Pn=c&&"CompositionEvent"in window,On=null;c&&"documentMode"in document&&(On=document.documentMode);var Ln=c&&"TextEvent"in window&&!On,jn=c&&(!Pn||On&&8<On&&11>=On),Fn=String.fromCharCode(32),Bn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Qn(e,t,n,r){Se(r),0<(t=Hr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Yn=null;function Kn(e){Fr(e,0)}function Gn(e){if(Y(_i(e)))return e}function Xn(e,t){if("change"===e)return t}var $n=!1;if(c){var Zn;if(c){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"===typeof er.oninput}Zn=Jn}else Zn=!1;$n=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Yn=Hn=null)}function nr(e){if("value"===e.propertyName&&Gn(Yn)){var t=[];Qn(t,Yn,e,we(e)),Ae(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Yn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Gn(Yn)}function ar(e,t){if("click"===e)return Gn(t)}function or(e,t){if("input"===e||"change"===e)return Gn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=cr(n,a);var o=cr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=c&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==K(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&ur(gr,r)||(gr=r,0<(r=Hr(yr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var br={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Cr={};function Tr(e){if(xr[e])return xr[e];if(!br[e])return e;var t,n=br[e];for(t in n)if(n.hasOwnProperty(t)&&t in Cr)return xr[e]=n[t];return e}c&&(Cr=document.createElement("div").style,"AnimationEvent"in window||(delete br.animationend.animation,delete br.animationiteration.animation,delete br.animationstart.animation),"TransitionEvent"in window||delete br.transitionend.transition);var Sr=Tr("animationend"),Er=Tr("animationiteration"),Ir=Tr("animationstart"),Mr=Tr("transitionend"),Nr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Nr.set(e,t),u(t,[e])}for(var Rr=0;Rr<Ar.length;Rr++){var Pr=Ar[Rr];Dr(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Dr(Sr,"onAnimationEnd"),Dr(Er,"onAnimationIteration"),Dr(Ir,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Mr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function jr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,l){if(Ve.apply(this,arguments),Le){if(!Le)throw Error(a(198));var c=je;Le=!1,je=null,Fe||(Fe=!0,Be=c)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;jr(i,s,l),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,l=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;jr(i,s,l),a=u}}}if(Fe)throw e=Be,Fe=!1,Be=null,e}function Br(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Vr]){e[Vr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Ur(t,!1,e),Ur(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,Ur("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Xt(t)){case 1:var i=Qt;break;case 4:i=Ht;break;default:i=Yt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=gi(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}Ae((function(){var r=a,i=we(n),o=[];e:{var s=Nr.get(e);if(void 0!==s){var u=cn,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=En;break;case"focusin":l="focus",u=mn;break;case"focusout":l="blur",u=mn;break;case"beforeblur":case"afterblur":u=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Mn;break;case Sr:case Er:case Ir:u=yn;break;case Mr:u=Nn;break;case"scroll":u=fn;break;case"wheel":u=Dn;break;case"copy":case"cut":case"paste":u=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=In}var c=0!==(4&t),h=!c&&"scroll"===e,f=c?null!==s?s+"Capture":null:s;c=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=De(p,f))&&c.push(Qr(p,v,d)))),h)break;p=p.return}0<c.length&&(s=new u(s,l,null,n,i),o.push({event:s,listeners:c}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===_e||!(l=n.relatedTarget||n.fromElement)||!gi(l)&&!l[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?gi(l):null)&&(l!==(h=ze(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=pn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=In,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==u?s:_i(u),d=null==l?s:_i(l),(s=new c(v,p+"leave",u,n,i)).target=h,s.relatedTarget=d,v=null,gi(i)===r&&((c=new c(f,p+"enter",l,n,i)).target=d,c.relatedTarget=h,v=c),h=v,u&&l)e:{for(f=l,p=0,d=c=u;d;d=Yr(d))p++;for(d=0,v=f;v;v=Yr(v))d++;for(;0<p-d;)c=Yr(c),p--;for(;0<d-p;)f=Yr(f),d--;for(;p--;){if(c===f||null!==f&&c===f.alternate)break e;c=Yr(c),f=Yr(f)}c=null}else c=null;null!==u&&Kr(o,s,u,c,!1),null!==l&&null!==h&&Kr(o,h,l,c,!0)}if("select"===(u=(s=r?_i(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=Xn;else if(Wn(s))if($n)m=or;else{m=ir;var y=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ar);switch(m&&(m=m(e,r))?Qn(o,m,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=r?_i(r):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,_r(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":_r(o,n,i)}var g;if(Pn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else zn?Un(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(jn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==k?"onCompositionEnd"===k&&zn&&(g=en()):(Zt="value"in($t=i)?$t.value:$t.textContent,zn=!0)),0<(y=Hr(r,k)).length&&(k=new _n(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=Vn(n))&&(k.data=g))),(g=Ln?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Bn=!0,Fn);case"textInput":return(e=t.data)===Fn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Pn&&Un(e,t)?(e=en(),Jt=Zt=$t=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Fr(o,t)}))}function Qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=De(e,n))&&r.unshift(Qr(e,a,i)),null!=(a=De(e,t))&&r.push(Qr(e,a,i))),e=e.return}return r}function Yr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,i?null!=(u=De(n,a))&&o.unshift(Qr(n,u,s)):i||null!=(u=De(n,a))&&o.push(Qr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Gr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Gr,"\n").replace(Xr,"")}function Zr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(a(425))}function Jr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),fi="__reactFiber$"+hi,di="__reactProps$"+hi,pi="__reactContainer$"+hi,vi="__reactEvents$"+hi,mi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function gi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[fi])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[fi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _i(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var bi=[],xi=-1;function Ci(e){return{current:e}}function Ti(e){0>xi||(e.current=bi[xi],bi[xi]=null,xi--)}function Si(e,t){xi++,bi[xi]=e.current,e.current=t}var Ei={},Ii=Ci(Ei),Mi=Ci(!1),Ni=Ei;function Ai(e,t){var n=e.type.contextTypes;if(!n)return Ei;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){Ti(Mi),Ti(Ii)}function Pi(e,t,n){if(Ii.current!==Ei)throw Error(a(168));Si(Ii,t),Si(Mi,n)}function Oi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return j({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ei,Ni=Ii.current,Si(Ii,e),Si(Mi,Mi.current),!0}function ji(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Oi(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ti(Mi),Ti(Ii),Si(Ii,e)):Ti(Mi),Si(Mi,n)}var Fi=null,Bi=!1,Ui=!1;function Vi(e){null===Fi?Fi=[e]:Fi.push(e)}function zi(){if(!Ui&&null!==Fi){Ui=!0;var e=0,t=kt;try{var n=Fi;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Bi=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ye(Je,zi),i}finally{kt=t,Ui=!1}}return null}var qi=[],Wi=0,Qi=null,Hi=0,Yi=[],Ki=0,Gi=null,Xi=1,$i="";function Zi(e,t){qi[Wi++]=Hi,qi[Wi++]=Qi,Qi=e,Hi=t}function Ji(e,t,n){Yi[Ki++]=Xi,Yi[Ki++]=$i,Yi[Ki++]=Gi,Gi=e;var r=Xi;e=$i;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xi=1<<32-ot(t)+i|n<<i|r,$i=a+e}else Xi=1<<a|n<<i|r,$i=e}function ea(e){null!==e.return&&(Zi(e,1),Ji(e,1,0))}function ta(e){for(;e===Qi;)Qi=qi[--Wi],qi[Wi]=null,Hi=qi[--Wi],qi[Wi]=null;for(;e===Gi;)Gi=Yi[--Ki],Yi[Ki]=null,$i=Yi[--Ki],Yi[Ki]=null,Xi=Yi[--Ki],Yi[Ki]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Al(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Gi?{id:Xi,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Al(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function ua(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function la(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(ua(e))throw Error(a(418));t=li(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(ua(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function ca(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ha(e){if(e!==na)return!1;if(!ia)return ca(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(ua(e))throw fa(),Error(a(418));for(;t;)oa(e,t),t=li(t.nextSibling)}if(ca(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?li(e.stateNode.nextSibling):null;return!0}function fa(){for(var e=ra;e;)e=li(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=_.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Ci(null),ga=null,ka=null,_a=null;function wa(){_a=ka=ga=null}function ba(e){var t=ya.current;Ti(ya),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ca(e,t){ga=e,_a=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(_s=!0),e.firstContext=null)}function Ta(e){var t=e._currentValue;if(_a!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Sa=null;function Ea(e){null===Sa?Sa=[e]:Sa.push(e)}function Ia(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ea(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ma(e,r)}function Ma(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Na=!1;function Aa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Da(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ra(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Pa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Iu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ma(e,n)}return null===(i=r.interleaved)?(t.next=t,Ea(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ma(e,n)}function Oa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function La(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ja(e,t,n,r){var i=e.updateQueue;Na=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,l=u.next;u.next=null,null===o?a=l:o.next=l,o=u;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===s?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(null!==a){var h=i.baseState;for(o=0,c=l=u=null,s=a;;){var f=s.lane,d=s.eventTime;if((r&f)===f){null!==c&&(c=c.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(f=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=v.payload)?p.call(d,h,f):p)||void 0===f)break e;h=j({},h,f);break e;case 2:Na=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[s]:f.push(s))}else d={eventTime:d,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(l=c=d,u=h):c=c.next=d,o|=f;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===c&&(u=h),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Lu|=o,e.lanes=o,e.memoizedState=h}}function Fa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ba=(new r.Component).refs;function Ua(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Va={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=el(),i=tl(e),a=Ra(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Pa(e,a,i))&&(nl(t,e,i,r),Oa(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=el(),i=tl(e),a=Ra(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Pa(e,a,i))&&(nl(t,e,i,r),Oa(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=el(),r=tl(e),i=Ra(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Pa(e,i,r))&&(nl(t,e,r,n),Oa(t,e,r))}};function za(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,a))}function qa(e,t,n){var r=!1,i=Ei,a=t.contextType;return"object"===typeof a&&null!==a?a=Ta(a):(i=Di(t)?Ni:Ii.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ai(e,i):Ei),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Va,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Va.enqueueReplaceState(t,t.state,null)}function Qa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ba,Aa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ta(a):(a=Di(t)?Ni:Ii.current,i.context=Ai(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Ua(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Va.enqueueReplaceState(i,i.state,null),ja(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ha(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ba&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ya(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ka(e){return(0,e._init)(e._payload)}function Ga(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Rl(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=jl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var a=n.type;return a===x?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===D&&Ka(a)===t.type)?((r=i(t,n.props)).ref=Ha(e,t,n),r.return=e,r):((r=Pl(n.type,n.key,n.props,null,e.mode,r)).ref=Ha(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Ol(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=jl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Pl(t.type,t.key,t.props,null,e.mode,n)).ref=Ha(e,null,t),n.return=e,n;case b:return(t=Fl(t,e.mode,n)).return=e,t;case D:return f(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Ol(t,e.mode,n,null)).return=e,t;Ya(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?l(e,t,n,r):null;case b:return n.key===i?c(e,t,n,r):null;case D:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||O(n))return null!==i?null:h(e,t,n,r,null);Ya(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||O(r))return h(t,e=e.get(n)||null,r,i,null);Ya(t,r)}return null}function v(i,a,s,u){for(var l=null,c=null,h=a,v=a=0,m=null;null!==h&&v<s.length;v++){h.index>v?(m=h,h=null):m=h.sibling;var y=d(i,h,s[v],u);if(null===y){null===h&&(h=m);break}e&&h&&null===y.alternate&&t(i,h),a=o(y,a,v),null===c?l=y:c.sibling=y,c=y,h=m}if(v===s.length)return n(i,h),ia&&Zi(i,v),l;if(null===h){for(;v<s.length;v++)null!==(h=f(i,s[v],u))&&(a=o(h,a,v),null===c?l=h:c.sibling=h,c=h);return ia&&Zi(i,v),l}for(h=r(i,h);v<s.length;v++)null!==(m=p(h,i,v,s[v],u))&&(e&&null!==m.alternate&&h.delete(null===m.key?v:m.key),a=o(m,a,v),null===c?l=m:c.sibling=m,c=m);return e&&h.forEach((function(e){return t(i,e)})),ia&&Zi(i,v),l}function m(i,s,u,l){var c=O(u);if("function"!==typeof c)throw Error(a(150));if(null==(u=c.call(u)))throw Error(a(151));for(var h=c=null,v=s,m=s=0,y=null,g=u.next();null!==v&&!g.done;m++,g=u.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,l);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),s=o(k,s,m),null===h?c=k:h.sibling=k,h=k,v=y}if(g.done)return n(i,v),ia&&Zi(i,m),c;if(null===v){for(;!g.done;m++,g=u.next())null!==(g=f(i,g.value,l))&&(s=o(g,s,m),null===h?c=g:h.sibling=g,h=g);return ia&&Zi(i,m),c}for(v=r(i,v);!g.done;m++,g=u.next())null!==(g=p(v,i,m,g.value,l))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),s=o(g,s,m),null===h?c=g:h.sibling=g,h=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Zi(i,m),c}return function e(r,a,o,u){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var l=o.key,c=a;null!==c;){if(c.key===l){if((l=o.type)===x){if(7===c.tag){n(r,c.sibling),(a=i(c,o.props.children)).return=r,r=a;break e}}else if(c.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===D&&Ka(l)===c.type){n(r,c.sibling),(a=i(c,o.props)).ref=Ha(r,c,o),a.return=r,r=a;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===x?((a=Ol(o.props.children,r.mode,u,o.key)).return=r,r=a):((u=Pl(o.type,o.key,o.props,null,r.mode,u)).ref=Ha(r,a,o),u.return=r,r=u)}return s(r);case b:e:{for(c=o.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Fl(o,r.mode,u)).return=r,r=a}return s(r);case D:return e(r,a,(c=o._init)(o._payload),u)}if(te(o))return v(r,a,o,u);if(O(o))return m(r,a,o,u);Ya(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=jl(o,r.mode,u)).return=r,r=a),s(r)):n(r,a)}}var Xa=Ga(!0),$a=Ga(!1),Za={},Ja=Ci(Za),eo=Ci(Za),to=Ci(Za);function no(e){if(e===Za)throw Error(a(174));return e}function ro(e,t){switch(Si(to,t),Si(eo,e),Si(Ja,Za),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti(Ja),Si(Ja,t)}function io(){Ti(Ja),Ti(eo),Ti(to)}function ao(e){no(to.current);var t=no(Ja.current),n=ue(t,e.type);t!==n&&(Si(eo,e),Si(Ja,n))}function oo(e){eo.current===e&&(Ti(Ja),Ti(eo))}var so=Ci(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lo=[];function co(){for(var e=0;e<lo.length;e++)lo[e]._workInProgressVersionPrimary=null;lo.length=0}var ho=_.ReactCurrentDispatcher,fo=_.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,ko=!1,_o=0,wo=0;function bo(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function Co(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?ss:us,e=n(r,i),ko){o=0;do{if(ko=!1,_o=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,ho.current=ls,e=n(r,i)}while(ko)}if(ho.current=os,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function To(){var e=0!==_o;return _o=0,e}function So(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function Eo(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function Io(e,t){return"function"===typeof t?t(e):t}function Mo(e){var t=Eo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var u=s=null,l=null,c=o;do{var h=c.lane;if((po&h)===h)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(u=l=f,s=r):l=l.next=f,vo.lanes|=h,Lu|=h}c=c.next}while(null!==c&&c!==o);null===l?s=r:l.next=u,sr(r,t.memoizedState)||(_s=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Lu|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=Eo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(_s=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ao(){}function Do(e,t){var n=vo,r=Eo(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,_s=!0),r=r.queue,Wo(Oo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Bo(9,Po.bind(null,n,r,i,t),void 0,null),null===Mu)throw Error(a(349));0!==(30&po)||Ro(n,t,i)}return i}function Ro(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Po(e,t,n,r){t.value=n,t.getSnapshot=r,Lo(t)&&jo(e)}function Oo(e,t,n){return n((function(){Lo(t)&&jo(e)}))}function Lo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function jo(e){var t=Ma(e,1);null!==t&&nl(t,e,1,-1)}function Fo(e){var t=So();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,vo,e),[t.memoizedState,e]}function Bo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Uo(){return Eo().memoizedState}function Vo(e,t,n,r){var i=So();vo.flags|=e,i.memoizedState=Bo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=Eo();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=Bo(t,n,a,r))}vo.flags|=e,i.memoizedState=Bo(1|t,n,a,r)}function qo(e,t){return Vo(8390656,8,e,t)}function Wo(e,t){return zo(2048,8,e,t)}function Qo(e,t){return zo(4,2,e,t)}function Ho(e,t){return zo(4,4,e,t)}function Yo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ko(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Yo.bind(null,t,e),n)}function Go(){}function Xo(e,t){var n=Eo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $o(e,t){var n=Eo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Zo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,_s=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),vo.lanes|=n,Lu|=n,e.baseState=!0),t)}function Jo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{kt=n,fo.transition=r}}function es(){return Eo().memoizedState}function ts(e,t,n){var r=tl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Ia(e,t,n,r))){nl(n,e,r,el()),as(n,t,r)}}function ns(e,t,n){var r=tl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var u=t.interleaved;return null===u?(i.next=i,Ea(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(l){}null!==(n=Ia(e,t,i,r))&&(nl(n,e,r,i=el()),as(n,t,r))}}function rs(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function is(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var os={readContext:Ta,useCallback:bo,useContext:bo,useEffect:bo,useImperativeHandle:bo,useInsertionEffect:bo,useLayoutEffect:bo,useMemo:bo,useReducer:bo,useRef:bo,useState:bo,useDebugValue:bo,useDeferredValue:bo,useTransition:bo,useMutableSource:bo,useSyncExternalStore:bo,useId:bo,unstable_isNewReconciler:!1},ss={readContext:Ta,useCallback:function(e,t){return So().memoizedState=[e,void 0===t?null:t],e},useContext:Ta,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Vo(4194308,4,Yo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vo(4,2,e,t)},useMemo:function(e,t){var n=So();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=So();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},So().memoizedState=e},useState:Fo,useDebugValue:Go,useDeferredValue:function(e){return So().memoizedState=e},useTransition:function(){var e=Fo(!1),t=e[0];return e=Jo.bind(null,e[1]),So().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=So();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Mu)throw Error(a(349));0!==(30&po)||Ro(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Oo.bind(null,r,o,e),[e]),r.flags|=2048,Bo(9,Po.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=So(),t=Mu.identifierPrefix;if(ia){var n=$i;t=":"+t+"R"+(n=(Xi&~(1<<32-ot(Xi)-1)).toString(32)+n),0<(n=_o++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Ta,useCallback:Xo,useContext:Ta,useEffect:Wo,useImperativeHandle:Ko,useInsertionEffect:Qo,useLayoutEffect:Ho,useMemo:$o,useReducer:Mo,useRef:Uo,useState:function(){return Mo(Io)},useDebugValue:Go,useDeferredValue:function(e){return Zo(Eo(),mo.memoizedState,e)},useTransition:function(){return[Mo(Io)[0],Eo().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Do,useId:es,unstable_isNewReconciler:!1},ls={readContext:Ta,useCallback:Xo,useContext:Ta,useEffect:Wo,useImperativeHandle:Ko,useInsertionEffect:Qo,useLayoutEffect:Ho,useMemo:$o,useReducer:No,useRef:Uo,useState:function(){return No(Io)},useDebugValue:Go,useDeferredValue:function(e){var t=Eo();return null===mo?t.memoizedState=e:Zo(t,mo.memoizedState,e)},useTransition:function(){return[No(Io)[0],Eo().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Do,useId:es,unstable_isNewReconciler:!1};function cs(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function hs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Ra(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wu||(Wu=!0,Qu=r),fs(0,t)},n}function vs(e,t,n){(n=Ra(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){fs(0,t),"function"!==typeof r&&(null===Hu?Hu=new Set([this]):Hu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tl.bind(null,e,t,n),t.then(e,e))}function ys(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ra(-1,1)).tag=2,Pa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ks=_.ReactCurrentOwner,_s=!1;function ws(e,t,n,r){t.child=null===e?$a(t,null,n,r):Xa(t,e.child,n,r)}function bs(e,t,n,r,i){n=n.render;var a=t.ref;return Ca(t,i),r=Co(e,t,n,r,a,i),n=To(),null===e||_s?(ia&&n&&ea(t),t.flags|=1,ws(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ws(e,t,i))}function xs(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Dl(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pl(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Cs(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Ws(e,t,i)}return t.flags|=1,(e=Rl(a,r)).ref=t.ref,e.return=t,t.child=e}function Cs(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(ur(a,r)&&e.ref===t.ref){if(_s=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ws(e,t,i);0!==(131072&e.flags)&&(_s=!0)}}return Es(e,t,n,r,i)}function Ts(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Ru,Du),Du|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Ru,Du),Du|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Si(Ru,Du),Du|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Si(Ru,Du),Du|=r;return ws(e,t,i,n),t.child}function Ss(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Es(e,t,n,r,i){var a=Di(n)?Ni:Ii.current;return a=Ai(t,a),Ca(t,i),n=Co(e,t,n,r,a,i),r=To(),null===e||_s?(ia&&r&&ea(t),t.flags|=1,ws(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ws(e,t,i))}function Is(e,t,n,r,i){if(Di(n)){var a=!0;Li(t)}else a=!1;if(Ca(t,i),null===t.stateNode)qs(e,t),qa(t,n,r),Qa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=Ta(l):l=Ai(t,l=Di(n)?Ni:Ii.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==l)&&Wa(t,o,r,l),Na=!1;var f=t.memoizedState;o.state=f,ja(t,r,o,i),u=t.memoizedState,s!==r||f!==u||Mi.current||Na?("function"===typeof c&&(Ua(t,n,c,r),u=t.memoizedState),(s=Na||za(t,n,s,r,f,u,l))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Da(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:ma(t.type,s),o.props=l,h=t.pendingProps,f=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=Ta(u):u=Ai(t,u=Di(n)?Ni:Ii.current);var d=n.getDerivedStateFromProps;(c="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||f!==u)&&Wa(t,o,r,u),Na=!1,f=t.memoizedState,o.state=f,ja(t,r,o,i);var p=t.memoizedState;s!==h||f!==p||Mi.current||Na?("function"===typeof d&&(Ua(t,n,d,r),p=t.memoizedState),(l=Na||za(t,n,l,r,f,p,u)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Ms(e,t,n,r,a,i)}function Ms(e,t,n,r,i,a){Ss(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&ji(t,n,!1),Ws(e,t,a);r=t.stateNode,ks.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Xa(t,e.child,null,a),t.child=Xa(t,null,s,a)):ws(e,t,s,a),t.memoizedState=r.state,i&&ji(t,n,!0),t.child}function Ns(e){var t=e.stateNode;t.pendingContext?Pi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pi(0,t.context,!1),ro(e,t.containerInfo)}function As(e,t,n,r,i){return da(),pa(i),t.flags|=256,ws(e,t,n,r),t.child}var Ds,Rs,Ps,Os={dehydrated:null,treeContext:null,retryLane:0};function Ls(e){return{baseLanes:e,cachePool:null,transitions:null}}function js(e,t,n){var r,i=t.pendingProps,o=so.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Si(so,1&o),null===e)return la(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Ll(u,i,0,null),e=Ol(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ls(n),t.memoizedState=Os,e):Fs(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Bs(e,t,s,r=hs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Ll({mode:"visible",children:r.children},i,0,null),(o=Ol(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Xa(t,e.child,null,s),t.child.memoizedState=Ls(s),t.memoizedState=Os,o);if(0===(1&t.mode))return Bs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,Bs(e,t,s,r=hs(o=Error(a(419)),r,void 0))}if(u=0!==(s&e.childLanes),_s||u){if(null!==(r=Mu)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ma(e,i),nl(r,e,i,-1))}return vl(),Bs(e,t,s,r=hs(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=El.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=li(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Yi[Ki++]=Xi,Yi[Ki++]=$i,Yi[Ki++]=Gi,Xi=e.id,$i=e.overflow,Gi=t),(t=Fs(t,r.children)).flags|=4096,t)}(e,t,u,i,r,o,n);if(s){s=i.fallback,u=t.mode,r=(o=e.child).sibling;var l={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=Rl(o,l)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Rl(r,s):(s=Ol(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?Ls(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Os,i}return e=(s=e.child).sibling,i=Rl(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fs(e,t){return(t=Ll({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bs(e,t,n,r){return null!==r&&pa(r),Xa(t,e.child,null,n),(e=Fs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Us(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function Vs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Us(e,n,t);else if(19===e.tag)Us(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(so,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Vs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===uo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Vs(t,!0,n,null,a);break;case"together":Vs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ws(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Lu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Rl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Qs(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ys(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hs(t),null;case 1:case 17:return Di(t.type)&&Ri(),Hs(t),null;case 3:return r=t.stateNode,io(),Ti(Mi),Ti(Ii),co(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(ol(aa),aa=null))),Hs(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Rs(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Hs(t),null}if(e=no(Ja.current),ha(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(i=0;i<Or.length;i++)Br(Or[i],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":X(r,o),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Br("invalid",r);break;case"textarea":ie(r,o),Br("invalid",r)}for(var u in ge(n,o),i=null,o)if(o.hasOwnProperty(u)){var l=o[u];"children"===u?"string"===typeof l?r.textContent!==l&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,l,e),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,l,e),i=["children",""+l]):s.hasOwnProperty(u)&&null!=l&&"onScroll"===u&&Br("scroll",r)}switch(n){case"input":H(r),J(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Jr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[fi]=t,e[di]=r,Ds(e,t),t.stateNode=e;e:{switch(u=ke(n,r),n){case"dialog":Br("cancel",e),Br("close",e),i=r;break;case"iframe":case"object":case"embed":Br("load",e),i=r;break;case"video":case"audio":for(i=0;i<Or.length;i++)Br(Or[i],e);i=r;break;case"source":Br("error",e),i=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),i=r;break;case"details":Br("toggle",e),i=r;break;case"input":X(e,r),i=G(e,r),Br("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=j({},r,{value:void 0}),Br("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Br("invalid",e)}for(o in ge(n,i),l=i)if(l.hasOwnProperty(o)){var c=l[o];"style"===o?me(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&he(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&fe(e,c):"number"===typeof c&&fe(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Br("scroll",e):null!=c&&k(e,o,c,u))}switch(n){case"input":H(e),J(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hs(t),null;case 6:if(e&&null!=t.stateNode)Ps(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Ja.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Hs(t),null;case 13:if(Ti(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))fa(),da(),t.flags|=98560,o=!1;else if(o=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[fi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hs(t),o=!1}else null!==aa&&(ol(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Pu&&(Pu=3):vl())),null!==t.updateQueue&&(t.flags|=4),Hs(t),null);case 4:return io(),null===e&&zr(t.stateNode.containerInfo),Hs(t),null;case 10:return ba(t.type._context),Hs(t),null;case 19:if(Ti(so),null===(o=t.memoizedState))return Hs(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)Qs(o,!1);else{if(0!==Pu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=uo(e))){for(t.flags|=128,Qs(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>zu&&(t.flags|=128,r=!0,Qs(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Qs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!ia)return Hs(t),null}else 2*$e()-o.renderingStartTime>zu&&1073741824!==n&&(t.flags|=128,r=!0,Qs(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=so.current,Si(so,r?1&n|2:1&n),t):(Hs(t),null);case 22:case 23:return hl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Du)&&(Hs(t),6&t.subtreeFlags&&(t.flags|=8192)):Hs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Ks(e,t){switch(ta(t),t.tag){case 1:return Di(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ti(Mi),Ti(Ii),co(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ti(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(so),null;case 4:return io(),null;case 10:return ba(t.type._context),null;case 22:case 23:return hl(),null;default:return null}}Ds=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Rs=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Ja.current);var a,o=null;switch(n){case"input":i=G(e,i),r=G(e,r),o=[];break;case"select":i=j({},i,{value:void 0}),r=j({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(c in ge(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var u=i[c];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(u=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&l!==u&&(null!=l||null!=u))if("style"===c)if(u){for(a in u)!u.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&u[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(o||(o=[]),o.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(o=o||[]).push(c,l)):"children"===c?"string"!==typeof l&&"number"!==typeof l||(o=o||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&Br("scroll",e),o||u===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Ps=function(e,t,n,r){n!==r&&(t.flags|=4)};var Gs=!1,Xs=!1,$s="function"===typeof WeakSet?WeakSet:Set,Zs=null;function Js(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Cl(e,t,r)}else n.current=null}function eu(e,t,n){try{n()}catch(r){Cl(e,t,r)}}var tu=!1;function nu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&eu(t,n,a)}i=i.next}while(i!==r)}}function ru(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function iu(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function au(e){var t=e.alternate;null!==t&&(e.alternate=null,au(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ou(e){return 5===e.tag||3===e.tag||4===e.tag}function su(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ou(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function uu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(uu(e,t,n),e=e.sibling;null!==e;)uu(e,t,n),e=e.sibling}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}var cu=null,hu=!1;function fu(e,t,n){for(n=n.child;null!==n;)du(e,t,n),n=n.sibling}function du(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Xs||Js(n,t);case 6:var r=cu,i=hu;cu=null,fu(e,t,n),hu=i,null!==(cu=r)&&(hu?(e=cu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cu.removeChild(n.stateNode));break;case 18:null!==cu&&(hu?(e=cu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),zt(e)):ui(cu,n.stateNode));break;case 4:r=cu,i=hu,cu=n.stateNode.containerInfo,hu=!0,fu(e,t,n),cu=r,hu=i;break;case 0:case 11:case 14:case 15:if(!Xs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&eu(n,t,o),i=i.next}while(i!==r)}fu(e,t,n);break;case 1:if(!Xs&&(Js(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Cl(n,t,s)}fu(e,t,n);break;case 21:fu(e,t,n);break;case 22:1&n.mode?(Xs=(r=Xs)||null!==n.memoizedState,fu(e,t,n),Xs=r):fu(e,t,n);break;default:fu(e,t,n)}}function pu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $s),t.forEach((function(t){var r=Il.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:cu=u.stateNode,hu=!1;break e;case 3:case 4:cu=u.stateNode.containerInfo,hu=!0;break e}u=u.return}if(null===cu)throw Error(a(160));du(o,s,i),cu=null,hu=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(c){Cl(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)mu(t,e),t=t.sibling}function mu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vu(t,e),yu(e),4&r){try{nu(3,e,e.return),ru(3,e)}catch(m){Cl(e,e.return,m)}try{nu(5,e,e.return)}catch(m){Cl(e,e.return,m)}}break;case 1:vu(t,e),yu(e),512&r&&null!==n&&Js(n,n.return);break;case 5:if(vu(t,e),yu(e),512&r&&null!==n&&Js(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(m){Cl(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===u&&"radio"===o.type&&null!=o.name&&$(i,o),ke(u,s);var c=ke(u,o);for(s=0;s<l.length;s+=2){var h=l[s],f=l[s+1];"style"===h?me(i,f):"dangerouslySetInnerHTML"===h?he(i,f):"children"===h?fe(i,f):k(i,h,f,c)}switch(u){case"input":Z(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Cl(e,e.return,m)}}break;case 6:if(vu(t,e),yu(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Cl(e,e.return,m)}}break;case 3:if(vu(t,e),yu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(m){Cl(e,e.return,m)}break;case 4:default:vu(t,e),yu(e);break;case 13:vu(t,e),yu(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Vu=$e())),4&r&&pu(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Xs=(c=Xs)||h,vu(t,e),Xs=c):vu(t,e),yu(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!==(1&e.mode))for(Zs=e,h=e.child;null!==h;){for(f=Zs=h;null!==Zs;){switch(p=(d=Zs).child,d.tag){case 0:case 11:case 14:case 15:nu(4,d,d.return);break;case 1:Js(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Cl(r,n,m)}}break;case 5:Js(d,d.return);break;case 22:if(null!==d.memoizedState){wu(f);continue}}null!==p?(p.return=d,Zs=p):wu(f)}h=h.sibling}e:for(h=null,f=e;;){if(5===f.tag){if(null===h){h=f;try{i=f.stateNode,c?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=f.stateNode,s=void 0!==(l=f.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,u.style.display=ve("display",s))}catch(m){Cl(e,e.return,m)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(m){Cl(e,e.return,m)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:vu(t,e),yu(e),4&r&&pu(e);case 21:}}function yu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ou(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),lu(e,su(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;uu(e,su(e),o);break;default:throw Error(a(161))}}catch(s){Cl(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gu(e,t,n){Zs=e,ku(e,t,n)}function ku(e,t,n){for(var r=0!==(1&e.mode);null!==Zs;){var i=Zs,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Gs;if(!o){var s=i.alternate,u=null!==s&&null!==s.memoizedState||Xs;s=Gs;var l=Xs;if(Gs=o,(Xs=u)&&!l)for(Zs=i;null!==Zs;)u=(o=Zs).child,22===o.tag&&null!==o.memoizedState?bu(i):null!==u?(u.return=o,Zs=u):bu(i);for(;null!==a;)Zs=a,ku(a,t,n),a=a.sibling;Zs=i,Gs=s,Xs=l}_u(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zs=a):_u(e)}}function _u(e){for(;null!==Zs;){var t=Zs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xs||ru(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xs)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Fa(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fa(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&zt(f)}}}break;default:throw Error(a(163))}Xs||512&t.flags&&iu(t)}catch(d){Cl(t,t.return,d)}}if(t===e){Zs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zs=n;break}Zs=t.return}}function wu(e){for(;null!==Zs;){var t=Zs;if(t===e){Zs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zs=n;break}Zs=t.return}}function bu(e){for(;null!==Zs;){var t=Zs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ru(4,t)}catch(u){Cl(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){Cl(t,i,u)}}var a=t.return;try{iu(t)}catch(u){Cl(t,a,u)}break;case 5:var o=t.return;try{iu(t)}catch(u){Cl(t,o,u)}}}catch(u){Cl(t,t.return,u)}if(t===e){Zs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Zs=s;break}Zs=t.return}}var xu,Cu=Math.ceil,Tu=_.ReactCurrentDispatcher,Su=_.ReactCurrentOwner,Eu=_.ReactCurrentBatchConfig,Iu=0,Mu=null,Nu=null,Au=0,Du=0,Ru=Ci(0),Pu=0,Ou=null,Lu=0,ju=0,Fu=0,Bu=null,Uu=null,Vu=0,zu=1/0,qu=null,Wu=!1,Qu=null,Hu=null,Yu=!1,Ku=null,Gu=0,Xu=0,$u=null,Zu=-1,Ju=0;function el(){return 0!==(6&Iu)?$e():-1!==Zu?Zu:Zu=$e()}function tl(e){return 0===(1&e.mode)?1:0!==(2&Iu)&&0!==Au?Au&-Au:null!==va.transition?(0===Ju&&(Ju=vt()),Ju):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function nl(e,t,n,r){if(50<Xu)throw Xu=0,$u=null,Error(a(185));yt(e,n,r),0!==(2&Iu)&&e===Mu||(e===Mu&&(0===(2&Iu)&&(ju|=n),4===Pu&&sl(e,Au)),rl(e,r),1===n&&0===Iu&&0===(1&t.mode)&&(zu=$e()+500,Bi&&zi()))}function rl(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,u=i[o];-1===u?0!==(s&n)&&0===(s&r)||(i[o]=dt(s,t)):u<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ft(e,e===Mu?Au:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Bi=!0,Vi(e)}(ul.bind(null,e)):Vi(ul.bind(null,e)),oi((function(){0===(6&Iu)&&zi()})),n=null;else{switch(_t(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ml(n,il.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function il(e,t){if(Zu=-1,Ju=0,0!==(6&Iu))throw Error(a(327));var n=e.callbackNode;if(bl()&&e.callbackNode!==n)return null;var r=ft(e,e===Mu?Au:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=ml(e,r);else{t=r;var i=Iu;Iu|=2;var o=pl();for(Mu===e&&Au===t||(qu=null,zu=$e()+500,fl(e,t));;)try{gl();break}catch(u){dl(e,u)}wa(),Tu.current=o,Iu=i,null!==Nu?t=0:(Mu=null,Au=0,t=Pu)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=al(e,i))),1===t)throw n=Ou,fl(e,0),sl(e,r),rl(e,$e()),n;if(6===t)sl(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=ml(e,r))&&(0!==(o=pt(e))&&(r=o,t=al(e,o))),1===t))throw n=Ou,fl(e,0),sl(e,r),rl(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wl(e,Uu,qu);break;case 3:if(sl(e,r),(130023424&r)===r&&10<(t=Vu+500-$e())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){el(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wl.bind(null,e,Uu,qu),t);break}wl(e,Uu,qu);break;case 4:if(sl(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cu(r/1960))-r)){e.timeoutHandle=ri(wl.bind(null,e,Uu,qu),r);break}wl(e,Uu,qu);break;default:throw Error(a(329))}}}return rl(e,$e()),e.callbackNode===n?il.bind(null,e):null}function al(e,t){var n=Bu;return e.current.memoizedState.isDehydrated&&(fl(e,t).flags|=256),2!==(e=ml(e,t))&&(t=Uu,Uu=n,null!==t&&ol(t)),e}function ol(e){null===Uu?Uu=e:Uu.push.apply(Uu,e)}function sl(e,t){for(t&=~Fu,t&=~ju,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function ul(e){if(0!==(6&Iu))throw Error(a(327));bl();var t=ft(e,0);if(0===(1&t))return rl(e,$e()),null;var n=ml(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=al(e,r))}if(1===n)throw n=Ou,fl(e,0),sl(e,t),rl(e,$e()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wl(e,Uu,qu),rl(e,$e()),null}function ll(e,t){var n=Iu;Iu|=1;try{return e(t)}finally{0===(Iu=n)&&(zu=$e()+500,Bi&&zi())}}function cl(e){null!==Ku&&0===Ku.tag&&0===(6&Iu)&&bl();var t=Iu;Iu|=1;var n=Eu.transition,r=kt;try{if(Eu.transition=null,kt=1,e)return e()}finally{kt=r,Eu.transition=n,0===(6&(Iu=t))&&zi()}}function hl(){Du=Ru.current,Ti(Ru)}function fl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Nu)for(n=Nu.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:io(),Ti(Mi),Ti(Ii),co();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ti(so);break;case 10:ba(r.type._context);break;case 22:case 23:hl()}n=n.return}if(Mu=e,Nu=e=Rl(e.current,null),Au=Du=t,Pu=0,Ou=null,Fu=ju=Lu=0,Uu=Bu=null,null!==Sa){for(t=0;t<Sa.length;t++)if(null!==(r=(n=Sa[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Sa=null}return e}function dl(e,t){for(;;){var n=Nu;try{if(wa(),ho.current=os,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,ko=!1,_o=0,Su.current=null,null===n||null===n.return){Pu=1,Ou=t,Nu=null;break}e:{var o=e,s=n.return,u=n,l=t;if(t=Au,u.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l,h=u,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ys(s);if(null!==p){p.flags&=-257,gs(p,s,u,0,t),1&p.mode&&ms(o,c,t),l=c;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(l),t.updateQueue=m}else v.add(l);break e}if(0===(1&t)){ms(o,c,t),vl();break e}l=Error(a(426))}else if(ia&&1&u.mode){var y=ys(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gs(y,s,u,0,t),pa(cs(l,u));break e}}o=l=cs(l,u),4!==Pu&&(Pu=2),null===Bu?Bu=[o]:Bu.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,La(o,ps(0,l,t));break e;case 1:u=l;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Hu||!Hu.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,La(o,vs(o,u,t));break e}}o=o.return}while(null!==o)}_l(n)}catch(_){t=_,Nu===n&&null!==n&&(Nu=n=n.return);continue}break}}function pl(){var e=Tu.current;return Tu.current=os,null===e?os:e}function vl(){0!==Pu&&3!==Pu&&2!==Pu||(Pu=4),null===Mu||0===(268435455&Lu)&&0===(268435455&ju)||sl(Mu,Au)}function ml(e,t){var n=Iu;Iu|=2;var r=pl();for(Mu===e&&Au===t||(qu=null,fl(e,t));;)try{yl();break}catch(i){dl(e,i)}if(wa(),Iu=n,Tu.current=r,null!==Nu)throw Error(a(261));return Mu=null,Au=0,Pu}function yl(){for(;null!==Nu;)kl(Nu)}function gl(){for(;null!==Nu&&!Ge();)kl(Nu)}function kl(e){var t=xu(e.alternate,e,Du);e.memoizedProps=e.pendingProps,null===t?_l(e):Nu=t,Su.current=null}function _l(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ys(n,t,Du)))return void(Nu=n)}else{if(null!==(n=Ks(n,t)))return n.flags&=32767,void(Nu=n);if(null===e)return Pu=6,void(Nu=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Nu=t);Nu=t=e}while(null!==t);0===Pu&&(Pu=5)}function wl(e,t,n){var r=kt,i=Eu.transition;try{Eu.transition=null,kt=1,function(e,t,n,r){do{bl()}while(null!==Ku);if(0!==(6&Iu))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Mu&&(Nu=Mu=null,Au=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yu||(Yu=!0,Ml(tt,(function(){return bl(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Eu.transition,Eu.transition=null;var s=kt;kt=1;var u=Iu;Iu|=4,Su.current=null,function(e,t){if(ei=Wt,dr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var s=0,u=-1,l=-1,c=0,h=0,f=e,d=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(u=s+i),f!==o||0!==r&&3!==f.nodeType||(l=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++c===i&&(u=s),d===o&&++h===r&&(l=s),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===u||-1===l?null:{start:u,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Zs=t;null!==Zs;)if(e=(t=Zs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zs=e;else for(;null!==Zs;){t=Zs;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(a(163))}}catch(w){Cl(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zs=e;break}Zs=t.return}v=tu,tu=!1}(e,n),mu(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,gu(n,e,i),Xe(),Iu=u,kt=s,Eu.transition=o}else e.current=n;if(Yu&&(Yu=!1,Ku=e,Gu=i),0===(o=e.pendingLanes)&&(Hu=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rl(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Wu)throw Wu=!1,e=Qu,Qu=null,e;0!==(1&Gu)&&0!==e.tag&&bl(),0!==(1&(o=e.pendingLanes))?e===$u?Xu++:(Xu=0,$u=e):Xu=0,zi()}(e,t,n,r)}finally{Eu.transition=i,kt=r}return null}function bl(){if(null!==Ku){var e=_t(Gu),t=Eu.transition,n=kt;try{if(Eu.transition=null,kt=16>e?16:e,null===Ku)var r=!1;else{if(e=Ku,Ku=null,Gu=0,0!==(6&Iu))throw Error(a(331));var i=Iu;for(Iu|=4,Zs=e.current;null!==Zs;){var o=Zs,s=o.child;if(0!==(16&Zs.flags)){var u=o.deletions;if(null!==u){for(var l=0;l<u.length;l++){var c=u[l];for(Zs=c;null!==Zs;){var h=Zs;switch(h.tag){case 0:case 11:case 15:nu(8,h,o)}var f=h.child;if(null!==f)f.return=h,Zs=f;else for(;null!==Zs;){var d=(h=Zs).sibling,p=h.return;if(au(h),h===c){Zs=null;break}if(null!==d){d.return=p,Zs=d;break}Zs=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Zs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Zs=s;else e:for(;null!==Zs;){if(0!==(2048&(o=Zs).flags))switch(o.tag){case 0:case 11:case 15:nu(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zs=g;break e}Zs=o.return}}var k=e.current;for(Zs=k;null!==Zs;){var _=(s=Zs).child;if(0!==(2064&s.subtreeFlags)&&null!==_)_.return=s,Zs=_;else e:for(s=k;null!==Zs;){if(0!==(2048&(u=Zs).flags))try{switch(u.tag){case 0:case 11:case 15:ru(9,u)}}catch(b){Cl(u,u.return,b)}if(u===s){Zs=null;break e}var w=u.sibling;if(null!==w){w.return=u.return,Zs=w;break e}Zs=u.return}}if(Iu=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(b){}r=!0}return r}finally{kt=n,Eu.transition=t}}return!1}function xl(e,t,n){e=Pa(e,t=ps(0,t=cs(n,t),1),1),t=el(),null!==e&&(yt(e,1,t),rl(e,t))}function Cl(e,t,n){if(3===e.tag)xl(e,e,n);else for(;null!==t;){if(3===t.tag){xl(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hu||!Hu.has(r))){t=Pa(t,e=vs(t,e=cs(n,e),1),1),e=el(),null!==t&&(yt(t,1,e),rl(t,e));break}}t=t.return}}function Tl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=el(),e.pingedLanes|=e.suspendedLanes&n,Mu===e&&(Au&n)===n&&(4===Pu||3===Pu&&(130023424&Au)===Au&&500>$e()-Vu?fl(e,0):Fu|=n),rl(e,t)}function Sl(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=el();null!==(e=Ma(e,t))&&(yt(e,t,n),rl(e,n))}function El(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sl(e,n)}function Il(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Sl(e,n)}function Ml(e,t){return Ye(e,t)}function Nl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Al(e,t,n,r){return new Nl(e,t,n,r)}function Dl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rl(e,t){var n=e.alternate;return null===n?((n=Al(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pl(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Dl(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case x:return Ol(n.children,i,o,t);case C:s=8,i|=8;break;case T:return(e=Al(12,n,t,2|i)).elementType=T,e.lanes=o,e;case M:return(e=Al(13,n,t,i)).elementType=M,e.lanes=o,e;case N:return(e=Al(19,n,t,i)).elementType=N,e.lanes=o,e;case R:return Ll(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:s=10;break e;case E:s=9;break e;case I:s=11;break e;case A:s=14;break e;case D:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Al(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Ol(e,t,n,r){return(e=Al(7,e,r,t)).lanes=n,e}function Ll(e,t,n,r){return(e=Al(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function jl(e,t,n){return(e=Al(6,e,null,t)).lanes=n,e}function Fl(e,t,n){return(t=Al(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bl(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ul(e,t,n,r,i,a,o,s,u){return e=new Bl(e,t,n,s,u),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Al(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Aa(a),e}function Vl(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:b,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function zl(e){if(!e)return Ei;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Di(n))return Oi(e,n,t)}return t}function ql(e,t,n,r,i,a,o,s,u){return(e=Ul(n,r,!0,e,0,a,0,s,u)).context=zl(null),n=e.current,(a=Ra(r=el(),i=tl(n))).callback=void 0!==t&&null!==t?t:null,Pa(n,a,i),e.current.lanes=i,yt(e,i,r),rl(e,r),e}function Wl(e,t,n,r){var i=t.current,a=el(),o=tl(i);return n=zl(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ra(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Pa(i,t,o))&&(nl(e,i,o,a),Oa(e,i,o)),o}function Ql(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Yl(e,t){Hl(e,t),(e=e.alternate)&&Hl(e,t)}xu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Mi.current)_s=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return _s=!1,function(e,t,n){switch(t.tag){case 3:Ns(t),da();break;case 5:ao(t);break;case 1:Di(t.type)&&Li(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?js(e,t,n):(Si(so,1&so.current),null!==(e=Ws(e,t,n))?e.sibling:null);Si(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Ts(e,t,n)}return Ws(e,t,n)}(e,t,n);_s=0!==(131072&e.flags)}else _s=!1,ia&&0!==(1048576&t.flags)&&Ji(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qs(e,t),e=t.pendingProps;var i=Ai(t,Ii.current);Ca(t,n),i=Co(null,t,r,e,i,n);var o=To();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(o=!0,Li(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Aa(t),i.updater=Va,t.stateNode=i,i._reactInternals=t,Qa(t,r,e,n),t=Ms(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),ws(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===A)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Es(null,t,r,e,n);break e;case 1:t=Is(null,t,r,e,n);break e;case 11:t=bs(null,t,r,e,n);break e;case 14:t=xs(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Es(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Is(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Ns(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Da(e,t),ja(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=As(e,t,r,n,i=cs(Error(a(423)),t));break e}if(r!==i){t=As(e,t,r,n,i=cs(Error(a(424)),t));break e}for(ra=li(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=$a(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Ws(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&la(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Ss(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&la(t),null;case 13:return js(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Xa(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,bs(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Si(ya,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Mi.current){t=Ws(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var l=u.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=Ra(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),xa(o.return,n,t),u.lanes|=n;break}l=l.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),xa(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ca(t,n),r=r(i=Ta(i)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),xs(e,t,r,i=ma(r.type,i),n);case 15:return Cs(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),qs(e,t),t.tag=1,Di(r)?(e=!0,Li(t)):e=!1,Ca(t,n),qa(t,r,i),Qa(t,r,i,n),Ms(null,t,r,!0,e,n);case 19:return zs(e,t,n);case 22:return Ts(e,t,n)}throw Error(a(156,t.tag))};var Kl="function"===typeof reportError?reportError:function(e){console.error(e)};function Gl(e){this._internalRoot=e}function Xl(e){this._internalRoot=e}function $l(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jl(){}function ec(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Ql(o);s.call(e)}}Wl(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Ql(o);a.call(e)}}var o=ql(t,r,e,0,null,!1,0,"",Jl);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),cl(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Ql(u);s.call(e)}}var u=Ul(e,0,!1,null,0,!1,0,"",Jl);return e._reactRootContainer=u,e[pi]=u.current,zr(8===e.nodeType?e.parentNode:e),cl((function(){Wl(t,u,n,r)})),u}(n,t,e,i,r);return Ql(o)}Xl.prototype.render=Gl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wl(e,t,null,null)},Xl.prototype.unmount=Gl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cl((function(){Wl(null,e,null,null)})),t[pi]=null}},Xl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&jt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(gt(t,1|n),rl(t,$e()),0===(6&Iu)&&(zu=$e()+500,zi()))}break;case 13:cl((function(){var t=Ma(e,1);if(null!==t){var n=el();nl(t,e,1,n)}})),Yl(e,1)}},bt=function(e){if(13===e.tag){var t=Ma(e,134217728);if(null!==t)nl(t,e,134217728,el());Yl(e,134217728)}},xt=function(e){if(13===e.tag){var t=tl(e),n=Ma(e,t);if(null!==n)nl(n,e,t,el());Yl(e,t)}},Ct=function(){return kt},Tt=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},be=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));Y(r),Z(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=ll,Me=cl;var tc={usingClientEntryPoint:!1,Events:[ki,_i,wi,Se,Ee,ll]},nc={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Qe(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{it=ic.inject(rc),at=ic}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$l(t))throw Error(a(200));return Vl(e,t,null,n)},t.createRoot=function(e,t){if(!$l(e))throw Error(a(299));var n=!1,r="",i=Kl;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Ul(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Gl(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Qe(t))?null:e.stateNode},t.flushSync=function(e){return cl(e)},t.hydrate=function(e,t,n){if(!Zl(t))throw Error(a(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$l(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Kl;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=ql(t,null,e,1,null!=n?n:null,i,0,o,s),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xl(t)},t.render=function(e,t,n){if(!Zl(t))throw Error(a(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zl(e))throw Error(a(40));return!!e._reactRootContainer&&(cl((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=ll,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zl(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return ec(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,a={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:c,props:a,_owner:s.current}}t.jsx=l,t.jsxs=l},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var _=k.prototype=new g;_.constructor=k,v(_,y.prototype),_.isPureReactComponent=!0;var w=Array.isArray,b=Object.prototype.hasOwnProperty,x={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)b.call(t,i)&&!C.hasOwnProperty(i)&&(a[i]=t[i]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];a.children=l}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===a[i]&&(a[i]=u[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:x.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function M(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===a?"."+I(u,0):a,w(o)?(i="",null!=e&&(i=e.replace(E,"$&/")+"/"),M(o,t,i,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(u=0,a=""===a?".":a+":",w(e))for(var l=0;l<e.length;l++){var c=a+I(s=e[l],l);u+=M(s,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=M(s=s.value,t,i,c=a+I(s,l++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function N(e,t,n){if(null==e)return e;var r=[],i=0;return M(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},R={transition:null},P={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:R,ReactCurrentOwner:x};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)b.call(t,l)&&!C.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==u?u[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){u=Array(l);for(var c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,u=e[s],l=s+1,c=e[l];if(0>a(u,n))l<i&&0>a(c,u)?(e[r]=c,e[l]=n,r=l):(e[r]=u,e[s]=n,r=s);else{if(!(l<i&&0>a(c,n)))break e;e[r]=c,e[l]=n,r=l}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var l=[],c=[],h=1,f=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(l,t)}t=r(c)}}function w(e){if(m=!1,_(e),!v)if(null!==r(l))v=!0,R(b);else{var t=r(c);null!==t&&P(w,t.startTime-e)}}function b(e,n){v=!1,m&&(m=!1,g(S),S=-1),p=!0;var a=d;try{for(_(n),f=r(l);null!==f&&(!(f.expirationTime>n)||e&&!M());){var o=f.callback;if("function"===typeof o){f.callback=null,d=f.priorityLevel;var s=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?f.callback=s:f===r(l)&&i(l),_(n)}else i(l);f=r(l)}if(null!==f)var u=!0;else{var h=r(c);null!==h&&P(w,h.startTime-n),u=!1}return u}finally{f=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,C=!1,T=null,S=-1,E=5,I=-1;function M(){return!(t.unstable_now()-I<E)}function N(){if(null!==T){var e=t.unstable_now();I=e;var n=!0;try{n=T(!0,e)}finally{n?x():(C=!1,T=null)}}else C=!1}if("function"===typeof k)x=function(){k(N)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,D=A.port2;A.port1.onmessage=N,x=function(){D.postMessage(null)}}else x=function(){y(N,0)};function R(e){T=e,C||(C=!0,x())}function P(e,n){S=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,R(b))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===r(l)&&e===r(c)&&(m?(g(S),S=-1):m=!0,P(w,a-o))):(e.sortIndex=s,n(l,e),v||p||(v=!0,R(b))),e},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".b7b50325.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="incommon:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var s,u;if(void 0!==a)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var h=l[c];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+a){s=h;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=r),e[r]=[i];var f=function(t,n){s.onerror=s.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/incommon/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),s=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,i[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],s=r[1],u=r[2],l=0;if(o.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(u)u(n)}for(t&&t(r);l<o.length;l++)a=o[l],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkincommon=self.webpackChunkincommon||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){var e=n(791),t=n.t(e,2),r=n(250);function i(e){if(Array.isArray(e))return e}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){return i(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||o(e,t)||s()}var l,c=n(164),h=n.t(c,2);function f(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function d(e){return function(e){if(Array.isArray(e))return a(e)}(e)||f(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function _(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t){if(t&&("object"===w(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function C(e){var t=_();return function(){var n,r=k(e);if(t){var i=k(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x(this,n)}}function T(e,t,n){return T=_()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&y(i,n.prototype),i},T.apply(null,arguments)}function S(e){var t="function"===typeof Map?new Map:void 0;return S=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return T(e,arguments,k(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),y(n,e)},S(e)}function E(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function I(){return I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},I.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(l||(l={}));var M,N="popstate";function A(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function D(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function R(e,t){return{usr:e.state,key:e.key,idx:t}}function P(e,t,n,r){return void 0===n&&(n=null),I({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?L(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function O(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function L(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function j(e,t,n,r){void 0===r&&(r={});var i=r,a=i.window,o=void 0===a?document.defaultView:a,s=i.v5Compat,u=void 0!==s&&s,c=o.history,h=l.Pop,f=null,d=p();function p(){return(c.state||{idx:null}).idx}function v(){h=l.Pop;var e=p(),t=null==e?null:e-d;d=e,f&&f({action:h,location:y.location,delta:t})}function m(e){var t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:O(e);return A(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==d&&(d=0,c.replaceState(I({},c.state,{idx:d}),""));var y={get action(){return h},get location(){return e(o,c)},listen:function(e){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(N,v),f=e,function(){o.removeEventListener(N,v),f=null}},createHref:function(e){return t(o,e)},createURL:m,encodeLocation:function(e){var t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){h=l.Push;var r=P(y.location,e,t);n&&n(r,e);var i=R(r,d=p()+1),a=y.createHref(r);try{c.pushState(i,"",a)}catch(Hv){if(Hv instanceof DOMException&&"DataCloneError"===Hv.name)throw Hv;o.location.assign(a)}u&&f&&f({action:h,location:y.location,delta:1})},replace:function(e,t){h=l.Replace;var r=P(y.location,e,t);n&&n(r,e);var i=R(r,d=p()),a=y.createHref(r);c.replaceState(i,"",a),u&&f&&f({action:h,location:y.location,delta:0})},go:function(e){return c.go(e)}};return y}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(M||(M={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function F(e,t,n){void 0===n&&(n="/");var r=Y(("string"===typeof t?L(t):t).pathname||"/",n);if(null==r)return null;var i=B(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=W(i[o],H(r));return a}function B(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(A(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var s=$([r,o.relativePath]),u=n.concat(o);e.children&&e.children.length>0&&(A(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),B(e.children,t,u,s)),(null!=e.path||e.index)&&t.push({path:s,score:q(s,e.index),routesMeta:u})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=E(U(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(s){a.e(s)}finally{a.f()}}else i(e,t)})),t}function U(e){var t=e.split("/");if(0===t.length)return[];var n,r=i(n=t)||f(n)||o(n)||s(),a=r[0],u=r.slice(1),l=a.endsWith("?"),c=a.replace(/\?$/,"");if(0===u.length)return l?[c,""]:[c];var h=U(u.join("/")),p=[];return p.push.apply(p,d(h.map((function(e){return""===e?c:[c,e].join("/")})))),l&&p.push.apply(p,d(h)),p.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var V=/^:\w+$/,z=function(e){return"*"===e};function q(e,t){var n=e.split("/"),r=n.length;return n.some(z)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!z(e)})).reduce((function(e,t){return e+(V.test(t)?3:""===t?1:10)}),r)}function W(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=Q({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);var h=s.route;a.push({params:r,pathname:$([i,c.pathname]),pathnameBase:Z($([i,c.pathnameBase])),route:h}),"/"!==c.pathnameBase&&(i=$([i,c.pathnameBase]))}return a}function Q(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);D("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,(function(e,t,n){return r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"}));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=u(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var s=o[0],l=s.replace(/(.)\/+$/,"$1"),c=o.slice(1),h=a.reduce((function(e,t,n){var r=t.paramName,i=t.isOptional;if("*"===r){var a=c[n]||"";l=s.slice(0,s.length-a.length).replace(/(.)\/+$/,"$1")}var o=c[n];return e[r]=i&&!o?void 0:function(e,t){try{return decodeURIComponent(e)}catch(Hv){return D(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+Hv+")."),e}}(o||"",r),e}),{});return{params:h,pathname:s,pathnameBase:l,pattern:e}}function H(e){try{return decodeURI(e)}catch(Hv){return D(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+Hv+")."),e}}function Y(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function K(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function G(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function X(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=L(e):(A(!(i=I({},e)).pathname||!i.pathname.includes("?"),K("?","pathname","search",i)),A(!i.pathname||!i.pathname.includes("#"),K("#","pathname","hash",i)),A(!i.search||!i.search.includes("#"),K("#","search","hash",i)));var a,o=""===e||""===i.pathname,s=o?"/":i.pathname;if(null==s)a=n;else if(r){var u=t[t.length-1].replace(/^\//,"").split("/");if(s.startsWith("..")){for(var l=s.split("/");".."===l[0];)l.shift(),u.pop();i.pathname=l.join("/")}a="/"+u.join("/")}else{var c=t.length-1;if(s.startsWith("..")){for(var h=s.split("/");".."===h[0];)h.shift(),c-=1;i.pathname=h.join("/")}a=c>=0?t[c]:"/"}var f=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?L(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:J(a),hash:ee(s)}}(i,a),d=s&&"/"!==s&&s.endsWith("/"),p=(o||"."===s)&&n.endsWith("/");return f.pathname.endsWith("/")||!d&&!p||(f.pathname+="/"),f}var $=function(e){return e.join("/").replace(/\/\/+/g,"/")},Z=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},J=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},ee=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},te=function(e){g(n,e);var t=C(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n)}(S(Error));function ne(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var re=["post","put","patch","delete"],ie=(new Set(re),["get"].concat(re));new Set(ie),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function ae(){return ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ae.apply(this,arguments)}var oe=e.createContext(null);var se=e.createContext(null);var ue=e.createContext(null);var le=e.createContext(null);var ce=e.createContext(null);var he=e.createContext({outlet:null,matches:[],isDataRoute:!1});var fe=e.createContext(null);function de(){return null!=e.useContext(ce)}function pe(){return de()||A(!1),e.useContext(ce).location}function ve(t){e.useContext(le).static||e.useLayoutEffect(t)}function me(){return e.useContext(he).isDataRoute?function(){var t=Ee(Te.UseNavigateStable).router,n=Me(Se.UseNavigateStable),r=e.useRef(!1);ve((function(){r.current=!0}));var i=e.useCallback((function(e,i){void 0===i&&(i={}),r.current&&("number"===typeof e?t.navigate(e):t.navigate(e,ae({fromRouteId:n},i)))}),[t,n]);return i}():function(){de()||A(!1);var t=e.useContext(oe),n=e.useContext(le),r=n.basename,i=n.navigator,a=e.useContext(he).matches,o=pe().pathname,s=JSON.stringify(G(a).map((function(e){return e.pathnameBase}))),u=e.useRef(!1);ve((function(){u.current=!0}));var l=e.useCallback((function(e,n){if(void 0===n&&(n={}),u.current)if("number"!==typeof e){var a=X(e,JSON.parse(s),o,"path"===n.relative);null==t&&"/"!==r&&(a.pathname="/"===a.pathname?r:$([r,a.pathname])),(n.replace?i.replace:i.push)(a,n.state,n)}else i.go(e)}),[r,i,s,o,t]);return l}()}function ye(){var t=e.useContext(he).matches,n=t[t.length-1];return n?n.params:{}}function ge(t,n){var r=(void 0===n?{}:n).relative,i=e.useContext(he).matches,a=pe().pathname,o=JSON.stringify(G(i).map((function(e){return e.pathnameBase})));return e.useMemo((function(){return X(t,JSON.parse(o),a,"path"===r)}),[t,o,a,r])}function ke(t,n,r){de()||A(!1);var i,a=e.useContext(le).navigator,o=e.useContext(he).matches,s=o[o.length-1],u=s?s.params:{},c=(s&&s.pathname,s?s.pathnameBase:"/"),h=(s&&s.route,pe());if(n){var f,d="string"===typeof n?L(n):n;"/"===c||(null==(f=d.pathname)?void 0:f.startsWith(c))||A(!1),i=d}else i=h;var p=i.pathname||"/",v=F(t,{pathname:"/"===c?p:p.slice(c.length)||"/"});var m=Ce(v&&v.map((function(e){return Object.assign({},e,{params:Object.assign({},u,e.params),pathname:$([c,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:$([c,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),o,r);return n&&m?e.createElement(ce.Provider,{value:{location:ae({pathname:"/",search:"",hash:"",state:null,key:"default"},i),navigationType:l.Pop}},m):m}function _e(){var t=function(){var t,n=e.useContext(fe),r=Ie(Se.UseRouteError),i=Me(Se.UseRouteError);if(n)return n;return null==(t=r.errors)?void 0:t[i]}(),n=ne(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),r?e.createElement("pre",{style:a},r):null,null)}var we=e.createElement(_e,null),be=function(t){g(r,t);var n=C(r);function r(e){var t;return p(this,r),(t=n.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},t}return m(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?e.createElement(he.Provider,{value:this.props.routeContext},e.createElement(fe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),r}(e.Component);function xe(t){var n=t.routeContext,r=t.match,i=t.children,a=e.useContext(oe);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),e.createElement(he.Provider,{value:n},i)}function Ce(t,n,r){var i;if(void 0===n&&(n=[]),void 0===r&&(r=null),null==t){var a;if(null==(a=r)||!a.errors)return null;t=r.matches}var o=t,s=null==(i=r)?void 0:i.errors;if(null!=s){var u=o.findIndex((function(e){return e.route.id&&(null==s?void 0:s[e.route.id])}));u>=0||A(!1),o=o.slice(0,Math.min(o.length,u+1))}return o.reduceRight((function(t,i,a){var u=i.route.id?null==s?void 0:s[i.route.id]:null,l=null;r&&(l=i.route.errorElement||we);var c=n.concat(o.slice(0,a+1)),h=function(){var n;return n=u?l:i.route.Component?e.createElement(i.route.Component,null):i.route.element?i.route.element:t,e.createElement(xe,{match:i,routeContext:{outlet:t,matches:c,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===a)?e.createElement(be,{location:r.location,revalidation:r.revalidation,component:l,error:u,children:h(),routeContext:{outlet:null,matches:c,isDataRoute:!0}}):h()}),null)}var Te=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Te||{}),Se=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Se||{});function Ee(t){var n=e.useContext(oe);return n||A(!1),n}function Ie(t){var n=e.useContext(se);return n||A(!1),n}function Me(t){var n=function(t){var n=e.useContext(he);return n||A(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||A(!1),r.route.id}t.startTransition;function Ne(e){A(!1)}function Ae(t){var n=t.basename,r=void 0===n?"/":n,i=t.children,a=void 0===i?null:i,o=t.location,s=t.navigationType,u=void 0===s?l.Pop:s,c=t.navigator,h=t.static,f=void 0!==h&&h;de()&&A(!1);var d=r.replace(/^\/*/,"/"),p=e.useMemo((function(){return{basename:d,navigator:c,static:f}}),[d,c,f]);"string"===typeof o&&(o=L(o));var v=o,m=v.pathname,y=void 0===m?"/":m,g=v.search,k=void 0===g?"":g,_=v.hash,w=void 0===_?"":_,b=v.state,x=void 0===b?null:b,C=v.key,T=void 0===C?"default":C,S=e.useMemo((function(){var e=Y(y,d);return null==e?null:{location:{pathname:e,search:k,hash:w,state:x,key:T},navigationType:u}}),[d,y,k,w,x,T,u]);return null==S?null:e.createElement(le.Provider,{value:p},e.createElement(ce.Provider,{children:a,value:S}))}function De(e){var t=e.children,n=e.location;return ke(Oe(t),n)}var Re=function(e){return e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error",e}(Re||{}),Pe=new Promise((function(){}));e.Component;function Oe(t,n){void 0===n&&(n=[]);var r=[];return e.Children.forEach(t,(function(t,i){if(e.isValidElement(t)){var a=[].concat(d(n),[i]);if(t.type!==e.Fragment){t.type!==Ne&&A(!1),t.props.index&&t.props.children&&A(!1);var o={id:t.props.id||a.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(o.children=Oe(t.props.children,a)),r.push(o)}else r.push.apply(r,Oe(t.props.children,a))}})),r}function Le(){return Le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Le.apply(this,arguments)}function je(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);var Fe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];new Map;var Be=t.startTransition;h.flushSync;function Ue(t){var n,r=t.basename,i=t.children,a=t.future,o=t.window,s=e.useRef();null==s.current&&(s.current=(void 0===(n={window:o,v5Compat:!0})&&(n={}),j((function(e,t){var n=L(e.location.hash.substr(1)),r=n.pathname,i=void 0===r?"/":r,a=n.search,o=void 0===a?"":a,s=n.hash,u=void 0===s?"":s;return i.startsWith("/")||i.startsWith(".")||(i="/"+i),P("",{pathname:i,search:o,hash:u},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){var n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){var i=e.location.href,a=i.indexOf("#");r=-1===a?i:i.slice(0,a)}return r+"#"+("string"===typeof t?t:O(t))}),(function(e,t){D("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),n)));var l=s.current,c=u(e.useState({action:l.action,location:l.location}),2),h=c[0],f=c[1],d=(a||{}).v7_startTransition,p=e.useCallback((function(e){d&&Be?Be((function(){return f(e)})):f(e)}),[f,d]);return e.useLayoutEffect((function(){return l.listen(p)}),[l,p]),e.createElement(Ae,{basename:r,children:i,location:h.location,navigationType:h.action,navigator:l})}var Ve="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,ze=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qe=e.forwardRef((function(t,n){var r,i=t.onClick,a=t.relative,o=t.reloadDocument,s=t.replace,u=t.state,l=t.target,c=t.to,h=t.preventScrollReset,f=t.unstable_viewTransition,d=je(t,Fe),p=e.useContext(le).basename,v=!1;if("string"===typeof c&&ze.test(c)&&(r=c,Ve))try{var m=new URL(window.location.href),y=c.startsWith("//")?new URL(m.protocol+c):new URL(c),g=Y(y.pathname,p);y.origin===m.origin&&null!=g?c=g+y.search+y.hash:v=!0}catch(w){}var k=function(t,n){var r=(void 0===n?{}:n).relative;de()||A(!1);var i=e.useContext(le),a=i.basename,o=i.navigator,s=ge(t,{relative:r}),u=s.hash,l=s.pathname,c=s.search,h=l;return"/"!==a&&(h="/"===l?a:$([a,l])),o.createHref({pathname:h,search:c,hash:u})}(c,{relative:a}),_=function(t,n){var r=void 0===n?{}:n,i=r.target,a=r.replace,o=r.state,s=r.preventScrollReset,u=r.relative,l=r.unstable_viewTransition,c=me(),h=pe(),f=ge(t,{relative:u});return e.useCallback((function(e){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(e,i)){e.preventDefault();var n=void 0!==a?a:O(h)===O(f);c(t,{replace:n,state:o,preventScrollReset:s,relative:u,unstable_viewTransition:l})}}),[h,c,f,a,o,i,t,s,u,l])}(c,{replace:s,state:u,target:l,preventScrollReset:h,relative:a,unstable_viewTransition:f});return e.createElement("a",Le({},d,{href:r||k,onClick:v||o?i:function(e){i&&i(e),e.defaultPrevented||_(e)},ref:n,target:l}))}));var We,Qe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(We||(We={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Qe||(Qe={}));function He(){He=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(E){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return S()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=_(o,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=u;var c={};function h(){}function f(){}function d(){}var p={};s(p,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(T([])));m&&m!==t&&n.call(m,i)&&(p=m);var y=d.prototype=h.prototype=Object.create(p);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(i,a,o,s){var u=l(e[i],e,a);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==w(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(h).then((function(e){c.value=e,o(c)}),(function(e){return r("throw",e,o,s)}))}s(u.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,c;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function T(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=d,s(y,"constructor",d),s(d,"constructor",f),f.displayName=s(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,o,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(k.prototype),s(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new k(u(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(y),s(y,o,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=T,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}function Ye(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(Hv){return void n(Hv)}s.done?t(u):Promise.resolve(u).then(r,i)}function Ke(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Ye(a,r,i,o,s,"next",e)}function s(e){Ye(a,r,i,o,s,"throw",e)}o(void 0)}))}}function Ge(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}function Xe(){return Xe="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=Ge(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Xe.apply(this,arguments)}function $e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ze=!1,Je=!1,et="${JSCORE_VERSION}",tt=function(e,t){if(!e)throw nt(t)},nt=function(e){return new Error("Firebase Database ("+et+") INTERNAL ASSERT FAILED: "+e)},rt=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},it={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=a>>2,h=(3&a)<<4|s>>4,f=(15&s)<<2|l>>6,d=63&l;u||(d=64,o||(f=64)),r.push(n[c],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(rt(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw Error();var l=a<<2|o>>4;if(r.push(l),64!==s){var c=o<<4&240|s>>2;if(r.push(c),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},at=function(e){var t=rt(e);return it.encodeByteArray(t,!0)},ot=function(e){return at(e).replace(/\./g,"")},st=function(e){try{return it.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function ut(e){return lt(void 0,e)}function lt(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=lt(e[n],t[n]));return e}var ct=function(){function e(){var t=this;p(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return m(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function ht(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function ft(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ht())}function dt(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function pt(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function vt(){return!0===Ze||!0===Je}function mt(){return"object"===typeof indexedDB}function yt(){return new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(Hv){t(Hv)}}))}var gt=function(e){g(n,e);var t=C(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(b(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(b(a),kt.prototype.create),a}return m(n)}(S(Error)),kt=function(){function e(t,n,r){p(this,e),this.service=t,this.serviceName=n,this.errors=r}return m(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?_t(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new gt(n,a,t);return o}}]),e}();function _t(e,t){return e.replace(wt,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var wt=/\{\$([^}]+)}/g;function bt(e){return JSON.parse(e)}function xt(e){return JSON.stringify(e)}var Ct=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=bt(st(a[0])||""),n=bt(st(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function Tt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function St(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Et(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function It(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Mt(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(Nt(s)&&Nt(u)){if(!Mt(s,u))return!1}else if(s!==u)return!1}for(var l=0,c=r;l<c.length;l++){var h=c[l];if(!n.includes(h))return!1}return!0}function Nt(e){return null!==e&&"object"===typeof e}function At(e){for(var t=[],n=function(){var e=u(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}var Dt=function(){function e(){p(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return m(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var s,u,l=this.chain_[0],c=this.chain_[1],h=this.chain_[2],f=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(s=f^c&(h^f),u=1518500249):(s=c^h^f,u=1859775393):p<60?(s=c&h|f&(c|h),u=2400959708):(s=c^h^f,u=3395469782);var v=(l<<5|l>>>27)+s+d+u+n[p]&4294967295;d=f,f=h,h=4294967295&(c<<30|c>>>2),c=l,l=v}this.chain_[0]=this.chain_[0]+l&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function Rt(e,t){return"".concat(e," failed: ").concat(t," argument ")}var Pt=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},Ot=144e5;function Lt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(Ot,r+i)}function jt(e){return e&&e._delegate?e._delegate:e}var Ft=function(){function e(t,n,r){p(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return m(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Bt="[DEFAULT]",Ut=function(){function e(t,n){p(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return m(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new ct;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Bt})}catch(l){}var t,n=E(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=u(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(l){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Ke(He().mark((function e(){var t;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(d(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),d(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=E(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=u(i.value,2),l=s[0],c=s[1],h=this.normalizeInstanceIdentifier(l);r===h&&c.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=E(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(s){i.e(s)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Bt?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt;return this.component?this.component.multipleInstances?e:Bt:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Vt,zt,qt=function(){function e(t){p(this,e),this.name=t,this.providers=new Map}return m(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Ut(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Wt=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(zt||(zt={}));var Qt={debug:zt.DEBUG,verbose:zt.VERBOSE,info:zt.INFO,warn:zt.WARN,error:zt.ERROR,silent:zt.SILENT},Ht=zt.INFO,Yt=($e(Vt={},zt.DEBUG,"log"),$e(Vt,zt.VERBOSE,"log"),$e(Vt,zt.INFO,"info"),$e(Vt,zt.WARN,"warn"),$e(Vt,zt.ERROR,"error"),Vt),Kt=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Yt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Gt=function(){function e(t){p(this,e),this.name=t,this._logLevel=Ht,this._logHandler=Kt,this._userLogHandler=null,Wt.push(this)}return m(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in zt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Qt[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,zt.DEBUG].concat(t)),this._logHandler.apply(this,[this,zt.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,zt.VERBOSE].concat(t)),this._logHandler.apply(this,[this,zt.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,zt.INFO].concat(t)),this._logHandler.apply(this,[this,zt.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,zt.WARN].concat(t)),this._logHandler.apply(this,[this,zt.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,zt.ERROR].concat(t)),this._logHandler.apply(this,[this,zt.ERROR].concat(t))}}]),e}();function Xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xt(Object(n),!0).forEach((function(t){$e(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Zt,Jt;var en=new WeakMap,tn=new WeakMap,nn=new WeakMap,rn=new WeakMap,an=new WeakMap;var on={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return tn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||nn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ln(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function sn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Jt||(Jt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(cn(this),n),ln(en.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ln(e.apply(cn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[cn(this),t].concat(r));return nn.set(a,t.sort?t.sort():[t]),ln(a)}}function un(e){return"function"===typeof e?sn(e):(e instanceof IDBTransaction&&function(e){if(!tn.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));tn.set(e,t)}}(e),t=e,(Zt||(Zt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,on):e);var t}function ln(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(ln(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&en.set(t,e)})).catch((function(){})),an.set(t,e),t}(e);if(rn.has(e))return rn.get(e);var t=un(e);return t!==e&&(rn.set(e,t),an.set(t,e)),t}var cn=function(e){return an.get(e)};var hn,fn,dn,pn=["get","getKey","getAll","getAllKeys","count"],vn=["put","add","delete","clear"],mn=new Map;function yn(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(mn.get(t))return mn.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=vn.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||pn.includes(n))){var a=function(){var e=Ke(He().mark((function e(t){var a,o,s,u,l,c,h=arguments;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),s=o.store,u=h.length,l=new Array(u>1?u-1:0),c=1;c<u;c++)l[c-1]=h[c];return r&&(s=s.index(l.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,l),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return mn.set(t,a),a}}}hn=function(e){return $t($t({},e),{},{get:function(t,n,r){return yn(t,n)||e.get(t,n,r)},has:function(t,n){return!!yn(t,n)||e.has(t,n)}})},on=hn(on);var gn=function(){function e(t){p(this,e),this.container=t}return m(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var kn="@firebase/app",_n="0.7.31",wn=new Gt("@firebase/app"),bn="[DEFAULT]",xn=($e(fn={},kn,"fire-core"),$e(fn,"@firebase/app-compat","fire-core-compat"),$e(fn,"@firebase/analytics","fire-analytics"),$e(fn,"@firebase/analytics-compat","fire-analytics-compat"),$e(fn,"@firebase/app-check","fire-app-check"),$e(fn,"@firebase/app-check-compat","fire-app-check-compat"),$e(fn,"@firebase/auth","fire-auth"),$e(fn,"@firebase/auth-compat","fire-auth-compat"),$e(fn,"@firebase/database","fire-rtdb"),$e(fn,"@firebase/database-compat","fire-rtdb-compat"),$e(fn,"@firebase/functions","fire-fn"),$e(fn,"@firebase/functions-compat","fire-fn-compat"),$e(fn,"@firebase/installations","fire-iid"),$e(fn,"@firebase/installations-compat","fire-iid-compat"),$e(fn,"@firebase/messaging","fire-fcm"),$e(fn,"@firebase/messaging-compat","fire-fcm-compat"),$e(fn,"@firebase/performance","fire-perf"),$e(fn,"@firebase/performance-compat","fire-perf-compat"),$e(fn,"@firebase/remote-config","fire-rc"),$e(fn,"@firebase/remote-config-compat","fire-rc-compat"),$e(fn,"@firebase/storage","fire-gcs"),$e(fn,"@firebase/storage-compat","fire-gcs-compat"),$e(fn,"@firebase/firestore","fire-fst"),$e(fn,"@firebase/firestore-compat","fire-fst-compat"),$e(fn,"fire-js","fire-js"),$e(fn,"firebase","fire-js-all"),fn),Cn=new Map,Tn=new Map;function Sn(e,t){try{e.container.addComponent(t)}catch(n){wn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function En(e){var t=e.name;if(Tn.has(t))return wn.debug("There were multiple attempts to register component ".concat(t,".")),!1;Tn.set(t,e);var n,r=E(Cn.values());try{for(r.s();!(n=r.n()).done;){Sn(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function In(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}var Mn=($e(dn={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),$e(dn,"bad-app-name","Illegal App name: '{$appName}"),$e(dn,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),$e(dn,"app-deleted","Firebase App named '{$appName}' already deleted"),$e(dn,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),$e(dn,"invalid-log-argument","First argument to `onLog` must be null or a function."),$e(dn,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),$e(dn,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),$e(dn,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),$e(dn,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),dn),Nn=new kt("app","Firebase",Mn),An=function(){function e(t,n,r){var i=this;p(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ft("app",(function(){return i}),"PUBLIC"))}return m(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Nn.create("app-deleted",{appName:this._name})}}]),e}(),Dn="9.9.3";function Rn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bn,t=Cn.get(e);if(!t)throw Nn.create("no-app",{appName:e});return t}function Pn(e,t,n){var r,i=null!==(r=xn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void wn.warn(s.join(" "))}En(new Ft("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}var On="firebase-heartbeat-store",Ln=null;function jn(){return Ln||(Ln=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=ln(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(ln(s.result),e.oldVersion,e.newVersion,ln(s.transaction))})),r&&s.addEventListener("blocked",(function(){return r()})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),u}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(On)}}).catch((function(e){throw Nn.create("idb-open",{originalErrorMessage:e.message})}))),Ln}function Fn(e){return Bn.apply(this,arguments)}function Bn(){return Bn=Ke(He().mark((function e(t){var n,r,i;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,jn();case 3:return r=e.sent,e.abrupt("return",r.transaction(On).objectStore(On).get(zn(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof gt?wn.warn(e.t0.message):(i=Nn.create("idb-get",{originalErrorMessage:null===(n=e.t0)||void 0===n?void 0:n.message}),wn.warn(i.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Bn.apply(this,arguments)}function Un(e,t){return Vn.apply(this,arguments)}function Vn(){return Vn=Ke(He().mark((function e(t,n){var r,i,a,o,s;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,jn();case 3:return i=e.sent,a=i.transaction(On,"readwrite"),o=a.objectStore(On),e.next=8,o.put(n,zn(t));case 8:return e.abrupt("return",a.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof gt?wn.warn(e.t0.message):(s=Nn.create("idb-set",{originalErrorMessage:null===(r=e.t0)||void 0===r?void 0:r.message}),wn.warn(s.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),Vn.apply(this,arguments)}function zn(e){return"".concat(e.name,"!").concat(e.options.appId)}var qn=function(){function e(t){var n=this;p(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Yn(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return m(e,[{key:"triggerHeartbeat",value:function(){var e=Ke(He().mark((function e(){var t,n,r;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Wn(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Ke(He().mark((function e(){var t,n,r,i,a;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Wn(),n=Qn(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=ot(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Wn(){return(new Date).toISOString().substring(0,10)}function Qn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=E(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Kn(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Kn(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var s=o();if("break"===s)break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Hn,Yn=function(){function e(t){p(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return m(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Ke(He().mark((function e(){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(mt()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",yt().then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Ke(He().mark((function e(){var t;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Fn(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Ke(He().mark((function e(t){var n,r;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Un(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Ke(He().mark((function e(t){var n,r;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Un(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(d(r.heartbeats),d(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Kn(e){return ot(JSON.stringify({version:2,heartbeats:e})).length}Hn="",En(new Ft("platform-logger",(function(e){return new gn(e)}),"PRIVATE")),En(new Ft("heartbeat",(function(e){return new qn(e)}),"PRIVATE")),Pn(kn,_n,Hn),Pn(kn,_n,"esm2017"),Pn("fire-js","");var Gn,Xn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},$n={},Zn=Zn||{},Jn=Xn||self;function er(){}function tr(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function nr(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var rr="closure_uid_"+(1e9*Math.random()>>>0),ir=0;function ar(e,t,n){return e.call.apply(e.bind,arguments)}function or(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function sr(e,t,n){return(sr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ar:or).apply(null,arguments)}function ur(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function lr(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function cr(){this.s=this.s,this.o=this.o}var hr={};cr.prototype.s=!1,cr.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,rr)&&e[rr]||(e[rr]=++ir)}(this);delete hr[e]}},cr.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var fr=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},dr=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function pr(e){return Array.prototype.concat.apply([],arguments)}function vr(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function mr(e){return/^[\s\xa0]*$/.test(e)}var yr,gr=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function kr(e,t){return-1!=e.indexOf(t)}function _r(e,t){return e<t?-1:e>t?1:0}e:{var wr=Jn.navigator;if(wr){var br=wr.userAgent;if(br){yr=br;break e}}yr=""}function xr(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Cr(e){var t={};for(var n in e)t[n]=e[n];return t}var Tr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Sr(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Tr.length;a++)n=Tr[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Er(e){return Er[" "](e),e}Er[" "]=er;var Ir,Mr=kr(yr,"Opera"),Nr=kr(yr,"Trident")||kr(yr,"MSIE"),Ar=kr(yr,"Edge"),Dr=Ar||Nr,Rr=kr(yr,"Gecko")&&!(kr(yr.toLowerCase(),"webkit")&&!kr(yr,"Edge"))&&!(kr(yr,"Trident")||kr(yr,"MSIE"))&&!kr(yr,"Edge"),Pr=kr(yr.toLowerCase(),"webkit")&&!kr(yr,"Edge");function Or(){var e=Jn.document;return e?e.documentMode:void 0}e:{var Lr="",jr=function(){var e=yr;return Rr?/rv:([^\);]+)(\)|;)/.exec(e):Ar?/Edge\/([\d\.]+)/.exec(e):Nr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Pr?/WebKit\/(\S+)/.exec(e):Mr?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(jr&&(Lr=jr?jr[1]:""),Nr){var Fr=Or();if(null!=Fr&&Fr>parseFloat(Lr)){Ir=String(Fr);break e}}Ir=Lr}var Br,Ur={};function Vr(){return function(e){var t=Ur;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=gr(String(Ir)).split("."),n=gr("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=_r(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||_r(0==a[2].length,0==o[2].length)||_r(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Jn.document&&Nr){var zr=Or();Br=zr||(parseInt(Ir,10)||void 0)}else Br=void 0;var qr=Br,Wr=function(){if(!Jn.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Jn.addEventListener("test",er,t),Jn.removeEventListener("test",er,t)}catch(n){}return e}();function Qr(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Hr(e,t){if(Qr.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Rr){e:{try{Er(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Yr[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Hr.Z.h.call(this)}}Qr.prototype.h=function(){this.defaultPrevented=!0},lr(Hr,Qr);var Yr={2:"touch",3:"pen",4:"mouse"};Hr.prototype.h=function(){Hr.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Kr="closure_listenable_"+(1e6*Math.random()|0),Gr=0;function Xr(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Gr,this.ca=this.fa=!1}function $r(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Zr(e){this.src=e,this.g={},this.h=0}function Jr(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=fr(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&($r(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ei(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}Zr.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=ei(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Xr(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var ti="closure_lm_"+(1e6*Math.random()|0),ni={};function ri(e,t,n,r,i){if(r&&r.once)return ai(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)ri(e,t[a],n,r,i);return null}return n=fi(n),e&&e[Kr]?e.N(t,n,nr(r)?!!r.capture:!!r,i):ii(e,t,n,!1,r,i)}function ii(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=nr(i)?!!i.capture:!!i,s=ci(e);if(s||(e[ti]=s=new Zr(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=li;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Wr||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ui(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ai(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)ai(e,t[a],n,r,i);return null}return n=fi(n),e&&e[Kr]?e.O(t,n,nr(r)?!!r.capture:!!r,i):ii(e,t,n,!0,r,i)}function oi(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)oi(e,t[a],n,r,i);else r=nr(r)?!!r.capture:!!r,n=fi(n),e&&e[Kr]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=ei(a=e.g[t],n,r,i))&&($r(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=ci(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ei(t,n,r,i)),(n=-1<e?t[e]:null)&&si(n))}function si(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Kr])Jr(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ui(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ci(t))?(Jr(n,e),0==n.h&&(n.src=null,t[ti]=null)):$r(e)}}}function ui(e){return e in ni?ni[e]:ni[e]="on"+e}function li(e,t){if(e.ca)e=!0;else{t=new Hr(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&si(e),e=n.call(r,t)}return e}function ci(e){return(e=e[ti])instanceof Zr?e:null}var hi="__closure_events_fn_"+(1e9*Math.random()>>>0);function fi(e){return"function"===typeof e?e:(e[hi]||(e[hi]=function(t){return e.handleEvent(t)}),e[hi])}function di(){cr.call(this),this.i=new Zr(this),this.P=this,this.I=null}function pi(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Qr(t,e);else if(t instanceof Qr)t.target=t.target||e;else{var i=t;Sr(t=new Qr(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=vi(o,r,!0,t)&&i}if(i=vi(o=t.g=e,r,!0,t)&&i,i=vi(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=vi(o=t.g=n[a],r,!1,t)&&i}function vi(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var s=o.listener,u=o.ia||o.src;o.fa&&Jr(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}lr(di,cr),di.prototype[Kr]=!0,di.prototype.removeEventListener=function(e,t,n,r){oi(this,e,t,n,r)},di.prototype.M=function(){if(di.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)$r(n[r]);delete t.g[e],t.h--}}this.I=null},di.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},di.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var mi=Jn.JSON.stringify;function yi(){var e=Ti,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var gi,ki=function(){function e(){p(this,e),this.h=this.g=null}return m(e,[{key:"add",value:function(e,t){var n=_i.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),_i=new(function(){function e(t,n){p(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return m(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new wi}),(function(e){return e.reset()})),wi=function(){function e(){p(this,e),this.next=this.g=this.h=null}return m(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function bi(e){Jn.setTimeout((function(){throw e}),0)}function xi(e,t){gi||function(){var e=Jn.Promise.resolve(void 0);gi=function(){e.then(Si)}}(),Ci||(gi(),Ci=!0),Ti.add(e,t)}var Ci=!1,Ti=new ki;function Si(){for(var e;e=yi();){try{e.h.call(e.g)}catch(n){bi(n)}var t=_i;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ci=!1}function Ei(e,t){di.call(this),this.h=e||1,this.g=t||Jn,this.j=sr(this.kb,this),this.l=Date.now()}function Ii(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Mi(e,t,n){if("function"===typeof e)n&&(e=sr(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=sr(e.handleEvent,e)}return 2147483647<Number(t)?-1:Jn.setTimeout(e,t||0)}function Ni(e){e.g=Mi((function(){e.g=null,e.i&&(e.i=!1,Ni(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}lr(Ei,di),(Gn=Ei.prototype).da=!1,Gn.S=null,Gn.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),pi(this,"tick"),this.da&&(Ii(this),this.start()))}},Gn.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Gn.M=function(){Ei.Z.M.call(this),Ii(this),delete this.g};var Ai=function(e){g(n,e);var t=C(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return m(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Ni(this)}},{key:"M",value:function(){Xe(k(n.prototype),"M",this).call(this),this.g&&(Jn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(cr);function Di(e){cr.call(this),this.h=e,this.g={}}lr(Di,cr);var Ri=[];function Pi(e,t,n,r){Array.isArray(n)||(n&&(Ri[0]=n.toString()),n=Ri);for(var i=0;i<n.length;i++){var a=ri(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Oi(e){xr(e.g,(function(e,t){this.g.hasOwnProperty(t)&&si(e)}),e),e.g={}}function Li(){this.g=!0}function ji(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return mi(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}Di.prototype.M=function(){Di.Z.M.call(this),Oi(this)},Di.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Li.prototype.Aa=function(){this.g=!1},Li.prototype.info=function(){};var Fi={},Bi=null;function Ui(){return Bi=Bi||new di}function Vi(e){Qr.call(this,Fi.Ma,e)}function zi(e){var t=Ui();pi(t,new Vi(t,e))}function qi(e,t){Qr.call(this,Fi.STAT_EVENT,e),this.stat=t}function Wi(e){var t=Ui();pi(t,new qi(t,e))}function Qi(e,t){Qr.call(this,Fi.Na,e),this.size=t}function Hi(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Jn.setTimeout((function(){e()}),t)}Fi.Ma="serverreachability",lr(Vi,Qr),Fi.STAT_EVENT="statevent",lr(qi,Qr),Fi.Na="timingevent",lr(Qi,Qr);var Yi={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Ki={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Gi(){}function Xi(e){return e.h||(e.h=e.i())}function $i(){}Gi.prototype.h=null;var Zi,Ji={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ea(){Qr.call(this,"d")}function ta(){Qr.call(this,"c")}function na(){}function ra(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Di(this),this.P=aa,e=Dr?125:void 0,this.W=new Ei(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ia}function ia(){this.i=null,this.g="",this.h=!1}lr(ea,Qr),lr(ta,Qr),lr(na,Gi),na.prototype.g=function(){return new XMLHttpRequest},na.prototype.i=function(){return{}},Zi=new na;var aa=45e3,oa={},sa={};function ua(e,t,n){e.K=1,e.v=Aa(Ta(t)),e.s=n,e.U=!0,la(e,null)}function la(e,t){e.F=Date.now(),da(e),e.A=Ta(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Wa(n.h,"t",r),e.C=0,n=e.l.H,e.h=new ia,e.g=Yo(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Ai(sr(e.Ia,e,e.g),e.O)),Pi(e.V,e.g,"readystatechange",e.gb),t=e.H?Cr(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),zi(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var l=s[u].split("=");if(1<l.length){var c=l[0];l=l[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+l+"&":o+(c+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function ca(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function ha(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=fa(e,n))==sa){4==t&&(e.o=4,Wi(14),i=!1),ji(e.j,e.m,null,"[Incomplete Response]");break}if(r==oa){e.o=4,Wi(15),ji(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}ji(e.j,e.m,r,null),ga(e,r)}ca(e)&&r!=sa&&r!=oa&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Wi(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Bo(t),t.L=!0,Wi(11))):(ji(e.j,e.m,n,"[Invalid Chunked Response]"),ya(e),ma(e))}function fa(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?sa:(n=Number(t.substring(n,r)),isNaN(n)?oa:(r+=1)+n>t.length?sa:(t=t.substr(r,n),e.C=r+n,t))}function da(e){e.Y=Date.now()+e.P,pa(e,e.P)}function pa(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Hi(sr(e.eb,e),t)}function va(e){e.B&&(Jn.clearTimeout(e.B),e.B=null)}function ma(e){0==e.l.G||e.I||zo(e.l,e)}function ya(e){va(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Ii(e.W),Oi(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function ga(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Za(n.i,e)))if(n.I=e.N,!e.J&&Za(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Vo(n),No(n)}Fo(n),Wi(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Hi(sr(n.ab,n),6e3));if(1>=$a(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Wo(n,11)}else if((e.J||n.g==e)&&Vo(n),!mr(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var s=a[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var l=e.g;if(l){var c=l.g?l.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(c){var h=r.i;!h.g&&(kr(c,"spdy")||kr(c,"quic")||kr(c,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(Ja(h,h.h),h.h=null))}if(r.D){var f=l.g?l.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,Na(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Ho(r,r.H?r.la:null,r.W),d.J){eo(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(va(p),da(p)),r.g=d}else jo(r);0<n.l.length&&Ro(n)}else"stop"!=a[0]&&"close"!=a[0]||Wo(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Wo(n,7):Mo(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}zi(4)}catch(a){}}function ka(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(tr(e)||"string"===typeof e)dr(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(tr(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(tr(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function _a(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof _a)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function wa(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];ba(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)ba(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function ba(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Gn=ra.prototype).setTimeout=function(e){this.P=e},Gn.gb=function(e){e=e.target;var t=this.L;t&&3==Co(e)?t.l():this.Ia(e)},Gn.Ia=function(e){try{if(e==this.g)e:{var t=Co(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Dr||this.g&&(this.h.h||this.g.ga()||To(this.g)))){this.I||4!=t||7==n||zi(8==n||0>=r?3:2),va(this);var i=this.g.ba();this.N=i;t:if(ca(this)){var a=To(this.g);e="";var o=a.length,s=4==Co(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){ya(this),ma(this);var u="";break t}this.h.i=new Jn.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:s&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!mr(l)){var h=l;break t}}h=null}if(!(i=h)){this.i=!1,this.o=3,Wi(12),ya(this),ma(this);break e}ji(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ga(this,i)}this.U?(ha(this,t,u),Dr&&this.i&&3==t&&(Pi(this.V,this.W,"tick",this.fb),this.W.start())):(ji(this.j,this.m,u,null),ga(this,u)),4==t&&ya(this),this.i&&!this.I&&(4==t?zo(this.l,this):(this.i=!1,da(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,Wi(12)):(this.o=0,Wi(13)),ya(this),ma(this)}}}catch(t){}},Gn.fb=function(){if(this.g){var e=Co(this.g),t=this.g.ga();this.C<t.length&&(va(this),ha(this,e,t),this.i&&4!=e&&da(this))}},Gn.cancel=function(){this.I=!0,ya(this)},Gn.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(zi(3),Wi(17)),ya(this),this.o=2,ma(this)):pa(this,this.Y-e)},(Gn=_a.prototype).R=function(){wa(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Gn.T=function(){return wa(this),this.g.concat()},Gn.get=function(e,t){return ba(this.h,e)?this.h[e]:t},Gn.set=function(e,t){ba(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Gn.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var xa=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ca(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Ca){this.g=void 0!==t?t:e.g,Sa(this,e.j),this.s=e.s,Ea(this,e.i),Ia(this,e.m),this.l=e.l,t=e.h;var n=new Ua;n.i=t.i,t.g&&(n.g=new _a(t.g),n.h=t.h),Ma(this,n),this.o=e.o}else e&&(n=String(e).match(xa))?(this.g=!!t,Sa(this,n[1]||"",!0),this.s=Da(n[2]||""),Ea(this,n[3]||"",!0),Ia(this,n[4]),this.l=Da(n[5]||"",!0),Ma(this,n[6]||"",!0),this.o=Da(n[7]||"")):(this.g=!!t,this.h=new Ua(null,this.g))}function Ta(e){return new Ca(e)}function Sa(e,t,n){e.j=n?Da(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ea(e,t,n){e.i=n?Da(t,!0):t}function Ia(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Ma(e,t,n){t instanceof Ua?(e.h=t,function(e,t){t&&!e.j&&(Va(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(za(this,t),Wa(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Ra(t,Fa)),e.h=new Ua(t,e.g))}function Na(e,t,n){e.h.set(t,n)}function Aa(e){return Na(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Da(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ra(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Pa),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Pa(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ca.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ra(t,Oa,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ra(t,Oa,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ra(n,"/"==n.charAt(0)?ja:La,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ra(n,Ba)),e.join("")};var Oa=/[#\/\?@]/g,La=/[#\?:]/g,ja=/[#\?]/g,Fa=/[#\?@]/g,Ba=/#/g;function Ua(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Va(e){e.g||(e.g=new _a,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function za(e,t){Va(e),t=Qa(e,t),ba(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,ba((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&wa(e)))}function qa(e,t){return Va(e),t=Qa(e,t),ba(e.g.h,t)}function Wa(e,t,n){za(e,t),0<n.length&&(e.i=null,e.g.set(Qa(e,t),vr(n)),e.h+=n.length)}function Qa(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Gn=Ua.prototype).add=function(e,t){Va(this),this.i=null,e=Qa(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Gn.forEach=function(e,t){Va(this),this.g.forEach((function(n,r){dr(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Gn.T=function(){Va(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Gn.R=function(e){Va(this);var t=[];if("string"===typeof e)qa(this,e)&&(t=pr(t,this.g.get(Qa(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=pr(t,e[n])}return t},Gn.set=function(e,t){return Va(this),this.i=null,qa(this,e=Qa(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Gn.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Gn.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Ha=m((function e(t,n){p(this,e),this.h=t,this.g=n}));function Ya(e){this.l=e||Ga,Jn.PerformanceNavigationTiming?e=0<(e=Jn.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Jn.g&&Jn.g.Ea&&Jn.g.Ea()&&Jn.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ka,Ga=10;function Xa(e){return!!e.h||!!e.g&&e.g.size>=e.j}function $a(e){return e.h?1:e.g?e.g.size:0}function Za(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ja(e,t){e.g?e.g.add(t):e.h=t}function eo(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function to(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=E(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return vr(e.i)}function no(){}function ro(){this.g=new no}function io(e,t,n){var r=n||"";try{ka(e,(function(e,n){var i=e;nr(e)&&(i=mi(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function ao(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function oo(e){this.l=e.$b||null,this.j=e.ib||!1}function so(e,t){di.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=uo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ya.prototype.cancel=function(){if(this.i=to(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=E(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},no.prototype.stringify=function(e){return Jn.JSON.stringify(e,void 0)},no.prototype.parse=function(e){return Jn.JSON.parse(e,void 0)},lr(oo,Gi),oo.prototype.g=function(){return new so(this.l,this.j)},oo.prototype.i=(Ka={},function(){return Ka}),lr(so,di);var uo=0;function lo(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function co(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ho(e)}function ho(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Gn=so.prototype).open=function(e,t){if(this.readyState!=uo)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ho(this)},Gn.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Jn).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Gn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,co(this)),this.readyState=uo},Gn.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ho(this)),this.g&&(this.readyState=3,ho(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof Jn.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;lo(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Gn.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?co(this):ho(this),3==this.readyState&&lo(this)}},Gn.Ua=function(e){this.g&&(this.response=this.responseText=e,co(this))},Gn.Ta=function(e){this.g&&(this.response=e,co(this))},Gn.ha=function(){this.g&&co(this)},Gn.setRequestHeader=function(e,t){this.v.append(e,t)},Gn.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Gn.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(so.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var fo=Jn.JSON.parse;function po(e){di.call(this),this.headers=new _a,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=vo,this.K=this.L=!1}lr(po,di);var vo="",mo=/^https?$/i,yo=["POST","PUT"];function go(e){return"content-type"==e.toLowerCase()}function ko(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,_o(e),bo(e)}function _o(e){e.D||(e.D=!0,pi(e,"complete"),pi(e,"error"))}function wo(e){if(e.h&&"undefined"!=typeof Zn&&(!e.C[1]||4!=Co(e)||2!=e.ba()))if(e.v&&4==Co(e))Mi(e.Fa,0,e);else if(pi(e,"readystatechange"),4==Co(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(xa)[1]||null;if(!a&&Jn.self&&Jn.self.location){var o=Jn.self.location.protocol;a=o.substr(0,o.length-1)}i=!mo.test(a?a.toLowerCase():"")}t=i}if(t)pi(e,"complete"),pi(e,"success");else{e.m=6;try{var s=2<Co(e)?e.g.statusText:""}catch(u){s=""}e.j=s+" ["+e.ba()+"]",_o(e)}}finally{bo(e)}}}function bo(e,t){if(e.g){xo(e);var n=e.g,r=e.C[0]?er:null;e.g=null,e.C=null,t||pi(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function xo(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Jn.clearTimeout(e.A),e.A=null)}function Co(e){return e.g?e.g.readyState:0}function To(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case vo:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function So(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return xr(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Na(e,t,n))}function Eo(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Io(e){this.za=0,this.l=[],this.h=new Li,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Eo("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Eo("baseRetryDelayMs",5e3,e),this.$a=Eo("retryDelaySeedMs",1e4,e),this.Ya=Eo("forwardChannelMaxRetries",2,e),this.ra=Eo("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Ya(e&&e.concurrentRequestLimit),this.Ca=new ro,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Mo(e){if(Ao(e),3==e.G){var t=e.V++,n=Ta(e.F);Na(n,"SID",e.J),Na(n,"RID",t),Na(n,"TYPE","terminate"),Oo(e,n),(t=new ra(e,e.h,t,void 0)).K=2,t.v=Aa(Ta(n)),n=!1,Jn.navigator&&Jn.navigator.sendBeacon&&(n=Jn.navigator.sendBeacon(t.v.toString(),"")),!n&&Jn.Image&&((new Image).src=t.v,n=!0),n||(t.g=Yo(t.l,null),t.g.ea(t.v)),t.F=Date.now(),da(t)}Qo(e)}function No(e){e.g&&(Bo(e),e.g.cancel(),e.g=null)}function Ao(e){No(e),e.u&&(Jn.clearTimeout(e.u),e.u=null),Vo(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Jn.clearTimeout(e.m),e.m=null)}function Do(e,t){e.l.push(new Ha(e.Za++,t)),3==e.G&&Ro(e)}function Ro(e){Xa(e.i)||e.m||(e.m=!0,xi(e.Ha,e),e.C=0)}function Po(e,t){var n;n=t?t.m:e.V++;var r=Ta(e.F);Na(r,"SID",e.J),Na(r,"RID",n),Na(r,"AID",e.U),Oo(e,r),e.o&&e.s&&So(r,e.o,e.s),n=new ra(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Lo(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Ja(e.i,n),ua(n,r,t)}function Oo(e,t){e.j&&ka({},(function(e,n){Na(t,n,e)}))}function Lo(e,t,n){n=Math.min(e.l.length,n);var r=e.j?sr(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var l=i[u].h,c=i[u].g;if(0>(l-=a))a=Math.max(0,i[u].h-100),s=!1;else try{io(c,o,"req"+l+"_")}catch(ws){r&&r(c)}}if(s){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function jo(e){e.g||e.u||(e.Y=1,xi(e.Ga,e),e.A=0)}function Fo(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Hi(sr(e.Ga,e),qo(e,e.A)),e.A++,!0)}function Bo(e){null!=e.B&&(Jn.clearTimeout(e.B),e.B=null)}function Uo(e){e.g=new ra(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Ta(e.oa);Na(t,"RID","rpc"),Na(t,"SID",e.J),Na(t,"CI",e.N?"0":"1"),Na(t,"AID",e.U),Oo(e,t),Na(t,"TYPE","xmlhttp"),e.o&&e.s&&So(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Aa(Ta(t)),n.s=null,n.U=!0,la(n,e)}function Vo(e){null!=e.v&&(Jn.clearTimeout(e.v),e.v=null)}function zo(e,t){var n=null;if(e.g==t){Vo(e),Bo(e),e.g=null;var r=2}else{if(!Za(e.i,t))return;n=t.D,eo(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;pi(r=Ui(),new Qi(r,n,t,i)),Ro(e)}else jo(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!($a(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=Hi(sr(e.Ha,e,t),qo(e,e.C)),e.C++,!0))}(e,t)||2==r&&Fo(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Wo(e,5);break;case 4:Wo(e,10);break;case 3:Wo(e,6);break;default:Wo(e,2)}}function qo(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Wo(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=sr(e.jb,e);n||(n=new Ca("//www.google.com/images/cleardot.gif"),Jn.location&&"http"==Jn.location.protocol||Sa(n,"https"),Aa(n)),function(e,t){var n=new Li;if(Jn.Image){var r=new Image;r.onload=ur(ao,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ur(ao,n,r,"TestLoadImage: error",!1,t),r.onabort=ur(ao,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ur(ao,n,r,"TestLoadImage: timeout",!1,t),Jn.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Wi(2);e.G=0,e.j&&e.j.va(t),Qo(e),Ao(e)}function Qo(e){e.G=0,e.I=-1,e.j&&(0==to(e.i).length&&0==e.l.length||(e.i.i.length=0,vr(e.l),e.l.length=0),e.j.ua())}function Ho(e,t,n){var r=function(e){return e instanceof Ca?Ta(e):new Ca(e,void 0)}(n);if(""!=r.i)t&&Ea(r,t+"."+r.i),Ia(r,r.m);else{var i=Jn.location;r=function(e,t,n,r){var i=new Ca(null,void 0);return e&&Sa(i,e),t&&Ea(i,t),n&&Ia(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&xr(e.aa,(function(e,t){Na(r,t,e)})),t=e.D,n=e.sa,t&&n&&Na(r,t,n),Na(r,"VER",e.ma),Oo(e,r),r}function Yo(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new po(new oo({ib:!0})):new po(e.qa)).L=e.H,t}function Ko(){}function Go(){if(Nr&&!(10<=Number(qr)))throw Error("Environmental error: no available transport.")}function Xo(e,t){di.call(this),this.g=new Io(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!mr(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!mr(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Jo(this)}function $o(e){ea.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Zo(){ta.call(this),this.status=1}function Jo(e){this.g=e}(Gn=po.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Zi.g(),this.C=this.u?Xi(this.u):Xi(Zi),this.g.onreadystatechange=sr(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void ko(this,a)}e=n||"";var i=new _a(this.headers);r&&ka(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=go,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=Jn.FormData&&e instanceof Jn.FormData,!(0<=fr(yo,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{xo(this),0<this.B&&((this.K=function(e){return Nr&&Vr()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=sr(this.pa,this)):this.A=Mi(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){ko(this,a)}},Gn.pa=function(){"undefined"!=typeof Zn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,pi(this,"timeout"),this.abort(8))},Gn.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,pi(this,"complete"),pi(this,"abort"),bo(this))},Gn.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),bo(this,!0)),po.Z.M.call(this)},Gn.Fa=function(){this.s||(this.F||this.v||this.l?wo(this):this.cb())},Gn.cb=function(){wo(this)},Gn.ba=function(){try{return 2<Co(this)?this.g.status:-1}catch(Ka){return-1}},Gn.ga=function(){try{return this.g?this.g.responseText:""}catch(Ka){return""}},Gn.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),fo(t)}},Gn.Da=function(){return this.m},Gn.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Gn=Io.prototype).ma=8,Gn.G=1,Gn.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Gn.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new ra(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Sr(n=Cr(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Lo(this,t,r),Na(i=Ta(this.F),"RID",e),Na(i,"CVER",22),this.D&&Na(i,"X-HTTP-Session-Id",this.D),Oo(this,i),this.o&&n&&So(i,this.o,n),Ja(this.i,t),this.Ra&&Na(i,"TYPE","init"),this.ja?(Na(i,"$req",r),Na(i,"SID","null"),t.$=!0,ua(t,i,null)):ua(t,i,r),this.G=2}}else 3==this.G&&(e?Po(this,e):0==this.l.length||Xa(this.i)||Po(this))},Gn.Ga=function(){if(this.u=null,Uo(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Hi(sr(this.bb,this),e)}},Gn.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Wi(10),No(this),Uo(this))},Gn.ab=function(){null!=this.v&&(this.v=null,No(this),Fo(this),Wi(19))},Gn.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Wi(2)):(this.h.info("Failed to ping google.com"),Wi(1))},(Gn=Ko.prototype).xa=function(){},Gn.wa=function(){},Gn.va=function(){},Gn.ua=function(){},Gn.Oa=function(){},Go.prototype.g=function(e,t){return new Xo(e,t)},lr(Xo,di),Xo.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),xi(sr(e.hb,e,t))),Wi(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Ho(e,null,e.W),Ro(e)},Xo.prototype.close=function(){Mo(this.g)},Xo.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,Do(this.g,t)}else this.v?((t={}).__data__=mi(e),Do(this.g,t)):Do(this.g,e)},Xo.prototype.M=function(){this.g.j=null,delete this.j,Mo(this.g),delete this.g,Xo.Z.M.call(this)},lr($o,ea),lr(Zo,ta),lr(Jo,Ko),Jo.prototype.xa=function(){pi(this.g,"a")},Jo.prototype.wa=function(e){pi(this.g,new $o(e))},Jo.prototype.va=function(e){pi(this.g,new Zo(e))},Jo.prototype.ua=function(){pi(this.g,"b")},Go.prototype.createWebChannel=Go.prototype.g,Xo.prototype.send=Xo.prototype.u,Xo.prototype.open=Xo.prototype.m,Xo.prototype.close=Xo.prototype.close,Yi.NO_ERROR=0,Yi.TIMEOUT=8,Yi.HTTP_ERROR=6,Ki.COMPLETE="complete",$i.EventType=Ji,Ji.OPEN="a",Ji.CLOSE="b",Ji.ERROR="c",Ji.MESSAGE="d",di.prototype.listen=di.prototype.N,po.prototype.listenOnce=po.prototype.O,po.prototype.getLastError=po.prototype.La,po.prototype.getLastErrorCode=po.prototype.Da,po.prototype.getStatus=po.prototype.ba,po.prototype.getResponseJson=po.prototype.Qa,po.prototype.getResponseText=po.prototype.ga,po.prototype.send=po.prototype.ea;var es=$n.createWebChannelTransport=function(){return new Go},ts=$n.getStatEventTarget=function(){return Ui()},ns=$n.ErrorCode=Yi,rs=$n.EventType=Ki,is=$n.Event=Fi,as=$n.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},os=$n.FetchXmlHttpFactory=oo,ss=$n.WebChannel=$i,us=$n.XhrIo=po,ls="@firebase/firestore",cs=function(){function e(t){p(this,e),this.uid=t}return m(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();cs.UNAUTHENTICATED=new cs(null),cs.GOOGLE_CREDENTIALS=new cs("google-credentials-uid"),cs.FIRST_PARTY=new cs("first-party-uid"),cs.MOCK_USER=new cs("mock-user");var hs="9.9.2",fs=new Gt("@firebase/firestore");function ds(){return fs.logLevel}function ps(e){if(fs.logLevel<=zt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ys);fs.debug.apply(fs,["Firestore (".concat(hs,"): ").concat(e)].concat(d(i)))}}function vs(e){if(fs.logLevel<=zt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ys);fs.error.apply(fs,["Firestore (".concat(hs,"): ").concat(e)].concat(d(i)))}}function ms(e){if(fs.logLevel<=zt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ys);fs.warn.apply(fs,["Firestore (".concat(hs,"): ").concat(e)].concat(d(i)))}}function ys(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function gs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(hs,") INTERNAL ASSERTION FAILED: ")+e;throw vs(t),new Error(t)}function ks(e,t){e||gs()}function _s(e,t){return e}var ws={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},bs=function(e){g(n,e);var t=C(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return m(n)}(gt),xs=m((function e(){var t=this;p(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Cs=m((function e(t,n){p(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Ts=function(){function e(){p(this,e)}return m(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(cs.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Ss=function(){function e(t){p(this,e),this.t=t,this.currentUser=cs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return m(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new xs;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new xs,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Ke(He().mark((function e(){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){ps("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(ps("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new xs)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(ps("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(ks("string"==typeof n.accessToken),new Cs(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return ks(null===e||"string"==typeof e),new cs(e)}}]),e}(),Es=m((function e(t,n,r){p(this,e),this.type="FirstParty",this.user=cs.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),Is=function(){function e(t,n,r){p(this,e),this.h=t,this.l=n,this.m=r}return m(e,[{key:"getToken",value:function(){return Promise.resolve(new Es(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(cs.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Ms=m((function e(t){p(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Ns=function(){function e(t){p(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return m(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&ps("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,ps("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){ps("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):ps("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(ks("string"==typeof t.token),e.p=t.token,new Ms(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function As(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Ds=function(){function e(){p(this,e)}return m(e,null,[{key:"I",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=As(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Rs(e,t){return e<t?-1:e>t?1:0}function Ps(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}var Os=function(){function e(t,n){if(p(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new bs(ws.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new bs(ws.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new bs(ws.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new bs(ws.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return m(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Rs(this.nanoseconds,e.nanoseconds):Rs(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Ls=function(){function e(t){p(this,e),this.timestamp=t}return m(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Os(0,0))}},{key:"max",value:function(){return new e(new Os(253402300799,999999999))}}]),e}(),js=function(){function e(t,n,r){p(this,e),void 0===n?n=0:n>t.length&&gs(),void 0===r?r=t.length-n:r>t.length-n&&gs(),this.segments=t,this.offset=n,this.len=r}return m(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Fs=function(e){g(n,e);var t=C(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new bs(ws.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,d(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(js),Bs=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Us=function(e){g(n,e);var t=C(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Bs.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new bs(ws.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new bs(ws.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new bs(ws.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new bs(ws.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(js),Vs=function(){function e(t){p(this,e),this.path=t}return m(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Fs.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Fs.fromString(t))}},{key:"fromName",value:function(t){return new e(Fs.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Fs.emptyPath())}},{key:"comparator",value:function(e,t){return Fs.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Fs(t.slice()))}}]),e}(),zs=m((function e(t,n,r,i){p(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));zs.UNKNOWN_ID=-1;function qs(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Ls.fromTimestamp(1e9===r?new Os(n+1,0):new Os(n,r));return new Qs(i,Vs.empty(),t)}function Ws(e){return new Qs(e.readTime,e.key,-1)}var Qs=function(){function e(t,n,r){p(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return m(e,null,[{key:"min",value:function(){return new e(Ls.min(),Vs.empty(),-1)}},{key:"max",value:function(){return new e(Ls.max(),Vs.empty(),-1)}}]),e}();function Hs(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Vs.comparator(e.documentKey,t.documentKey))?n:Rs(e.largestBatchId,t.largestBatchId)}var Ys="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ks=function(){function e(){p(this,e),this.onCommittedListeners=[]}return m(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Gs(e){return Xs.apply(this,arguments)}function Xs(){return Xs=Ke(He().mark((function e(t){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===ws.FAILED_PRECONDITION&&t.message===Ys){e.next=2;break}throw t;case 2:ps("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Xs.apply(this,arguments)}var $s=function(){function e(t){var n=this;p(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return m(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&gs(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=E(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,s=function(s){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},u=0;u<i;u++)s(u)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}();function Zs(e){return"IndexedDbTransactionError"===e.name}var Js=function(){function e(t,n){var r=this;p(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.it(e)},this.rt=function(e){return n.writeSequenceNumber(e)})}return m(e,[{key:"it",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.rt&&this.rt(e),e}}]),e}();function eu(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function tu(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function nu(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}Js.ot=-1;var ru=function(){function e(t,n){p(this,e),this.comparator=t,this.root=n||au.EMPTY}return m(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,au.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,au.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new iu(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new iu(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new iu(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new iu(this.root,e,this.comparator,!0)}}]),e}(),iu=function(){function e(t,n,r,i){p(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return m(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),au=function(){function e(t,n,r,i,a){p(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return m(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw gs();if(this.right.isRed())throw gs();var e=this.left.check();if(e!==this.right.check())throw gs();return e+(this.isRed()?0:1)}}]),e}();au.EMPTY=null,au.RED=!0,au.BLACK=!1,au.EMPTY=new(function(){function e(){p(this,e),this.size=0}return m(e,[{key:"key",get:function(){throw gs()}},{key:"value",get:function(){throw gs()}},{key:"color",get:function(){throw gs()}},{key:"left",get:function(){throw gs()}},{key:"right",get:function(){throw gs()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new au(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var ou=function(){function e(t){p(this,e),this.comparator=t,this.data=new ru(this.comparator)}return m(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new su(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new su(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),su=function(){function e(t){p(this,e),this.iter=t}return m(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();var uu=function(){function e(t){p(this,e),this.fields=t,t.sort(Us.comparator)}return m(e,[{key:"unionWith",value:function(t){var n,r=new ou(Us.comparator),i=E(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(l){i.e(l)}finally{i.f()}var o,s=E(t);try{for(s.s();!(o=s.n()).done;){var u=o.value;r=r.add(u)}}catch(l){s.e(l)}finally{s.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=E(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Ps(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}();var lu=function(e){function t(e){p(this,t),this.binaryString=e}return m(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Rs(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();lu.EMPTY_BYTE_STRING=new lu("");var cu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hu(e){if(ks(!!e),"string"==typeof e){var t=0,n=cu.exec(e);if(ks(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:fu(e.seconds),nanos:fu(e.nanos)}}function fu(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function du(e){return"string"==typeof e?lu.fromBase64String(e):lu.fromUint8Array(e)}function pu(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function vu(e){var t=e.mapValue.fields.__previous_value__;return pu(t)?vu(t):t}function mu(e){var t=hu(e.mapValue.fields.__local_write_time__.timestampValue);return new Os(t.seconds,t.nanos)}var yu=m((function e(t,n,r,i,a,o,s,u){p(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u})),gu=function(){function e(t,n){p(this,e),this.projectId=t,this.database=n||"(default)"}return m(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function ku(e){return null==e}function _u(e){return 0===e&&1/e==-1/0}function wu(e){return"number"==typeof e&&Number.isInteger(e)&&!_u(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var bu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function xu(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?pu(e)?4:ju(e)?9007199254740991:10:gs()}function Cu(e,t){if(e===t)return!0;var n=xu(e);if(n!==xu(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return mu(e).isEqual(mu(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=hu(e.timestampValue),r=hu(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return du(e.bytesValue).isEqual(du(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return fu(e.geoPointValue.latitude)===fu(t.geoPointValue.latitude)&&fu(e.geoPointValue.longitude)===fu(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return fu(e.integerValue)===fu(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=fu(e.doubleValue),r=fu(t.doubleValue);return n===r?_u(n)===_u(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ps(e.arrayValue.values||[],t.arrayValue.values||[],Cu);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(eu(n)!==eu(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Cu(n[i],r[i])))return!1;return!0}(e,t);default:return gs()}}function Tu(e,t){return void 0!==(e.values||[]).find((function(e){return Cu(e,t)}))}function Su(e,t){if(e===t)return 0;var n=xu(e),r=xu(t);if(n!==r)return Rs(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Rs(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=fu(e.integerValue||e.doubleValue),r=fu(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Eu(e.timestampValue,t.timestampValue);case 4:return Eu(mu(e),mu(t));case 5:return Rs(e.stringValue,t.stringValue);case 6:return function(e,t){var n=du(e),r=du(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Rs(n[i],r[i]);if(0!==a)return a}return Rs(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Rs(fu(e.latitude),fu(t.latitude));return 0!==n?n:Rs(fu(e.longitude),fu(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Su(n[i],r[i]);if(a)return a}return Rs(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===bu.mapValue&&t===bu.mapValue)return 0;if(e===bu.mapValue)return 1;if(t===bu.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=Rs(r[o],a[o]);if(0!==s)return s;var u=Su(n[r[o]],i[a[o]]);if(0!==u)return u}return Rs(r.length,a.length)}(e.mapValue,t.mapValue);default:throw gs()}}function Eu(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Rs(e,t);var n=hu(e),r=hu(t),i=Rs(n.seconds,r.seconds);return 0!==i?i:Rs(n.nanos,r.nanos)}function Iu(e){return Mu(e)}function Mu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=hu(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?du(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Vs.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=E(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Mu(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=E(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Mu(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):gs();var t,n}function Nu(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Au(e){return!!e&&"integerValue"in e}function Du(e){return!!e&&"arrayValue"in e}function Ru(e){return!!e&&"nullValue"in e}function Pu(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ou(e){return!!e&&"mapValue"in e}function Lu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return tu(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Lu(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Lu(e.arrayValue.values[r]);return n}return Object.assign({},e)}function ju(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}var Fu=function(){function e(t){p(this,e),this.value=t}return m(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Ou(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lu(t)}},{key:"setAll",value:function(e){var t=this,n=Us.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Lu(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Ou(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Cu(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Ou(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){tu(t,(function(t,n){return e[t]=n}));var r,i=E(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Lu(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Bu(e){var t=[];return tu(e.fields,(function(e,n){var r=new Us([e]);if(Ou(n)){var i=Bu(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=E(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new uu(t)}var Uu=function(){function e(t,n,r,i,a,o){p(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return m(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Fu.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Fu.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Ls.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Ls.min(),Ls.min(),Fu.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Ls.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Ls.min(),Fu.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Ls.min(),Fu.empty(),2)}}]),e}(),Vu=m((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;p(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.ut=null}));function zu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Vu(e,t,n,r,i,a,o)}function qu(e){var t=_s(e);if(null===t.ut){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+Iu(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),ku(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Iu(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Iu(e)})).join(",")),t.ut=n}return t.ut}function Wu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!rl(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!Cu(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!al(e.startAt,t.startAt)&&al(e.endAt,t.endAt)}function Qu(e){return Vs.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var Hu=function(e){g(n,e);var t=C(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return m(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(Su(t,this.value)):null!==t&&xu(this.value)===xu(t)&&this.at(Su(t,this.value))}},{key:"at",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return gs()}}},{key:"ht",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new Yu(e,t,r):"array-contains"===t?new $u(e,r):"in"===t?new Zu(e,r):"not-in"===t?new Ju(e,r):"array-contains-any"===t?new el(e,r):new n(e,t,r)}},{key:"ct",value:function(e,t,n){return"in"===t?new Ku(e,n):new Gu(e,n)}}]),n}(function(){return m((function e(){p(this,e)}))}()),Yu=function(e){g(n,e);var t=C(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this,e,r,i)).key=Vs.fromName(i.referenceValue),a}return m(n,[{key:"matches",value:function(e){var t=Vs.comparator(e.key,this.key);return this.at(t)}}]),n}(Hu),Ku=function(e){g(n,e);var t=C(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,"in",r)).keys=Xu("in",r),i}return m(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Hu),Gu=function(e){g(n,e);var t=C(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,"not-in",r)).keys=Xu("not-in",r),i}return m(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Hu);function Xu(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Vs.fromName(e.referenceValue)}))}var $u=function(e){g(n,e);var t=C(n);function n(e,r){return p(this,n),t.call(this,e,"array-contains",r)}return m(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Du(t)&&Tu(t.arrayValue,this.value)}}]),n}(Hu),Zu=function(e){g(n,e);var t=C(n);function n(e,r){return p(this,n),t.call(this,e,"in",r)}return m(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Tu(this.value.arrayValue,t)}}]),n}(Hu),Ju=function(e){g(n,e);var t=C(n);function n(e,r){return p(this,n),t.call(this,e,"not-in",r)}return m(n,[{key:"matches",value:function(e){if(Tu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Tu(this.value.arrayValue,t)}}]),n}(Hu),el=function(e){g(n,e);var t=C(n);function n(e,r){return p(this,n),t.call(this,e,"array-contains-any",r)}return m(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Du(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Tu(t.value.arrayValue,e)}))}}]),n}(Hu),tl=m((function e(t,n){p(this,e),this.position=t,this.inclusive=n})),nl=m((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";p(this,e),this.field=t,this.dir=n}));function rl(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function il(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Vs.comparator(Vs.fromName(o.referenceValue),n.key):Su(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function al(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Cu(e.position[n],t.position[n]))return!1;return!0}var ol=m((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;p(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.lt=null,this.ft=null,this.startAt,this.endAt}));function sl(e,t,n,r,i,a,o,s){return new ol(e,t,n,r,i,a,o,s)}function ul(e){return new ol(e)}function ll(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function cl(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function hl(e){var t,n=E(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.ht())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function fl(e){return null!==e.collectionGroup}function dl(e){var t=_s(e);if(null===t.lt){t.lt=[];var n=hl(t),r=cl(t);if(null!==n&&null===r)n.isKeyField()||t.lt.push(new nl(n)),t.lt.push(new nl(Us.keyField(),"asc"));else{var i,a=!1,o=E(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.lt.push(s),s.field.isKeyField()&&(a=!0)}}catch(l){o.e(l)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.lt.push(new nl(Us.keyField(),u))}}}return t.lt}function pl(e){var t=_s(e);if(!t.ft)if("F"===t.limitType)t.ft=zu(t.path,t.collectionGroup,dl(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=E(dl(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new nl(a.field,o))}}catch(l){i.e(l)}finally{i.f()}var s=t.endAt?new tl(t.endAt.position,t.endAt.inclusive):null,u=t.startAt?new tl(t.startAt.position,t.startAt.inclusive):null;t.ft=zu(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t.ft}function vl(e,t,n){return new ol(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ml(e,t){return Wu(pl(e),pl(t))&&e.limitType===t.limitType}function yl(e){return"".concat(qu(pl(e)),"|lt:").concat(e.limitType)}function gl(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(Iu(t.value));var t})).join(", "),"]")),ku(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Iu(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Iu(e)})).join(",")),"Target(".concat(t,")")}(pl(e)),"; limitType=").concat(e.limitType,")")}function kl(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Vs.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=E(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=E(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=il(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,dl(e),t))&&!(e.endAt&&!function(e,t,n){var r=il(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,dl(e),t))}(e,t)}function _l(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function wl(e){return function(t,n){var r,i=!1,a=E(dl(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=bl(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function bl(e,t,n){var r=e.field.isKeyField()?Vs.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Su(r,i):gs()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return gs()}}function xl(e,t){if(e.dt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_u(t)?"-0":t}}function Cl(e){return{integerValue:""+e}}function Tl(e,t){return wu(t)?Cl(t):xl(e,t)}var Sl=m((function e(){p(this,e),this._=void 0}));function El(e,t,n){return e instanceof Nl?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Al?Dl(e,t):e instanceof Rl?Pl(e,t):function(e,t){var n=Ml(e,t),r=Ll(n)+Ll(e._t);return Au(n)&&Au(e._t)?Cl(r):xl(e.wt,r)}(e,t)}function Il(e,t,n){return e instanceof Al?Dl(e,t):e instanceof Rl?Pl(e,t):n}function Ml(e,t){return e instanceof Ol?Au(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Nl=function(e){g(n,e);var t=C(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n)}(Sl),Al=function(e){g(n,e);var t=C(n);function n(e){var r;return p(this,n),(r=t.call(this)).elements=e,r}return m(n)}(Sl);function Dl(e,t){var n,r=jl(t),i=E(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Cu(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Rl=function(e){g(n,e);var t=C(n);function n(e){var r;return p(this,n),(r=t.call(this)).elements=e,r}return m(n)}(Sl);function Pl(e,t){var n,r=jl(t),i=E(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Cu(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Ol=function(e){g(n,e);var t=C(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).wt=e,i._t=r,i}return m(n)}(Sl);function Ll(e){return fu(e.integerValue||e.doubleValue)}function jl(e){return Du(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Fl=m((function e(t,n){p(this,e),this.field=t,this.transform=n}));var Bl=m((function e(t,n){p(this,e),this.version=t,this.transformResults=n})),Ul=function(){function e(t,n){p(this,e),this.updateTime=t,this.exists=n}return m(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Vl(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var zl=m((function e(){p(this,e)}));function ql(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new tc(e.key,Ul.none()):new Kl(e.key,e.data,Ul.none());var n,r=e.data,i=Fu.empty(),a=new ou(Us.comparator),o=E(t.fields);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(!a.has(s)){var u=r.field(s);null===u&&s.length>1&&(s=s.popLast(),u=r.field(s)),null===u?i.delete(s):i.set(s,u),a=a.add(s)}}}catch(l){o.e(l)}finally{o.f()}return new Gl(e.key,i,new uu(a.toArray()),Ul.none())}function Wl(e,t,n){e instanceof Kl?function(e,t,n){var r=e.value.clone(),i=$l(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Gl?function(e,t,n){if(Vl(e.precondition,t)){var r=$l(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Xl(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ql(e,t,n,r){return e instanceof Kl?function(e,t,n,r){if(!Vl(e.precondition,t))return n;var i=e.value.clone(),a=Zl(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Gl?function(e,t,n,r){if(!Vl(e.precondition,t))return n;var i=Zl(e.fieldTransforms,r,t),a=t.data;return a.setAll(Xl(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Vl(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Hl(e,t){var n,r=null,i=E(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=Ml(a.transform,o||null);null!=s&&(null===r&&(r=Fu.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function Yl(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ps(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Al&&t instanceof Al||e instanceof Rl&&t instanceof Rl?Ps(e.elements,t.elements,Cu):e instanceof Ol&&t instanceof Ol?Cu(e._t,t._t):e instanceof Nl&&t instanceof Nl}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Kl=function(e){g(n,e);var t=C(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return p(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return m(n,[{key:"getFieldMask",value:function(){return null}}]),n}(zl),Gl=function(e){g(n,e);var t=C(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return p(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return m(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(zl);function Xl(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function $l(e,t,n){var r=new Map;ks(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,Il(o,s,n[i]))}return r}function Zl(e,t,n){var r,i=new Map,a=E(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,El(s,u,t))}}catch(l){a.e(l)}finally{a.f()}return i}var Jl,ec,tc=function(e){g(n,e);var t=C(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return m(n,[{key:"getFieldMask",value:function(){return null}}]),n}(zl),nc=function(e){g(n,e);var t=C(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return m(n,[{key:"getFieldMask",value:function(){return null}}]),n}(zl),rc=m((function e(t){p(this,e),this.count=t}));function ic(e){switch(e){default:return gs();case ws.CANCELLED:case ws.UNKNOWN:case ws.DEADLINE_EXCEEDED:case ws.RESOURCE_EXHAUSTED:case ws.INTERNAL:case ws.UNAVAILABLE:case ws.UNAUTHENTICATED:return!1;case ws.INVALID_ARGUMENT:case ws.NOT_FOUND:case ws.ALREADY_EXISTS:case ws.PERMISSION_DENIED:case ws.FAILED_PRECONDITION:case ws.ABORTED:case ws.OUT_OF_RANGE:case ws.UNIMPLEMENTED:case ws.DATA_LOSS:return!0}}function ac(e){if(void 0===e)return vs("GRPC error has no .code"),ws.UNKNOWN;switch(e){case Jl.OK:return ws.OK;case Jl.CANCELLED:return ws.CANCELLED;case Jl.UNKNOWN:return ws.UNKNOWN;case Jl.DEADLINE_EXCEEDED:return ws.DEADLINE_EXCEEDED;case Jl.RESOURCE_EXHAUSTED:return ws.RESOURCE_EXHAUSTED;case Jl.INTERNAL:return ws.INTERNAL;case Jl.UNAVAILABLE:return ws.UNAVAILABLE;case Jl.UNAUTHENTICATED:return ws.UNAUTHENTICATED;case Jl.INVALID_ARGUMENT:return ws.INVALID_ARGUMENT;case Jl.NOT_FOUND:return ws.NOT_FOUND;case Jl.ALREADY_EXISTS:return ws.ALREADY_EXISTS;case Jl.PERMISSION_DENIED:return ws.PERMISSION_DENIED;case Jl.FAILED_PRECONDITION:return ws.FAILED_PRECONDITION;case Jl.ABORTED:return ws.ABORTED;case Jl.OUT_OF_RANGE:return ws.OUT_OF_RANGE;case Jl.UNIMPLEMENTED:return ws.UNIMPLEMENTED;case Jl.DATA_LOSS:return ws.DATA_LOSS;default:return gs()}}(ec=Jl||(Jl={}))[ec.OK=0]="OK",ec[ec.CANCELLED=1]="CANCELLED",ec[ec.UNKNOWN=2]="UNKNOWN",ec[ec.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ec[ec.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ec[ec.NOT_FOUND=5]="NOT_FOUND",ec[ec.ALREADY_EXISTS=6]="ALREADY_EXISTS",ec[ec.PERMISSION_DENIED=7]="PERMISSION_DENIED",ec[ec.UNAUTHENTICATED=16]="UNAUTHENTICATED",ec[ec.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ec[ec.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ec[ec.ABORTED=10]="ABORTED",ec[ec.OUT_OF_RANGE=11]="OUT_OF_RANGE",ec[ec.UNIMPLEMENTED=12]="UNIMPLEMENTED",ec[ec.INTERNAL=13]="INTERNAL",ec[ec.UNAVAILABLE=14]="UNAVAILABLE",ec[ec.DATA_LOSS=15]="DATA_LOSS";var oc=function(){function e(t,n){p(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return m(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=E(n);try{for(i.s();!(r=i.n()).done;){var a=u(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(l){i.e(l)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){tu(this.inner,(function(t,n){var r,i=E(n);try{for(i.s();!(r=i.n()).done;){var a=u(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(l){i.e(l)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return nu(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),sc=new ru(Vs.comparator);function uc(){return sc}var lc=new ru(Vs.comparator);function cc(){for(var e=lc,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function hc(e){var t=lc;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function fc(){return pc()}function dc(){return pc()}function pc(){return new oc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var vc=new ru(Vs.comparator),mc=new ou(Vs.comparator);function yc(){for(var e=mc,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var gc=new ou(Rs);function kc(){return gc}var _c=function(){function e(t,n,r,i,a){p(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return m(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,wc.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Ls.min(),r,kc(),uc(),yc())}}]),e}(),wc=function(){function e(t,n,r,i,a){p(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return m(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(lu.EMPTY_BYTE_STRING,n,yc(),yc(),yc())}}]),e}(),bc=m((function e(t,n,r,i){p(this,e),this.gt=t,this.removedTargetIds=n,this.key=r,this.yt=i})),xc=m((function e(t,n){p(this,e),this.targetId=t,this.It=n})),Cc=m((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:lu.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;p(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Tc=function(){function e(){p(this,e),this.Tt=0,this.Et=Ic(),this.At=lu.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}return m(e,[{key:"current",get:function(){return this.Rt}},{key:"resumeToken",get:function(){return this.At}},{key:"Pt",get:function(){return 0!==this.Tt}},{key:"vt",get:function(){return this.bt}},{key:"Vt",value:function(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}},{key:"St",value:function(){var e=yc(),t=yc(),n=yc();return this.Et.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:gs()}})),new wc(this.At,this.Rt,e,t,n)}},{key:"Dt",value:function(){this.bt=!1,this.Et=Ic()}},{key:"Ct",value:function(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}},{key:"xt",value:function(e){this.bt=!0,this.Et=this.Et.remove(e)}},{key:"Nt",value:function(){this.Tt+=1}},{key:"kt",value:function(){this.Tt-=1}},{key:"Mt",value:function(){this.bt=!0,this.Rt=!0}}]),e}(),Sc=function(){function e(t){p(this,e),this.Ot=t,this.Ft=new Map,this.$t=uc(),this.Bt=Ec(),this.Lt=new ou(Rs)}return m(e,[{key:"Ut",value:function(e){var t,n=E(e.gt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.yt&&e.yt.isFoundDocument()?this.qt(r,e.yt):this.Kt(r,e.key,e.yt)}}catch(s){n.e(s)}finally{n.f()}var i,a=E(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Kt(o,e.key,e.yt)}}catch(s){a.e(s)}finally{a.f()}}},{key:"Gt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Qt(n);switch(e.state){case 0:t.jt(n)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||t.removeTarget(n);break;case 3:t.jt(n)&&(r.Mt(),r.Vt(e.resumeToken));break;case 4:t.jt(n)&&(t.Wt(n),r.Vt(e.resumeToken));break;default:gs()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((function(e,r){n.jt(r)&&t(r)}))}},{key:"zt",value:function(e){var t=e.targetId,n=e.It.count,r=this.Ht(t);if(r){var i=r.target;if(Qu(i))if(0===n){var a=new Vs(i.path);this.Kt(t,a,Uu.newNoDocument(a,Ls.min()))}else ks(1===n);else this.Jt(t)!==n&&(this.Wt(t),this.Lt=this.Lt.add(t))}}},{key:"Yt",value:function(e){var t=this,n=new Map;this.Ft.forEach((function(r,i){var a=t.Ht(i);if(a){if(r.current&&Qu(a.target)){var o=new Vs(a.target.path);null!==t.$t.get(o)||t.Xt(i,o)||t.Kt(i,o,Uu.newNoDocument(o,e))}r.vt&&(n.set(i,r.St()),r.Dt())}}));var r=yc();this.Bt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Ht(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.$t.forEach((function(t,n){return n.setReadTime(e)}));var i=new _c(e,n,this.Lt,this.$t,r);return this.$t=uc(),this.Bt=Ec(),this.Lt=new ou(Rs),i}},{key:"qt",value:function(e,t){if(this.jt(e)){var n=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,n),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}}},{key:"Kt",value:function(e,t,n){if(this.jt(e)){var r=this.Qt(e);this.Xt(e,t)?r.Ct(t,1):r.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),n&&(this.$t=this.$t.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Ft.delete(e)}},{key:"Jt",value:function(e){var t=this.Qt(e).St();return this.Ot.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Nt",value:function(e){this.Qt(e).Nt()}},{key:"Qt",value:function(e){var t=this.Ft.get(e);return t||(t=new Tc,this.Ft.set(e,t)),t}},{key:"Zt",value:function(e){var t=this.Bt.get(e);return t||(t=new ou(Rs),this.Bt=this.Bt.insert(e,t)),t}},{key:"jt",value:function(e){var t=null!==this.Ht(e);return t||ps("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Ht",value:function(e){var t=this.Ft.get(e);return t&&t.Pt?null:this.Ot.te(e)}},{key:"Wt",value:function(e){var t=this;this.Ft.set(e,new Tc),this.Ot.getRemoteKeysForTarget(e).forEach((function(n){t.Kt(e,n,null)}))}},{key:"Xt",value:function(e,t){return this.Ot.getRemoteKeysForTarget(e).has(t)}}]),e}();function Ec(){return new ru(Vs.comparator)}function Ic(){return new ru(Vs.comparator)}var Mc={asc:"ASCENDING",desc:"DESCENDING"},Nc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ac=m((function e(t,n){p(this,e),this.databaseId=t,this.dt=n}));function Dc(e,t){return e.dt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Rc(e,t){return e.dt?t.toBase64():t.toUint8Array()}function Pc(e,t){return Dc(e,t.toTimestamp())}function Oc(e){return ks(!!e),Ls.fromTimestamp(function(e){var t=hu(e);return new Os(t.seconds,t.nanos)}(e))}function Lc(e,t){return function(e){return new Fs(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function jc(e){var t=Fs.fromString(e);return ks(rh(t)),t}function Fc(e,t){return Lc(e.databaseId,t.path)}function Bc(e,t){var n=jc(t);if(n.get(1)!==e.databaseId.projectId)throw new bs(ws.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new bs(ws.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Vs(qc(n))}function Uc(e,t){return Lc(e.databaseId,t)}function Vc(e){var t=jc(e);return 4===t.length?Fs.emptyPath():qc(t)}function zc(e){return new Fs(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function qc(e){return ks(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Wc(e,t,n){return{name:Fc(e,t),fields:n.value.mapValue.fields}}function Qc(e,t){var n;if(t instanceof Kl)n={update:Wc(e,t.key,t.value)};else if(t instanceof tc)n={delete:Fc(e,t.key)};else if(t instanceof Gl)n={update:Wc(e,t.key,t.data),updateMask:nh(t.fieldMask)};else{if(!(t instanceof nc))return gs();n={verify:Fc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Nl)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Al)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Rl)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ol)return{fieldPath:t.field.canonicalString(),increment:n._t};throw gs()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Pc(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:gs()}(e,t.precondition)),n}function Hc(e,t){return{documents:[Uc(e,t.path)]}}function Yc(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Uc(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Uc(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(Pu(e.value))return{unaryFilter:{field:Zc(e.field),op:"IS_NAN"}};if(Ru(e.value))return{unaryFilter:{field:Zc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Pu(e.value))return{unaryFilter:{field:Zc(e.field),op:"IS_NOT_NAN"}};if(Ru(e.value))return{unaryFilter:{field:Zc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zc(e.field),op:$c(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Zc(e.field),direction:Xc(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,s=function(e,t){return e.dt||ku(t)?t:{value:t}}(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Kc(e){var t=Vc(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ks(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Gc(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new nl(Jc(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return ku(t="object"==typeof e?e.value:e)?null:t}(n.limit));var l=null;n.startAt&&(l=function(e){var t=!!e.before,n=e.values||[];return new tl(n,t)}(n.startAt));var c=null;return n.endAt&&(c=function(e){var t=!e.before,n=e.values||[];return new tl(n,t)}(n.endAt)),sl(t,i,s,o,u,"F",l,c)}function Gc(e){return e?void 0!==e.unaryFilter?[th(e)]:void 0!==e.fieldFilter?[eh(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Gc(e)})).reduce((function(e,t){return e.concat(t)})):gs():[]}function Xc(e){return Mc[e]}function $c(e){return Nc[e]}function Zc(e){return{fieldPath:e.canonicalString()}}function Jc(e){return Us.fromServerFormat(e.fieldPath)}function eh(e){return Hu.create(Jc(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return gs()}}(e.fieldFilter.op),e.fieldFilter.value)}function th(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Jc(e.unaryFilter.field);return Hu.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Jc(e.unaryFilter.field);return Hu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Jc(e.unaryFilter.field);return Hu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Jc(e.unaryFilter.field);return Hu.create(i,"!=",{nullValue:"NULL_VALUE"});default:return gs()}}function nh(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function rh(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var ih=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),ah=([].concat(d(ih),["documentOverlays"]),["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"]),oh=ah;[].concat(oh,["indexConfiguration","indexState","indexEntries"]);var sh=function(){function e(t,n,r,i){p(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return m(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Wl(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=E(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Ql(i,e,t,this.localWriteTime))}}catch(u){r.e(u)}finally{r.f()}var a,o=E(this.mutations);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.key.isEqual(e.key)&&(t=Ql(s,e,t,this.localWriteTime))}}catch(u){o.e(u)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=dc();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,s=n.applyToLocalView(o,a.mutatedFields),u=ql(o,s=t.has(i.key)?null:s);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Ls.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),yc())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Ps(this.mutations,e.mutations,(function(e,t){return Yl(e,t)}))&&Ps(this.baseMutations,e.baseMutations,(function(e,t){return Yl(e,t)}))}}]),e}(),uh=function(){function e(t,n,r,i){p(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return m(e,null,[{key:"from",value:function(t,n,r){ks(t.mutations.length===r.length);for(var i=vc,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),lh=function(){function e(t,n){p(this,e),this.largestBatchId=t,this.mutation=n}return m(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),ch=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ls.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ls.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:lu.EMPTY_BYTE_STRING;p(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return m(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),hh=m((function e(t){p(this,e),this.ne=t}));function fh(e){var t=Kc({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?vl(t,t.limit,"L"):t}var dh=function(){function e(){p(this,e)}return m(e,[{key:"re",value:function(e,t){this.oe(e,t),t.ue()}},{key:"oe",value:function(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(fu(e.integerValue));else if("doubleValue"in e){var n=fu(e.doubleValue);isNaN(n)?this.ce(t,13):(this.ce(t,15),_u(n)?t.ae(0):t.ae(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he("".concat(r.seconds||"")),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(du(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ce(t,45),t.ae(i.latitude||0),t.ae(i.longitude||0)}else"mapValue"in e?ju(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):gs()}},{key:"le",value:function(e,t){this.ce(t,25),this.ge(e,t)}},{key:"ge",value:function(e,t){t.he(e)}},{key:"we",value:function(e,t){var n=e.fields||{};this.ce(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.le(a,t),this.oe(n[a],t)}}},{key:"me",value:function(e,t){var n=e.values||[];this.ce(t,50);var r,i=E(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.oe(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"_e",value:function(e,t){var n=this;this.ce(t,37),Vs.fromName(e).path.forEach((function(e){n.ce(t,60),n.ge(e,t)}))}},{key:"ce",value:function(e,t){e.ae(t)}},{key:"fe",value:function(e){e.ae(2)}}]),e}();dh.ye=new dh;var ph=function(){function e(){p(this,e),this.ze=new vh}return m(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.ze.add(t),$s.resolve()}},{key:"getCollectionParents",value:function(e,t){return $s.resolve(this.ze.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return $s.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return $s.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return $s.resolve(null)}},{key:"getIndexType",value:function(e,t){return $s.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return $s.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return $s.resolve(null)}},{key:"getMinOffset",value:function(e,t){return $s.resolve(Qs.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return $s.resolve(Qs.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return $s.resolve()}},{key:"updateIndexEntries",value:function(e,t){return $s.resolve()}}]),e}(),vh=function(){function e(){p(this,e),this.index={}}return m(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new ou(Fs.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new ou(Fs.comparator)).toArray()}}]),e}();new Uint8Array(0);var mh=function(){function e(t,n,r){p(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return m(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();mh.DEFAULT_COLLECTION_PERCENTILE=10,mh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mh.DEFAULT=new mh(41943040,mh.DEFAULT_COLLECTION_PERCENTILE,mh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mh.DISABLED=new mh(-1,0,0);var yh=function(){function e(t){p(this,e),this.En=t}return m(e,[{key:"next",value:function(){return this.En+=2,this.En}}],[{key:"An",value:function(){return new e(0)}},{key:"Rn",value:function(){return new e(-1)}}]),e}();var gh=function(){function e(){p(this,e),this.changes=new oc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return m(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Uu.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?$s.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}();var kh=m((function e(t,n){p(this,e),this.overlayedDocument=t,this.mutatedFields=n})),_h=function(){function e(t,n,r,i){p(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return m(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.getBaseDocument(e,t,r)})).next((function(e){return null!==r&&Ql(r.mutation,e,uu.empty(),Os.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,yc()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yc(),i=fc();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=cc();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=fc();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,yc())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=uc(),a=pc(),o=pc();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Gl)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),Ql(o.mutation,t,o.mutation.getFieldMask(),Os.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new kh(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=pc(),i=new ru((function(e,t){return e-t})),a=yc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=E(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||uu.empty();o=e.applyToLocalView(a,o),r.set(n,o);var s=(i.get(e.batchId)||yc()).add(n);i=i.insert(e.batchId,s)}}))};for(a.s();!(n=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}})).next((function(){for(var o=[],s=i.getReverseIterator(),u=function(){var i=s.getNext(),u=i.key,l=i.value,c=dc();l.forEach((function(e){if(!a.has(e)){var n=ql(t.get(e),r.get(e));null!==n&&c.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,u,c))};s.hasNext();)u();return $s.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Vs.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):fl(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):$s.resolve(fc()),s=-1,u=a;return o.next((function(t){return $s.forEach(t,(function(t,n){return s<n.largestBatchId&&(s=n.largestBatchId),a.get(t)?$s.resolve():i.getBaseDocument(e,t,n).next((function(e){u=u.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,u,t,yc())})).next((function(e){return{batchId:s,changes:hc(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Vs(t)).next((function(e){var t=cc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=cc();return this.indexManager.getCollectionParents(e,i).next((function(o){return $s.forEach(o,(function(o){var s=function(e,t){return new ol(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,Uu.newInvalidDocument(n)))}));var n=cc();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&Ql(a.mutation,i,uu.empty(),Os.now()),kl(t,i)&&(n=n.insert(r,i))})),n}))}},{key:"getBaseDocument",value:function(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):$s.resolve(Uu.newInvalidDocument(t))}}]),e}(),wh=function(){function e(t){p(this,e),this.wt=t,this.Jn=new Map,this.Yn=new Map}return m(e,[{key:"getBundleMetadata",value:function(e,t){return $s.resolve(this.Jn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Jn.set(t.id,{id:(n=t).id,version:n.version,createTime:Oc(n.createTime)}),$s.resolve()}},{key:"getNamedQuery",value:function(e,t){return $s.resolve(this.Yn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Yn.set(t.name,function(e){return{name:e.name,query:fh(e.bundledQuery),readTime:Oc(e.readTime)}}(t)),$s.resolve()}}]),e}(),bh=function(){function e(){p(this,e),this.overlays=new ru(Vs.comparator),this.Xn=new Map}return m(e,[{key:"getOverlay",value:function(e,t){return $s.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=fc();return $s.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ie(e,t,i)})),$s.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Xn.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Xn.delete(n)),$s.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=fc(),i=t.length+1,a=new Vs(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return $s.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new ru((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=fc(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=fc(),l=i.getIterator();l.hasNext()&&(l.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return $s.resolve(u)}},{key:"ie",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Xn.get(r.largestBatchId).delete(n.key);this.Xn.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new lh(t,n));var a=this.Xn.get(t);void 0===a&&(a=yc(),this.Xn.set(t,a)),this.Xn.set(t,a.add(n.key))}}]),e}(),xh=function(){function e(){p(this,e),this.Zn=new ou(Ch.ts),this.es=new ou(Ch.ns)}return m(e,[{key:"isEmpty",value:function(){return this.Zn.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Ch(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}},{key:"ss",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.rs(new Ch(e,t))}},{key:"os",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"us",value:function(e){var t=this,n=new Vs(new Fs([])),r=new Ch(n,e),i=new Ch(n,e+1),a=[];return this.es.forEachInRange([r,i],(function(e){t.rs(e),a.push(e.key)})),a}},{key:"cs",value:function(){var e=this;this.Zn.forEach((function(t){return e.rs(t)}))}},{key:"rs",value:function(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}},{key:"hs",value:function(e){var t=new Vs(new Fs([])),n=new Ch(t,e),r=new Ch(t,e+1),i=yc();return this.es.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Ch(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Ch=function(){function e(t,n){p(this,e),this.key=t,this.ls=n}return m(e,null,[{key:"ts",value:function(e,t){return Vs.comparator(e.key,t.key)||Rs(e.ls,t.ls)}},{key:"ns",value:function(e,t){return Rs(e.ls,t.ls)||Vs.comparator(e.key,t.key)}}]),e}(),Th=function(){function e(t,n){p(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.fs=1,this.ds=new ou(Ch.ts)}return m(e,[{key:"checkEmpty",value:function(e){return $s.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.fs;this.fs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new sh(i,t,n,r);this.mutationQueue.push(a);var o,s=E(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.ds=this.ds.add(new Ch(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(l){s.e(l)}finally{s.f()}return $s.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return $s.resolve(this._s(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ws(n),i=r<0?0:r;return $s.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return $s.resolve(0===this.mutationQueue.length?-1:this.fs-1)}},{key:"getAllMutationBatches",value:function(e){return $s.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Ch(t,0),i=new Ch(t,Number.POSITIVE_INFINITY),a=[];return this.ds.forEachInRange([r,i],(function(e){var t=n._s(e.ls);a.push(t)})),$s.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new ou(Rs);return t.forEach((function(e){var t=new Ch(e,0),i=new Ch(e,Number.POSITIVE_INFINITY);n.ds.forEachInRange([t,i],(function(e){r=r.add(e.ls)}))})),$s.resolve(this.gs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Vs.isDocumentKey(i)||(i=i.child(""));var a=new Ch(new Vs(i),0),o=new ou(Rs);return this.ds.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ls)),!0)}),a),$s.resolve(this.gs(o))}},{key:"gs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t._s(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;ks(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();var r=this.ds;return $s.forEach(t.mutations,(function(i){var a=new Ch(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ds=r}))}},{key:"In",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Ch(t,0),r=this.ds.firstAfterOrEqual(n);return $s.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,$s.resolve()}},{key:"ys",value:function(e,t){return this.ws(e)}},{key:"ws",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"_s",value:function(e){var t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),Sh=function(){function e(t){p(this,e),this.ps=t,this.docs=new ru(Vs.comparator),this.size=0}return m(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ps(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return $s.resolve(n?n.document.mutableCopy():Uu.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=uc();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Uu.newInvalidDocument(e))})),$s.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=uc(),i=new Vs(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),s=o.key,u=o.value.document;if(!t.isPrefixOf(s.path))break;s.path.length>t.length+1||Hs(Ws(u),n)<=0||(r=r.insert(u.key,u.mutableCopy()))}return $s.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){gs()}},{key:"Is",value:function(e,t){return $s.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Eh(this)}},{key:"getSize",value:function(e){return $s.resolve(this.size)}}]),e}(),Eh=function(e){g(n,e);var t=C(n);function n(e){var r;return p(this,n),(r=t.call(this)).zn=e,r}return m(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.zn.addEntry(e,i)):t.zn.removeEntry(r)})),$s.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.zn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.zn.getEntries(e,t)}}]),n}(gh),Ih=function(){function e(t){p(this,e),this.persistence=t,this.Ts=new oc((function(e){return qu(e)}),Wu),this.lastRemoteSnapshotVersion=Ls.min(),this.highestTargetId=0,this.Es=0,this.As=new xh,this.targetCount=0,this.Rs=yh.An()}return m(e,[{key:"forEachTarget",value:function(e,t){return this.Ts.forEach((function(e,n){return t(n)})),$s.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return $s.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return $s.resolve(this.Es)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Rs.next(),$s.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Es&&(this.Es=t),$s.resolve()}},{key:"vn",value:function(e){this.Ts.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Rs=new yh(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.vn(t),this.targetCount+=1,$s.resolve()}},{key:"updateTargetData",value:function(e,t){return this.vn(t),$s.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,$s.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Ts.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Ts.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),$s.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return $s.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Ts.get(t)||null;return $s.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.As.ss(t,n),$s.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.As.os(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),$s.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.As.us(t),$s.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.As.hs(t);return $s.resolve(n)}},{key:"containsKey",value:function(e,t){return $s.resolve(this.As.containsKey(t))}}]),e}(),Mh=function(){function e(t,n){var r=this;p(this,e),this.bs={},this.overlays={},this.Ps=new Js(0),this.vs=!1,this.vs=!0,this.referenceDelegate=t(this),this.Vs=new Ih(this),this.indexManager=new ph,this.remoteDocumentCache=new Sh((function(e){return r.referenceDelegate.Ss(e)})),this.wt=new hh(n),this.Ds=new wh(this.wt)}return m(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.vs=!1,Promise.resolve()}},{key:"started",get:function(){return this.vs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new bh,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.bs[e.toKey()];return n||(n=new Th(t,this.referenceDelegate),this.bs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;ps("MemoryPersistence","Starting transaction:",e);var i=new Nh(this.Ps.next());return this.referenceDelegate.Cs(),n(i).next((function(e){return r.referenceDelegate.xs(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ns",value:function(e,t){return $s.or(Object.values(this.bs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Nh=function(e){g(n,e);var t=C(n);function n(e){var r;return p(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return m(n)}(Ks),Ah=function(){function e(t){p(this,e),this.persistence=t,this.ks=new xh,this.Ms=null}return m(e,[{key:"Fs",get:function(){if(this.Ms)return this.Ms;throw gs()}},{key:"addReference",value:function(e,t,n){return this.ks.addReference(n,t),this.Fs.delete(n.toString()),$s.resolve()}},{key:"removeReference",value:function(e,t,n){return this.ks.removeReference(n,t),this.Fs.add(n.toString()),$s.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Fs.add(t.toString()),$s.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.ks.us(t.targetId).forEach((function(e){return n.Fs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Fs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Cs",value:function(){this.Ms=new Set}},{key:"xs",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $s.forEach(this.Fs,(function(r){var i=Vs.fromPath(r);return t.$s(e,i).next((function(e){e||n.removeEntry(i,Ls.min())}))})).next((function(){return t.Ms=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.$s(e,t).next((function(e){e?n.Fs.delete(t.toString()):n.Fs.add(t.toString())}))}},{key:"Ss",value:function(e){return 0}},{key:"$s",value:function(e,t){var n=this;return $s.or([function(){return $s.resolve(n.ks.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ns(e,t)}])}}],[{key:"Os",value:function(t){return new e(t)}}]),e}();var Dh=function(){function e(t,n,r,i){p(this,e),this.targetId=t,this.fromCache=n,this.Pi=r,this.vi=i}return m(e,null,[{key:"Vi",value:function(t,n){var r,i=yc(),a=yc(),o=E(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Rh=function(){function e(){p(this,e),this.Si=!1}return m(e,[{key:"initialize",value:function(e,t){this.Di=e,this.indexManager=t,this.Si=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ci(e,t).next((function(a){return a||i.xi(e,t,r,n)})).next((function(n){return n||i.Ni(e,t)}))}},{key:"Ci",value:function(e,t){var n=this;if(ll(t))return $s.resolve(null);var r=pl(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=vl(t,null,"F"),r=pl(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=yc.apply(void 0,d(i));return n.Di.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.ki(t,i);return n.Mi(t,o,a,r.readTime)?n.Ci(e,vl(t,null,"F")):n.Oi(e,o,t,r)}))}))})))}))}},{key:"xi",value:function(e,t,n,r){var i=this;return ll(t)||r.isEqual(Ls.min())?this.Ni(e,t):this.Di.getDocuments(e,n).next((function(a){var o=i.ki(t,a);return i.Mi(t,o,n,r)?i.Ni(e,t):(ds()<=zt.DEBUG&&ps("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),gl(t)),i.Oi(e,o,t,qs(r,-1)))}))}},{key:"ki",value:function(e,t){var n=new ou(wl(e));return t.forEach((function(t,r){kl(e,r)&&(n=n.add(r))})),n}},{key:"Mi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Ni",value:function(e,t){return ds()<=zt.DEBUG&&ps("QueryEngine","Using full collection scan to execute query:",gl(t)),this.Di.getDocumentsMatchingQuery(e,t,Qs.min())}},{key:"Oi",value:function(e,t,n,r){return this.Di.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Ph=function(){function e(t,n,r,i){p(this,e),this.persistence=t,this.Fi=n,this.wt=i,this.$i=new ru(Rs),this.Bi=new oc((function(e){return qu(e)}),Wu),this.Li=new Map,this.Ui=t.getRemoteDocumentCache(),this.Vs=t.getTargetCache(),this.Ds=t.getBundleCache(),this.qi(r)}return m(e,[{key:"qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _h(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.$i)}))}}]),e}();function Oh(e,t,n,r){return new Ph(e,t,n,r)}function Lh(e,t){return jh.apply(this,arguments)}function jh(){return jh=Ke(He().mark((function e(t,n){var r;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_s(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=yc(),u=E(t);try{for(u.s();!(i=u.n()).done;){var l=i.value;a.push(l.batchId);var c,h=E(l.mutations);try{for(h.s();!(c=h.n()).done;){var f=c.value;s=s.add(f.key)}}catch(k){h.e(k)}finally{h.f()}}}catch(k){u.e(k)}finally{u.f()}var d,p=E(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=E(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;s=s.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,s).next((function(e){return{Ki:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),jh.apply(this,arguments)}function Fh(e,t){var n=_s(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Ui.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=$s.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);ks(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=yc(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Bh(e){var t=_s(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Vs.getLastRemoteSnapshotVersion(e)}))}function Uh(e,t){var n=_s(e),r=t.snapshotVersion,i=n.$i;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Ui.newChangeBuffer({trackRemovals:!0});i=n.$i;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.Vs.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.Vs.addMatchingKeys(e,a.addedDocuments,s)})));var l=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(s)?l=l.withResumeToken(lu.EMPTY_BYTE_STRING,Ls.min()).withLastLimboFreeSnapshotVersion(Ls.min()):a.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(a.resumeToken,r)),i=i.insert(s,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,l,a)&&o.push(n.Vs.updateTargetData(e,l))}}));var s=uc(),u=yc();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Vh(e,a,t.documentUpdates).next((function(e){s=e.Gi,u=e.Qi}))),!r.isEqual(Ls.min())){var l=n.Vs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Vs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(l)}return $s.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,s,u)})).next((function(){return s}))})).then((function(e){return n.$i=i,e}))}function Vh(e,t,n){var r=yc(),i=yc();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=uc();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Ls.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):ps("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Gi:r,Qi:i}}))}function zh(e,t){var n=_s(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function qh(e,t){var n=_s(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Vs.getTargetData(e,t).next((function(i){return i?(r=i,$s.resolve(r)):n.Vs.allocateTargetId(e).next((function(i){return r=new ch(t,i,0,e.currentSequenceNumber),n.Vs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.$i.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.$i=n.$i.insert(e.targetId,e),n.Bi.set(t,e.targetId)),e}))}function Wh(e,t,n){return Qh.apply(this,arguments)}function Qh(){return Qh=Ke(He().mark((function e(t,n,r){var i,a,o;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=_s(t),a=i.$i.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Zs(e.t1)){e.next=12;break}throw e.t1;case 12:ps("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.$i=i.$i.remove(n),i.Bi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Qh.apply(this,arguments)}function Hh(e,t,n){var r=_s(e),i=Ls.min(),a=yc();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=_s(e),i=r.Bi.get(n);return void 0!==i?$s.resolve(r.$i.get(i)):r.Vs.getTargetData(t,n)}(r,e,pl(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Fi.getDocumentsMatchingQuery(e,t,n?i:Ls.min(),n?a:yc())})).next((function(e){return Yh(r,_l(t),e),{documents:e,ji:a}}))}))}function Yh(e,t,n){var r=Ls.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Li.set(t,r)}var Kh=function(){function e(){p(this,e),this.activeTargetIds=kc()}return m(e,[{key:"Xi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Yi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Gh=function(){function e(){p(this,e),this.Fr=new Kh,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return m(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.$r[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Fr.Zi(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.$r[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Fr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Fr=new Kh,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Xh=function(){function e(){p(this,e)}return m(e,[{key:"Br",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),$h=function(){function e(){var t=this;p(this,e),this.Lr=function(){return t.Ur()},this.qr=function(){return t.Kr()},this.Gr=[],this.Qr()}return m(e,[{key:"Br",value:function(e){this.Gr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}},{key:"Qr",value:function(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}},{key:"Ur",value:function(){ps("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=E(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Kr",value:function(){ps("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=E(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"V",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Zh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Jh=function(){function e(t){p(this,e),this.jr=t.jr,this.Wr=t.Wr}return m(e,[{key:"zr",value:function(e){this.Hr=e}},{key:"Jr",value:function(e){this.Yr=e}},{key:"onMessage",value:function(e){this.Xr=e}},{key:"close",value:function(){this.Wr()}},{key:"send",value:function(e){this.jr(e)}},{key:"Zr",value:function(){this.Hr()}},{key:"eo",value:function(e){this.Yr(e)}},{key:"no",value:function(e){this.Xr(e)}}]),e}(),ef=function(e){g(n,e);var t=C(n);function n(e){var r;return p(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return m(n,[{key:"co",value:function(e,t,n,r){return new Promise((function(i,a){var o=new us;o.listenOnce(rs.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case ns.NO_ERROR:var t=o.getResponseJson();ps("Connection","XHR received:",JSON.stringify(t)),i(t);break;case ns.TIMEOUT:ps("Connection",'RPC "'+e+'" timed out'),a(new bs(ws.DEADLINE_EXCEEDED,"Request time out"));break;case ns.HTTP_ERROR:var n=o.getStatus();if(ps("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(ws).indexOf(t)>=0?t:ws.UNKNOWN}(r.status);a(new bs(s,r.message))}else a(new bs(ws.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new bs(ws.UNAVAILABLE,"Connection failed."));break;default:gs()}}finally{ps("Connection",'RPC "'+e+'" completed.')}}));var s=JSON.stringify(r);o.send(t,"POST",s,n,15)}))}},{key:"ho",value:function(e,t,n){var r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=es(),a=ts(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new os({})),this.uo(o.initMessageHeaders,t,n),ft()||pt()||ht().indexOf("Electron/")>=0||function(){var e=ht();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()||ht().indexOf("MSAppHost/")>=0||dt()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");ps("Connection","Creating WebChannel: "+s,o);var u=i.createWebChannel(s,o),l=!1,c=!1,h=new Jh({jr:function(e){c?ps("Connection","Not sending because WebChannel is closed:",e):(l||(ps("Connection","Opening WebChannel transport."),u.open(),l=!0),ps("Connection","WebChannel sending:",e),u.send(e))},Wr:function(){return u.close()}}),f=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return f(u,ss.EventType.OPEN,(function(){c||ps("Connection","WebChannel transport opened.")})),f(u,ss.EventType.CLOSE,(function(){c||(c=!0,ps("Connection","WebChannel transport closed"),h.eo())})),f(u,ss.EventType.ERROR,(function(e){c||(c=!0,ms("Connection","WebChannel transport errored:",e),h.eo(new bs(ws.UNAVAILABLE,"The operation could not be completed")))})),f(u,ss.EventType.MESSAGE,(function(e){var t;if(!c){var n=e.data[0];ks(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){ps("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Jl[e];if(void 0!==t)return ac(t)}(a),s=i.message;void 0===o&&(o=ws.INTERNAL,s="Unknown error status: "+a+" with message "+i.message),c=!0,h.eo(new bs(o,s)),u.close()}else ps("Connection","WebChannel received:",n),h.no(n)}})),f(a,is.STAT_EVENT,(function(e){e.stat===as.PROXY?ps("Connection","Detected buffering proxy"):e.stat===as.NOPROXY&&ps("Connection","Detected no buffering proxy")})),setTimeout((function(){h.Zr()}),0),h}}]),n}(function(){function e(t){p(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.so=n+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return m(e,[{key:"ro",value:function(e,t,n,r,i){var a=this.oo(e,t);ps("RestConnection","Sending: ",a,n);var o={};return this.uo(o,r,i),this.co(e,a,o,n).then((function(e){return ps("RestConnection","Received: ",e),e}),(function(t){throw ms("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"ao",value:function(e,t,n,r,i,a){return this.ro(e,t,n,r,i)}},{key:"uo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+hs,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"oo",value:function(e,t){var n=Zh[e];return"".concat(this.so,"/v1/").concat(t,":").concat(n)}}]),e}());function tf(){return"undefined"!=typeof document?document:null}function nf(e){return new Ac(e,!0)}var rf=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;p(this,e),this.js=t,this.timerId=n,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}return m(e,[{key:"reset",value:function(){this.wo=0}},{key:"po",value:function(){this.wo=this._o}},{key:"Io",value:function(e){var t=this;this.cancel();var n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,n-r);i>0&&ps("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.wo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.mo=this.js.enqueueAfterDelay(this.timerId,i,(function(){return t.yo=Date.now(),e()})),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}},{key:"Eo",value:function(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}},{key:"cancel",value:function(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}},{key:"To",value:function(){return(Math.random()-.5)*this.wo}}]),e}(),af=function(){function e(t,n,r,i,a,o,s,u){p(this,e),this.js=t,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new rf(t,n)}return m(e,[{key:"Do",value:function(){return 1===this.state||5===this.state||this.Co()}},{key:"Co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.xo()}},{key:"stop",value:function(){var e=Ke(He().mark((function e(){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Do(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"No",value:function(){this.state=0,this.So.reset()}},{key:"ko",value:function(){var e=this;this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,(function(){return e.Mo()})))}},{key:"Oo",value:function(e){this.Fo(),this.stream.send(e)}},{key:"Mo",value:function(){var e=Ke(He().mark((function e(){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Co()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"$o",value:function(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}},{key:"close",value:function(){var e=Ke(He().mark((function e(t,n){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fo(),this.$o(),this.So.cancel(),this.Po++,4!==t?this.So.reset():n&&n.code===ws.RESOURCE_EXHAUSTED?(vs(n.toString()),vs("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):n&&n.code===ws.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Bo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Jr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=u(t,2),i=r[0],a=r[1];e.Po===n&&e.Uo(i,a)}),(function(n){t((function(){var t=new bs(ws.UNKNOWN,"Fetching auth token failed: "+n.message);return e.qo(t)}))}))}},{key:"Uo",value:function(e,t){var n=this,r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr((function(){r((function(){return n.state=2,n.Vo=n.js.enqueueAfterDelay(n.Ro,1e4,(function(){return n.Co()&&(n.state=3),Promise.resolve()})),n.listener.zr()}))})),this.stream.Jr((function(e){r((function(){return n.qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"xo",value:function(){var e=this;this.state=5,this.So.Io(Ke(He().mark((function t(){return He().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"qo",value:function(e){return ps("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Lo",value:function(e){var t=this;return function(n){t.js.enqueueAndForget((function(){return t.Po===e?n():(ps("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),of=function(e){g(n,e);var t=C(n);function n(e,r,i,a,o,s){var u;return p(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).wt=o,u}return m(n,[{key:"Ko",value:function(e,t){return this.bo.ho("Listen",e,t)}},{key:"onMessage",value:function(e){this.So.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:gs()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.dt?(ks(void 0===t||"string"==typeof t),lu.fromBase64String(t||"")):(ks(void 0===t||t instanceof Uint8Array),lu.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?ws.UNKNOWN:ac(e.code);return new bs(t,e.message||"")}(o);n=new Cc(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var l=Bc(e,u.document.name),c=Oc(u.document.updateTime),h=new Fu({mapValue:{fields:u.document.fields}}),f=Uu.newFoundDocument(l,c,h),d=u.targetIds||[],p=u.removedTargetIds||[];n=new bc(d,p,f.key,f)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var m=Bc(e,v.document),y=v.readTime?Oc(v.readTime):Ls.min(),g=Uu.newNoDocument(m,y),k=v.removedTargetIds||[];n=new bc([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var _=t.documentRemove;_.document;var w=Bc(e,_.document),b=_.removedTargetIds||[];n=new bc([],b,w,null)}else{if(!("filter"in t))return gs();t.filter;var x=t.filter;x.targetId;var C=x.count||0,T=new rc(C),S=x.targetId;n=new xc(S,T)}return n}(this.wt,e),n=function(e){if(!("targetChange"in e))return Ls.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Ls.min():t.readTime?Oc(t.readTime):Ls.min()}(e);return this.listener.Go(t,n)}},{key:"Qo",value:function(e){var t={};t.database=zc(this.wt),t.addTarget=function(e,t){var n,r=t.target;return(n=Qu(r)?{documents:Hc(e,r)}:{query:Yc(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Rc(e,t.resumeToken):t.snapshotVersion.compareTo(Ls.min())>0&&(n.readTime=Dc(e,t.snapshotVersion.toTimestamp())),n}(this.wt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return gs()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.wt,e);n&&(t.labels=n),this.Oo(t)}},{key:"jo",value:function(e){var t={};t.database=zc(this.wt),t.removeTarget=e,this.Oo(t)}}]),n}(af),sf=function(e){g(n,e);var t=C(n);function n(e,r,i,a,o,s){var u;return p(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).wt=o,u.Wo=!1,u}return m(n,[{key:"zo",get:function(){return this.Wo}},{key:"start",value:function(){this.Wo=!1,this.lastStreamToken=void 0,Xe(k(n.prototype),"start",this).call(this)}},{key:"Bo",value:function(){this.Wo&&this.Ho([])}},{key:"Ko",value:function(e,t){return this.bo.ho("Write",e,t)}},{key:"onMessage",value:function(e){if(ks(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();var t=function(e,t){return e&&e.length>0?(ks(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Oc(e.updateTime):Oc(t);return n.isEqual(Ls.min())&&(n=Oc(t)),new Bl(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Oc(e.commitTime);return this.listener.Jo(n,t)}return ks(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}},{key:"Xo",value:function(){var e={};e.database=zc(this.wt),this.Oo(e)}},{key:"Ho",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Qc(t.wt,e)}))};this.Oo(n)}}]),n}(af),uf=function(e){g(n,e);var t=C(n);function n(e,r,i,a){var o;return p(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.bo=i,o.wt=a,o.Zo=!1,o}return m(n,[{key:"tu",value:function(){if(this.Zo)throw new bs(ws.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ro",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=u(i,2),o=a[0],s=a[1];return r.bo.ro(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===ws.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new bs(ws.UNKNOWN,e.toString())}))}},{key:"ao",value:function(e,t,n,r){var i=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=u(a,2),s=o[0],l=o[1];return i.bo.ao(e,t,n,s,l,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===ws.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new bs(ws.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Zo=!0}}]),n}(function(){return m((function e(){p(this,e)}))}()),lf=function(){function e(t,n){p(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}return m(e,[{key:"iu",value:function(){var e=this;0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.nu=null,e.ou("Backend didn't respond within 10 seconds."),e.ru("Offline"),Promise.resolve()})))}},{key:"uu",value:function(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ru("Offline")))}},{key:"set",value:function(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}},{key:"ru",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"ou",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.su?(vs(t),this.su=!1):ps("OnlineStateTracker",t)}},{key:"cu",value:function(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}]),e}(),cf=m((function e(t,n,r,i,a){var o=this;p(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br((function(e){r.enqueueAndForget(Ke(He().mark((function e(){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=wf(o),!e.t0){e.next=5;break}return ps("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Ke(He().mark((function e(t){var n;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=_s(t)).lu.add(4),e.next=4,df(n);case 4:return n._u.set("Unknown"),n.lu.delete(4),e.next=8,hf(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this._u=new lf(r,i)}));function hf(e){return ff.apply(this,arguments)}function ff(){return ff=Ke(He().mark((function e(t){var n,r,i;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!wf(t)){e.next=18;break}n=E(t.fu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),ff.apply(this,arguments)}function df(e){return pf.apply(this,arguments)}function pf(){return pf=Ke(He().mark((function e(t){var n,r,i;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=E(t.fu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),pf.apply(this,arguments)}function vf(e,t){var n=_s(e);n.hu.has(t.targetId)||(n.hu.set(t.targetId,t),_f(n)?kf(n):Xf(n).Co()&&yf(n,t))}function mf(e,t){var n=_s(e),r=Xf(n);n.hu.delete(t),r.Co()&&gf(n,t),0===n.hu.size&&(r.Co()?r.ko():wf(n)&&n._u.set("Unknown"))}function yf(e,t){e.wu.Nt(t.targetId),Xf(e).Qo(t)}function gf(e,t){e.wu.Nt(t),Xf(e).jo(t)}function kf(e){e.wu=new Sc({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},te:function(t){return e.hu.get(t)||null}}),Xf(e).start(),e._u.iu()}function _f(e){return wf(e)&&!Xf(e).Do()&&e.hu.size>0}function wf(e){return 0===_s(e).lu.size}function bf(e){e.wu=void 0}function xf(e){return Cf.apply(this,arguments)}function Cf(){return Cf=Ke(He().mark((function e(t){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.hu.forEach((function(e,n){yf(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Cf.apply(this,arguments)}function Tf(e,t){return Sf.apply(this,arguments)}function Sf(){return Sf=Ke(He().mark((function e(t,n){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:bf(t),_f(t)?(t._u.uu(n),kf(t)):t._u.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Sf.apply(this,arguments)}function Ef(e,t,n){return If.apply(this,arguments)}function If(){return If=Ke(He().mark((function e(t,n,r){var i;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._u.set("Online"),!(n instanceof Cc&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Ke(He().mark((function e(t,n){var r,i,a,o;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=E(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.hu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.hu.delete(o),t.wu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),ps("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Mf(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof bc?t.wu.Ut(n):n instanceof xc?t.wu.zt(n):t.wu.Gt(n),r.isEqual(Ls.min())){e.next=29;break}return e.prev=14,e.next=17,Bh(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.wu.Yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.hu.get(r);i&&e.hu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.hu.get(t);if(n){e.hu.set(t,n.withResumeToken(lu.EMPTY_BYTE_STRING,n.snapshotVersion)),gf(e,t);var r=new ch(n.target,t,1,n.sequenceNumber);yf(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),ps("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Mf(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),If.apply(this,arguments)}function Mf(e,t,n){return Nf.apply(this,arguments)}function Nf(){return Nf=Ke(He().mark((function e(t,n,r){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Zs(n)){e.next=2;break}throw n;case 2:return t.lu.add(1),e.next=5,df(t);case 5:t._u.set("Offline"),r||(r=function(){return Bh(t.localStore)}),t.asyncQueue.enqueueRetryable(Ke(He().mark((function e(){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ps("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.lu.delete(1),e.next=6,hf(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Nf.apply(this,arguments)}function Af(e,t){return t().catch((function(n){return Mf(e,n,t)}))}function Df(e){return Rf.apply(this,arguments)}function Rf(){return Rf=Ke(He().mark((function e(t){var n,r,i,a;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=_s(t),r=$f(n),i=n.au.length>0?n.au[n.au.length-1].batchId:-1;case 2:if(!Pf(n)){e.next=19;break}return e.prev=3,e.next=6,zh(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.au.length&&r.ko(),e.abrupt("break",19);case 10:i=a.batchId,Of(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Mf(n,e.t0);case 17:e.next=2;break;case 19:Lf(n)&&jf(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Rf.apply(this,arguments)}function Pf(e){return wf(e)&&e.au.length<10}function Of(e,t){e.au.push(t);var n=$f(e);n.Co()&&n.zo&&n.Ho(t.mutations)}function Lf(e){return wf(e)&&!$f(e).Do()&&e.au.length>0}function jf(e){$f(e).start()}function Ff(e){return Bf.apply(this,arguments)}function Bf(){return Bf=Ke(He().mark((function e(t){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:$f(t).Xo();case 1:case"end":return e.stop()}}),e)}))),Bf.apply(this,arguments)}function Uf(e){return Vf.apply(this,arguments)}function Vf(){return Vf=Ke(He().mark((function e(t){var n,r,i,a;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=$f(t),r=E(t.au);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Ho(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Vf.apply(this,arguments)}function zf(e,t,n){return qf.apply(this,arguments)}function qf(){return qf=Ke(He().mark((function e(t,n,r){var i,a;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.au.shift(),a=uh.from(i,n,r),e.next=3,Af(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Df(t);case 5:case"end":return e.stop()}}),e)}))),qf.apply(this,arguments)}function Wf(e,t){return Qf.apply(this,arguments)}function Qf(){return Qf=Ke(He().mark((function e(t,n){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&$f(t).zo,!e.t0){e.next=4;break}return e.next=4,function(){var e=Ke(He().mark((function e(t,n){var r,i;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ic(i=n.code)||i===ws.ABORTED){e.next=7;break}return r=t.au.shift(),$f(t).No(),e.next=5,Af(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Df(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Lf(t)&&jf(t);case 5:case"end":return e.stop()}}),e)}))),Qf.apply(this,arguments)}function Hf(e,t){return Yf.apply(this,arguments)}function Yf(){return Yf=Ke(He().mark((function e(t,n){var r,i;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=_s(t)).asyncQueue.verifyOperationInProgress(),ps("RemoteStore","RemoteStore received new credentials"),i=wf(r),r.lu.add(3),e.next=6,df(r);case 6:return i&&r._u.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.lu.delete(3),e.next=12,hf(r);case 12:case"end":return e.stop()}}),e)}))),Yf.apply(this,arguments)}function Kf(e,t){return Gf.apply(this,arguments)}function Gf(){return Gf=Ke(He().mark((function e(t,n){var r;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=_s(t),!n){e.next=7;break}return r.lu.delete(2),e.next=5,hf(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.lu.add(2),e.next=12,df(r);case 12:r._u.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),Gf.apply(this,arguments)}function Xf(e){return e.mu||(e.mu=function(e,t,n){var r=_s(e);return r.tu(),new of(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:xf.bind(null,e),Jr:Tf.bind(null,e),Go:Ef.bind(null,e)}),e.fu.push(function(){var t=Ke(He().mark((function t(n){return He().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.mu.No(),_f(e)?kf(e):e._u.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.mu.stop();case 6:bf(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.mu}function $f(e){return e.gu||(e.gu=function(e,t,n){var r=_s(e);return r.tu(),new sf(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:Ff.bind(null,e),Jr:Wf.bind(null,e),Yo:Uf.bind(null,e),Jo:zf.bind(null,e)}),e.fu.push(function(){var t=Ke(He().mark((function t(n){return He().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.gu.No(),t.next=4,Df(e);case 4:t.next=9;break;case 6:return t.next=8,e.gu.stop();case 8:e.au.length>0&&(ps("RemoteStore","Stopping write stream with ".concat(e.au.length," pending writes")),e.au=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}var Zf=function(){function e(t,n,r,i,a){p(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new xs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return m(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new bs(ws.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Jf(e,t){if(vs("AsyncQueue","".concat(t,": ").concat(e)),Zs(e))return new bs(ws.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var ed=function(){function e(t){p(this,e),this.comparator=t?function(e,n){return t(e,n)||Vs.comparator(e.key,n.key)}:function(e,t){return Vs.comparator(e.key,t.key)},this.keyedMap=cc(),this.sortedSet=new ru(this.comparator)}return m(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),td=function(){function e(){p(this,e),this.yu=new ru(Vs.comparator)}return m(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.yu.get(t);n?0!==e.type&&3===n.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==n.type?this.yu=this.yu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.yu=this.yu.remove(t):1===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):gs():this.yu=this.yu.insert(t,e)}},{key:"pu",value:function(){var e=[];return this.yu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),nd=function(){function e(t,n,r,i,a,o,s,u){p(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u}return m(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ml(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,ed.emptySet(n),a,r,i,!0,!1)}}]),e}(),rd=m((function e(){p(this,e),this.Iu=void 0,this.listeners=[]})),id=m((function e(){p(this,e),this.queries=new oc((function(e){return yl(e)}),ml),this.onlineState="Unknown",this.Tu=new Set}));function ad(e,t){return od.apply(this,arguments)}function od(){return od=Ke(He().mark((function e(t,n){var r,i,a,o,s;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=_s(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new rd),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Iu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=Jf(e.t0,"Initialization of query '".concat(gl(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.Eu(r.onlineState),o.Iu&&n.Au(o.Iu)&&hd(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),od.apply(this,arguments)}function sd(e,t){return ud.apply(this,arguments)}function ud(){return ud=Ke(He().mark((function e(t,n){var r,i,a,o,s;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=_s(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),ud.apply(this,arguments)}function ld(e,t){var n,r=_s(e),i=!1,a=E(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var l,c=E(u.listeners);try{for(c.s();!(l=c.n()).done;){l.value.Au(o)&&(i=!0)}}catch(h){c.e(h)}finally{c.f()}u.Iu=o}}}catch(h){a.e(h)}finally{a.f()}i&&hd(r)}function cd(e,t,n){var r=_s(e),i=r.queries.get(t);if(i){var a,o=E(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function hd(e){e.Tu.forEach((function(e){e.next()}))}var fd=function(){function e(t,n,r){p(this,e),this.query=t,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}return m(e,[{key:"Au",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=E(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new nd(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),a=!0):this.Vu(e,this.onlineState)&&(this.Su(e),a=!0),this.Pu=e,a}},{key:"onError",value:function(e){this.Ru.error(e)}},{key:"Eu",value:function(e){this.onlineState=e;var t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}},{key:"Vu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Du||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Su",value:function(e){e=nd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}]),e}();var dd=m((function e(t){p(this,e),this.key=t})),pd=m((function e(t){p(this,e),this.key=t})),vd=function(){function e(t,n){p(this,e),this.query=t,this.Fu=n,this.$u=null,this.current=!1,this.Bu=yc(),this.mutatedKeys=yc(),this.Lu=wl(t),this.Uu=new ed(this.Lu)}return m(e,[{key:"qu",get:function(){return this.Fu}},{key:"Ku",value:function(e,t){var n=this,r=t?t.Gu:new td,i=t?t.Uu:this.Uu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var c=i.get(e),h=kl(n.query,t)?t:null,f=!!c&&n.mutatedKeys.has(c.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;c&&h?c.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Qu(c,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.Lu(h,u)>0||l&&n.Lu(h,l)<0)&&(s=!0)):!c&&h?(r.track({type:0,doc:h}),p=!0):c&&!h&&(r.track({type:1,doc:c}),p=!0,(u||l)&&(s=!0)),p&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var c="F"===this.query.limitType?o.last():o.first();o=o.delete(c.key),a=a.delete(c.key),r.track({type:1,doc:c})}return{Uu:o,Gu:r,Mi:s,mutatedKeys:a}}},{key:"Qu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;var a=e.Gu.pu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gs()}};return n(e)-n(t)}(e.type,t.type)||r.Lu(e.doc,t.doc)})),this.ju(n);var o=t?this.Wu():[],s=0===this.Bu.size&&this.current?1:0,u=s!==this.$u;return this.$u=s,0!==a.length||u?{snapshot:new nd(this.query,e.Uu,i,a,e.mutatedKeys,0===s,u,!1),zu:o}:{zu:o}}},{key:"Eu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new td,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{zu:[]}}},{key:"Hu",value:function(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}},{key:"ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Fu=t.Fu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Fu=t.Fu.delete(e)})),this.current=e.current)}},{key:"Wu",value:function(){var e=this;if(!this.current)return[];var t=this.Bu;this.Bu=yc(),this.Uu.forEach((function(t){e.Hu(t.key)&&(e.Bu=e.Bu.add(t.key))}));var n=[];return t.forEach((function(t){e.Bu.has(t)||n.push(new pd(t))})),this.Bu.forEach((function(e){t.has(e)||n.push(new dd(e))})),n}},{key:"Ju",value:function(e){this.Fu=e.ji,this.Bu=yc();var t=this.Ku(e.documents);return this.applyChanges(t,!0)}},{key:"Yu",value:function(){return nd.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}]),e}(),md=m((function e(t,n,r){p(this,e),this.query=t,this.targetId=n,this.view=r})),yd=m((function e(t){p(this,e),this.key=t,this.Xu=!1})),gd=function(){function e(t,n,r,i,a,o){p(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Zu={},this.tc=new oc((function(e){return yl(e)}),ml),this.ec=new Map,this.nc=new Set,this.sc=new ru(Vs.comparator),this.ic=new Map,this.rc=new xh,this.oc={},this.uc=new Map,this.cc=yh.Rn(),this.onlineState="Unknown",this.ac=void 0}return m(e,[{key:"isPrimaryClient",get:function(){return!0===this.ac}}]),e}();function kd(e,t){return _d.apply(this,arguments)}function _d(){return _d=Ke(He().mark((function e(t,n){var r,i,a,o,s,u;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Kd(t),!(o=r.tc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Yu(),e.next=15;break;case 6:return e.next=8,qh(r.localStore,pl(n));case 8:return s=e.sent,r.isPrimaryClient&&vf(r.remoteStore,s),u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=14,wd(r,n,i,"current"===u);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),_d.apply(this,arguments)}function wd(e,t,n,r){return bd.apply(this,arguments)}function bd(){return bd=Ke(He().mark((function e(t,n,r,i){var a,o,s,u,l,c;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.hc=function(e,n,r){return function(){var e=Ke(He().mark((function e(t,n,r,i){var a,o,s;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Ku(r),e.t0=a.Mi,!e.t0){e.next=6;break}return e.next=5,Hh(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Ku(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Ud(t,n.targetId,s.zu),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Hh(t.localStore,n,!0);case 3:return a=e.sent,o=new vd(n,a.ji),s=o.Ku(a.documents),u=wc.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),l=o.applyChanges(s,t.isPrimaryClient,u),Ud(t,r,l.zu),c=new md(n,r,o),e.abrupt("return",(t.tc.set(n,c),t.ec.has(r)?t.ec.get(r).push(n):t.ec.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),bd.apply(this,arguments)}function xd(e,t){return Cd.apply(this,arguments)}function Cd(){return Cd=Ke(He().mark((function e(t,n){var r,i,a;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=_s(t),i=r.tc.get(n),!((a=r.ec.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ec.set(i.targetId,a.filter((function(e){return!ml(e,n)}))),void r.tc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Wh(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),mf(r.remoteStore,i.targetId),Fd(r,i.targetId)})).catch(Gs);case 9:e.next=14;break;case 11:return Fd(r,i.targetId),e.next=14,Wh(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Cd.apply(this,arguments)}function Td(e,t,n){return Sd.apply(this,arguments)}function Sd(){return Sd=Ke(He().mark((function e(t,n,r){var i,a,o;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Gd(t),e.prev=1,e.next=4,function(e,t){var n,r,i=_s(e),a=Os.now(),o=t.reduce((function(e,t){return e.add(t.key)}),yc());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var s=uc(),u=yc();return i.Ui.getEntries(e,o).next((function(e){(s=e).forEach((function(e,t){t.isValidDocument()||(u=u.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,s)})).next((function(r){n=r;var o,s=[],u=E(t);try{for(u.s();!(o=u.n()).done;){var l=o.value,c=Hl(l,n.get(l.key).overlayedDocument);null!=c&&s.push(new Gl(l.key,c,Bu(c.value.mapValue),Ul.exists(!0)))}}catch(h){u.e(h)}finally{u.f()}return i.mutationQueue.addMutationBatch(e,a,s,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,u);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:hc(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.oc[e.currentUser.toKey()];r||(r=new ru(Rs)),r=r.insert(t,n),e.oc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,qd(i,a.changes);case 9:return e.next=11,Df(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Jf(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Sd.apply(this,arguments)}function Ed(e,t){return Id.apply(this,arguments)}function Id(){return Id=Ke(He().mark((function e(t,n){var r,i;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_s(t),e.prev=1,e.next=4,Uh(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ic.get(t);n&&(ks(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Xu=!0:e.modifiedDocuments.size>0?ks(n.Xu):e.removedDocuments.size>0&&(ks(n.Xu),n.Xu=!1))})),e.next=8,qd(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Gs(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Id.apply(this,arguments)}function Md(e,t,n){var r=_s(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.tc.forEach((function(e,n){var r=n.view.Eu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=_s(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=E(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Eu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&hd(n)}(r.eventManager,t),i.length&&r.Zu.Go(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Nd(e,t,n){return Ad.apply(this,arguments)}function Ad(){return Ad=Ke(He().mark((function e(t,n,r){var i,a,o,s,u,l;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=_s(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.ic.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new ru(Vs.comparator)).insert(o,Uu.newNoDocument(o,Ls.min())),u=yc().add(o),l=new _c(Ls.min(),new Map,new ou(Rs),s,u),e.next=9,Ed(i,l);case 9:i.sc=i.sc.remove(o),i.ic.delete(n),zd(i),e.next=16;break;case 14:return e.next=16,Wh(i.localStore,n,!1).then((function(){return Fd(i,n,r)})).catch(Gs);case 16:case"end":return e.stop()}}),e)}))),Ad.apply(this,arguments)}function Dd(e,t){return Rd.apply(this,arguments)}function Rd(){return Rd=Ke(He().mark((function e(t,n){var r,i,a;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_s(t),i=n.batch.batchId,e.prev=1,e.next=4,Fh(r.localStore,n);case 4:return a=e.sent,jd(r,i,null),Ld(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,qd(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Gs(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Rd.apply(this,arguments)}function Pd(e,t,n){return Od.apply(this,arguments)}function Od(){return Od=Ke(He().mark((function e(t,n,r){var i,a;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_s(t),e.prev=1,e.next=4,function(e,t){var n=_s(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return ks(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,jd(i,n,r),Ld(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,qd(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Gs(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Od.apply(this,arguments)}function Ld(e,t){(e.uc.get(t)||[]).forEach((function(e){e.resolve()})),e.uc.delete(t)}function jd(e,t,n){var r=_s(e),i=r.oc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.oc[r.currentUser.toKey()]=i}}function Fd(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=E(e.ec.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.tc.delete(a),n&&e.Zu.lc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ec.delete(t),e.isPrimaryClient&&e.rc.us(t).forEach((function(t){e.rc.containsKey(t)||Bd(e,t)}))}function Bd(e,t){e.nc.delete(t.path.canonicalString());var n=e.sc.get(t);null!==n&&(mf(e.remoteStore,n),e.sc=e.sc.remove(t),e.ic.delete(n),zd(e))}function Ud(e,t,n){var r,i=E(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof dd?(e.rc.addReference(a.key,t),Vd(e,a)):a instanceof pd?(ps("SyncEngine","Document no longer in limbo: "+a.key),e.rc.removeReference(a.key,t),e.rc.containsKey(a.key)||Bd(e,a.key)):gs()}}catch(o){i.e(o)}finally{i.f()}}function Vd(e,t){var n=t.key,r=n.path.canonicalString();e.sc.get(n)||e.nc.has(r)||(ps("SyncEngine","New document in limbo: "+n),e.nc.add(r),zd(e))}function zd(e){for(;e.nc.size>0&&e.sc.size<e.maxConcurrentLimboResolutions;){var t=e.nc.values().next().value;e.nc.delete(t);var n=new Vs(Fs.fromString(t)),r=e.cc.next();e.ic.set(r,new yd(n)),e.sc=e.sc.insert(n,r),vf(e.remoteStore,new ch(pl(ul(n.path)),r,2,Js.ot))}}function qd(e,t,n){return Wd.apply(this,arguments)}function Wd(){return Wd=Ke(He().mark((function e(t,n,r){var i,a,o,s;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=_s(t),a=[],o=[],s=[],e.t0=i.tc.isEmpty(),e.t0){e.next=9;break}return i.tc.forEach((function(e,t){s.push(i.hc(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=Dh.Vi(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.Zu.Go(a),e.next=9,function(){var e=Ke(He().mark((function e(t,n){var r,i,a,o,s,u,l,c;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_s(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return $s.forEach(n,(function(t){return $s.forEach(t.Pi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return $s.forEach(t.vi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Zs(e.t0)){e.next=10;break}throw e.t0;case 10:ps("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=E(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.$i.get(s),l=u.snapshotVersion,c=u.withLastLimboFreeSnapshotVersion(l),r.$i=r.$i.insert(s,c))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),Wd.apply(this,arguments)}function Qd(e,t){return Hd.apply(this,arguments)}function Hd(){return Hd=Ke(He().mark((function e(t,n){var r,i;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=_s(t)).currentUser.isEqual(n)){e.next=11;break}return ps("SyncEngine","User change. New user:",n.toKey()),e.next=5,Lh(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.uc.forEach((function(e){e.forEach((function(e){e.reject(new bs(ws.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.uc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,qd(r,i.Ki);case 11:case"end":return e.stop()}}),e)}))),Hd.apply(this,arguments)}function Yd(e,t){var n=_s(e),r=n.ic.get(t);if(r&&r.Xu)return yc().add(r.key);var i=yc(),a=n.ec.get(t);if(!a)return i;var o,s=E(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,l=n.tc.get(u);i=i.unionWith(l.view.qu)}}catch(c){s.e(c)}finally{s.f()}return i}function Kd(e){var t=_s(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Ed.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Yd.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Nd.bind(null,t),t.Zu.Go=ld.bind(null,t.eventManager),t.Zu.lc=cd.bind(null,t.eventManager),t}function Gd(e){var t=_s(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Dd.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Pd.bind(null,t),t}var Xd=function(){function e(){p(this,e),this.synchronizeTabs=!1}return m(e,[{key:"initialize",value:function(){var e=Ke(He().mark((function e(t){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.wt=nf(t.databaseInfo.databaseId),this.sharedClientState=this.dc(t),this.persistence=this._c(t),e.next=5,this.persistence.start();case 5:this.localStore=this.wc(t),this.gcScheduler=this.mc(t,this.localStore),this.indexBackfillerScheduler=this.gc(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"mc",value:function(e,t){return null}},{key:"gc",value:function(e,t){return null}},{key:"wc",value:function(e){return Oh(this.persistence,new Rh,e.initialUser,this.wt)}},{key:"_c",value:function(e){return new Mh(Ah.Os,this.wt)}},{key:"dc",value:function(e){return new Gh}},{key:"terminate",value:function(){var e=Ke(He().mark((function e(){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),$d=function(){function e(){p(this,e)}return m(e,[{key:"initialize",value:function(){var e=Ke(He().mark((function e(t,n){var r=this;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Md(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Qd.bind(null,this.syncEngine),e.next=12,Kf(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new id}},{key:"createDatastore",value:function(e){var t,n=nf(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new ef(t));return function(e,t,n,r){return new uf(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Md(o.syncEngine,e,0)},a=$h.V()?new $h:new Xh,new cf(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new gd(e,t,n,r,i,a);return o&&(s.ac=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Ke(He().mark((function e(t){var n;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_s(t),ps("RemoteStore","RemoteStore shutting down."),n.lu.add(5),e.next=5,df(n);case 5:n.du.shutdown(),n._u.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();var Zd=function(){function e(t){p(this,e),this.observer=t,this.muted=!1}return m(e,[{key:"next",value:function(e){this.observer.next&&this.Ic(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ic(this.observer.error,e):vs("Uncaught Error in snapshot listener:",e)}},{key:"Tc",value:function(){this.muted=!0}},{key:"Ic",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Jd=function(){function e(t,n,r,i){var a=this;p(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=cs.UNAUTHENTICATED,this.clientId=Ds.I(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Ke(He().mark((function e(t){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ps("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return ps("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return m(e,[{key:"getConfiguration",value:function(){var e=Ke(He().mark((function e(){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new bs(ws.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new xs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Ke(He().mark((function n(){var r;return He().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Jf(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function ep(e,t){return tp.apply(this,arguments)}function tp(){return tp=Ke(He().mark((function e(t,n){var r,i;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),ps("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Ke(He().mark((function e(t){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Lh(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),tp.apply(this,arguments)}function np(e,t){return rp.apply(this,arguments)}function rp(){return rp=Ke(He().mark((function e(t,n){var r,i;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,ip(t);case 3:return r=e.sent,ps("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Hf(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Hf(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),rp.apply(this,arguments)}function ip(e){return ap.apply(this,arguments)}function ap(){return ap=Ke(He().mark((function e(t){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return ps("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,ep(t,new Xd);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),ap.apply(this,arguments)}function op(e){return sp.apply(this,arguments)}function sp(){return sp=Ke(He().mark((function e(t){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return ps("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,np(t,new $d);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),sp.apply(this,arguments)}function up(e){return op(e).then((function(e){return e.syncEngine}))}function lp(e){return cp.apply(this,arguments)}function cp(){return cp=Ke(He().mark((function e(t){var n,r;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,op(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=kd.bind(null,n.syncEngine),r.onUnlisten=xd.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),cp.apply(this,arguments)}function hp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new xs;return e.asyncQueue.enqueueAndForget(Ke(He().mark((function i(){return He().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Zd({next:function(n){t.enqueueAndForget((function(){return sd(e,o)})),n.fromCache&&"server"===r.source?i.reject(new bs(ws.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new fd(n,a,{includeMetadataChanges:!0,Du:!0});return ad(e,o)},i.next=3,lp(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var fp=new Map;function dp(e,t,n){if(!n)throw new bs(ws.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function pp(e){if(!Vs.isDocumentKey(e))throw new bs(ws.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function vp(e){if(Vs.isDocumentKey(e))throw new bs(ws.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function mp(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":gs()}function yp(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new bs(ws.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=mp(e);throw new bs(ws.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}var gp=function(){function e(t){var n;if(p(this,e),void 0===t.host){if(void 0!==t.ssl)throw new bs(ws.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new bs(ws.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,function(e,t,n,r){if(!0===t&&!0===r)throw new bs(ws.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return m(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),kp=function(){function e(t,n,r){p(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gp({}),this._settingsFrozen=!1,t instanceof gu?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new bs(ws.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gu(e.options.projectId)}(t))}return m(e,[{key:"app",get:function(){if(!this._app)throw new bs(ws.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new bs(ws.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gp(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ts;switch(e.type){case"gapi":var t=e.client;return ks(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Is(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new bs(ws.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=fp.get(e);t&&(ps("ComponentProvider","Removing Datastore"),fp.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();var _p=function(){function e(t,n,r){p(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return m(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new bp(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),wp=function(){function e(t,n,r){p(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return m(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),bp=function(e){g(n,e);var t=C(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this,e,r,ul(i)))._path=i,a.type="collection",a}return m(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new _p(this.firestore,null,new Vs(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(wp);function xp(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=jt(e),dp("collection","path",t),e instanceof kp){var a=Fs.fromString.apply(Fs,[t].concat(r));return vp(a),new bp(e,null,a)}if(!(e instanceof _p||e instanceof bp))throw new bs(ws.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Fs.fromString.apply(Fs,[t].concat(r)));return vp(o),new bp(e.firestore,null,o)}function Cp(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=jt(e),1===arguments.length&&(t=Ds.I()),dp("doc","path",t),e instanceof kp){var a=Fs.fromString.apply(Fs,[t].concat(r));return pp(a),new _p(e,null,new Vs(a))}if(!(e instanceof _p||e instanceof bp))throw new bs(ws.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Fs.fromString.apply(Fs,[t].concat(r)));return pp(o),new _p(e.firestore,e instanceof bp?e.converter:null,new Vs(o))}var Tp=function(){function e(){var t=this;p(this,e),this.Mc=Promise.resolve(),this.Oc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new rf(this,"async_queue_retry"),this.Kc=function(){var e=tf();e&&ps("AsyncQueue","Visibility state changed to "+e.visibilityState),t.So.Eo()};var n=tf();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Kc)}return m(e,[{key:"isShuttingDown",get:function(){return this.Fc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Gc(),this.Qc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;var t=tf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Gc(),this.Fc)return new Promise((function(){}));var n=new xs;return this.Qc((function(){return t.Fc&&t.Uc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Oc.push(e),t.jc()}))}},{key:"jc",value:function(){var e=Ke(He().mark((function e(){var t=this;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Oc.length){e.next=14;break}return e.prev=1,e.next=4,this.Oc[0]();case 4:this.Oc.shift(),this.So.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Zs(e.t0)){e.next=12;break}throw e.t0;case 12:ps("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Oc.length>0&&this.So.Io((function(){return t.jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Qc",value:function(e){var t=this,n=this.Mc.then((function(){return t.Lc=!0,e().catch((function(e){t.Bc=e,t.Lc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw vs("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Lc=!1,e}))}));return this.Mc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Gc(),this.qc.indexOf(e)>-1&&(t=0);var i=Zf.createAndSchedule(this,e,t,n,(function(e){return r.Wc(e)}));return this.$c.push(i),i}},{key:"Gc",value:function(){this.Bc&&gs()}},{key:"verifyOperationInProgress",value:function(){}},{key:"zc",value:function(){var e=Ke(He().mark((function e(){var t;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Mc,e.next=3,t;case 3:if(t!==this.Mc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t,n=E(this.$c);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Jc",value:function(e){var t=this;return this.zc().then((function(){t.$c.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=E(t.$c);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.zc()}))}},{key:"Yc",value:function(e){this.qc.push(e)}},{key:"Wc",value:function(e){var t=this.$c.indexOf(e);this.$c.splice(t,1)}}]),e}();function Sp(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=E(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var Ep=function(e){g(n,e);var t=C(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new Tp,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return m(n,[{key:"_terminate",value:function(){return this._firestoreClient||Mp(this),this._firestoreClient.terminate()}}]),n}(kp);function Ip(e){return e._firestoreClient||Mp(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Mp(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new yu(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Jd(e._authCredentials,e._appCheckCredentials,e._queue,r)}var Np=function(){function e(){p(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new bs(ws.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Us(n)}return m(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var Ap=function(){function e(t){p(this,e),this._byteString=t}return m(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(lu.fromBase64String(t))}catch(t){throw new bs(ws.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(lu.fromUint8Array(t))}}]),e}(),Dp=m((function e(t){p(this,e),this._methodName=t})),Rp=function(){function e(t,n){if(p(this,e),!isFinite(t)||t<-90||t>90)throw new bs(ws.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new bs(ws.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return m(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Rs(this._lat,e._lat)||Rs(this._long,e._long)}}]),e}(),Pp=/^__.*__$/,Op=function(){function e(t,n,r){p(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return m(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Gl(e,this.data,this.fieldMask,t,this.fieldTransforms):new Kl(e,this.data,t,this.fieldTransforms)}}]),e}(),Lp=function(){function e(t,n,r){p(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return m(e,[{key:"toMutation",value:function(e,t){return new Gl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function jp(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gs()}}var Fp=function(){function e(t,n,r,i,a,o){p(this,e),this.settings=t,this.databaseId=n,this.wt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Xc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return m(e,[{key:"path",get:function(){return this.settings.path}},{key:"Zc",get:function(){return this.settings.Zc}},{key:"ta",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ea",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.sa(e),r}},{key:"ia",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.Xc(),r}},{key:"ra",value:function(e){return this.ta({path:void 0,na:!0})}},{key:"oa",value:function(e){return ev(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Xc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.sa(this.path.get(e))}},{key:"sa",value:function(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(jp(this.Zc)&&Pp.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}]),e}(),Bp=function(){function e(t,n,r){p(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.wt=r||nf(t)}return m(e,[{key:"aa",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Fp({Zc:e,methodName:t,ca:n,path:Us.emptyPath(),na:!1,ua:r},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}]),e}();function Up(e){var t=e._freezeSettings(),n=nf(e._databaseId);return new Bp(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Vp(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.aa(a.merge||a.mergeFields?2:0,t,n,i);Xp("Data must be an object, but it was:",o,r);var s,u,l=Kp(r,o);if(a.merge)s=new uu(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var c,h=[],f=E(a.mergeFields);try{for(f.s();!(c=f.n()).done;){var d=c.value,p=$p(t,d,n);if(!o.contains(p))throw new bs(ws.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));tv(h,p)||h.push(p)}}catch(v){f.e(v)}finally{f.f()}s=new uu(h),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new Op(new Fu(l),s,u)}var zp=function(e){g(n,e);var t=C(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Zc)throw 1===e.Zc?e.oa("".concat(this._methodName,"() can only appear at the top level of your update data")):e.oa("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Dp);var qp=function(e){g(n,e);var t=C(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"_toFieldTransform",value:function(e){return new Fl(e.path,new Nl)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Dp);function Wp(e,t,n,r){var i=e.aa(1,t,n);Xp("Data must be an object, but it was:",i,r);var a=[],o=Fu.empty();tu(r,(function(e,r){var s=Jp(t,e,n);r=jt(r);var u=i.ia(s);if(r instanceof zp)a.push(s);else{var l=Yp(r,u);null!=l&&(a.push(s),o.set(s,l))}}));var s=new uu(a);return new Lp(o,s,i.fieldTransforms)}function Qp(e,t,n,r,i,a){var o=e.aa(1,t,n),s=[$p(t,r,n)],u=[i];if(a.length%2!=0)throw new bs(ws.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var l=0;l<a.length;l+=2)s.push($p(t,a[l])),u.push(a[l+1]);for(var c=[],h=Fu.empty(),f=s.length-1;f>=0;--f)if(!tv(c,s[f])){var d=s[f],p=u[f];p=jt(p);var v=o.ia(d);if(p instanceof zp)c.push(d);else{var m=Yp(p,v);null!=m&&(c.push(d),h.set(d,m))}}var y=new uu(c);return new Lp(h,y,o.fieldTransforms)}function Hp(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Yp(n,e.aa(r?4:3,t))}function Yp(e,t){if(Gp(e=jt(e)))return Xp("Unsupported field value:",t,e),Kp(e,t);if(e instanceof Dp)return function(e,t){if(!jp(t.Zc))throw t.oa("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.oa("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.na&&4!==t.Zc)throw t.oa("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=E(e);try{for(a.s();!(n=a.n()).done;){var o=Yp(n.value,t.ra(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=jt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Tl(t.wt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Os.fromDate(e);return{timestampValue:Dc(t.wt,n)}}if(e instanceof Os){var r=new Os(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Dc(t.wt,r)}}if(e instanceof Rp)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Ap)return{bytesValue:Rc(t.wt,e._byteString)};if(e instanceof _p){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.oa("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Lc(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.oa("Unsupported field value: ".concat(mp(e)))}(e,t)}function Kp(e,t){var n={};return nu(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):tu(e,(function(e,r){var i=Yp(r,t.ea(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Gp(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Os||e instanceof Rp||e instanceof Ap||e instanceof _p||e instanceof Dp)}function Xp(e,t,n){if(!Gp(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=mp(n);throw"an object"===r?t.oa(e+" a custom object"):t.oa(e+" "+r)}}function $p(e,t,n){if((t=jt(t))instanceof Np)return t._internalPath;if("string"==typeof t)return Jp(e,t);throw ev("Field path arguments must be of type string or ",e,!1,void 0,n)}var Zp=new RegExp("[~\\*/\\[\\]]");function Jp(e,t,n){if(t.search(Zp)>=0)throw ev("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return T(Np,d(t.split(".")))._internalPath}catch(r){throw ev("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function ev(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new bs(ws.INVALID_ARGUMENT,s+e+u)}function tv(e,t){return e.some((function(e){return e.isEqual(t)}))}var nv=function(){function e(t,n,r,i,a){p(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return m(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new _p(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new rv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(iv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),rv=function(e){g(n,e);var t=C(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"data",value:function(){return Xe(k(n.prototype),"data",this).call(this)}}]),n}(nv);function iv(e,t){return"string"==typeof t?Jp(e,t):t instanceof Np?t._internalPath:t._delegate._internalPath}var av=function(){function e(t,n){p(this,e),this.hasPendingWrites=t,this.fromCache=n}return m(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),ov=function(e){g(n,e);var t=C(n);function n(e,r,i,a,o,s){var u;return p(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return m(n,[{key:"exists",value:function(){return Xe(k(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new sv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(iv("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(nv),sv=function(e){g(n,e);var t=C(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Xe(k(n.prototype),"data",this).call(this,e)}}]),n}(ov),uv=function(){function e(t,n,r,i){p(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new av(i.hasPendingWrites,i.fromCache),this.query=r}return m(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new sv(n._firestore,n._userDataWriter,r.key,r,new av(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new bs(ws.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new sv(e._firestore,e._userDataWriter,t.doc.key,t.doc,new av(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new sv(e._firestore,e._userDataWriter,t.doc.key,t.doc,new av(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:lv(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function lv(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gs()}}function cv(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new bs(ws.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var hv=m((function e(){p(this,e)}));function fv(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var dv=function(e){g(n,e);var t=C(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this)).fa=e,a.da=r,a._a=i,a.type="where",a}return m(n,[{key:"_apply",value:function(e){var t=Up(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new bs(ws.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){gv(o,a);var u,l=[],c=E(o);try{for(c.s();!(u=c.n()).done;){var h=u.value;l.push(yv(r,e,h))}}catch(d){c.e(d)}finally{c.f()}s={arrayValue:{values:l}}}else s=yv(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||gv(o,a),s=Hp(n,"where",o,"in"===a||"not-in"===a);var f=Hu.create(i,a,s);return function(e,t){if(t.ht()){var n=hl(e);if(null!==n&&!n.isEqual(t.field))throw new bs(ws.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=cl(e);null!==r&&kv(e,t.field,r)}var i=function(e,t){var n,r=E(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new bs(ws.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new bs(ws.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,f),f}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new wp(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new ol(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(hv);function pv(e,t,n){var r=t,i=iv("where",e);return new dv(i,r,n)}var vv=function(e){g(n,e);var t=C(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).fa=e,i.wa=r,i.type="orderBy",i}return m(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new bs(ws.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new bs(ws.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new nl(t,n);return function(e,t){if(null===cl(e)){var n=hl(e);null!==n&&kv(e,n,t.field)}}(e,r),r}(e._query,this.fa,this.wa);return new wp(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new ol(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(hv);function mv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=t,r=iv("orderBy",e);return new vv(r,n)}function yv(e,t,n){if("string"==typeof(n=jt(n))){if(""===n)throw new bs(ws.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fl(t)&&-1!==n.indexOf("/"))throw new bs(ws.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Fs.fromString(n));if(!Vs.isDocumentKey(r))throw new bs(ws.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Nu(e,new Vs(r))}if(n instanceof _p)return Nu(e,n._key);throw new bs(ws.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(mp(n),"."))}function gv(e,t){if(!Array.isArray(e)||0===e.length)throw new bs(ws.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new bs(ws.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function kv(e,t,n){if(!n.isEqual(t))throw new bs(ws.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var _v=function(){function e(){p(this,e)}return m(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(xu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(du(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw gs()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return tu(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new Rp(fu(e.latitude),fu(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=vu(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(mu(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=hu(e);return new Os(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Fs.fromString(e);ks(rh(n));var r=new gu(n.get(1),n.get(3)),i=new Vs(n.popFirst(5));return r.isEqual(t)||vs("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function wv(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var bv=function(e){g(n,e);var t=C(n);function n(e){var r;return p(this,n),(r=t.call(this)).firestore=e,r}return m(n,[{key:"convertBytes",value:function(e){return new Ap(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new _p(this.firestore,null,t)}}]),n}(_v);function xv(e){e=yp(e,wp);var t=yp(e.firestore,Ep),n=Ip(t),r=new bv(t);return cv(e._query),hp(n,e._query).then((function(n){return new uv(t,r,e,n)}))}function Cv(e,t,n){e=yp(e,_p);for(var r=yp(e.firestore,Ep),i=Up(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return Ev(r,[("string"==typeof(t=jt(t))||t instanceof Np?Qp(i,"updateDoc",e._key,t,n,o):Wp(i,"updateDoc",e._key,t)).toMutation(e._key,Ul.exists(!0))])}function Tv(e,t){var n=yp(e.firestore,Ep),r=Cp(e),i=wv(e.converter,t);return Ev(n,[Vp(Up(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Ul.exists(!1))]).then((function(){return r}))}function Sv(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=jt(e);var s={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||Sp(n[u])||(s=n[u],u++);var l,c,h,f={includeMetadataChanges:s.includeMetadataChanges};if(Sp(n[u])){var d=n[u];n[u]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[u+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[u+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof _p)c=yp(e.firestore,Ep),h=ul(e._key.path),l={next:function(t){n[u]&&n[u](Iv(c,e,t))},error:n[u+1],complete:n[u+2]};else{var p=yp(e,wp);c=yp(p.firestore,Ep),h=p._query;var v=new bv(c);l={next:function(e){n[u]&&n[u](new uv(c,v,p,e))},error:n[u+1],complete:n[u+2]},cv(e._query)}return function(e,t,n,r){var i=new Zd(r),a=new fd(t,i,n);return e.asyncQueue.enqueueAndForget(Ke(He().mark((function t(){return He().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=ad,t.next=3,lp(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Tc(),e.asyncQueue.enqueueAndForget(Ke(He().mark((function t(){return He().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=sd,t.next=3,lp(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Ip(c),h,f,l)}function Ev(e,t){return function(e,t){var n=new xs;return e.asyncQueue.enqueueAndForget(Ke(He().mark((function r(){return He().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Td,r.next=3,up(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(Ip(e),t)}function Iv(e,t,n){var r=n.docs.get(t._key),i=new bv(e);return new ov(e,i,t._key,r,new av(n.hasPendingWrites,n.fromCache),t.converter)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];hs="9.9.3",En(new Ft("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new Ep(i,new Ss(e.getProvider("auth-internal")),new Ns(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),Pn(ls,"3.4.14",e),Pn(ls,"3.4.14","esm2017")}();Pn("firebase","9.9.3","app");var Mv="@firebase/database",Nv="0.13.5",Av="";var Dv=function(){function e(t){p(this,e),this.domStorage_=t,this.prefix_="firebase:"}return m(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),xt(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:bt(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),Rv=function(){function e(){p(this,e),this.cache_={},this.isInMemoryStorage=!0}return m(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return Tt(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),Pv=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Dv(t)}}catch(n){}return new Rv},Ov=Pv("localStorage"),Lv=Pv("sessionStorage"),jv=new Gt("@firebase/database"),Fv=function(){var e=1;return function(){return e++}}(),Bv=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,tt(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new Dt;n.update(t);var r=n.digest();return it.encodeByteArray(r)},Uv=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?xt(r):r,t+=" "}return t},Vv=null,zv=!0,qv=function(e,t){tt(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(jv.logLevel=zt.VERBOSE,Vv=jv.log.bind(jv),t&&Lv.set("logging_enabled",!0)):"function"===typeof e?Vv=e:(Vv=null,Lv.remove("logging_enabled"))},Wv=function(){if(!0===zv&&(zv=!1,null===Vv&&!0===Lv.get("logging_enabled")&&qv(!0)),Vv){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Uv.apply(null,t);Vv(r)}},Qv=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Wv.apply(void 0,[e].concat(n))}},Hv=function(){var e="FIREBASE INTERNAL ERROR: "+Uv.apply(void 0,arguments);jv.error(e)},Yv=function(){var e="FIREBASE FATAL ERROR: ".concat(Uv.apply(void 0,arguments));throw jv.error(e),new Error(e)},Kv=function(){var e="FIREBASE WARNING: "+Uv.apply(void 0,arguments);jv.warn(e)},Gv=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Xv="[MIN_NAME]",$v="[MAX_NAME]",Zv=function(e,t){if(e===t)return 0;if(e===Xv||t===$v)return-1;if(t===Xv||e===$v)return 1;var n=um(e),r=um(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},Jv=function(e,t){return e===t?0:e<t?-1:1},em=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+xt(t))},tm=function e(t){if("object"!==typeof t||null===t)return xt(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=xt(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},nm=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function rm(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var im=function(e){tt(!Gv(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var u=s.join(""),l="";for(a=0;a<64;a+=8){var c=parseInt(u.substr(a,8),2).toString(16);1===c.length&&(c="0"+c),l+=c}return l.toLowerCase()};var am=new RegExp("^-?(0*)\\d{1,10}$"),om=-2147483648,sm=2147483647,um=function(e){if(am.test(e)){var t=Number(e);if(t>=om&&t<=sm)return t}return null},lm=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw Kv("Exception was thrown by user callback.",e),t}),Math.floor(0))}},cm=function(e,t){var n=setTimeout(e,t);return"object"===typeof n&&n.unref&&n.unref(),n},hm=function(){function e(t,n){var r=this;p(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return m(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){Kv('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),fm=function(){function e(t,n,r){var i=this;p(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return m(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(Wv("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Kv(e)}}]),e}(),dm=function(){function e(t){p(this,e),this.accessToken=t}return m(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();dm.OWNER="owner";var pm="5",vm=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,mm="websocket",ym="long_polling",gm=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];p(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ov.get("host:"+t)||this._host}return m(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ov.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function km(e,t,n){var r;if(tt("string"===typeof t,"typeof type must == string"),tt("object"===typeof n,"typeof params must == object"),t===mm)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==ym)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return rm(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var _m=function(){function e(){p(this,e),this.counters_={}}return m(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Tt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return ut(this.counters_)}}]),e}(),wm={},bm={};function xm(e){var t=e.toString();return wm[t]||(wm[t]=new _m),wm[t]}var Cm=function(){function e(t){p(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return m(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&lm((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),Tm="start",Sm="close",Em=function(){function e(t,n,r,i,a,o,s){var u=this;p(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Qv(t),this.stats_=xm(n),this.urlFn=function(e){return u.appCheckToken&&(e.ac=u.appCheckToken),km(n,ym,e)}}return m(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Cm(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(vt()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Im((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===Tm)n.id=a,n.password=o;else{if(i!==Sm)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=pm,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&vm.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=xt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=at(t),r=nm(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!vt()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=xt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!vt()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),Im=function(){function e(t,n,r,i){if(p(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,vt())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=Fv(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(s){Wv("frame writing exception"),s.stack&&Wv(s.stack),Wv(s)}}}return m(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;vt()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){Wv("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Wv("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),Mm=null;"undefined"!==typeof MozWebSocket?Mm=MozWebSocket:"undefined"!==typeof WebSocket&&(Mm=WebSocket);var Nm=function(){function e(t,n,r,i,a,o,s){p(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Qv(this.connId),this.stats_=xm(n),this.connURL=e.connectionURL_(n,o,s,i,r),this.nodeAdmin=n.nodeAdmin}return m(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ov.set("previous_websocket_failure",!0);try{var r;if(vt()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(pm,"/").concat(Av,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/incommon",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new Mm(this.connURL,[],r)}catch(u){this.log_("Error instantiating WebSocket.");var s=u.message||u.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){Ov.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=bt(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(tt(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=xt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=nm(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=pm,!vt()&&"undefined"!==typeof location&&location.hostname&&vm.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a.ac=r),i&&(a.p=i),km(e,mm,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==Mm&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return Ov.isInMemoryStorage||!0===Ov.get("previous_websocket_failure")}}]),e}();Nm.responsesRequiredToBeHealthy=2,Nm.healthyTimeout=3e4;var Am=function(){function e(t){p(this,e),this.initTransports_(t)}return m(e,[{key:"initTransports_",value:function(t){var n=Nm&&Nm.isAvailable(),r=n&&!Nm.previouslyFailed();if(t.webSocketOnly&&(n||Kv("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Nm];else{var i,a=this.transports_=[],o=E(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var s=i.value;s&&s.isAvailable()&&a.push(s)}}catch(u){o.e(u)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[Em,Nm]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();Am.globalTransportInitialized_=!1;var Dm=function(){function e(t,n,r,i,a,o,s,u,l,c){p(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=u,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Qv("c:"+this.id+":"),this.transportManager_=new Am(n),this.log_("Connection created"),this.start_()}return m(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=cm((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=em("t",e),n=em("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=em("t",e),n=em("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=em("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Hv("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Hv("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),pm!==n&&Kv("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),cm((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):cm((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ov.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),Rm=function(){function e(){p(this,e)}return m(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),Pm=function(){function e(t){p(this,e),this.allowedEvents_=t,this.listeners_={},tt(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return m(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=d(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){tt(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),Om=function(e){g(n,e);var t=C(n);function n(){var e;return p(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||ft()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return m(n,[{key:"getInitialEvent",value:function(e){return tt("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(Pm),Lm=function(){function e(t,n){if(p(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return m(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function jm(){return new Lm("")}function Fm(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Bm(e){return e.pieces_.length-e.pieceNum_}function Um(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new Lm(e.pieces_,t)}function Vm(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function zm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function qm(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Lm(t,0)}function Wm(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Lm)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new Lm(n,0)}function Qm(e){return e.pieceNum_>=e.pieces_.length}function Hm(e,t){var n=Fm(e),r=Fm(t);if(null===n)return t;if(n===r)return Hm(Um(e),Um(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Ym(e,t){if(Bm(e)!==Bm(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Km(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(Bm(e)>Bm(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Gm=m((function e(t,n){p(this,e),this.errorPrefix_=n,this.parts_=zm(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=Pt(this.parts_[r]);Xm(this)}));function Xm(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+$m(e))}function $m(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var Zm=function(e){g(n,e);var t=C(n);function n(){var e,r,i;return p(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return m(n,[{key:"getInitialEvent",value:function(e){return tt("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(Pm),Jm=1e3,ey=function(e){g(n,e);var t=C(n);function n(e,r,i,a,o,s,u,l){var c;if(p(this,n),(c=t.call(this)).repoInfo_=e,c.applicationId_=r,c.onDataUpdate_=i,c.onConnectStatus_=a,c.onServerInfoUpdate_=o,c.authTokenProvider_=s,c.appCheckTokenProvider_=u,c.authOverride_=l,c.id=n.nextPersistentConnectionId_++,c.log_=Qv("p:"+c.id+":"),c.interruptReasons_={},c.listens=new Map,c.outstandingPuts_=[],c.outstandingGets_=[],c.outstandingPutCount_=0,c.outstandingGetCount_=0,c.onDisconnectRequestQueue_=[],c.connected_=!1,c.reconnectDelay_=Jm,c.maxReconnectDelay_=3e5,c.securityDebugCallback_=null,c.lastSessionId=null,c.establishConnectionTimer_=null,c.visible_=!1,c.requestCBHash_={},c.requestNumber_=0,c.realtime_=null,c.authToken_=null,c.appCheckToken_=null,c.forceTokenRefresh_=!1,c.invalidAuthTokenCount_=0,c.invalidAppCheckTokenCount_=0,c.firstConnection_=!0,c.lastConnectionAttemptTime_=null,c.lastConnectionEstablishedTime_=null,l&&!vt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Zm.getInstance().on("visible",c.onVisible_,b(c)),-1===e.host.indexOf("fblocal")&&Om.getInstance().on("online",c.onOnline_,b(c)),c}return m(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(xt(i)),tt(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new ct,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),tt(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),tt(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var s=o.d,u=o.s;n.warnOnListenWarnings_(s,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==u&&t.removeListen_(i,a),e.onComplete&&e.onComplete(u,s))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=Ct(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=Ct(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),tt(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+xt(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Hv("Unrecognized action received from server: "+xt(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;tt(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Jm,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Jm,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Jm),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=Ke(He().mark((function e(){var t,r,i,a,o,s,l,c,h,f,d,p,v,m,y=this;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,s=!1,l=null,c=function(){l?l.close():(s=!0,i())},h=function(e){tt(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(e)},this.realtime_={close:c,sendRequest:h},f=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);case 19:d=e.sent,p=u(d,2),v=p[0],m=p[1],s?Wv("getToken() completed but was canceled"):(Wv("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=m&&m.token,l=new Dm(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){Kv(e+" ("+y.repoInfo_.toString()+")"),y.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),s||(this.repoInfo_.nodeAdmin&&Kv(e.t0),c());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){Wv("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){Wv("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Et(this.interruptReasons_)&&(this.reconnectDelay_=Jm,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return tm(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new Lm(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){Wv("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){Wv("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=E(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=E(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(u){r.e(u)}finally{r.f()}}}catch(u){t.e(u)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}},{key:"sendConnectStats_",value:function(){var e={},t="js";vt()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+Av.replace(/\./g,"-")]=1,ft()?e["framework.cordova"]=1:pt()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=Om.getInstance().currentlyOnline();return Et(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&Tt(e,"w")){var n=St(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();Kv("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(Rm);ey.nextPersistentConnectionId_=0,ey.nextConnectionId_=0;var ty,ny=function(){function e(t,n){p(this,e),this.name=t,this.node=n}return m(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),ry=function(){function e(){p(this,e)}return m(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new ny(Xv,e),r=new ny(Xv,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return ny.MIN}}]),e}(),iy=function(e){g(n,e);var t=C(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"compare",value:function(e,t){return Zv(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw nt("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return ny.MIN}},{key:"maxPost",value:function(){return new ny($v,ty)}},{key:"makePost",value:function(e,t){return tt("string"===typeof e,"KeyIndex indexValue must always be a string."),new ny(e,ty)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return ty},set:function(e){ty=e}}]),n}(ry),ay=new iy,oy=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;p(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return m(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),sy=function(){function e(t,n,r,i,a){p(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:cy.EMPTY_NODE,this.right=null!=a?a:cy.EMPTY_NODE}return m(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return cy.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return cy.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();sy.RED=!0,sy.BLACK=!1;var uy,ly=function(){function e(){p(this,e)}return m(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new sy(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),cy=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;p(this,e),this.comparator_=t,this.root_=n}return m(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,sy.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,sy.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new oy(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new oy(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new oy(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new oy(this.root_,null,this.comparator_,!0,e)}}]),e}();function hy(e,t){return Zv(e.name,t.name)}function fy(e,t){return Zv(e,t)}cy.EMPTY_NODE=new ly;var dy,py,vy,my=function(e){return"number"===typeof e?"number:"+im(e):"string:"+e},yy=function(e){if(e.isLeafNode()){var t=e.val();tt("string"===typeof t||"number"===typeof t||"object"===typeof t&&Tt(t,".sv"),"Priority must be a string or number.")}else tt(e===uy||e.isEmpty(),"priority of unexpected type.");tt(e===uy||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},gy=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;p(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,tt(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),yy(this.priorityNode_)}return m(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return Qm(t)?this:".priority"===Fm(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=Fm(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(tt(".priority"!==r||1===Bm(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(Um(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+my(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?im(this.value_):this.value_,this.lazyHash_=Bv(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(tt(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return tt(i>=0,"Unknown leaf type: "+n),tt(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return dy},set:function(e){dy=e}}]),e}();gy.VALUE_TYPE_ORDER=["object","boolean","number","string"];var ky,_y,wy=function(e){g(n,e);var t=C(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Zv(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return ny.MIN}},{key:"maxPost",value:function(){return new ny($v,new gy("[PRIORITY-POST]",vy))}},{key:"makePost",value:function(e,t){var n=py(e);return new ny(t,new gy("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(ry),by=new wy,xy=Math.log(2),Cy=function(){function e(t){p(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/xy,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return m(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),Ty=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,s=i-r;if(0===s)return null;if(1===s)return a=e[r],o=n?n(a):a,new sy(o,a.node,sy.BLACK,null,null);var u=parseInt(s/2,10)+r,l=t(r,u),c=t(u+1,i);return a=e[u],o=n?n(a):a,new sy(o,a.node,sy.BLACK,l,c)},a=function(t){for(var r=null,a=null,o=e.length,s=function(t,r){var a=o-t,s=o;o-=t;var l=i(a+1,s),c=e[a],h=n?n(c):c;u(new sy(h,c.node,r,null,l))},u=function(e){r?(r.left=e,r=e):(a=e,r=e)},l=0;l<t.count;++l){var c=t.nextBitIsOne(),h=Math.pow(2,t.count-(l+1));c?s(h,sy.BLACK):(s(h,sy.BLACK),s(h,sy.RED))}return a}(new Cy(e.length));return new cy(r||t,a)},Sy={},Ey=function(){function e(t,n){p(this,e),this.indexes_=t,this.indexSet_=n}return m(e,[{key:"get",value:function(e){var t=St(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof cy?t:null}},{key:"hasIndex",value:function(e){return Tt(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){tt(t!==ay,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(ny.Wrap),s=o.getNext();s;)a=a||t.isDefinedOn(s.node),i.push(s),s=o.getNext();r=a?Ty(i,t.getCompare()):Sy;var u=t.toString(),l=Object.assign({},this.indexSet_);l[u]=t;var c=Object.assign({},this.indexes_);return c[u]=r,new e(c,l)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(It(this.indexes_,(function(e,i){var a=St(r.indexSet_,i);if(tt(a,"Missing index implementation for "+i),e===Sy){if(a.isDefinedOn(t.node)){for(var o=[],s=n.getIterator(ny.Wrap),u=s.getNext();u;)u.name!==t.name&&o.push(u),u=s.getNext();return o.push(t),Ty(o,a.getCompare())}return Sy}var l=n.get(t.name),c=e;return l&&(c=c.remove(new ny(t.name,l))),c.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(It(this.indexes_,(function(e){if(e===Sy)return e;var r=n.get(t.name);return r?e.remove(new ny(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return tt(Sy&&by,"ChildrenNode.ts has not been loaded"),ky=ky||new e({".priority":Sy},{".priority":by})}}]),e}(),Iy=function(){function e(t,n,r){p(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&yy(this.priorityNode_),this.children_.isEmpty()&&tt(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return m(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||_y}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?_y:t}},{key:"getChild",value:function(e){var t=Fm(e);return null===t?this:this.getImmediateChild(t).getChild(Um(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(tt(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new ny(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?_y:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=Fm(e);if(null===n)return t;tt(".priority"!==Fm(e)||1===Bm(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(Um(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(by,(function(o,s){n[o]=s.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var s in n)o[s]=n[s];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+my(this.getPriority().val())+":"),this.forEachChild(by,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":Bv(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new ny(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new ny(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new ny(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,ny.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,ny.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===My?-1:0}},{key:"withIndex",value:function(t){if(t===ay||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===ay||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(by),r=t.getIterator(by),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===ay?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return _y||(_y=new e(new cy(fy),null,Ey.Default))}}]),e}();Iy.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var My=new(function(e){g(n,e);var t=C(n);function n(){return p(this,n),t.call(this,new cy(fy),Iy.EMPTY_NODE,Ey.Default)}return m(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return Iy.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(Iy));Object.defineProperties(ny,{MIN:{value:new ny(Xv,Iy.EMPTY_NODE)},MAX:{value:new ny($v,My)}}),iy.__EMPTY_NODE=Iy.EMPTY_NODE,gy.__childrenNodeConstructor=Iy,uy=My,function(e){vy=e}(My);function Ny(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return Iy.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),tt(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new gy(n,Ny(t))}if(e instanceof Array){var r=Iy.EMPTY_NODE;return rm(e,(function(t,n){if(Tt(e,t)&&"."!==t.substring(0,1)){var i=Ny(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(Ny(t))}var i=[],a=!1,o=e;if(rm(o,(function(e,t){if("."!==e.substring(0,1)){var n=Ny(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new ny(e,n)))}})),0===i.length)return Iy.EMPTY_NODE;var s=Ty(i,hy,(function(e){return e.name}),fy);if(a){var u=Ty(i,by.getCompare());return new Iy(s,Ny(t),new Ey({".priority":u},{".priority":by}))}return new Iy(s,Ny(t),Ey.Default)}!function(e){py=e}(Ny);var Ay=function(e){g(n,e);var t=C(n);function n(e){var r;return p(this,n),(r=t.call(this)).indexPath_=e,tt(!Qm(e)&&".priority"!==Fm(e),"Can't create PathIndex with empty path or .priority key"),r}return m(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Zv(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=Ny(e),r=Iy.EMPTY_NODE.updateChild(this.indexPath_,n);return new ny(t,r)}},{key:"maxPost",value:function(){var e=Iy.EMPTY_NODE.updateChild(this.indexPath_,My);return new ny($v,e)}},{key:"toString",value:function(){return zm(this.indexPath_,0).join("/")}}]),n}(ry),Dy=function(e){g(n,e);var t=C(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?Zv(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return ny.MIN}},{key:"maxPost",value:function(){return ny.MAX}},{key:"makePost",value:function(e,t){var n=Ny(e);return new ny(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(ry),Ry=new Dy,Py="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){var e=0,t=[]}();function Oy(e){return{type:"value",snapshotNode:e}}function Ly(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function jy(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Fy(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var By=function(){function e(){p(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=by}return m(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"hasStartAfter",value:function(){return this.startAfterSet_}},{key:"hasEndBefore",value:function(){return this.endBeforeSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return tt(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return tt(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Xv}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return tt(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return tt(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:$v}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return tt(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===by}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function Uy(e){var t,n={};return e.isDefault()||(e.index_===by?t="$priority":e.index_===Ry?t="$value":e.index_===ay?t="$key":(tt(e.index_ instanceof Ay,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=xt(t),e.startSet_&&(n.startAt=xt(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+xt(e.indexStartName_))),e.endSet_&&(n.endAt=xt(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+xt(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function Vy(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==by&&(t.i=e.index_.toString()),t}var zy=function(e){g(n,e);var t=C(n);function n(e,r,i,a){var o;return p(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=Qv("p:rest:"),o.listens_={},o}return m(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var s=n.getListenId_(e,r),u={};this.listens_[s]=u;var l=Uy(e._queryParams);this.restRequest_(o+".json",l,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),St(a.listens_,s)===u)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=Uy(e._queryParams),r=e._path.toString(),i=new ct;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=u(i,2),o=a[0],s=a[1];o&&o.accessToken&&(n.auth=o.accessToken),s&&s.token&&(n.ac=s.token);var l=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+At(n);t.log_("Sending REST request for "+l);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(r&&4===c.readyState){t.log_("REST Response for "+l+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=bt(c.responseText)}catch(n){Kv("Failed to parse JSON response for "+l+": "+c.responseText)}r(null,e)}else 401!==c.status&&404!==c.status&&Kv("Got unsuccessful REST response for "+l+" Status: "+c.status),r(c.status);r=null}},c.open("GET",l,!0),c.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(tt(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(Rm),qy=function(){function e(){p(this,e),this.rootNode_=Iy.EMPTY_NODE}return m(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function Wy(){return{value:null,children:new Map}}function Qy(e,t,n){if(Qm(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=Fm(t);e.children.has(r)||e.children.set(r,Wy()),Qy(e.children.get(r),t=Um(t),n)}}function Hy(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){Hy(r,new Lm(t.toString()+"/"+e),n)}))}var Yy,Ky=function(){function e(t){p(this,e),this.collection_=t,this.last_=null}return m(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&rm(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),Gy=function(){function e(t,n){p(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new Ky(t);var r=1e4+2e4*Math.random();cm(this.reportStats_.bind(this),Math.floor(r))}return m(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;rm(t,(function(t,i){i>0&&Tt(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),cm(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function Xy(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Yy||(Yy={}));var $y,Zy=function(){function e(t,n,r){p(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=Yy.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return m(e,[{key:"operationForChild",value:function(t){if(Qm(this.path)){if(null!=this.affectedTree.value)return tt(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Lm(t));return new e(jm(),n,this.revert)}return tt(Fm(this.path)===t,"operationForChild called for unrelated child."),new e(Um(this.path),this.affectedTree,this.revert)}}]),e}(),Jy=function(){function e(t,n,r){p(this,e),this.source=t,this.path=n,this.snap=r,this.type=Yy.OVERWRITE}return m(e,[{key:"operationForChild",value:function(t){return Qm(this.path)?new e(this.source,jm(),this.snap.getImmediateChild(t)):new e(this.source,Um(this.path),this.snap)}}]),e}(),eg=function(){function e(t,n,r){p(this,e),this.source=t,this.path=n,this.children=r,this.type=Yy.MERGE}return m(e,[{key:"operationForChild",value:function(t){if(Qm(this.path)){var n=this.children.subtree(new Lm(t));return n.isEmpty()?null:n.value?new Jy(this.source,jm(),n.value):new e(this.source,jm(),n)}return tt(Fm(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,Um(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),tg=function(){function e(t,n,r){p(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return m(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(Qm(e))return this.isFullyInitialized()&&!this.filtered_;var t=Fm(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}();function ng(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw nt("Should only compare child_ events.");var r=new ny(t.childName,t.snapshotNode),i=new ny(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function rg(e,t){return{eventCache:e,serverCache:t}}function ig(e,t,n,r){return rg(new tg(t,n,r),e.serverCache)}function ag(e,t,n,r){return rg(e.eventCache,new tg(t,n,r))}function og(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function sg(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var ug=function(){return $y||($y=new cy(Jv)),$y},lg=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ug();p(this,e),this.value=t,this.children=n}return m(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:jm(),value:this.value};if(Qm(e))return null;var n=Fm(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(Um(e),t);return null!=i?{path:Wm(new Lm(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(Qm(t))return this;var n=Fm(t),r=this.children.get(n);return null!==r?r.subtree(Um(t)):new e(null)}},{key:"set",value:function(t,n){if(Qm(t))return new e(n,this.children);var r=Fm(t),i=(this.children.get(r)||new e(null)).set(Um(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(Qm(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=Fm(t),r=this.children.get(n);if(r){var i,a=r.remove(Um(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(Qm(e))return this.value;var t=Fm(e),n=this.children.get(t);return n?n.get(Um(e)):null}},{key:"setTree",value:function(t,n){if(Qm(t))return n;var r,i=Fm(t),a=(this.children.get(i)||new e(null)).setTree(Um(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(jm(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(Wm(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,jm(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(Qm(e))return null;var i=Fm(e),a=this.children.get(i);return a?a.findOnPath_(Um(e),Wm(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,jm(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(Qm(t))return this;this.value&&r(n,this.value);var i=Fm(t),a=this.children.get(i);return a?a.foreachOnPath_(Um(t),Wm(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(jm(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(Wm(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return rm(t,(function(e,t){n=n.set(new Lm(e),t)})),n}}]),e}(),cg=function(){function e(t){p(this,e),this.writeTree_=t}return m(e,null,[{key:"empty",value:function(){return new e(new lg(null))}}]),e}();function hg(e,t,n){if(Qm(t))return new cg(new lg(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=Hm(i,t);return a=a.updateChild(o,n),new cg(e.writeTree_.set(i,a))}var s=new lg(n),u=e.writeTree_.setTree(t,s);return new cg(u)}function fg(e,t,n){var r=e;return rm(n,(function(e,n){r=hg(r,Wm(t,e),n)})),r}function dg(e,t){if(Qm(t))return cg.empty();var n=e.writeTree_.setTree(t,new lg(null));return new cg(n)}function pg(e,t){return null!=vg(e,t)}function vg(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Hm(n.path,t)):null}function mg(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(by,(function(e,n){t.push(new ny(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new ny(e,n.value))})),t}function yg(e,t){if(Qm(t))return e;var n=vg(e,t);return new cg(null!=n?new lg(n):e.writeTree_.subtree(t))}function gg(e){return e.writeTree_.isEmpty()}function kg(e,t){return _g(jm(),e.writeTree_,t)}function _g(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(tt(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=_g(Wm(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(Wm(e,".priority"),r)),n}function wg(e,t){return Og(t,e)}function bg(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function xg(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));tt(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var s=e.allWrites[o];s.visible&&(o>=n&&Cg(s,r.path)?i=!1:Km(r.path,s.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=Sg(e.allWrites,Tg,jm()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=dg(e.visibleWrites,r.path):rm(r.children,(function(t){e.visibleWrites=dg(e.visibleWrites,Wm(r.path,t))}));return!0}return!1}function Cg(e,t){if(e.snap)return Km(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&Km(Wm(e.path,n),t))return!0;return!1}function Tg(e){return e.visible}function Sg(e,t,n){for(var r=cg.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,s=void 0;if(a.snap)Km(n,o)?r=hg(r,s=Hm(n,o),a.snap):Km(o,n)&&(s=Hm(o,n),r=hg(r,jm(),a.snap.getChild(s)));else{if(!a.children)throw nt("WriteRecord should have .snap or .children");if(Km(n,o))r=fg(r,s=Hm(n,o),a.children);else if(Km(o,n))if(Qm(s=Hm(o,n)))r=fg(r,jm(),a.children);else{var u=St(a.children,Fm(s));if(u){var l=u.getChild(Um(s));r=hg(r,jm(),l)}}}}}return r}function Eg(e,t,n,r,i){if(r||i){var a=yg(e.visibleWrites,t);if(!i&&gg(a))return n;if(i||null!=n||pg(a,jm())){return kg(Sg(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Km(e.path,t)||Km(t,e.path))}),t),n||Iy.EMPTY_NODE)}return null}var o=vg(e.visibleWrites,t);if(null!=o)return o;var s=yg(e.visibleWrites,t);return gg(s)?n:null!=n||pg(s,jm())?kg(s,n||Iy.EMPTY_NODE):null}function Ig(e,t,n,r){return Eg(e.writeTree,e.treePath,t,n,r)}function Mg(e,t){return function(e,t,n){var r=Iy.EMPTY_NODE,i=vg(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(by,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=yg(e.visibleWrites,t);return n.forEachChild(by,(function(e,t){var n=kg(yg(a,new Lm(e)),t);r=r.updateImmediateChild(e,n)})),mg(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return mg(yg(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function Ng(e,t,n,r){return function(e,t,n,r,i){tt(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=Wm(t,n);if(pg(e.visibleWrites,a))return null;var o=yg(e.visibleWrites,a);return gg(o)?i.getChild(n):kg(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function Ag(e,t){return function(e,t){return vg(e.visibleWrites,t)}(e.writeTree,Wm(e.treePath,t))}function Dg(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var s,u=yg(e.visibleWrites,t),l=vg(u,jm());if(null!=l)s=l;else{if(null==n)return[];s=kg(u,n)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],h=o.getCompare(),f=a?s.getReverseIteratorFrom(r,o):s.getIteratorFrom(r,o),d=f.getNext();d&&c.length<i;)0!==h(d,r)&&c.push(d),d=f.getNext();return c}(e.writeTree,e.treePath,t,n,r,i,a)}function Rg(e,t,n){return function(e,t,n,r){var i=Wm(t,n),a=vg(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?kg(yg(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function Pg(e,t){return Og(Wm(e.treePath,t),e.writeTree)}function Og(e,t){return{treePath:e,writeTree:t}}var Lg=function(){function e(){p(this,e),this.changeMap=new Map}return m(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;tt("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),tt(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Fy(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,jy(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Ly(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw nt("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Fy(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),jg=new(function(){function e(){p(this,e)}return m(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),Fg=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;p(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return m(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new tg(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Rg(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:sg(this.viewCache_),i=Dg(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function Bg(e,t,n,r,i){var a,o,s=new Lg;if(n.type===Yy.OVERWRITE){var u=n;u.source.fromUser?a=zg(e,t,u.path,u.snap,r,i,s):(tt(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.serverCache.isFiltered()&&!Qm(u.path),a=Vg(e,t,u.path,u.snap,r,i,o,s))}else if(n.type===Yy.MERGE){var l=n;l.source.fromUser?a=function(e,t,n,r,i,a,o){var s=t;return r.foreach((function(r,u){var l=Wm(n,r);qg(t,Fm(l))&&(s=zg(e,s,l,u,i,a,o))})),r.foreach((function(r,u){var l=Wm(n,r);qg(t,Fm(l))||(s=zg(e,s,l,u,i,a,o))})),s}(e,t,l.path,l.children,r,i,s):(tt(l.source.fromServer,"Unknown source."),o=l.source.tagged||t.serverCache.isFiltered(),a=Qg(e,t,l.path,l.children,r,i,o,s))}else if(n.type===Yy.ACK_USER_WRITE){var c=n;a=c.revert?function(e,t,n,r,i,a){var o;if(null!=Ag(r,n))return t;var s,u=new Fg(r,t,i),l=t.eventCache.getNode();if(Qm(n)||".priority"===Fm(n)){var c;if(t.serverCache.isFullyInitialized())c=Ig(r,sg(t));else{var h=t.serverCache.getNode();tt(h instanceof Iy,"serverChildren would be complete if leaf node"),c=Mg(r,h)}s=e.filter.updateFullNode(l,c,a)}else{var f=Fm(n),d=Rg(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=l.getImmediateChild(f)),(s=null!=d?e.filter.updateChild(l,f,d,Um(n),u,a):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(l,f,Iy.EMPTY_NODE,Um(n),u,a):l).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Ig(r,sg(t))).isLeafNode()&&(s=e.filter.updateFullNode(s,o,a))}return o=t.serverCache.isFullyInitialized()||null!=Ag(r,jm()),ig(t,s,o,e.filter.filtersNodes())}(e,t,c.path,r,i,s):function(e,t,n,r,i,a,o){if(null!=Ag(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(Qm(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Vg(e,t,n,u.getNode().getChild(n),i,a,s,o);if(Qm(n)){var l=new lg(null);return u.getNode().forEachChild(ay,(function(e,t){l=l.set(new Lm(e),t)})),Qg(e,t,n,l,i,a,s,o)}return t}var c=new lg(null);return r.foreach((function(e,t){var r=Wm(n,e);u.isCompleteForPath(r)&&(c=c.set(e,u.getNode().getChild(r)))})),Qg(e,t,n,c,i,a,s,o)}(e,t,c.path,c.affectedTree,r,i,s)}else{if(n.type!==Yy.LISTEN_COMPLETE)throw nt("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=ag(t,a.getNode(),a.isFullyInitialized()||Qm(n),a.isFiltered());return Ug(e,o,n,r,jg,i)}(e,t,n.path,r,s)}var h=s.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=og(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(Oy(og(t)))}}(t,a,h),{viewCache:a,changes:h}}function Ug(e,t,n,r,i,a){var o,s,u=t.eventCache;if(null!=Ag(r,n))return t;if(Qm(n))if(tt(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var l=sg(t),c=Mg(r,l instanceof Iy?l:Iy.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),c,a)}else{var h=Ig(r,sg(t));o=e.filter.updateFullNode(t.eventCache.getNode(),h,a)}else{var f=Fm(n);if(".priority"===f){tt(1===Bm(n),"Can't have a priority with additional path components");var d=u.getNode(),p=Ng(r,n,d,s=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):u.getNode()}else{var v,m=Um(n);if(u.isCompleteForChild(f)){s=t.serverCache.getNode();var y=Ng(r,n,u.getNode(),s);v=null!=y?u.getNode().getImmediateChild(f).updateChild(m,y):u.getNode().getImmediateChild(f)}else v=Rg(r,f,t.serverCache);o=null!=v?e.filter.updateChild(u.getNode(),f,v,m,i,a):u.getNode()}}return ig(t,o,u.isFullyInitialized()||Qm(n),e.filter.filtersNodes())}function Vg(e,t,n,r,i,a,o,s){var u,l=t.serverCache,c=o?e.filter:e.filter.getIndexedFilter();if(Qm(n))u=c.updateFullNode(l.getNode(),r,null);else if(c.filtersNodes()&&!l.isFiltered()){var h=l.getNode().updateChild(n,r);u=c.updateFullNode(l.getNode(),h,null)}else{var f=Fm(n);if(!l.isCompleteForPath(n)&&Bm(n)>1)return t;var d=Um(n),p=l.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?c.updatePriority(l.getNode(),p):c.updateChild(l.getNode(),f,p,d,jg,null)}var v=ag(t,u,l.isFullyInitialized()||Qm(n),c.filtersNodes());return Ug(e,v,n,i,new Fg(i,v,a),s)}function zg(e,t,n,r,i,a,o){var s,u,l=t.eventCache,c=new Fg(i,t,a);if(Qm(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,o),s=ig(t,u,!0,e.filter.filtersNodes());else{var h=Fm(n);if(".priority"===h)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=ig(t,u,l.isFullyInitialized(),l.isFiltered());else{var f,d=Um(n),p=l.getNode().getImmediateChild(h);if(Qm(d))f=r;else{var v=c.getCompleteChild(h);f=null!=v?".priority"===Vm(d)&&v.getChild(qm(d)).isEmpty()?v:v.updateChild(d,r):Iy.EMPTY_NODE}if(p.equals(f))s=t;else s=ig(t,e.filter.updateChild(l.getNode(),h,f,d,c,o),l.isFullyInitialized(),e.filter.filtersNodes())}}return s}function qg(e,t){return e.eventCache.isCompleteForChild(t)}function Wg(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function Qg(e,t,n,r,i,a,o,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,l=t;u=Qm(n)?r:new lg(null).setTree(n,r);var c=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(c.hasChild(n)){var u=Wg(0,t.serverCache.getNode().getImmediateChild(n),r);l=Vg(e,l,new Lm(n),u,i,a,o,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!c.hasChild(n)&&!u){var h=Wg(0,t.serverCache.getNode().getImmediateChild(n),r);l=Vg(e,l,new Lm(n),h,i,a,o,s)}})),l}var Hg;function Yg(e,t){var n=sg(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Qm(t)&&!n.getImmediateChild(Fm(t)).isEmpty())?n.getChild(t):null}function Kg(e,t,n,r){t.type===Yy.MERGE&&null!==t.source.queryId&&(tt(sg(e.viewCache_),"We should always have a full cache before handling merges"),tt(og(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,s=Bg(e.processor_,o,t,n,r);return i=e.processor_,a=s.viewCache,tt(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),tt(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),tt(s.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,Gg(e,s.changes,s.viewCache.eventCache.getNode(),null)}function Gg(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),ng(e,i,"child_removed",t,r,n),ng(e,i,"child_added",t,r,n),ng(e,i,"child_moved",a,r,n),ng(e,i,"child_changed",t,r,n),ng(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var Xg;function $g(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return tt(null!=a,"SyncTree gave us an op for an invalid query."),Kg(a,t,n,r)}var o,s=[],u=E(e.views.values());try{for(u.s();!(o=u.n()).done;){var l=o.value;s=s.concat(Kg(l,t,n,r))}}catch(c){u.e(c)}finally{u.f()}return s}function Zg(e,t){var n,r=null,i=E(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||Yg(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}var Jg=m((function e(t){p(this,e),this.listenProvider_=t,this.syncPointTree_=new lg(null),this.pendingWriteTree_={visibleWrites:cg.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function ek(e,t,n,r,i){return function(e,t,n,r,i){tt(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=hg(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?ak(e,new Jy({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function tk(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=bg(e.pendingWriteTree_,t),i=xg(e.pendingWriteTree_,t);if(i){var a=new lg(null);return null!=r.snap?a=a.set(jm(),!0):rm(r.children,(function(e){a=a.set(new Lm(e),!0)})),ak(e,new Zy(r.path,a,n))}return[]}function nk(e,t,n){return ak(e,new Jy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function rk(e,t,n,r){var i=uk(e,r);if(null!=i){var a=lk(i),o=a.path,s=a.queryId,u=Hm(o,t);return ck(e,o,new Jy(Xy(s),u,n))}return[]}function ik(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=Zg(n,Hm(e,t));if(r)return r}));return Eg(r,t,i,n,!0)}function ak(e,t){return ok(t,e.syncPointTree_,null,wg(e.pendingWriteTree_,jm()))}function ok(e,t,n,r){if(Qm(e.path))return sk(e,t,n,r);var i=t.get(jm());null==n&&null!=i&&(n=Zg(i,jm()));var a=[],o=Fm(e.path),s=e.operationForChild(o),u=t.children.get(o);if(u&&s){var l=n?n.getImmediateChild(o):null,c=Pg(r,o);a=a.concat(ok(s,u,l,c))}return i&&(a=a.concat($g(i,e,r,n))),a}function sk(e,t,n,r){var i=t.get(jm());null==n&&null!=i&&(n=Zg(i,jm()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,s=Pg(r,t),u=e.operationForChild(t);u&&(a=a.concat(sk(u,i,o,s)))})),i&&(a=a.concat($g(i,e,r,n))),a}function uk(e,t){return e.tagToQueryMap.get(t)}function lk(e){var t=e.indexOf("$");return tt(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Lm(e.substr(0,t))}}function ck(e,t,n){var r=e.syncPointTree_.get(t);return tt(r,"Missing sync point for query tag that we're tracking"),$g(r,n,wg(e.pendingWriteTree_,t),null)}var hk=function(){function e(t){p(this,e),this.node_=t}return m(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),fk=function(){function e(t,n){p(this,e),this.syncTree_=t,this.path_=n}return m(e,[{key:"getImmediateChild",value:function(t){var n=Wm(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return ik(this.syncTree_,this.path_)}}]),e}(),dk=function(e,t,n){return e&&"object"===typeof e?(tt(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?pk(e[".sv"],t,n):"object"===typeof e[".sv"]?vk(e[".sv"],t):void tt(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},pk=function(e,t,n){if("timestamp"===e)return n.timestamp;tt(!1,"Unexpected server value: "+e)},vk=function(e,t,n){e.hasOwnProperty("increment")||tt(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&tt(!1,"Unexpected increment value: "+r);var i=t.node();if(tt(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},mk=function(e,t,n,r){return gk(t,new fk(n,e),r)},yk=function(e,t,n){return gk(e,new hk(t),n)};function gk(e,t,n){var r,i=e.getPriority().val(),a=dk(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,s=dk(o.getValue(),t,n);return s!==o.getValue()||a!==o.getPriority().val()?new gy(s,Ny(a)):e}var u=e;return r=u,a!==u.getPriority().val()&&(r=r.updatePriority(new gy(a))),u.forEachChild(by,(function(e,i){var a=gk(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var kk=m((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};p(this,e),this.name=t,this.parent=n,this.node=r}));function _k(e,t){for(var n=t instanceof Lm?t:new Lm(t),r=e,i=Fm(n);null!==i;){var a=St(r.node.children,i)||{children:{},childCount:0};r=new kk(i,r,a),i=Fm(n=Um(n))}return r}function wk(e){return e.node.value}function bk(e,t){e.node.value=t,Ek(e)}function xk(e){return e.node.childCount>0}function Ck(e,t){rm(e.node.children,(function(n,r){t(new kk(n,e,r))}))}function Tk(e,t,n,r){n&&!r&&t(e),Ck(e,(function(e){Tk(e,t,!0,r)})),n&&r&&t(e)}function Sk(e){return new Lm(null===e.parent?e.name:Sk(e.parent)+"/"+e.name)}function Ek(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===wk(e)&&!xk(e)}(n),i=Tt(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Ek(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Ek(e))}(e.parent,e.name,e)}var Ik=/[\[\].#$\/\u0000-\u001F\u007F]/,Mk=/[\[\].#$\u0000-\u001F\u007F]/,Nk=10485760,Ak=function(e){return"string"===typeof e&&0!==e.length&&!Ik.test(e)},Dk=function(e){return"string"===typeof e&&0!==e.length&&!Mk.test(e)},Rk=function e(t,n,r){var i=r instanceof Lm?new Gm(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+$m(i));if("function"===typeof n)throw new Error(t+"contains a function "+$m(i)+" with contents = "+n.toString());if(Gv(n))throw new Error(t+"contains "+n.toString()+" "+$m(i));if("string"===typeof n&&n.length>Nk/3&&Pt(n)>Nk)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+$m(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(rm(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!Ak(n)))throw new Error(t+" contains an invalid key ("+n+") "+$m(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var s,u;u=n,(s=i).parts_.length>0&&(s.byteLength_+=1),s.parts_.push(u),s.byteLength_+=Pt(u),Xm(s),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=Pt(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+$m(i)+" in addition to actual children.")}},Pk=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!Ak(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Dk(e)}(n))throw new Error(Rt(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Ok=m((function e(){p(this,e),this.eventLists_=[],this.recursionDepth_=0}));function Lk(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||Ym(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function jk(e,t,n){Lk(e,n),Fk(e,(function(e){return Km(e,t)||Km(t,e)}))}function Fk(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(Bk(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function Bk(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();Vv&&Wv("event: "+n.toString()),lm(r)}}}var Uk="repo_interrupt",Vk=function(){function e(t,n,r,i){p(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ok,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Wy(),this.transactionQueueTree_=new kk,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return m(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function zk(e,t,n){if(e.stats_=xm(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new zy(e.repoInfo_,(function(t,n,r,i){Qk(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return Hk(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{xt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new ey(e.repoInfo_,t,(function(t,n,r,i){Qk(e,t,n,r,i)}),(function(t){Hk(e,t)}),(function(t){!function(e,t){rm(t,(function(t,n){Yk(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return bm[n]||(bm[n]=t()),bm[n]}(e.repoInfo_,(function(){return new Gy(e.stats_,e.server_)})),e.infoData_=new qy,e.infoSyncTree_=new Jg({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=nk(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),Yk(e,"connected",!1),e.serverSyncTree_=new Jg({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);jk(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function qk(e){var t=e.infoData_.getNode(new Lm(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Wk(e){return(t=(t={timestamp:qk(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function Qk(e,t,n,r,i){e.dataUpdateCount++;var a=new Lm(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var s=It(n,(function(e){return Ny(e)}));o=function(e,t,n,r){var i=uk(e,r);if(i){var a=lk(i),o=a.path,s=a.queryId,u=Hm(o,t),l=lg.fromObject(n);return ck(e,o,new eg(Xy(s),u,l))}return[]}(e.serverSyncTree_,a,s,i)}else{var u=Ny(n);o=rk(e.serverSyncTree_,a,u,i)}else if(r){var l=It(n,(function(e){return Ny(e)}));o=function(e,t,n){var r=lg.fromObject(n);return ak(e,new eg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,l)}else{var c=Ny(n);o=nk(e.serverSyncTree_,a,c)}var h=a;o.length>0&&(h=e_(e,a)),jk(e.eventQueue_,h,o)}function Hk(e,t){Yk(e,"connected",t),!1===t&&function(e){Xk(e,"onDisconnectEvents");var t=Wk(e),n=Wy();Hy(e.onDisconnect_,jm(),(function(r,i){var a=mk(r,i,e.serverSyncTree_,t);Qy(n,r,a)}));var r=[];Hy(n,jm(),(function(t,n){r=r.concat(nk(e.serverSyncTree_,t,n));var i=a_(e,t);e_(e,i)})),e.onDisconnect_=Wy(),jk(e.eventQueue_,jm(),r)}(e)}function Yk(e,t,n){var r=new Lm("/.info/"+t),i=Ny(n);e.infoData_.updateSnapshot(r,i);var a=nk(e.infoSyncTree_,r,i);jk(e.eventQueue_,r,a)}function Kk(e){return e.nextWriteId_++}function Gk(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Uk)}function Xk(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Wv.apply(void 0,[t].concat(r))}function $k(e,t,n){return ik(e.serverSyncTree_,t,n)||Iy.EMPTY_NODE}function Zk(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||i_(e,t),wk(t)){var n=n_(e,t);tt(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&Jk(e,Sk(t),n)}else xk(t)&&Ck(t,(function(t){Zk(e,t)}))}function Jk(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=$k(e,t,r),a=i,o=i.hash(),s=0;s<n.length;s++){var u=n[s];tt(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var l=Hm(t,u.path);a=a.updateChild(l,u.currentOutputSnapshotRaw)}var c=a.val(!0),h=t;e.server_.put(h.toString(),c,(function(r){Xk(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(tk(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)o(s);i_(e,_k(e.transactionQueueTree_,t)),Zk(e,e.transactionQueueTree_),jk(e.eventQueue_,t,i);for(var u=0;u<a.length;u++)lm(a[u])}else{if("datastale"===r)for(var l=0;l<n.length;l++)3===n[l].status?n[l].status=4:n[l].status=0;else{Kv("transaction at "+h.toString()+" failed: "+r);for(var c=0;c<n.length;c++)n[c].status=4,n[c].abortReason=r}e_(e,t)}}),o)}function e_(e,t){var n=t_(e,t),r=Sk(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),s=function(a){var s,u=t[a],l=Hm(n,u.path),c=!1,h=void 0;if(tt(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)c=!0,h=u.abortReason,i=i.concat(tk(e.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=25)c=!0,h="maxretry",i=i.concat(tk(e.serverSyncTree_,u.currentWriteId,!0));else{var f=$k(e,u.path,o);u.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){Rk("transaction failed: Data returned ",d,u.path);var p=Ny(d);"object"===typeof d&&null!=d&&Tt(d,".priority")||(p=p.updatePriority(f.getPriority()));var v=u.currentWriteId,m=Wk(e),y=yk(p,f,m);u.currentOutputSnapshotRaw=p,u.currentOutputSnapshotResolved=y,u.currentWriteId=Kk(e),o.splice(o.indexOf(v),1),i=(i=i.concat(ek(e.serverSyncTree_,u.path,y,u.currentWriteId,u.applyLocally))).concat(tk(e.serverSyncTree_,v,!0))}else c=!0,h="nodata",i=i.concat(tk(e.serverSyncTree_,u.currentWriteId,!0))}jk(e.eventQueue_,n,i),i=[],c&&(t[a].status=2,s=t[a].unwatcher,setTimeout(s,Math.floor(0)),t[a].onComplete&&("nodata"===h?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(h),!1,null)}))))},u=0;u<t.length;u++)s(u);i_(e,e.transactionQueueTree_);for(var l=0;l<r.length;l++)lm(r[l]);Zk(e,e.transactionQueueTree_)}(e,n_(e,n),r),r}function t_(e,t){var n,r=e.transactionQueueTree_;for(n=Fm(t);null!==n&&void 0===wk(r);)r=_k(r,n),n=Fm(t=Um(t));return r}function n_(e,t){var n=[];return r_(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function r_(e,t,n){var r=wk(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Ck(t,(function(t){r_(e,t,n)}))}function i_(e,t){var n=wk(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,bk(t,n.length>0?n:void 0)}Ck(t,(function(t){i_(e,t)}))}function a_(e,t){var n=Sk(t_(e,t)),r=_k(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){o_(e,t)})),o_(e,r),Tk(r,(function(t){o_(e,t)})),n}function o_(e,t){var n=wk(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(tt(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(tt(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(tk(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?bk(t,void 0):n.length=a+1,jk(e.eventQueue_,Sk(t),i);for(var s=0;s<r.length;s++)lm(r[s])}}var s_=function(e,t){var n=u_(e),r=n.namespace;"firebase.com"===n.domain&&Yv(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Yv("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Kv("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new gm(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new Lm(n.pathString)}},u_=function(e){var t="",n="",r="",i="",a="",o=!0,s="https",u=443;if("string"===typeof e){var l=e.indexOf("//");l>=0&&(s=e.substring(0,l-1),e=e.substring(l+2));var c=e.indexOf("/");-1===c&&(c=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(c,h)),c<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(c,h)));var f=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=E(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):Kv("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,h)));(l=t.indexOf(":"))>=0?(o="https"===s||"wss"===s,u=parseInt(t.substring(l+1),10)):l=t.length;var d=t.slice(0,l);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in f&&(a=f.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:o,scheme:s,pathString:i,namespace:a}},l_=function(){function e(t,n,r,i){p(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return m(e,[{key:"key",get:function(){return Qm(this._path)?null:Vm(this._path)}},{key:"ref",get:function(){return new c_(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=Vy(this._queryParams),t=tm(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return Vy(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=jt(t))instanceof e))return!1;var n=this._repo===t._repo,r=Ym(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();var c_=function(e){g(n,e);var t=C(n);function n(e,r){return p(this,n),t.call(this,e,r,new By,!1)}return m(n,[{key:"parent",get:function(){var e=qm(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(l_);!function(e){tt(!Hg,"__referenceConstructor has already been defined"),Hg=e}(c_),function(e){tt(!Xg,"__referenceConstructor has already been defined"),Xg=e}(c_);var h_={},f_=!1;function d_(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||Yv("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Wv("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,s=s_(a,i),u=s.repoInfo,l=void 0;"undefined"!==typeof process&&(l={NODE_ENV:"production",PUBLIC_URL:"/incommon",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),l?(o=!0,a="http://".concat(l,"?ns=").concat(u.namespace),u=(s=s_(a,i)).repoInfo):o=!s.repoInfo.secure;var c=i&&o?new dm(dm.OWNER):new fm(e.name,e.options,t);Pk("Invalid Firebase Database URL",s),Qm(s.path)||Yv("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=h_[t.name];i||(i={},h_[t.name]=i);var a=i[e.toURLString()];a&&Yv("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new Vk(e,f_,n,r),i[e.toURLString()]=a,a}(u,e,c,new hm(e.name,n));return new p_(h,e)}var p_=function(){function e(t,n){p(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return m(e,[{key:"_repo",get:function(){return this._instanceStarted||(zk(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new c_(this._repo,jm())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=h_[t];n&&n[e.key]===e||Yv("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),Gk(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&Yv("Cannot call "+e+" on a deleted database.")}}]),e}();ey.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},ey.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){!function(e){Av=e}(Dn),En(new Ft("database",(function(e,t){var n=t.instanceIdentifier;return d_(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Pn(Mv,Nv,e),Pn(Mv,Nv,"esm2017")}();var v_,m_;var y_=new WeakMap,g_=new WeakMap,k_=new WeakMap,__=new WeakMap,w_=new WeakMap;var b_={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return g_.get(e);if("objectStoreNames"===t)return e.objectStoreNames||k_.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return T_(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function x_(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(m_||(m_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(S_(this),n),T_(y_.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return T_(e.apply(S_(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[S_(this),t].concat(r));return k_.set(a,t.sort?t.sort():[t]),T_(a)}}function C_(e){return"function"===typeof e?x_(e):(e instanceof IDBTransaction&&function(e){if(!g_.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));g_.set(e,t)}}(e),t=e,(v_||(v_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,b_):e);var t}function T_(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(T_(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&y_.set(t,e)})).catch((function(){})),w_.set(t,e),t}(e);if(__.has(e))return __.get(e);var t=C_(e);return t!==e&&(__.set(e,t),w_.set(t,e)),t}var S_=function(e){return w_.get(e)};var E_,I_=["get","getKey","getAll","getAllKeys","count"],M_=["put","add","delete","clear"],N_=new Map;function A_(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(N_.get(t))return N_.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=M_.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||I_.includes(n))){var a=function(){var e=Ke(He().mark((function e(t){var a,o,s,u,l,c,h=arguments;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),s=o.store,u=h.length,l=new Array(u>1?u-1:0),c=1;c<u;c++)l[c-1]=h[c];return r&&(s=s.index(l.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,l),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return N_.set(t,a),a}}}!function(e){b_=e(b_)}((function(e){return $t($t({},e),{},{get:function(t,n,r){return A_(t,n)||e.get(t,n,r)},has:function(t,n){return!!A_(t,n)||e.has(t,n)}})}));var D_="@firebase/installations",R_="0.5.12",P_=1e4,O_="w:".concat(R_),L_="FIS_v2",j_=36e5,F_=($e(E_={},"missing-app-config-values",'Missing App configuration value: "{$valueName}"'),$e(E_,"not-registered","Firebase Installation is not registered."),$e(E_,"installation-not-found","Firebase Installation not found."),$e(E_,"request-failed",'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"'),$e(E_,"app-offline","Could not process request. Application offline."),$e(E_,"delete-pending-registration","Can't delete installation while there is a pending registration request."),E_),B_=new kt("installations","Installations",F_);function U_(e){return e instanceof gt&&e.code.includes("request-failed")}function V_(e){var t=e.projectId;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(t,"/installations")}function z_(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function q_(e,t){return W_.apply(this,arguments)}function W_(){return(W_=Ke(He().mark((function e(t,n){var r,i;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:return r=e.sent,i=r.error,e.abrupt("return",B_.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q_(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function H_(e,t){var n=t.refreshToken,r=Q_(e);return r.append("Authorization",function(e){return"".concat(L_," ").concat(e)}(n)),r}function Y_(e){return K_.apply(this,arguments)}function K_(){return K_=Ke(He().mark((function e(t){var n;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:if(!((n=e.sent).status>=500&&n.status<600)){e.next=5;break}return e.abrupt("return",t());case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)}))),K_.apply(this,arguments)}function G_(e,t){return X_.apply(this,arguments)}function X_(){return(X_=Ke(He().mark((function e(t,n){var r,i,a,o,s,u,l,c,h,f,d,p;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.appConfig,i=t.heartbeatServiceProvider,a=n.fid,o=V_(r),s=Q_(r),!(u=i.getImmediate({optional:!0}))){e.next=10;break}return e.next=8,u.getHeartbeatsHeader();case 8:(l=e.sent)&&s.append("x-firebase-client",l);case 10:return c={fid:a,authVersion:L_,appId:r.appId,sdkVersion:O_},h={method:"POST",headers:s,body:JSON.stringify(c)},e.next=14,Y_((function(){return fetch(o,h)}));case 14:if(!(f=e.sent).ok){e.next=23;break}return e.next=18,f.json();case 18:return d=e.sent,p={fid:d.fid||a,registrationStatus:2,refreshToken:d.refreshToken,authToken:z_(d.authToken)},e.abrupt("return",p);case 23:return e.next=25,q_("Create Installation",f);case 25:throw e.sent;case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $_(e){return new Promise((function(t){setTimeout(t,e)}))}var Z_=/^[cdef][\w-]{21}$/;function J_(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){return(t=e,btoa(String.fromCharCode.apply(String,d(t))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return Z_.test(t)?t:""}catch(n){return""}}function ew(e){return"".concat(e.appName,"!").concat(e.appId)}var tw=new Map;function nw(e,t){var n=ew(e);rw(n,t),function(e,t){var n=aw();n&&n.postMessage({key:e,fid:t});ow()}(n,t)}function rw(e,t){var n=tw.get(e);if(n){var r,i=E(n);try{for(i.s();!(r=i.n()).done;){(0,r.value)(t)}}catch(a){i.e(a)}finally{i.f()}}}var iw=null;function aw(){return!iw&&"BroadcastChannel"in self&&((iw=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){rw(e.data.key,e.data.fid)}),iw}function ow(){0===tw.size&&iw&&(iw.close(),iw=null)}var sw="firebase-installations-store",uw=null;function lw(){return uw||(uw=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=T_(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(T_(s.result),e.oldVersion,e.newVersion,T_(s.transaction))})),r&&s.addEventListener("blocked",(function(){return r()})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),u}("firebase-installations-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(sw)}})),uw}function cw(e,t){return hw.apply(this,arguments)}function hw(){return hw=Ke(He().mark((function e(t,n){var r,i,a,o,s;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ew(t),e.next=3,lw();case 3:return i=e.sent,a=i.transaction(sw,"readwrite"),o=a.objectStore(sw),e.next=8,o.get(r);case 8:return s=e.sent,e.next=11,o.put(n,r);case 11:return e.next=13,a.done;case 13:return s&&s.fid===n.fid||nw(t,n.fid),e.abrupt("return",n);case 15:case"end":return e.stop()}}),e)}))),hw.apply(this,arguments)}function fw(e){return dw.apply(this,arguments)}function dw(){return dw=Ke(He().mark((function e(t){var n,r,i;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ew(t),e.next=3,lw();case 3:return r=e.sent,i=r.transaction(sw,"readwrite"),e.next=7,i.objectStore(sw).delete(n);case 7:return e.next=9,i.done;case 9:case"end":return e.stop()}}),e)}))),dw.apply(this,arguments)}function pw(e,t){return vw.apply(this,arguments)}function vw(){return vw=Ke(He().mark((function e(t,n){var r,i,a,o,s,u;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ew(t),e.next=3,lw();case 3:return i=e.sent,a=i.transaction(sw,"readwrite"),o=a.objectStore(sw),e.next=8,o.get(r);case 8:if(s=e.sent,void 0!==(u=n(s))){e.next=15;break}return e.next=13,o.delete(r);case 13:e.next=17;break;case 15:return e.next=17,o.put(u,r);case 17:return e.next=19,a.done;case 19:return!u||s&&s.fid===u.fid||nw(t,u.fid),e.abrupt("return",u);case 21:case"end":return e.stop()}}),e)}))),vw.apply(this,arguments)}function mw(e){return yw.apply(this,arguments)}function yw(){return(yw=Ke(He().mark((function e(t){var n,r;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pw(t.appConfig,(function(e){var r=gw(e),i=kw(t,r);return n=i.registrationPromise,i.installationEntry}));case 2:if(""!==(r=e.sent).fid){e.next=8;break}return e.next=6,n;case 6:return e.t0=e.sent,e.abrupt("return",{installationEntry:e.t0});case 8:return e.abrupt("return",{installationEntry:r,registrationPromise:n});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gw(e){return Cw(e||{fid:J_(),registrationStatus:0})}function kw(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(B_.create("app-offline"))};var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=function(e,t){return _w.apply(this,arguments)}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:ww(e)}:{installationEntry:t}}function _w(){return(_w=Ke(He().mark((function e(t,n){var r;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G_(t,n);case 3:return r=e.sent,e.abrupt("return",cw(t.appConfig,r));case 7:if(e.prev=7,e.t0=e.catch(0),!U_(e.t0)||409!==e.t0.customData.serverCode){e.next=14;break}return e.next=12,fw(t.appConfig);case 12:e.next=16;break;case 14:return e.next=16,cw(t.appConfig,{fid:n.fid,registrationStatus:0});case 16:throw e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function ww(e){return bw.apply(this,arguments)}function bw(){return(bw=Ke(He().mark((function e(t){var n,r,i,a;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xw(t.appConfig);case 2:n=e.sent;case 3:if(1!==n.registrationStatus){e.next=11;break}return e.next=6,$_(100);case 6:return e.next=8,xw(t.appConfig);case 8:n=e.sent,e.next=3;break;case 11:if(0!==n.registrationStatus){e.next=22;break}return e.next=14,mw(t);case 14:if(r=e.sent,i=r.installationEntry,!(a=r.registrationPromise)){e.next=21;break}return e.abrupt("return",a);case 21:return e.abrupt("return",i);case 22:return e.abrupt("return",n);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xw(e){return pw(e,(function(e){if(!e)throw B_.create("installation-not-found");return Cw(e)}))}function Cw(e){return 1===(t=e).registrationStatus&&t.registrationTime+P_<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function Tw(e,t){return Sw.apply(this,arguments)}function Sw(){return(Sw=Ke(He().mark((function e(t,n){var r,i,a,o,s,u,l,c,h,f,d;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.appConfig,i=t.heartbeatServiceProvider,a=Ew(r,n),o=H_(r,n),!(s=i.getImmediate({optional:!0}))){e.next=9;break}return e.next=7,s.getHeartbeatsHeader();case 7:(u=e.sent)&&o.append("x-firebase-client",u);case 9:return l={installation:{sdkVersion:O_,appId:r.appId}},c={method:"POST",headers:o,body:JSON.stringify(l)},e.next=13,Y_((function(){return fetch(a,c)}));case 13:if(!(h=e.sent).ok){e.next=22;break}return e.next=17,h.json();case 17:return f=e.sent,d=z_(f),e.abrupt("return",d);case 22:return e.next=24,q_("Generate Auth Token",h);case 24:throw e.sent;case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ew(e,t){var n=t.fid;return"".concat(V_(e),"/").concat(n,"/authTokens:generate")}function Iw(e){return Mw.apply(this,arguments)}function Mw(){return Mw=Ke(He().mark((function e(t){var n,r,i,a,o=arguments;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]&&o[1],e.next=3,pw(t.appConfig,(function(e){if(!Ow(e))throw B_.create("not-registered");var i=e.authToken;if(!n&&Lw(i))return e;if(1===i.requestStatus)return r=Nw(t,n),e;if(!navigator.onLine)throw B_.create("app-offline");var a=jw(e);return r=Rw(t,a),a}));case 3:if(i=e.sent,!r){e.next=10;break}return e.next=7,r;case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=i.authToken;case 11:return a=e.t0,e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),Mw.apply(this,arguments)}function Nw(e,t){return Aw.apply(this,arguments)}function Aw(){return(Aw=Ke(He().mark((function e(t,n){var r,i;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dw(t.appConfig);case 2:r=e.sent;case 3:if(1!==r.authToken.requestStatus){e.next=11;break}return e.next=6,$_(100);case 6:return e.next=8,Dw(t.appConfig);case 8:r=e.sent,e.next=3;break;case 11:if(0!==(i=r.authToken).requestStatus){e.next=16;break}return e.abrupt("return",Iw(t,n));case 16:return e.abrupt("return",i);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dw(e){return pw(e,(function(e){if(!Ow(e))throw B_.create("not-registered");var t,n=e.authToken;return 1===(t=n).requestStatus&&t.requestTime+P_<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e}))}function Rw(e,t){return Pw.apply(this,arguments)}function Pw(){return(Pw=Ke(He().mark((function e(t,n){var r,i,a;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Tw(t,n);case 3:return r=e.sent,i=Object.assign(Object.assign({},n),{authToken:r}),e.next=7,cw(t.appConfig,i);case 7:return e.abrupt("return",r);case 10:if(e.prev=10,e.t0=e.catch(0),!U_(e.t0)||401!==e.t0.customData.serverCode&&404!==e.t0.customData.serverCode){e.next=17;break}return e.next=15,fw(t.appConfig);case 15:e.next=20;break;case 17:return a=Object.assign(Object.assign({},n),{authToken:{requestStatus:0}}),e.next=20,cw(t.appConfig,a);case 20:throw e.t0;case 21:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function Ow(e){return void 0!==e&&2===e.registrationStatus}function Lw(e){return 2===e.requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+j_}(e)}function jw(e){var t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function Fw(){return(Fw=Ke(He().mark((function e(t){var n,r,i,a;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.next=3,mw(n);case 3:return r=e.sent,i=r.installationEntry,(a=r.registrationPromise)?a.catch(console.error):Iw(n).catch(console.error),e.abrupt("return",i.fid);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bw(){return Bw=Ke(He().mark((function e(t){var n,r,i,a=arguments;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]&&a[1],r=t,e.next=4,Uw(r);case 4:return e.next=6,Iw(r,n);case 6:return i=e.sent,e.abrupt("return",i.token);case 8:case"end":return e.stop()}}),e)}))),Bw.apply(this,arguments)}function Uw(e){return Vw.apply(this,arguments)}function Vw(){return(Vw=Ke(He().mark((function e(t){var n,r;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mw(t);case 2:if(n=e.sent,!(r=n.registrationPromise)){e.next=7;break}return e.next=7,r;case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zw(e){return B_.create("missing-app-config-values",{valueName:e})}var qw,Ww="installations",Qw=function(e){var t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw zw("App Configuration");if(!e.name)throw zw("App Name");for(var t=0,n=["projectId","apiKey","appId"];t<n.length;t++){var r=n[t];if(!e.options[r])throw zw(r)}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:In(t,"heartbeat"),_delete:function(){return Promise.resolve()}}},Hw=function(e){var t=In(e.getProvider("app").getImmediate(),Ww).getImmediate(),n={getId:function(){return function(e){return Fw.apply(this,arguments)}(t)},getToken:function(e){return function(e){return Bw.apply(this,arguments)}(t,e)}};return n};En(new Ft(Ww,Qw,"PUBLIC")),En(new Ft("installations-internal",Hw,"PRIVATE")),Pn(D_,R_),Pn(D_,R_,"esm2017");var Yw="analytics",Kw=6e4,Gw="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Xw="https://www.googletagmanager.com/gtag/js",$w=new Gt("@firebase/analytics");function Zw(e){return Promise.all(e.map((function(e){return e.catch((function(e){return e}))})))}function Jw(e,t){var n=document.createElement("script");n.src="".concat(Xw,"?l=").concat(e,"&id=").concat(t),n.async=!0,document.head.appendChild(n)}function eb(e,t,n,r,i,a){return tb.apply(this,arguments)}function tb(){return tb=Ke(He().mark((function e(t,n,r,i,a,o){var s,u,l;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=i[a],e.prev=1,!s){e.next=7;break}return e.next=5,n[s];case 5:e.next=14;break;case 7:return e.next=9,Zw(r);case 9:if(u=e.sent,l=u.find((function(e){return e.measurementId===a})),!l){e.next=14;break}return e.next=14,n[l.appId];case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),$w.error(e.t0);case 19:t("config",a,o);case 20:case"end":return e.stop()}}),e,null,[[1,16]])}))),tb.apply(this,arguments)}function nb(e,t,n,r,i){return rb.apply(this,arguments)}function rb(){return rb=Ke(He().mark((function e(t,n,r,i,a){var o,s,u,l,c,h;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o=[],!a||!a.send_to){e.next=26;break}return s=a.send_to,Array.isArray(s)||(s=[s]),e.next=7,Zw(r);case 7:u=e.sent,l=E(s),e.prev=9,h=function(){var e=c.value,t=u.find((function(t){return t.measurementId===e})),r=t&&n[t.appId];if(!r)return o=[],"break";o.push(r)},l.s();case 12:if((c=l.n()).done){e.next=18;break}if("break"!==h()){e.next=16;break}return e.abrupt("break",18);case 16:e.next=12;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(9),l.e(e.t0);case 23:return e.prev=23,l.f(),e.finish(23);case 26:return 0===o.length&&(o=Object.values(n)),e.next=29,Promise.all(o);case 29:t("event",i,a||{}),e.next=35;break;case 32:e.prev=32,e.t1=e.catch(0),$w.error(e.t1);case 35:case"end":return e.stop()}}),e,null,[[0,32],[9,20,23,26]])}))),rb.apply(this,arguments)}function ib(e,t,n,r,i){var a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(a=window[i]),window[i]=function(e,t,n,r){function i(){return(i=Ke(He().mark((function i(a,o,s){return He().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,"event"!==a){i.next=6;break}return i.next=4,nb(e,t,n,o,s);case 4:i.next=12;break;case 6:if("config"!==a){i.next=11;break}return i.next=9,eb(e,t,n,r,o,s);case 9:i.next=12;break;case 11:"consent"===a?e("consent","update",s):e("set",o);case 12:i.next=17;break;case 14:i.prev=14,i.t0=i.catch(0),$w.error(i.t0);case 17:case"end":return i.stop()}}),i,null,[[0,14]])})))).apply(this,arguments)}return function(e,t,n){return i.apply(this,arguments)}}(a,e,t,n),{gtagCore:a,wrappedGtag:window[i]}}function ab(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(Xw))return r}return null}var ob=($e(qw={},"already-exists","A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId."),$e(qw,"already-initialized","initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance."),$e(qw,"already-initialized-settings","Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect."),$e(qw,"interop-component-reg-failed","Firebase Analytics Interop Component failed to instantiate: {$reason}"),$e(qw,"invalid-analytics-context","Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),$e(qw,"indexeddb-unavailable","IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),$e(qw,"fetch-throttle","The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}."),$e(qw,"config-fetch-failed","Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}"),$e(qw,"no-api-key",'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.'),$e(qw,"no-app-id",'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'),qw),sb=new kt("analytics","Analytics",ob),ub=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;p(this,e),this.throttleMetadata=t,this.intervalMillis=n}return m(e,[{key:"getThrottleMetadata",value:function(e){return this.throttleMetadata[e]}},{key:"setThrottleMetadata",value:function(e,t){this.throttleMetadata[e]=t}},{key:"deleteThrottleMetadata",value:function(e){delete this.throttleMetadata[e]}}]),e}(),lb=new ub;function cb(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function hb(e){return fb.apply(this,arguments)}function fb(){return fb=Ke(He().mark((function e(t){var n,r,i,a,o,s,u,l;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.appId,i=t.apiKey,a={method:"GET",headers:cb(i)},o=Gw.replace("{app-id}",r),e.next=5,fetch(o,a);case 5:if(200===(s=e.sent).status||304===s.status){e.next=18;break}return u="",e.prev=8,e.next=11,s.json();case 11:l=e.sent,(null===(n=l.error)||void 0===n?void 0:n.message)&&(u=l.error.message),e.next=17;break;case 15:e.prev=15,e.t0=e.catch(8);case 17:throw sb.create("config-fetch-failed",{httpStatus:s.status,responseMessage:u});case 18:return e.abrupt("return",s.json());case 19:case"end":return e.stop()}}),e,null,[[8,15]])}))),fb.apply(this,arguments)}function db(e){return pb.apply(this,arguments)}function pb(){return pb=Ke(He().mark((function e(t){var n,r,i,a,o,s,u,l,c=arguments;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.length>1&&void 0!==c[1]?c[1]:lb,r=c.length>2?c[2]:void 0,i=t.options,a=i.appId,o=i.apiKey,s=i.measurementId,a){e.next=5;break}throw sb.create("no-app-id");case 5:if(o){e.next=9;break}if(!s){e.next=8;break}return e.abrupt("return",{measurementId:s,appId:a});case 8:throw sb.create("no-api-key");case 9:return u=n.getThrottleMetadata(a)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new wb,setTimeout(Ke(He().mark((function e(){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.abort();case 1:case"end":return e.stop()}}),e)}))),void 0!==r?r:Kw),e.abrupt("return",vb({appId:a,apiKey:o,measurementId:s},u,l,n));case 13:case"end":return e.stop()}}),e)}))),pb.apply(this,arguments)}function vb(e,t,n){return mb.apply(this,arguments)}function mb(){return mb=Ke(He().mark((function e(t,n,r){var i,a,o,s,u,l,c,h,f,d,p,v=arguments;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.throttleEndTimeMillis,a=n.backoffCount,o=v.length>3&&void 0!==v[3]?v[3]:lb,l=t.appId,c=t.measurementId,e.prev=3,e.next=6,yb(r,i);case 6:e.next=14;break;case 8:if(e.prev=8,e.t0=e.catch(3),!c){e.next=13;break}return $w.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(c)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===(s=e.t0)||void 0===s?void 0:s.message,"]")),e.abrupt("return",{appId:l,measurementId:c});case 13:throw e.t0;case 14:return e.prev=14,e.next=17,hb(t);case 17:return h=e.sent,o.deleteThrottleMetadata(l),e.abrupt("return",h);case 22:if(e.prev=22,e.t1=e.catch(14),gb(f=e.t1)){e.next=33;break}if(o.deleteThrottleMetadata(l),!c){e.next=32;break}return $w.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(c)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===f||void 0===f?void 0:f.message,"]")),e.abrupt("return",{appId:l,measurementId:c});case 32:throw e.t1;case 33:return d=503===Number(null===(u=null===f||void 0===f?void 0:f.customData)||void 0===u?void 0:u.httpStatus)?Lt(a,o.intervalMillis,30):Lt(a,o.intervalMillis),p={throttleEndTimeMillis:Date.now()+d,backoffCount:a+1},o.setThrottleMetadata(l,p),$w.debug("Calling attemptFetch again in ".concat(d," millis")),e.abrupt("return",vb(t,p,r,o));case 38:case"end":return e.stop()}}),e,null,[[3,8],[14,22]])}))),mb.apply(this,arguments)}function yb(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),a=setTimeout(n,i);e.addEventListener((function(){clearTimeout(a),r(sb.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}function gb(e){if(!(e instanceof gt)||!e.customData)return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}var kb,_b,wb=function(){function e(){p(this,e),this.listeners=[]}return m(e,[{key:"addEventListener",value:function(e){this.listeners.push(e)}},{key:"abort",value:function(){this.listeners.forEach((function(e){return e()}))}}]),e}();function bb(){return(bb=Ke(He().mark((function e(t,n,r,i,a){var o,s;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a||!a.global){e.next=5;break}return t("event",r,i),e.abrupt("return");case 5:return e.next=7,n;case 7:o=e.sent,s=Object.assign(Object.assign({},i),{send_to:o}),t("event",r,s);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xb(e){_b=e}function Cb(e){kb=e}function Tb(){return Sb.apply(this,arguments)}function Sb(){return Sb=Ke(He().mark((function e(){var t;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(mt()){e.next=5;break}return $w.warn(sb.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),e.abrupt("return",!1);case 5:return e.prev=5,e.next=8,yt();case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(5),$w.warn(sb.create("indexeddb-unavailable",{errorInfo:null===(t=e.t0)||void 0===t?void 0:t.toString()}).message),e.abrupt("return",!1);case 14:return e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e,null,[[5,10]])}))),Sb.apply(this,arguments)}function Eb(){return Eb=Ke(He().mark((function e(t,n,r,i,a,o,s){var l,c,h,f,d,p,v,m;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=db(t)).then((function(e){r[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&$w.warn("The measurement ID in the local Firebase config (".concat(t.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(e.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(e){return $w.error(e)})),n.push(c),h=Tb().then((function(e){return e?i.getId():void 0})),e.next=6,Promise.all([c,h]);case 6:return f=e.sent,d=u(f,2),p=d[0],v=d[1],ab()||Jw(o,p.measurementId),_b&&(a("consent","default",_b),xb(void 0)),a("js",new Date),(m=null!==(l=null===s||void 0===s?void 0:s.config)&&void 0!==l?l:{}).origin="firebase",m.update=!0,null!=v&&(m.firebase_id=v),a("config",p.measurementId,m),kb&&(a("set",kb),Cb(void 0)),e.abrupt("return",p.measurementId);case 20:case"end":return e.stop()}}),e)}))),Eb.apply(this,arguments)}var Ib,Mb,Nb=function(){function e(t){p(this,e),this.app=t}return m(e,[{key:"_delete",value:function(){return delete Ab[this.app.options.appId],Promise.resolve()}}]),e}(),Ab={},Db=[],Rb={},Pb="dataLayer",Ob="gtag",Lb=!1;function jb(){var e=[];if(dt()&&e.push("This is a browser extension environment."),"undefined"!==typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){var t=e.map((function(e,t){return"(".concat(t+1,") ").concat(e)})).join(" "),n=sb.create("invalid-analytics-context",{errorInfo:t});$w.warn(n.message)}}function Fb(e,t,n){jb();var r=e.options.appId;if(!r)throw sb.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw sb.create("no-api-key");$w.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=Ab[r])throw sb.create("already-exists",{id:r});if(!Lb){!function(e){var t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Pb);var i=ib(Ab,Db,Rb,Pb,Ob),a=i.wrappedGtag,o=i.gtagCore;Mb=a,Ib=o,Lb=!0}return Ab[r]=function(e,t,n,r,i,a,o){return Eb.apply(this,arguments)}(e,Db,Rb,t,Ib,Pb,n),new Nb(e)}function Bb(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=In(e,Yw);if(n.isInitialized()){var r=n.getImmediate();if(Mt(t,n.getOptions()))return r;throw sb.create("already-initialized")}var i=n.initialize({options:t});return i}function Ub(e,t,n,r){e=jt(e),function(e,t,n,r,i){return bb.apply(this,arguments)}(Mb,Ab[e.app.options.appId],t,n,r).catch((function(e){return $w.error(e)}))}var Vb="@firebase/analytics",zb="0.8.0";En(new Ft(Yw,(function(e,t){var n=t.options;return Fb(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),En(new Ft("analytics-internal",(function(e){try{var t=e.getProvider(Yw).getImmediate();return{logEvent:function(e,n,r){return Ub(t,e,n,r)}}}catch(n){throw sb.create("interop-component-reg-failed",{reason:n})}}),"PRIVATE")),Pn(Vb,zb),Pn(Vb,zb,"esm2017");var qb=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:bn,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Nn.create("bad-app-name",{appName:String(i)});var a=Cn.get(i);if(a){if(Mt(e,a.options)&&Mt(r,a.config))return a;throw Nn.create("duplicate-app",{appName:i})}var o,s=new qt(i),u=E(Tn.values());try{for(u.s();!(o=u.n()).done;){var l=o.value;s.addComponent(l)}}catch(h){u.e(h)}finally{u.f()}var c=new An(e,r,s);return Cn.set(i,c),c}({apiKey:"AIzaSyBdLzhc6y-wl1WgUGZtLM-KwEVMJzGLXUg",authDomain:"incommon-5a80d.firebaseapp.com",projectId:"incommon-5a80d",storageBucket:"incommon-5a80d.appspot.com",messagingSenderId:"628109166184",appId:"1:628109166184:web:c32f3050c96227bcfb9ddd",measurementId:"G-1DGT55E1YT"}),Wb=(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rn(),t=In(e=jt(e),Yw);t.isInitialized()?t.getImmediate():Bb(e)}(qb),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rn();return In(e,"firestore").getImmediate()}()),Qb=JSON.parse('[{"name":"Johnny Depp","imageUrl":"https://m.media-amazon.com/images/M/MV5BOTBhMTI1NDQtYmU4Mi00MjYyLTk5MjEtZjllMDkxOWY3ZGRhXkEyXkFqcGdeQXVyNzI1NzMxNzM@._V1_UY209_CR1,0,140,209_AL_.jpg"},{"name":"Arnold Schwarzenegger","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTI3MDc4NzUyMV5BMl5BanBnXkFtZTcwMTQyMTc5MQ@@._V1_UY209_CR13,0,140,209_AL_.jpg"},{"name":"Jim Carrey","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTQwMjAwNzI0M15BMl5BanBnXkFtZTcwOTY1MTMyOQ@@._V1_UY209_CR15,0,140,209_AL_.jpg"},{"name":"Emma Watson","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTQ3ODE2NTMxMV5BMl5BanBnXkFtZTgwOTIzOTQzMjE@._V1_UY209_CR14,0,140,209_AL_.jpg"},{"name":"Robert Downey Jr.","imageUrl":"https://m.media-amazon.com/images/M/MV5BNzg1MTUyNDYxOF5BMl5BanBnXkFtZTgwNTQ4MTE2MjE@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Daniel Radcliffe","imageUrl":"https://m.media-amazon.com/images/M/MV5BZmE0NzNiNzQtYTVlYS00MjljLWE4MTgtYzYxNjU2NjZkM2M4XkEyXkFqcGdeQXVyNjY5NDgzNjQ@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Chris Evans","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTU2NTg1OTQzMF5BMl5BanBnXkFtZTcwNjIyMjkyMg@@._V1_UY209_CR4,0,140,209_AL_.jpg"},{"name":"Leonardo DiCaprio","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjI0MTg3MzI0M15BMl5BanBnXkFtZTcwMzQyODU2Mw@@._V1_UY209_CR7,0,140,209_AL_.jpg"},{"name":"Tom Cruise","imageUrl":"https://m.media-amazon.com/images/M/MV5BYTFlOTdjMjgtNmY0ZC00MDgxLThjNmEtZGIxZTQyZDdkMTRjXkEyXkFqcGdeQXVyMTkxNjUyNQ@@._V1_UY209_CR7,0,140,209_AL_.jpg"},{"name":"Brad Pitt","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjA1MjE2MTQ2MV5BMl5BanBnXkFtZTcwMjE5MDY0Nw@@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Charles Chaplin","imageUrl":"https://m.media-amazon.com/images/M/MV5BNDcwMDc0ODAzOF5BMl5BanBnXkFtZTgwNTY2OTI1MDE@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Morgan Freeman","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTc0MDMyMzI2OF5BMl5BanBnXkFtZTcwMzM2OTk1MQ@@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Tom Hanks","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTQ2MjMwNDA3Nl5BMl5BanBnXkFtZTcwMTA2NDY3NQ@@._V1_UY209_CR2,0,140,209_AL_.jpg"},{"name":"Hugh Jackman","imageUrl":"https://m.media-amazon.com/images/M/MV5BNDExMzIzNjk3Nl5BMl5BanBnXkFtZTcwOTE4NDU5OA@@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Matt Damon","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTM0NzYzNDgxMl5BMl5BanBnXkFtZTcwMDg2MTMyMw@@._V1_UY209_CR8,0,140,209_AL_.jpg"},{"name":"Sylvester Stallone","imageUrl":"https://m.media-amazon.com/images/M/MV5BOGU0Y2JiMGEtYzc0Ni00MDIwLTgxZGYtOWE2ZDMzYWQ5MjI0XkEyXkFqcGdeQXVyMTI3NjAxODc0._V1_UY209_CR22,0,140,209_AL_.jpg"},{"name":"Will Smith","imageUrl":"https://m.media-amazon.com/images/M/MV5BNTczMzk1MjU1MV5BMl5BanBnXkFtZTcwNDk2MzAyMg@@._V1_UY209_CR2,0,140,209_AL_.jpg"},{"name":"Clint Eastwood","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTg3MDc0MjY0OV5BMl5BanBnXkFtZTcwNzU1MDAxOA@@._V1_UY209_CR7,0,140,209_AL_.jpg"},{"name":"Cameron Diaz","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTkxNTI5NzM4MV5BMl5BanBnXkFtZTcwMTI3ODY3Mg@@._V1_UY209_CR1,0,140,209_AL_.jpg"},{"name":"George Clooney","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjEyMTEyOTQ0MV5BMl5BanBnXkFtZTcwNzU3NTMzNw@@._V1_UY209_CR7,0,140,209_AL_.jpg"},{"name":"Steven Spielberg","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTY1NjAzNzE1MV5BMl5BanBnXkFtZTYwNTk0ODc0._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Harrison Ford","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTY4Mjg0NjIxOV5BMl5BanBnXkFtZTcwMTM2NTI3MQ@@._V1_UY209_CR0,0,140,209_AL_.jpg"},{"name":"Robert De Niro","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjAwNDU3MzcyOV5BMl5BanBnXkFtZTcwMjc0MTIxMw@@._V1_UY209_CR9,0,140,209_AL_.jpg"},{"name":"Al Pacino","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTQzMzg1ODAyNl5BMl5BanBnXkFtZTYwMjAxODQ1._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Robert Downey Jr.","imageUrl":"https://m.media-amazon.com/images/M/MV5BNzg1MTUyNDYxOF5BMl5BanBnXkFtZTgwNTQ4MTE2MjE@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Russell Crowe","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTQyMTExNTMxOF5BMl5BanBnXkFtZTcwNDg1NzkzNw@@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Liam Neeson","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjA1MTQ3NzU1MV5BMl5BanBnXkFtZTgwMDE3Mjg0MzE@._V1_UY209_CR35,0,140,209_AL_.jpg"},{"name":"Kate Winslet","imageUrl":"https://m.media-amazon.com/images/M/MV5BODgzMzM2NTE0Ml5BMl5BanBnXkFtZTcwMTcyMTkyOQ@@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Mark Wahlberg","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTU0MTQ4OTMyMV5BMl5BanBnXkFtZTcwMTQxOTY1NA@@._V1_UY209_CR10,0,140,209_AL_.jpg"},{"name":"Natalie Portman","imageUrl":"https://m.media-amazon.com/images/M/MV5BYzU0ZGRhZWItMGJlNy00YzlkLWIzOWYtNDA2NzlhMDg3YjMwXkEyXkFqcGdeQXVyMDM2NDM2MQ@@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Pierce Brosnan","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTMwMjMxNzM4OV5BMl5BanBnXkFtZTcwNDM5NzkxMw@@._V1_UY209_CR6,0,140,209_AL_.jpg"},{"name":"Sean Connery","imageUrl":"https://m.media-amazon.com/images/M/MV5BMzcwNTM4MzctYjQzMi00NTA2LTljYWItNTYzNmE1MTYxN2RlXkEyXkFqcGdeQXVyMDI2NDg0NQ@@._V1_UY209_CR11,0,140,209_AL_.jpg"},{"name":"Orlando Bloom","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjE1MDkxMjQ3NV5BMl5BanBnXkFtZTcwMzQ3Mjc4MQ@@._V1_UY209_CR6,0,140,209_AL_.jpg"},{"name":"Dwayne Johnson","imageUrl":"https://m.media-amazon.com/images/M/MV5BOWU1ODBiNGUtMzVjNi00MzdhLTk0OTktOWRiOTIxMWNhOGI2XkEyXkFqcGdeQXVyMTU2OTM5NDQw._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Jackie Chan","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTk4MDM0MDUzM15BMl5BanBnXkFtZTcwOTI4MzU1Mw@@._V1_UY209_CR5,0,140,209_AL_.jpg"},{"name":"Angelina Jolie","imageUrl":"https://m.media-amazon.com/images/M/MV5BODg3MzYwMjE4N15BMl5BanBnXkFtZTcwMjU5NzAzNw@@._V1_UY209_CR15,0,140,209_AL_.jpg"},{"name":"Adam Sandler","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjQyNzM2MjM1Ml5BMl5BanBnXkFtZTcwMDE5NjI3Mg@@._V1_UY209_CR5,0,140,209_AL_.jpg"},{"name":"Scarlett Johansson","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTM3OTUwMDYwNl5BMl5BanBnXkFtZTcwNTUyNzc3Nw@@._V1_UY209_CR16,0,140,209_AL_.jpg"},{"name":"Heath Ledger","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTI2NTY0NzA4MF5BMl5BanBnXkFtZTYwMjE1MDE0._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Anne Hathaway","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTRhNzQ3NGMtZmQ1Mi00ZTViLTk3OTgtOTk0YzE2YTgwMmFjXkEyXkFqcGdeQXVyNzg5MzIyOA@@._V1_UY209_CR14,0,140,209_AL_.jpg"},{"name":"Jessica Alba","imageUrl":"https://m.media-amazon.com/images/M/MV5BODYxNzE4OTk5Nl5BMl5BanBnXkFtZTcwODYyMDYzMw@@._V1_UY209_CR8,0,140,209_AL_.jpg"},{"name":"Edward Norton","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTYwNjQ5MTI1NF5BMl5BanBnXkFtZTcwMzU5MTI2Mw@@._V1_UY209_CR11,0,140,209_AL_.jpg"},{"name":"Keira Knightley","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTYwNDM0NDA3M15BMl5BanBnXkFtZTcwNTkzMjQ3OA@@._V1_UY209_CR4,0,140,209_AL_.jpg"},{"name":"Bradley Cooper","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjM0OTIyMzY1M15BMl5BanBnXkFtZTgwMTg0OTE0NzE@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Will Ferrell","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTMxMDIzMDEzNF5BMl5BanBnXkFtZTcwODcxMjE2Mg@@._V1_UY209_CR2,0,140,209_AL_.jpg"},{"name":"Julia Roberts","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTQzNjU3MDczN15BMl5BanBnXkFtZTYwNzY2Njc4._V1_UY209_CR0,0,140,209_AL_.jpg"},{"name":"Nicolas Cage","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjUxMjE4MTQxMF5BMl5BanBnXkFtZTcwNzc2MDM1NA@@._V1_UY209_CR6,0,140,209_AL_.jpg"},{"name":"Daniel Craig","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjEzMjk4NDU4MF5BMl5BanBnXkFtZTcwMDMyNjQzMg@@._V1_UY209_CR0,0,140,209_AL_.jpg"},{"name":"Keanu Reeves","imageUrl":"https://m.media-amazon.com/images/M/MV5BNGJmMWEzOGQtMWZkNS00MGNiLTk5NGEtYzg1YzAyZTgzZTZmXkEyXkFqcGdeQXVyMTE1MTYxNDAw._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Ian McKellen","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTQ2MjgyNjk3MV5BMl5BanBnXkFtZTcwNTA3NTY5Mg@@._V1_UY209_CR7,0,140,209_AL_.jpg"},{"name":"Halle Berry","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjIxNzc5MDAzOV5BMl5BanBnXkFtZTcwMDUxMjMxMw@@._V1_UY209_CR7,0,140,209_AL_.jpg"},{"name":"Bruce Willis","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjA0MjMzMTE5OF5BMl5BanBnXkFtZTcwMzQ2ODE3Mw@@._V1_UY209_CR19,0,140,209_AL_.jpg"},{"name":"Samuel L. Jackson","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTQ1NTQwMTYxNl5BMl5BanBnXkFtZTYwMjA1MzY1._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Ben Stiller","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjc4NDc3NDkzMl5BMl5BanBnXkFtZTcwMTAyNTQwMw@@._V1_UY209_CR9,0,140,209_AL_.jpg"},{"name":"Tommy Lee Jones","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTkyNjc4MDc0OV5BMl5BanBnXkFtZTcwOTc5OTUwOQ@@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Antonio Banderas","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTUyOTQ3NTYyNF5BMl5BanBnXkFtZTcwMTY2NjIzNQ@@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Denzel Washington","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjE5NDU2Mzc3MV5BMl5BanBnXkFtZTcwNjAwNTE5OQ@@._V1_UY209_CR8,0,140,209_AL_.jpg"},{"name":"Steve Carell","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjMyOTM2OTk1Ml5BMl5BanBnXkFtZTgwMTI3MzkyNjM@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Shia LaBeouf","imageUrl":"https://m.media-amazon.com/images/M/MV5BZjNjNTI5NGMtMmMzZS00ZWRhLWJhZDQtMWEwODlkMzEyNWJlXkEyXkFqcGdeQXVyMjQwMDg0Ng@@._V1_UY209_CR11,0,140,209_AL_.jpg"},{"name":"Megan Fox","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTc5MjgyMzk4NF5BMl5BanBnXkFtZTcwODk2OTM4Mg@@._V1_UY209_CR3,0,140,209_AL_.jpg"},{"name":"James Franco","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjA4MzMzNDM5MF5BMl5BanBnXkFtZTgwMjQ0MDk0NDM@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Mel Gibson","imageUrl":"https://m.media-amazon.com/images/M/MV5BNTUzOTMwNTM0OV5BMl5BanBnXkFtZTcwNDQwMTUxMw@@._V1_UY209_CR6,0,140,209_AL_.jpg"},{"name":"Vin Diesel","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjExNzA4MDYxN15BMl5BanBnXkFtZTcwOTI1MDAxOQ@@._V1_UY209_CR5,0,140,209_AL_.jpg"},{"name":"Tim Allen","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTI5ODY0NTAwOF5BMl5BanBnXkFtZTcwOTI3NjQxMw@@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Robin Williams","imageUrl":"https://m.media-amazon.com/images/M/MV5BNTYzMjc2Mjg4MF5BMl5BanBnXkFtZTcwODc1OTQwNw@@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Kevin Spacey","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTY1NzMyODc3Nl5BMl5BanBnXkFtZTgwNzE2MzA1NDM@._V1_UY209_CR58,0,140,209_AL_.jpg"},{"name":"Jason Biggs","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjAzMTM0NzkwM15BMl5BanBnXkFtZTcwMDQwMjU0NA@@._V1_UY209_CR13,0,140,209_AL_.jpg"},{"name":"Seann William Scott","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjEzMjk1NTA1Ml5BMl5BanBnXkFtZTcwNjQyNjAwOQ@@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Jean-Claude Van Damme","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTA2OTE1Njg4NjVeQTJeQWpwZ15BbWU3MDAyNjU4MDM@._V1_UY209_CR15,0,140,209_AL_.jpg"},{"name":"Zach Galifianakis","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTQwNzI3NjIwMV5BMl5BanBnXkFtZTcwMzA1OTIwMw@@._V1_UY209_CR1,0,140,209_AL_.jpg"},{"name":"Owen Wilson","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTgwMzQ4ODYxMV5BMl5BanBnXkFtZTcwNDAwMTc2NQ@@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Christian Bale","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTkxMzk4MjQ4MF5BMl5BanBnXkFtZTcwMzExODQxOA@@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Peter Jackson","imageUrl":"https://m.media-amazon.com/images/M/MV5BYjFjOThjMjgtYzM5ZS00Yjc0LTk5OTAtYWE4Y2IzMDYyZTI5XkEyXkFqcGdeQXVyMTMxMTIwMTE0._V1_UY209_CR75,0,140,209_AL_.jpg"},{"name":"Sandra Bullock","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTI5NDY5NjU3NF5BMl5BanBnXkFtZTcwMzQ0MTMyMw@@._V1_UY209_CR1,0,140,209_AL_.jpg"},{"name":"Bruce Lee","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTUwMTg4NDkzMV5BMl5BanBnXkFtZTYwMjU4Nzc2._V1_UY209_CR59,0,140,209_AL_.jpg"},{"name":"Drew Barrymore","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjEyOTMzODIxM15BMl5BanBnXkFtZTcwODM2NTY5Mg@@._V1_UY209_CR4,0,140,209_AL_.jpg"},{"name":"Macaulay Culkin","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTM1NzUwMjY2M15BMl5BanBnXkFtZTcwOTI5MTMyMw@@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Jack Nicholson","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTQ3OTY0ODk0M15BMl5BanBnXkFtZTYwNzE4Njc4._V1_UY209_CR5,0,140,209_AL_.jpg"},{"name":"Bill Murray","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTQ1OTM0MjEwOF5BMl5BanBnXkFtZTYwNTQwNzI1._V1_UY209_CR1,0,140,209_AL_.jpg"},{"name":"Sigourney Weaver","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTk1MTcyNTE3OV5BMl5BanBnXkFtZTcwMTA0MTMyMw@@._V1_UY209_CR8,0,140,209_AL_.jpg"},{"name":"Jake Gyllenhaal","imageUrl":"https://m.media-amazon.com/images/M/MV5BNjA0MTU2NDY3MF5BMl5BanBnXkFtZTgwNDU4ODkzMzE@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Jason Statham","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTkxMzk2MDkwOV5BMl5BanBnXkFtZTcwMDAxODQwMg@@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Jet Li","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjAxNjc0MjIyM15BMl5BanBnXkFtZTcwNTM2NDA4MQ@@._V1_UY209_CR16,0,140,209_AL_.jpg"},{"name":"Kate Beckinsale","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTM3MzY2MDYwOF5BMl5BanBnXkFtZTcwODQ3MDA0Nw@@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Rowan Atkinson","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTg3NDUzOTc3MV5BMl5BanBnXkFtZTcwNjcxMDkxNw@@._V1_UY209_CR0,0,140,209_AL_.jpg"},{"name":"Marlon Brando","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTg3MDYyMDE5OF5BMl5BanBnXkFtZTcwNjgyNTEzNA@@._V1_UY209_CR65,0,140,209_AL_.jpg"},{"name":"John Travolta","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTMyMjZlYzgtZWRjMC00OTRmLTllZTktMmM1ODVmNjljMTQyXkEyXkFqcGdeQXVyMTExNzQ3MzAw._V1_UY209_CR15,0,140,209_AL_.jpg"},{"name":"Channing Tatum","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTUyOTc2NTEwNV5BMl5BanBnXkFtZTgwNDgxMjMxNjE@._V1_UY209_CR39,0,140,209_AL_.jpg"},{"name":"Ben Affleck","imageUrl":"https://m.media-amazon.com/images/M/MV5BMzczNzNiMDAtMmUzZS00MTkwLWIwOTYtNmYyNjg3MTVkNThhXkEyXkFqcGdeQXVyMjA4MjI5MTA@._V1_UY209_CR8,0,140,209_AL_.jpg"},{"name":"Shah Rukh Khan","imageUrl":"https://m.media-amazon.com/images/M/MV5BZDk1ZmU0NGYtMzQ2Yi00N2NjLTkyNWEtZWE2NTU4NTJiZGUzXkEyXkFqcGdeQXVyMTExNDQ2MTI@._V1_UY209_CR3,0,140,209_AL_.jpg"},{"name":"Jennifer Aniston","imageUrl":"https://m.media-amazon.com/images/M/MV5BNjk1MjIxNjUxNF5BMl5BanBnXkFtZTcwODk2NzM4Mg@@._V1_UY209_CR3,0,140,209_AL_.jpg"},{"name":"Emma Stone","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjI4NjM1NDkyN15BMl5BanBnXkFtZTgwODgyNTY1MjE@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Chris Hemsworth","imageUrl":"https://m.media-amazon.com/images/M/MV5BOTU2MTI0NTIyNV5BMl5BanBnXkFtZTcwMTA4Nzc3OA@@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"James McAvoy","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTQzNzIxOTYzMl5BMl5BanBnXkFtZTcwNjYxNTk1Nw@@._V1_UY209_CR10,0,140,209_AL_.jpg"},{"name":"James Cameron","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjI0MjMzOTg2MF5BMl5BanBnXkFtZTcwMTM3NjQxMw@@._V1_UX140_CR0,0,140,209_AL_.jpg"},{"name":"Amitabh Bachchan","imageUrl":"https://m.media-amazon.com/images/M/MV5BNTk1OTUxMzIzMV5BMl5BanBnXkFtZTcwMzMxMjI0Nw@@._V1_UY209_CR6,0,140,209_AL_.jpg"},{"name":"Brendan Fraser","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjA5MjExMzY0M15BMl5BanBnXkFtZTgwNTMxOTg4MTI@._V1_UY209_CR8,0,140,209_AL_.jpg"},{"name":"Rachel McAdams","imageUrl":"https://m.media-amazon.com/images/M/MV5BMTY5ODcxMDU4NV5BMl5BanBnXkFtZTcwMjAzNjQyNQ@@._V1_UY209_CR2,0,140,209_AL_.jpg"},{"name":"Tom Hiddleston","imageUrl":"https://m.media-amazon.com/images/M/MV5BNWYwODAyZjAtOTQ1My00MDY2LTg0NDQtZGFiMDRiYzY4ZmM2XkEyXkFqcGdeQXVyNjg2NjQwMDQ@._V1_UY209_CR7,0,140,209_AL_.jpg"},{"name":"Aamir Khan","imageUrl":"https://m.media-amazon.com/images/M/MV5BMjAwMjk3NDUzN15BMl5BanBnXkFtZTcwNjI4MTY0NA@@._V1_UX140_CR0,0,140,209_AL_.jpg"}]'),Hb=[1,2,3,4,5,7,8,9,10,12,13,14,15,16,17,18,19,20,22,23,24,26,27,28,29,30,31,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57];function Yb(e){return e.slice(0,4).toUpperCase()}function Kb(e){if("actors"===e)return Qb.filter((function(e,t){return Hb.includes(t+1)})).map((function(e){return e.imageUrl}));for(var t=[],n=0;n<52;n++){var r="".concat(e,"-").concat(n,".jpg"),i="decks/".concat(e,"/").concat(r);t.push(i)}return t.reverse(),t}function Gb(e,t){return(10-(e+t))*(10-Math.abs(e-t))}var Xb=n(184),$b=(0,e.createContext)({gameRef:null,currentPlayerName:"",currentPlayerId:null,cards:[],setGameRef:function(){},setCurrentPlayerName:function(){},setCurrentPlayerId:function(){},setCards:function(){}}),Zb=function(t){var n=t.children,r=u((0,e.useState)((function(){return localStorage.getItem("currentPlayerName")||""})),2),i=r[0],a=r[1],o=u((0,e.useState)(null),2),s=o[0],l=o[1],c=u((0,e.useState)(null),2),h=c[0],f=c[1],d=u((0,e.useState)([]),2),p=d[0],v=d[1],m={gameRef:h,currentPlayerName:i,currentPlayerId:s,cards:p,setGameRef:f,setCurrentPlayerName:function(e){a(e),function(e){localStorage.setItem("currentPlayerName",e)}(e)},setCurrentPlayerId:l,setCards:v};return(0,Xb.jsx)($b.Provider,{value:m,children:n})},Jb=function(e){var t=e.children,n=e.onClick,r=e.className,i=e.disabled,a=void 0!==i&&i,o=e.type,s=void 0===o?"button":o;return(0,Xb.jsx)("button",{type:s,onClick:n,className:"bg-blue-500 hover:bg-blue-700 text-white text-xl font-bold py-2 px-4 rounded ".concat(r),disabled:a,children:t})},ex=function(e){var t=e.className,n=e.phrase,r=e.round,i=e.name;return(0,Xb.jsx)("nav",{className:"bg-gray-800 text-white shadow-lg",children:(0,Xb.jsxs)("div",{className:"mx-auto px-4 py-3 flex justify-between items-center ".concat(t),children:[(0,Xb.jsx)(qe,{to:"/",children:(0,Xb.jsx)("h1",{className:"text-xl font-bold",children:"Incommon"})}),n&&(0,Xb.jsx)("div",{children:(0,Xb.jsx)("p",{className:"text-md",children:n})}),r&&(0,Xb.jsx)("div",{children:(0,Xb.jsxs)("p",{className:"text-md",children:["Round ",r]})}),i&&(0,Xb.jsx)("div",{children:(0,Xb.jsx)("p",{className:"text-md",children:i})})]})})};var tx=function(){var t=(0,e.useContext)($b),n=t.setCurrentPlayerName,r=t.setCurrentPlayerId,i=t.setGameRef;(0,e.useEffect)((function(){var e=localStorage.getItem("currentPlayerName");e&&n(e)}),[n]);var a=u((0,e.useState)(""),2),o=a[0],s=a[1],l=u((0,e.useState)(""),2),c=l[0],h=l[1],f=me(),d={teams:[{name:"red",players:[],roundScore:0,gameScore:0},{name:"green",players:[],roundScore:0,gameScore:0},{name:"blue",players:[],sroundScore:0,gameScore:0},{name:"orange",players:[],roundScore:0,gameScore:0}],gameState:"setup"},p=function(){var e=Ke(He().mark((function e(){var t,n,r;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tv(xp(Wb,"games"),d);case 2:return t=e.sent,i(t),n=t.id,r=Yb(n),e.next=8,Cv(t,{shortId:r});case 8:f("/host/".concat(r));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Ke(He().mark((function e(){var t,a;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o&&c){e.next=3;break}return alert("Please enter your name and game ID."),e.abrupt("return");case 3:return n(o),t=xp(Wb,"games"),a=fv(t,pv("shortId","==",c)),e.next=8,xv(a).then((function(e){if(1===e.size){var t=e.docs[0].id,n=Cp(Wb,"games",t);i(n),Tv(xp(n,"players"),{name:o,gameScore:0,roundScore:0,gamePlayerScores:[],chosenCards:[],team:"",joinedAt:new qp("serverTimestamp")}).then((function(e){r(e.id),f("/player/".concat(c))})).catch((function(e){console.error(e)}))}else alert("Invalid game ID.")}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,Xb.jsxs)("div",{className:"mx-auto",children:[(0,Xb.jsx)(ex,{className:"max-w-screen-md"}),(0,Xb.jsxs)("div",{className:"max-w-screen-md mx-auto p-4",children:[(0,Xb.jsxs)("div",{className:"mb-6",children:[(0,Xb.jsx)("p",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Create a Game"}),(0,Xb.jsx)(Jb,{onClick:p,children:"Create Game"})]}),(0,Xb.jsx)("hr",{className:"my-6 border-0 h-px bg-gradient-to-r from-transparent via-gray-800 to-transparent"}),(0,Xb.jsx)("p",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Join a Game"}),(0,Xb.jsxs)("div",{className:"flex",children:[(0,Xb.jsxs)("div",{className:"mb-4 w-64",children:[(0,Xb.jsx)("label",{htmlFor:"playerName",className:"block text-gray-700 text-sm font-bold mb-2",children:"Your Name:"}),(0,Xb.jsx)("input",{type:"text",id:"playerName",value:o,onChange:function(e){return s(e.target.value)},className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})]}),(0,Xb.jsxs)("div",{className:"ml-4 mb-4 w-24",children:[(0,Xb.jsx)("label",{htmlFor:"shortId",className:"block text-gray-700 text-sm font-bold mb-2",children:"Game ID:"}),(0,Xb.jsx)("input",{type:"text",id:"shortId",value:c,onChange:function(e){return t=e.target.value,void h(t.toUpperCase());var t},className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})]})]}),(0,Xb.jsx)(Jb,{onClick:v,children:"Join Game"})]})]})},nx=function(e){var t=e.gameData,n=e.players,r=t.shortId;return(0,Xb.jsxs)("div",{children:[(0,Xb.jsx)(ex,{className:"max-w-screen-md"}),(0,Xb.jsxs)("div",{className:"max-w-screen-md mx-auto p-4 text-gray-800",children:[(0,Xb.jsxs)("h2",{className:"text-2xl font-bold mb-4",children:["Game ID: ",r]}),(0,Xb.jsx)("h2",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Joined Players:"}),(0,Xb.jsx)("div",{className:"overflow-x-auto",children:(0,Xb.jsxs)("table",{className:"min-w-full leading-normal",children:[(0,Xb.jsx)("thead",{children:(0,Xb.jsxs)("tr",{className:"bg-gray-100",children:[(0,Xb.jsx)("th",{className:"px-5 py-3 border-b-2 border-gray-200 text-gray-800 text-left text-sm uppercase font-normal",children:"Player Name"}),(0,Xb.jsx)("th",{className:"px-5 py-3 border-b-2 border-gray-200 text-gray-800 text-left text-sm uppercase font-normal",children:"Team"})]})}),(0,Xb.jsx)("tbody",{children:n&&n.map((function(e){return(0,Xb.jsxs)("tr",{className:"hover:bg-gray-100",children:[(0,Xb.jsx)("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.name}),(0,Xb.jsx)("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.team})]},e.name)}))})]})})]})]})};function rx(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var ix=Object.defineProperty,ax={};!function(e,t){for(var n in t)ix(e,n,{get:t[n],enumerable:!0})}(ax,{assign:function(){return Fx},colors:function(){return Ox},createStringInterpolator:function(){return Ax},skipAnimation:function(){return Lx},to:function(){return Dx},willAdvance:function(){return jx}});var ox=bx(),sx=function(e){return gx(e,ox)},ux=bx();sx.write=function(e){return gx(e,ux)};var lx=bx();sx.onStart=function(e){return gx(e,lx)};var cx=bx();sx.onFrame=function(e){return gx(e,cx)};var hx=bx();sx.onFinish=function(e){return gx(e,hx)};var fx=[];sx.setTimeout=function(e,t){var n=sx.now()+t,r={time:n,handler:e,cancel:function e(){var t=fx.findIndex((function(t){return t.cancel==e}));~t&&fx.splice(t,1),mx-=~t?1:0}};return fx.splice(dx(n),0,r),mx+=1,kx(),r};var dx=function(e){return~(~fx.findIndex((function(t){return t.time>e}))||~fx.length)};sx.cancel=function(e){lx.delete(e),cx.delete(e),hx.delete(e),ox.delete(e),ux.delete(e)},sx.sync=function(e){yx=!0,sx.batchedUpdates(e),yx=!1},sx.throttle=function(e){var t;function n(){try{e.apply(void 0,d(t))}finally{t=null}}function r(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];t=r,sx.onStart(n)}return r.handler=e,r.cancel=function(){lx.delete(n),t=null},r};var px="undefined"!=typeof window?window.requestAnimationFrame:function(){};sx.use=function(e){return px=e},sx.now="undefined"!=typeof performance?function(){return performance.now()}:Date.now,sx.batchedUpdates=function(e){return e()},sx.catch=console.error,sx.frameLoop="always",sx.advance=function(){"demand"!==sx.frameLoop?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):wx()};var vx=-1,mx=0,yx=!1;function gx(e,t){yx?(t.delete(e),e(0)):(t.add(e),kx())}function kx(){vx<0&&(vx=0,"demand"!==sx.frameLoop&&px(_x))}function _x(){~vx&&(px(_x),sx.batchedUpdates(wx))}function wx(){var e=vx;vx=sx.now();var t=dx(vx);t&&(xx(fx.splice(0,t),(function(e){return e.handler()})),mx-=t),mx?(lx.flush(),ox.flush(e?Math.min(64,vx-e):16.667),cx.flush(),ux.flush(),hx.flush()):vx=-1}function bx(){var e=new Set,t=e;return{add:function(n){mx+=t!=e||e.has(n)?0:1,e.add(n)},delete:function(n){return mx-=t==e&&e.has(n)?1:0,e.delete(n)},flush:function(n){t.size&&(e=new Set,mx-=t.size,xx(t,(function(t){return t(n)&&e.add(t)})),mx+=e.size,t=e)}}}function xx(e,t){e.forEach((function(e){try{t(e)}catch(n){sx.catch(n)}}))}function Cx(){}var Tx={arr:Array.isArray,obj:function(e){return!!e&&"Object"===e.constructor.name},fun:function(e){return"function"===typeof e},str:function(e){return"string"===typeof e},num:function(e){return"number"===typeof e},und:function(e){return void 0===e}};function Sx(e,t){if(Tx.arr(e)){if(!Tx.arr(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t}var Ex=function(e,t){return e.forEach(t)};function Ix(e,t,n){if(Tx.arr(e))for(var r=0;r<e.length;r++)t.call(n,e[r],"".concat(r));else for(var i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i)}var Mx=function(e){return Tx.und(e)?[]:Tx.arr(e)?e:[e]};function Nx(e,t){if(e.size){var n=Array.from(e);e.clear(),Ex(n,t)}}var Ax,Dx,Rx=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Nx(e,(function(e){return e.apply(void 0,n)}))},Px=function(){return"undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)},Ox=null,Lx=!1,jx=Cx,Fx=function(e){e.to&&(Dx=e.to),e.now&&(sx.now=e.now),void 0!==e.colors&&(Ox=e.colors),null!=e.skipAnimation&&(Lx=e.skipAnimation),e.createStringInterpolator&&(Ax=e.createStringInterpolator),e.requestAnimationFrame&&sx.use(e.requestAnimationFrame),e.batchedUpdates&&(sx.batchedUpdates=e.batchedUpdates),e.willAdvance&&(jx=e.willAdvance),e.frameLoop&&(sx.frameLoop=e.frameLoop)},Bx=new Set,Ux=[],Vx=[],zx=0,qx={get idle(){return!Bx.size&&!Ux.length},start:function(e){zx>e.priority?(Bx.add(e),sx.onStart(Wx)):(Qx(e),sx(Yx))},advance:Yx,sort:function(e){if(zx)sx.onFrame((function(){return qx.sort(e)}));else{var t=Ux.indexOf(e);~t&&(Ux.splice(t,1),Hx(e))}},clear:function(){Ux=[],Bx.clear()}};function Wx(){Bx.forEach(Qx),Bx.clear(),sx(Yx)}function Qx(e){Ux.includes(e)||Hx(e)}function Hx(e){Ux.splice(function(e,t){var n=e.findIndex(t);return n<0?e.length:n}(Ux,(function(t){return t.priority>e.priority})),0,e)}function Yx(e){for(var t=Vx,n=0;n<Ux.length;n++){var r=Ux[n];zx=r.priority,r.idle||(jx(r),r.advance(e),r.idle||t.push(r))}return zx=0,(Vx=Ux).length=0,(Ux=t).length>0}var Kx=function(e,t,n){return Math.min(Math.max(n,e),t)},Gx="[-+]?\\d*\\.?\\d+",Xx=Gx+"%";function $x(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var Zx=new RegExp("rgb"+$x(Gx,Gx,Gx)),Jx=new RegExp("rgba"+$x(Gx,Gx,Gx,Gx)),eC=new RegExp("hsl"+$x(Gx,Xx,Xx)),tC=new RegExp("hsla"+$x(Gx,Xx,Xx,Gx)),nC=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,rC=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,iC=/^#([0-9a-fA-F]{6})$/,aC=/^#([0-9a-fA-F]{8})$/;function oC(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function sC(e,t,n){var r=n<.5?n*(1+t):n+t-n*t,i=2*n-r,a=oC(i,r,e+1/3),o=oC(i,r,e),s=oC(i,r,e-1/3);return Math.round(255*a)<<24|Math.round(255*o)<<16|Math.round(255*s)<<8}function uC(e){var t=parseInt(e,10);return t<0?0:t>255?255:t}function lC(e){return(parseFloat(e)%360+360)%360/360}function cC(e){var t=parseFloat(e);return t<0?0:t>1?255:Math.round(255*t)}function hC(e){var t=parseFloat(e);return t<0?0:t>100?1:t/100}function fC(e){var t=function(e){var t;return"number"===typeof e?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=iC.exec(e))?parseInt(t[1]+"ff",16)>>>0:Ox&&void 0!==Ox[e]?Ox[e]:(t=Zx.exec(e))?(uC(t[1])<<24|uC(t[2])<<16|uC(t[3])<<8|255)>>>0:(t=Jx.exec(e))?(uC(t[1])<<24|uC(t[2])<<16|uC(t[3])<<8|cC(t[4]))>>>0:(t=nC.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=aC.exec(e))?parseInt(t[1],16)>>>0:(t=rC.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=eC.exec(e))?(255|sC(lC(t[1]),hC(t[2]),hC(t[3])))>>>0:(t=tC.exec(e))?(sC(lC(t[1]),hC(t[2]),hC(t[3]))|cC(t[4]))>>>0:null}(e);if(null===t)return e;var n=(16711680&(t=t||0))>>>16,r=(65280&t)>>>8,i=(255&t)/255;return"rgba(".concat((4278190080&t)>>>24,", ").concat(n,", ").concat(r,", ").concat(i,")")}var dC=function e(t,n,r){if(Tx.fun(t))return t;if(Tx.arr(t))return e({range:t,output:n,extrapolate:r});if(Tx.str(t.output[0]))return Ax(t);var i=t,a=i.output,o=i.range||[0,1],s=i.extrapolateLeft||i.extrapolate||"extend",u=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||function(e){return e};return function(e){var t=function(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}(e,o);return function(e,t,n,r,i,a,o,s,u){var l=u?u(e):e;if(l<t){if("identity"===o)return l;"clamp"===o&&(l=t)}if(l>n){if("identity"===s)return l;"clamp"===s&&(l=n)}if(r===i)return r;if(t===n)return e<=t?r:i;t===-1/0?l=-l:n===1/0?l-=t:l=(l-t)/(n-t);l=a(l),r===-1/0?l=-l:i===1/0?l+=r:l=l*(i-r)+r;return l}(e,o[t],o[t+1],a[t],a[t+1],l,s,u,i.map)}};var pC=1.70158,vC=1.525*pC,mC=pC+1,yC=2*Math.PI/3,gC=2*Math.PI/4.5,kC=function(e){var t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},_C={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return 1-(1-e)*(1-e)},easeInOutQuad:function(e){return e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return 1-Math.pow(1-e,3)},easeInOutCubic:function(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1-Math.pow(1-e,4)},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1-Math.pow(1-e,5)},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2},easeInSine:function(e){return 1-Math.cos(e*Math.PI/2)},easeOutSine:function(e){return Math.sin(e*Math.PI/2)},easeInOutSine:function(e){return-(Math.cos(Math.PI*e)-1)/2},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*e-10)},easeOutExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2},easeInCirc:function(e){return 1-Math.sqrt(1-Math.pow(e,2))},easeOutCirc:function(e){return Math.sqrt(1-Math.pow(e-1,2))},easeInOutCirc:function(e){return e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2},easeInBack:function(e){return mC*e*e*e-pC*e*e},easeOutBack:function(e){return 1+mC*Math.pow(e-1,3)+pC*Math.pow(e-1,2)},easeInOutBack:function(e){return e<.5?Math.pow(2*e,2)*(7.189819*e-vC)/2:(Math.pow(2*e-2,2)*((vC+1)*(2*e-2)+vC)+2)/2},easeInElastic:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*e-10)*Math.sin((10*e-10.75)*yC)},easeOutElastic:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin((10*e-.75)*yC)+1},easeInOutElastic:function(e){return 0===e?0:1===e?1:e<.5?-Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*gC)/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*gC)/2+1},easeInBounce:function(e){return 1-kC(1-e)},easeOutBounce:kC,easeInOutBounce:function(e){return e<.5?(1-kC(1-2*e))/2:(1+kC(2*e-1))/2},steps:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"end";return function(n){var r=(n="end"===t?Math.min(n,.999):Math.max(n,.001))*e,i="end"===t?Math.floor(r):Math.ceil(r);return Kx(0,1,i/e)}}},wC=Symbol.for("FluidValue.get"),bC=Symbol.for("FluidValue.observers"),xC=function(e){return Boolean(e&&e[wC])},CC=function(e){return e&&e[wC]?e[wC]():e},TC=function(e){return e[bC]||null};function SC(e,t){var n=e[bC];n&&n.forEach((function(e){!function(e,t){e.eventObserved?e.eventObserved(t):e(t)}(e,t)}))}var EC=m((function e(t){if(p(this,e),!t&&!(t=this.get))throw Error("Unknown getter");IC(this,t)})),IC=function(e,t){return DC(e,wC,t)};function MC(e,t){if(e[wC]){var n=e[bC];n||DC(e,bC,n=new Set),n.has(t)||(n.add(t),e.observerAdded&&e.observerAdded(n.size,t))}return t}function NC(e,t){var n=e[bC];if(n&&n.has(t)){var r=n.size-1;r?n.delete(t):e[bC]=null,e.observerRemoved&&e.observerRemoved(r,t)}}var AC,DC=function(e,t,n){return Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})},RC=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,PC=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,OC=new RegExp("(".concat(RC.source,")(%|[a-z]+)"),"i"),LC=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,jC=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,FC=function e(t){var n=u(BC(t),2),r=n[0],i=n[1];if(!r||Px())return t;var a=window.getComputedStyle(document.documentElement).getPropertyValue(r);if(a)return a.trim();if(i&&i.startsWith("--")){var o=window.getComputedStyle(document.documentElement).getPropertyValue(i);return o||t}return i&&jC.test(i)?e(i):i||t},BC=function(e){var t=jC.exec(e);if(!t)return[,];var n=u(t,3);return[n[1],n[2]]},UC=function(e,t,n,r,i){return"rgba(".concat(Math.round(t),", ").concat(Math.round(n),", ").concat(Math.round(r),", ").concat(i,")")},VC=function(e){AC||(AC=Ox?new RegExp("(".concat(Object.keys(Ox).join("|"),")(?!\\w)"),"g"):/^\b$/);var t=e.output.map((function(e){return CC(e).replace(jC,FC).replace(PC,fC).replace(AC,fC)})),n=t.map((function(e){return e.match(RC).map(Number)})),r=n[0].map((function(e,t){return n.map((function(e){if(!(t in e))throw Error('The arity of each "output" value must be equal');return e[t]}))})).map((function(t){return dC($t($t({},e),{},{output:t}))}));return function(e){var n,i=!OC.test(t[0])&&(null===(n=t.find((function(e){return OC.test(e)})))||void 0===n?void 0:n.replace(RC,"")),a=0;return t[0].replace(RC,(function(){return"".concat(r[a++](e)).concat(i||"")})).replace(LC,UC)}},zC="react-spring: ",qC=function(e){var t=e,n=!1;if("function"!=typeof t)throw new TypeError("".concat(zC,"once requires a function parameter"));return function(){n||(t.apply(void 0,arguments),n=!0)}},WC=qC(console.warn);function QC(){WC("".concat(zC,'The "interpolate" function is deprecated in v9 (use "to" instead)'))}var HC=qC(console.warn);function YC(e){return Tx.str(e)&&("#"==e[0]||/\d/.test(e)||!Px()&&jC.test(e)||e in(Ox||{}))}var KC=Px()?e.useEffect:e.useLayoutEffect;function GC(){var t=(0,e.useState)()[1],n=function(){var t=(0,e.useRef)(!1);return KC((function(){return t.current=!0,function(){t.current=!1}}),[]),t}();return function(){n.current&&t(Math.random())}}var XC=function(t){return(0,e.useEffect)(t,$C)},$C=[];function ZC(t){var n=(0,e.useRef)();return(0,e.useEffect)((function(){n.current=t})),n.current}var JC=Symbol.for("Animated:node"),eT=function(e){return e&&e[JC]},tT=function(e,t){return n=e,r=JC,i=t,Object.defineProperty(n,r,{value:i,writable:!0,configurable:!0});var n,r,i},nT=function(e){return e&&e[JC]&&e[JC].getPayload()},rT=function(){function e(){p(this,e),tT(this,this)}return m(e,[{key:"getPayload",value:function(){return this.payload||[]}}]),e}(),iT=function(e){g(n,e);var t=C(n);function n(e){var r;return p(this,n),(r=t.call(this))._value=e,r.done=!0,r.durationProgress=0,Tx.num(r._value)&&(r.lastPosition=r._value),r}return m(n,[{key:"getPayload",value:function(){return[this]}},{key:"getValue",value:function(){return this._value}},{key:"setValue",value:function(e,t){return Tx.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value!==e&&(this._value=e,!0)}},{key:"reset",value:function(){var e=this.done;this.done=!1,Tx.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}}],[{key:"create",value:function(e){return new n(e)}}]),n}(rT),aT=function(e){g(n,e);var t=C(n);function n(e){var r;return p(this,n),(r=t.call(this,0))._string=null,r._toString=dC({output:[e,e]}),r}return m(n,[{key:"getValue",value:function(){var e=this._string;return null==e?this._string=this._toString(this._value):e}},{key:"setValue",value:function(e){if(Tx.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else{if(!Xe(k(n.prototype),"setValue",this).call(this,e))return!1;this._string=null}return!0}},{key:"reset",value:function(e){e&&(this._toString=dC({output:[this.getValue(),e]})),this._value=0,Xe(k(n.prototype),"reset",this).call(this)}}],[{key:"create",value:function(e){return new n(e)}}]),n}(iT),oT={dependencies:null},sT=function(e){g(n,e);var t=C(n);function n(e){var r;return p(this,n),(r=t.call(this)).source=e,r.setValue(e),r}return m(n,[{key:"getValue",value:function(e){var t={};return Ix(this.source,(function(n,r){var i;(i=n)&&i[JC]===i?t[r]=n.getValue(e):xC(n)?t[r]=CC(n):e||(t[r]=n)})),t}},{key:"setValue",value:function(e){this.source=e,this.payload=this._makePayload(e)}},{key:"reset",value:function(){this.payload&&Ex(this.payload,(function(e){return e.reset()}))}},{key:"_makePayload",value:function(e){if(e){var t=new Set;return Ix(e,this._addToPayload,t),Array.from(t)}}},{key:"_addToPayload",value:function(e){var t=this;oT.dependencies&&xC(e)&&oT.dependencies.add(e);var n=nT(e);n&&Ex(n,(function(e){return t.add(e)}))}}]),n}(rT),uT=function(e){g(n,e);var t=C(n);function n(e){return p(this,n),t.call(this,e)}return m(n,[{key:"getValue",value:function(){return this.source.map((function(e){return e.getValue()}))}},{key:"setValue",value:function(e){var t=this.getPayload();return e.length==t.length?t.map((function(t,n){return t.setValue(e[n])})).some(Boolean):(Xe(k(n.prototype),"setValue",this).call(this,e.map(lT)),!0)}}],[{key:"create",value:function(e){return new n(e)}}]),n}(sT);function lT(e){return(YC(e)?aT:iT).create(e)}function cT(e){var t=eT(e);return t?t.constructor:Tx.arr(e)?uT:YC(e)?aT:iT}var hT=function(t,n){var r=!Tx.fun(t)||t.prototype&&t.prototype.isReactComponent;return(0,e.forwardRef)((function(i,a){var o=(0,e.useRef)(null),s=r&&(0,e.useCallback)((function(e){o.current=function(e,t){e&&(Tx.fun(e)?e(t):e.current=t);return t}(a,e)}),[a]),l=function(e,t){var n=new Set;oT.dependencies=n,e.style&&(e=$t($t({},e),{},{style:t.createAnimatedStyle(e.style)}));return e=new sT(e),oT.dependencies=null,[e,n]}(i,n),c=u(l,2),h=c[0],f=c[1],d=GC(),p=function(){var e=o.current;r&&!e||!1===(!!e&&n.applyAnimatedValues(e,h.getValue(!0)))&&d()},v=new fT(p,f),m=(0,e.useRef)();KC((function(){return m.current=v,Ex(f,(function(e){return MC(e,v)})),function(){m.current&&(Ex(m.current.deps,(function(e){return NC(e,m.current)})),sx.cancel(m.current.update))}})),(0,e.useEffect)(p,[]),XC((function(){return function(){var e=m.current;Ex(e.deps,(function(t){return NC(t,e)}))}}));var y=n.getComponentProps(h.getValue());return e.createElement(t,$t($t({},y),{},{ref:s}))}))},fT=function(){function e(t,n){p(this,e),this.update=t,this.deps=n}return m(e,[{key:"eventObserved",value:function(e){"change"==e.type&&sx.write(this.update)}}]),e}();var dT=Symbol.for("AnimatedComponent"),pT=function(e){return Tx.str(e)?e:e&&Tx.str(e.displayName)?e.displayName:Tx.fun(e)&&e.name||null},vT=["children"];function mT(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Tx.fun(e)?e.apply(void 0,n):e}var yT=function(e,t){return!0===e||!!(t&&e&&(Tx.fun(e)?e(t):Mx(e).includes(t)))},gT=function(e,t){return Tx.obj(e)?t&&e[t]:e},kT=function(e,t){return!0===e.default?e[t]:e.default?e.default[t]:void 0},_T=function(e){return e},wT=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_T,n=bT;e.default&&!0!==e.default&&(e=e.default,n=Object.keys(e));var r,i={},a=E(n);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=t(e[o],o);Tx.und(s)||(i[o]=s)}}catch(u){a.e(u)}finally{a.f()}return i},bT=["config","onProps","onStart","onChange","onPause","onResume","onRest"],xT={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function CT(e){var t=function(e){var t={},n=0;if(Ix(e,(function(e,r){xT[r]||(t[r]=e,n++)})),n)return t}(e);if(t){var n={to:t};return Ix(e,(function(e,r){return r in t||(n[r]=e)})),n}return $t({},e)}function TT(e){return e=CC(e),Tx.arr(e)?e.map(TT):YC(e)?ax.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function ST(e){for(var t in e)return!0;return!1}function ET(e){return Tx.fun(e)||Tx.arr(e)&&Tx.obj(e[0])}function IT(e,t){var n;null===(n=e.ref)||void 0===n||n.delete(e),null===t||void 0===t||t.delete(e)}function MT(e,t){var n;t&&e.ref!==t&&(null===(n=e.ref)||void 0===n||n.delete(e),t.add(e),e.ref=t)}var NT=$t($t({},{tension:170,friction:26}),{},{mass:1,damping:1,easing:_C.linear,clamp:!1}),AT=m((function e(){p(this,e),this.velocity=0,Object.assign(this,NT)}));function DT(e,t){if(Tx.und(t.decay)){var n=!Tx.und(t.tension)||!Tx.und(t.friction);!n&&Tx.und(t.frequency)&&Tx.und(t.damping)&&Tx.und(t.mass)||(e.duration=void 0,e.decay=void 0),n&&(e.frequency=void 0)}else e.duration=void 0}var RT=[],PT=m((function e(){p(this,e),this.changed=!1,this.values=RT,this.toValues=null,this.fromValues=RT,this.config=new AT,this.immediate=!1}));function OT(e,t){var n=t.key,r=t.props,i=t.defaultProps,a=t.state,o=t.actions;return new Promise((function(t,s){var u,l,c,h=yT(null!==(u=r.cancel)&&void 0!==u?u:null===i||void 0===i?void 0:i.cancel,n);if(h)v();else{Tx.und(r.pause)||(a.paused=yT(r.pause,n));var f=null===i||void 0===i?void 0:i.pause;!0!==f&&(f=a.paused||yT(f,n)),l=mT(r.delay||0,n),f?(a.resumeQueue.add(p),o.pause()):(o.resume(),p())}function d(){a.resumeQueue.add(p),a.timeouts.delete(c),c.cancel(),l=c.time-sx.now()}function p(){l>0&&!ax.skipAnimation?(a.delayed=!0,c=sx.setTimeout(v,l),a.pauseQueue.add(d),a.timeouts.add(c)):v()}function v(){a.delayed&&(a.delayed=!1),a.pauseQueue.delete(d),a.timeouts.delete(c),e<=(a.cancelId||0)&&(h=!0);try{o.start($t($t({},r),{},{callId:e,cancel:h}),t)}catch(n){s(n)}}}))}var LT=function(e,t){return 1==t.length?t[0]:t.some((function(e){return e.cancelled}))?BT(e.get()):t.every((function(e){return e.noop}))?jT(e.get()):FT(e.get(),t.every((function(e){return e.finished})))},jT=function(e){return{value:e,noop:!0,finished:!0,cancelled:!1}},FT=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{value:e,finished:t,cancelled:n}},BT=function(e){return{value:e,cancelled:!0,finished:!1}};function UT(e,t,n,r){var i=t.callId,a=t.parentId,o=t.onRest,s=n.asyncTo,u=n.promise;return a||e!==s||t.reset?n.promise=Ke(He().mark((function l(){var c,h,f,d,p,v,m,y;return He().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(n.asyncId=i,n.asyncTo=e,c=wT(t,(function(e,t){return"onRest"===t?void 0:e})),d=new Promise((function(e,t){return h=e,f=t})),p=function(e){var t=i<=(n.cancelId||0)&&BT(r)||i!==n.asyncId&&FT(r,!1);if(t)throw e.result=t,f(e),e},v=function(e,t){var a=new zT,o=new qT;return Ke(He().mark((function s(){var u,l;return He().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(!ax.skipAnimation){s.next=5;break}throw VT(n),o.result=FT(r,!1),f(o),o;case 5:return p(a),(u=Tx.obj(e)?$t({},e):$t($t({},t),{},{to:e})).parentId=i,Ix(c,(function(e,t){Tx.und(u[t])&&(u[t]=e)})),s.next=11,r.start(u);case 11:if(l=s.sent,p(a),!n.paused){s.next=16;break}return s.next=16,new Promise((function(e){n.resumeQueue.add(e)}));case 16:return s.abrupt("return",l);case 17:case"end":return s.stop()}}),s)})))()},!ax.skipAnimation){l.next=9;break}return VT(n),l.abrupt("return",FT(r,!1));case 9:return l.prev=9,y=Tx.arr(e)?function(){var e=Ke(He().mark((function e(t){var n,r,i;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=E(t),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,v(i);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(t){return e.apply(this,arguments)}}()(e):Promise.resolve(e(v,r.stop.bind(r))),l.next=13,Promise.all([y.then(h),d]);case 13:m=FT(r.get(),!0,!1),l.next=27;break;case 16:if(l.prev=16,l.t0=l.catch(9),!(l.t0 instanceof zT)){l.next=22;break}m=l.t0.result,l.next=27;break;case 22:if(!(l.t0 instanceof qT)){l.next=26;break}m=l.t0.result,l.next=27;break;case 26:throw l.t0;case 27:return l.prev=27,i==n.asyncId&&(n.asyncId=a,n.asyncTo=a?s:void 0,n.promise=a?u:void 0),l.finish(27);case 30:return Tx.fun(o)&&sx.batchedUpdates((function(){o(m,r,r.item)})),l.abrupt("return",m);case 32:case"end":return l.stop()}}),l,null,[[9,16,27,30]])})))():u}function VT(e,t){Nx(e.timeouts,(function(e){return e.cancel()})),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var zT=function(e){g(n,e);var t=C(n);function n(){return p(this,n),t.call(this,"An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}return m(n)}(S(Error)),qT=function(e){g(n,e);var t=C(n);function n(){return p(this,n),t.call(this,"SkipAnimationSignal")}return m(n)}(S(Error)),WT=function(e){return e instanceof HT},QT=1,HT=function(e){g(n,e);var t=C(n);function n(){var e;return p(this,n),(e=t.apply(this,arguments)).id=QT++,e._priority=0,e}return m(n,[{key:"priority",get:function(){return this._priority},set:function(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}},{key:"get",value:function(){var e=eT(this);return e&&e.getValue()}},{key:"to",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ax.to(this,t)}},{key:"interpolate",value:function(){QC();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ax.to(this,t)}},{key:"toJSON",value:function(){return this.get()}},{key:"observerAdded",value:function(e){1==e&&this._attach()}},{key:"observerRemoved",value:function(e){0==e&&this._detach()}},{key:"_attach",value:function(){}},{key:"_detach",value:function(){}},{key:"_onChange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];SC(this,{type:"change",parent:this,value:e,idle:t})}},{key:"_onPriorityChange",value:function(e){this.idle||qx.sort(this),SC(this,{type:"priority",parent:this,priority:e})}}]),n}(EC),YT=Symbol.for("SpringPhase"),KT=function(e){return(1&e[YT])>0},GT=function(e){return(2&e[YT])>0},XT=function(e){return(4&e[YT])>0},$T=function(e,t){return t?e[YT]|=3:e[YT]&=-3},ZT=function(e,t){return t?e[YT]|=4:e[YT]&=-5},JT=function(e){g(n,e);var t=C(n);function n(e,r){var i;if(p(this,n),(i=t.call(this)).animation=new PT,i.defaultProps={},i._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},i._pendingCalls=new Set,i._lastCallId=0,i._lastToId=0,i._memoizedDuration=0,!Tx.und(e)||!Tx.und(r)){var a=Tx.obj(e)?$t({},e):$t($t({},r),{},{from:e});Tx.und(a.default)&&(a.default=!0),i.start(a)}return i}return m(n,[{key:"idle",get:function(){return!(GT(this)||this._state.asyncTo)||XT(this)}},{key:"goal",get:function(){return CC(this.animation.to)}},{key:"velocity",get:function(){var e=eT(this);return e instanceof iT?e.lastVelocity||0:e.getPayload().map((function(e){return e.lastVelocity||0}))}},{key:"hasAnimated",get:function(){return KT(this)}},{key:"isAnimating",get:function(){return GT(this)}},{key:"isPaused",get:function(){return XT(this)}},{key:"isDelayed",get:function(){return this._state.delayed}},{key:"advance",value:function(e){var t=this,n=!0,r=!1,i=this.animation,a=i.toValues,o=i.config,s=nT(i.to);!s&&xC(i.to)&&(a=Mx(CC(i.to))),i.values.forEach((function(u,l){if(!u.done){var c=u.constructor==aT?1:s?s[l].lastPosition:a[l],h=i.immediate,f=c;if(!h){if(f=u.lastPosition,o.tension<=0)return void(u.done=!0);var d,p=u.elapsedTime+=e,v=i.fromValues[l],m=null!=u.v0?u.v0:u.v0=Tx.arr(o.velocity)?o.velocity[l]:o.velocity,y=o.precision||(v==c?.005:Math.min(1,.001*Math.abs(c-v)));if(Tx.und(o.duration))if(o.decay){var g=!0===o.decay?.998:o.decay,k=Math.exp(-(1-g)*p);f=v+m/(1-g)*(1-k),h=Math.abs(u.lastPosition-f)<=y,d=m*k}else{d=null==u.lastVelocity?m:u.lastVelocity;for(var _=o.restVelocity||y/10,w=o.clamp?0:o.bounce,b=!Tx.und(w),x=v==c?u.v0>0:v<c,C=Math.ceil(e/1),T=0;T<C&&(Math.abs(d)>_||!(h=Math.abs(c-f)<=y));++T){b&&(f==c||f>c==x)&&(d=-d*w,f=c),f+=1*(d+=1*((1e-6*-o.tension*(f-c)+.001*-o.friction*d)/o.mass))}}else{var S=1;o.duration>0&&(t._memoizedDuration!==o.duration&&(t._memoizedDuration=o.duration,u.durationProgress>0&&(u.elapsedTime=o.duration*u.durationProgress,p=u.elapsedTime+=e)),S=(S=(o.progress||0)+p/t._memoizedDuration)>1?1:S<0?0:S,u.durationProgress=S),d=((f=v+o.easing(S)*(c-v))-u.lastPosition)/e,h=1==S}u.lastVelocity=d,Number.isNaN(f)&&(console.warn("Got NaN while animating:",t),h=!0)}s&&!s[l].done&&(h=!1),h?u.done=!0:n=!1,u.setValue(f,o.round)&&(r=!0)}}));var u=eT(this),l=u.getValue();if(n){var c=CC(i.to);l===c&&!r||o.decay?r&&o.decay&&this._onChange(l):(u.setValue(c),this._onChange(c)),this._stop()}else r&&this._onChange(l)}},{key:"set",value:function(e){var t=this;return sx.batchedUpdates((function(){t._stop(),t._focus(e),t._set(e)})),this}},{key:"pause",value:function(){this._update({pause:!0})}},{key:"resume",value:function(){this._update({pause:!1})}},{key:"finish",value:function(){var e=this;if(GT(this)){var t=this.animation,n=t.to,r=t.config;sx.batchedUpdates((function(){e._onStart(),r.decay||e._set(n,!1),e._stop()}))}return this}},{key:"update",value:function(e){return(this.queue||(this.queue=[])).push(e),this}},{key:"start",value:function(e,t){var n,r=this;return Tx.und(e)?(n=this.queue||[],this.queue=[]):n=[Tx.obj(e)?e:$t($t({},t),{},{to:e})],Promise.all(n.map((function(e){return r._update(e)}))).then((function(e){return LT(r,e)}))}},{key:"stop",value:function(e){var t=this,n=this.animation.to;return this._focus(this.get()),VT(this._state,e&&this._lastCallId),sx.batchedUpdates((function(){return t._stop(n,e)})),this}},{key:"reset",value:function(){this._update({reset:!0})}},{key:"eventObserved",value:function(e){"change"==e.type?this._start():"priority"==e.type&&(this.priority=e.priority+1)}},{key:"_prepareNode",value:function(e){var t=this.key||"",n=e.to,r=e.from;(null==(n=Tx.obj(n)?n[t]:n)||ET(n))&&(n=void 0),null==(r=Tx.obj(r)?r[t]:r)&&(r=void 0);var i={to:n,from:r};if(!KT(this)){if(e.reverse){var a=[r,n];n=a[0],r=a[1]}r=CC(r),Tx.und(r)?eT(this)||this._set(n):this._set(r)}return i}},{key:"_update",value:function(e,t){var n=this,r=Object.assign({},e),i=this.key,a=this.defaultProps;r.default&&Object.assign(a,wT(r,(function(e,t){return/^on/.test(t)?gT(e,i):e}))),oS(this,r,"onProps"),sS(this,"onProps",r,this);var o=this._prepareNode(r);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");var s=this._state;return OT(++this._lastCallId,{key:i,props:r,defaultProps:a,state:s,actions:{pause:function(){XT(n)||(ZT(n,!0),Rx(s.pauseQueue),sS(n,"onPause",FT(n,eS(n,n.animation.to)),n))},resume:function(){XT(n)&&(ZT(n,!1),GT(n)&&n._resume(),Rx(s.resumeQueue),sS(n,"onResume",FT(n,eS(n,n.animation.to)),n))},start:this._merge.bind(this,o)}}).then((function(e){if(r.loop&&e.finished&&(!t||!e.noop)){var i=tS(r);if(i)return n._update(i,!0)}return e}))}},{key:"_merge",value:function(e,t,n){var r=this;if(t.cancel)return this.stop(!0),n(BT(this));var i=!Tx.und(e.to),a=!Tx.und(e.from);if(i||a){if(!(t.callId>this._lastToId))return n(BT(this));this._lastToId=t.callId}var o=this.key,s=this.defaultProps,u=this.animation,l=u.to,c=u.from,h=e.to,f=void 0===h?l:h,d=e.from,p=void 0===d?c:d;if(!a||i||t.default&&!Tx.und(f)||(f=p),t.reverse){var v=[p,f];f=v[0],p=v[1]}var m=!Sx(p,c);m&&(u.from=p),p=CC(p);var y=!Sx(f,l);y&&this._focus(f);var g=ET(t.to),k=u.config,_=k.decay,w=k.velocity;(i||a)&&(k.velocity=0),t.config&&!g&&function(e,t,n){for(var r in n&&(DT(n=$t({},n),t),t=$t($t({},n),t)),DT(e,t),Object.assign(e,t),NT)null==e[r]&&(e[r]=NT[r]);var i=e.frequency,a=e.damping,o=e.mass;Tx.und(i)||(i<.01&&(i=.01),a<0&&(a=0),e.tension=Math.pow(2*Math.PI/i,2)*o,e.friction=4*Math.PI*a*o/i)}(k,mT(t.config,o),t.config!==s.config?mT(s.config,o):void 0);var b=eT(this);if(!b||Tx.und(f))return n(FT(this,!0));var x=Tx.und(t.reset)?a&&!t.default:!Tx.und(p)&&yT(t.reset,o),C=x?p:this.get(),T=TT(f),S=Tx.num(T)||Tx.arr(T)||YC(T),E=!g&&(!S||yT(s.immediate||t.immediate,o));if(y){var I=cT(f);if(I!==b.constructor){if(!E)throw Error("Cannot animate between ".concat(b.constructor.name," and ").concat(I.name,', as the "to" prop suggests'));b=this._set(T)}}var M=b.constructor,N=xC(f),A=!1;if(!N){var D=x||!KT(this)&&m;(y||D)&&(N=!(A=Sx(TT(C),T))),(Sx(u.immediate,E)||E)&&Sx(k.decay,_)&&Sx(k.velocity,w)||(N=!0)}if(A&&GT(this)&&(u.changed&&!x?N=!0:N||this._stop(l)),!g&&((N||xC(l))&&(u.values=b.getPayload(),u.toValues=xC(f)?null:M==aT?[1]:Mx(T)),u.immediate!=E&&(u.immediate=E,E||x||this._set(l)),N)){var R=u.onRest;Ex(aS,(function(e){return oS(r,t,e)}));var P=FT(this,eS(this,l));Rx(this._pendingCalls,P),this._pendingCalls.add(n),u.changed&&sx.batchedUpdates((function(){var e;(u.changed=!x,null===R||void 0===R||R(P,r),x)?mT(s.onRest,P):null===(e=u.onStart)||void 0===e||e.call(u,P,r)}))}x&&this._set(C),g?n(UT(t.to,t,this._state,this)):N?this._start():GT(this)&&!y?this._pendingCalls.add(n):n(jT(C))}},{key:"_focus",value:function(e){var t=this.animation;e!==t.to&&(TC(this)&&this._detach(),t.to=e,TC(this)&&this._attach())}},{key:"_attach",value:function(){var e=0,t=this.animation.to;xC(t)&&(MC(t,this),WT(t)&&(e=t.priority+1)),this.priority=e}},{key:"_detach",value:function(){var e=this.animation.to;xC(e)&&NC(e,this)}},{key:"_set",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=CC(e);if(!Tx.und(r)){var i=eT(this);if(!i||!Sx(r,i.getValue())){var a=cT(r);i&&i.constructor==a?i.setValue(r):tT(this,a.create(r)),i&&sx.batchedUpdates((function(){t._onChange(r,n)}))}}return eT(this)}},{key:"_onStart",value:function(){var e=this.animation;e.changed||(e.changed=!0,sS(this,"onStart",FT(this,eS(this,e.to)),this))}},{key:"_onChange",value:function(e,t){t||(this._onStart(),mT(this.animation.onChange,e,this)),mT(this.defaultProps.onChange,e,this),Xe(k(n.prototype),"_onChange",this).call(this,e,t)}},{key:"_start",value:function(){var e=this.animation;eT(this).reset(CC(e.to)),e.immediate||(e.fromValues=e.values.map((function(e){return e.lastPosition}))),GT(this)||($T(this,!0),XT(this)||this._resume())}},{key:"_resume",value:function(){ax.skipAnimation?this.finish():qx.start(this)}},{key:"_stop",value:function(e,t){if(GT(this)){$T(this,!1);var n=this.animation;Ex(n.values,(function(e){e.done=!0})),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),SC(this,{type:"idle",parent:this});var r=t?BT(this.get()):FT(this.get(),eS(this,null!==e&&void 0!==e?e:n.to));Rx(this._pendingCalls,r),n.changed&&(n.changed=!1,sS(this,"onRest",r,this))}}}]),n}(HT);function eS(e,t){var n=TT(t);return Sx(TT(e.get()),n)}function tS(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.loop,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.to,r=mT(t);if(r){var i=!0!==r&&CT(r),a=(i||e).reverse,o=!i||i.reset;return nS($t($t({},e),{},{loop:t,default:!1,pause:void 0,to:!a||ET(n)?n:void 0,from:o?e.from:void 0,reset:o},i))}}function nS(e){var t=e=CT(e),n=t.to,r=t.from,i=new Set;return Tx.obj(n)&&iS(n,i),Tx.obj(r)&&iS(r,i),e.keys=i.size?Array.from(i):null,e}function rS(e){var t=nS(e);return Tx.und(t.default)&&(t.default=wT(t)),t}function iS(e,t){Ix(e,(function(e,n){return null!=e&&t.add(n)}))}var aS=["onStart","onRest","onChange","onPause","onResume"];function oS(e,t,n){e.animation[n]=t[n]!==kT(t,n)?gT(t[n],e.key):void 0}function sS(e,t){for(var n,r,i,a,o=arguments.length,s=new Array(o>2?o-2:0),u=2;u<o;u++)s[u-2]=arguments[u];null===(n=(r=e.animation)[t])||void 0===n||n.call.apply(n,[r].concat(s)),null===(i=(a=e.defaultProps)[t])||void 0===i||i.call.apply(i,[a].concat(s))}var uS=["onStart","onChange","onRest"],lS=1,cS=function(){function e(t,n){p(this,e),this.id=lS++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),n&&(this._flush=n),t&&this.start($t({default:!0},t))}return m(e,[{key:"idle",get:function(){return!this._state.asyncTo&&Object.values(this.springs).every((function(e){return e.idle&&!e.isDelayed&&!e.isPaused}))}},{key:"item",get:function(){return this._item},set:function(e){this._item=e}},{key:"get",value:function(){var e={};return this.each((function(t,n){return e[n]=t.get()})),e}},{key:"set",value:function(e){for(var t in e){var n=e[t];Tx.und(n)||this.springs[t].set(n)}}},{key:"update",value:function(e){return e&&this.queue.push(nS(e)),this}},{key:"start",value:function(e){var t=this.queue;return e?t=Mx(e).map(nS):this.queue=[],this._flush?this._flush(this,t):(gS(this,t),hS(this,t))}},{key:"stop",value:function(e,t){if(e!==!!e&&(t=e),t){var n=this.springs;Ex(Mx(t),(function(t){return n[t].stop(!!e)}))}else VT(this._state,this._lastAsyncId),this.each((function(t){return t.stop(!!e)}));return this}},{key:"pause",value:function(e){if(Tx.und(e))this.start({pause:!0});else{var t=this.springs;Ex(Mx(e),(function(e){return t[e].pause()}))}return this}},{key:"resume",value:function(e){if(Tx.und(e))this.start({pause:!1});else{var t=this.springs;Ex(Mx(e),(function(e){return t[e].resume()}))}return this}},{key:"each",value:function(e){Ix(this.springs,e)}},{key:"_onFrame",value:function(){var e=this,t=this._events,n=t.onStart,r=t.onChange,i=t.onRest,a=this._active.size>0,o=this._changed.size>0;(a&&!this._started||o&&!this._started)&&(this._started=!0,Nx(n,(function(t){var n=u(t,2),r=n[0],i=n[1];i.value=e.get(),r(i,e,e._item)})));var s=!a&&this._started,l=o||s&&i.size?this.get():null;o&&r.size&&Nx(r,(function(t){var n=u(t,2),r=n[0],i=n[1];i.value=l,r(i,e,e._item)})),s&&(this._started=!1,Nx(i,(function(t){var n=u(t,2),r=n[0],i=n[1];i.value=l,r(i,e,e._item)})))}},{key:"eventObserved",value:function(e){if("change"==e.type)this._changed.add(e.parent),e.idle||this._active.add(e.parent);else{if("idle"!=e.type)return;this._active.delete(e.parent)}sx.onFrame(this._onFrame)}}]),e}();function hS(e,t){return Promise.all(t.map((function(t){return fS(e,t)}))).then((function(t){return LT(e,t)}))}function fS(e,t,n){return dS.apply(this,arguments)}function dS(){return dS=Ke(He().mark((function e(t,n,r){var i,a,o,s,u,l,c,h,f,d,p,v,m;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.keys,a=n.to,o=n.from,s=n.loop,u=n.onRest,l=n.onResolve,c=Tx.obj(n.default)&&n.default,s&&(n.loop=!1),!1===a&&(n.to=null),!1===o&&(n.from=null),(h=Tx.arr(a)||Tx.fun(a)?a:void 0)?(n.to=void 0,n.onRest=void 0,c&&(c.onRest=void 0)):Ex(uS,(function(e){var r=n[e];if(Tx.fun(r)){var i=t._events[e];n[e]=function(e){var t=e.finished,n=e.cancelled,a=i.get(r);a?(t||(a.finished=!1),n&&(a.cancelled=!0)):i.set(r,{value:null,finished:t||!1,cancelled:n||!1})},c&&(c[e]=n[e])}})),f=t._state,n.pause===!f.paused?(f.paused=n.pause,Rx(n.pause?f.pauseQueue:f.resumeQueue)):f.paused&&(n.pause=!0),d=(i||Object.keys(t.springs)).map((function(e){return t.springs[e].start(n)})),p=!0===n.cancel||!0===kT(n,"cancel"),(h||p&&f.asyncId)&&d.push(OT(++t._lastAsyncId,{props:n,state:f,actions:{pause:Cx,resume:Cx,start:function(e,n){p?(VT(f,t._lastAsyncId),n(BT(t))):(e.onRest=u,n(UT(h,e,f,t)))}}})),!f.paused){e.next=15;break}return e.next=15,new Promise((function(e){f.resumeQueue.add(e)}));case 15:return e.t0=LT,e.t1=t,e.next=19,Promise.all(d);case 19:if(e.t2=e.sent,v=(0,e.t0)(e.t1,e.t2),!s||!v.finished||r&&v.noop){e.next=26;break}if(!(m=tS(n,s,a))){e.next=26;break}return gS(t,[m]),e.abrupt("return",fS(t,m,!0));case 26:return l&&sx.batchedUpdates((function(){return l(v,t,t.item)})),e.abrupt("return",v);case 28:case"end":return e.stop()}}),e)}))),dS.apply(this,arguments)}function pS(e,t){var n=$t({},e.springs);return t&&Ex(Mx(t),(function(e){Tx.und(e.keys)&&(e=nS(e)),Tx.obj(e.to)||(e=$t($t({},e),{},{to:void 0})),yS(n,e,(function(e){return mS(e)}))})),vS(e,n),n}function vS(e,t){Ix(t,(function(t,n){e.springs[n]||(e.springs[n]=t,MC(t,e))}))}function mS(e,t){var n=new JT;return n.key=e,t&&MC(n,t),n}function yS(e,t,n){t.keys&&Ex(t.keys,(function(r){(e[r]||(e[r]=n(r)))._prepareNode(t)}))}function gS(e,t){Ex(t,(function(t){yS(e.springs,t,(function(t){return mS(t,e)}))}))}var kS,_S,wS=function(t){var n=t.children,r=rx(t,vT),i=(0,e.useContext)(bS),a=r.pause||!!i.pause,o=r.immediate||!!i.immediate;r=function(t,n){var r=u((0,e.useState)((function(){return{inputs:n,result:t()}})),1)[0],i=(0,e.useRef)(),a=i.current,o=a;return o?Boolean(n&&o.inputs&&function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(n,o.inputs))||(o={inputs:n,result:t()}):o=r,(0,e.useEffect)((function(){i.current=o,a==r&&(r.inputs=r.result=void 0)}),[o]),o.result}((function(){return{pause:a,immediate:o}}),[a,o]);var s=bS.Provider;return e.createElement(s,{value:r},n)},bS=(kS=wS,_S={},Object.assign(kS,e.createContext(_S)),kS.Provider._context=kS,kS.Consumer._context=kS,kS);wS.Provider=bS.Provider,wS.Consumer=bS.Consumer;var xS=function(){var e=[],t=function(t){HC("".concat(zC,'Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions'));var r=[];return Ex(e,(function(e,i){if(Tx.und(t))r.push(e.start());else{var a=n(t,e,i);a&&r.push(e.start(a))}})),r};t.current=e,t.add=function(t){e.includes(t)||e.push(t)},t.delete=function(t){var n=e.indexOf(t);~n&&e.splice(n,1)},t.pause=function(){var t=arguments;return Ex(e,(function(e){return e.pause.apply(e,d(t))})),this},t.resume=function(){var t=arguments;return Ex(e,(function(e){return e.resume.apply(e,d(t))})),this},t.set=function(t){Ex(e,(function(e,n){var r=Tx.fun(t)?t(n,e):t;r&&e.set(r)}))},t.start=function(t){var n=this,r=[];return Ex(e,(function(e,i){if(Tx.und(t))r.push(e.start());else{var a=n._getProps(t,e,i);a&&r.push(e.start(a))}})),r},t.stop=function(){var t=arguments;return Ex(e,(function(e){return e.stop.apply(e,d(t))})),this},t.update=function(t){var n=this;return Ex(e,(function(e,r){return e.update(n._getProps(t,e,r))})),this};var n=function(e,t,n){return Tx.fun(e)?e(n,t):e};return t._getProps=n,t};function CS(t,n,r){var i=arguments,a=Tx.fun(n)&&n;a&&!r&&(r=[]);var o=(0,e.useMemo)((function(){return a||3==i.length?xS():void 0}),[]),s=(0,e.useRef)(0),u=GC(),l=(0,e.useMemo)((function(){return{ctrls:[],queue:[],flush:function(e,t){var n=pS(e,t);return s.current>0&&!l.queue.length&&!Object.keys(n).some((function(t){return!e.springs[t]}))?hS(e,t):new Promise((function(r){vS(e,n),l.queue.push((function(){r(hS(e,t))})),u()}))}}}),[]),c=(0,e.useRef)(d(l.ctrls)),h=[],f=ZC(t)||0;function p(e,t){for(var r=e;r<t;r++){var i=c.current[r]||(c.current[r]=new cS(null,l.flush)),o=a?a(r,i):n[r];o&&(h[r]=rS(o))}}(0,e.useMemo)((function(){Ex(c.current.slice(t,f),(function(e){IT(e,o),e.stop(!0)})),c.current.length=t,p(f,t)}),[t]),(0,e.useMemo)((function(){p(0,Math.min(f,t))}),r);var v=c.current.map((function(e,t){return pS(e,h[t])})),m=(0,e.useContext)(wS),y=ZC(m),g=m!==y&&ST(m);KC((function(){s.current++,l.ctrls=c.current;var e=l.queue;e.length&&(l.queue=[],Ex(e,(function(e){return e()}))),Ex(c.current,(function(e,t){null===o||void 0===o||o.add(e),g&&e.start({default:m});var n=h[t];n&&(MT(e,n.ref),e.ref?e.queue.push(n):e.start(n))}))})),XC((function(){return function(){Ex(l.ctrls,(function(e){return e.stop(!0)}))}}));var k=v.map((function(e){return $t({},e)}));return o?[k,o]:k}function TS(e,t){var n=Tx.fun(e),r=CS(1,n?e:[e],n?t||[]:t),i=u(r,2),a=u(i[0],1),o=a[0],s=i[1];return n||2==arguments.length?[o,s]:o}var SS=function(e){g(n,e);var t=C(n);function n(e,r){var i;p(this,n),(i=t.call(this)).source=e,i.idle=!0,i._active=new Set,i.calc=dC.apply(void 0,d(r));var a=i._get(),o=cT(a);return tT(b(i),o.create(a)),i}return m(n,[{key:"advance",value:function(e){var t=this._get();Sx(t,this.get())||(eT(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&IS(this._active)&&MS(this)}},{key:"_get",value:function(){var e=Tx.arr(this.source)?this.source.map(CC):Mx(CC(this.source));return this.calc.apply(this,d(e))}},{key:"_start",value:function(){var e=this;this.idle&&!IS(this._active)&&(this.idle=!1,Ex(nT(this),(function(e){e.done=!1})),ax.skipAnimation?(sx.batchedUpdates((function(){return e.advance()})),MS(this)):qx.start(this))}},{key:"_attach",value:function(){var e=this,t=1;Ex(Mx(this.source),(function(n){xC(n)&&MC(n,e),WT(n)&&(n.idle||e._active.add(n),t=Math.max(t,n.priority+1))})),this.priority=t,this._start()}},{key:"_detach",value:function(){var e=this;Ex(Mx(this.source),(function(t){xC(t)&&NC(t,e)})),this._active.clear(),MS(this)}},{key:"eventObserved",value:function(e){"change"==e.type?e.idle?this.advance():(this._active.add(e.parent),this._start()):"idle"==e.type?this._active.delete(e.parent):"priority"==e.type&&(this.priority=Mx(this.source).reduce((function(e,t){return Math.max(e,(WT(t)?t.priority:0)+1)}),0))}}]),n}(HT);function ES(e){return!1!==e.idle}function IS(e){return!e.size||Array.from(e).every(ES)}function MS(e){e.idle||(e.idle=!0,Ex(nT(e),(function(e){e.done=!0})),SC(e,{type:"idle",parent:e}))}var NS=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new SS(e,n)};ax.assign({createStringInterpolator:VC,to:function(e,t){return new SS(e,t)}});qx.advance;var AS=["style","children","scrollTop","scrollLeft","viewBox"],DS=["x","y","z"],RS=["scrollTop","scrollLeft"],PS=/^--/;function OS(e,t){return null==t||"boolean"===typeof t||""===t?"":"number"!==typeof t||0===t||PS.test(e)||jS.hasOwnProperty(e)&&jS[e]?(""+t).trim():t+"px"}var LS={};var jS={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},FS=["Webkit","Ms","Moz","O"];jS=Object.keys(jS).reduce((function(e,t){return FS.forEach((function(n){return e[function(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}(n,t)]=e[t]})),e}),jS);var BS=/^(matrix|translate|scale|rotate|skew)/,US=/^(translate)/,VS=/^(rotate|skew)/,zS=function(e,t){return Tx.num(e)&&0!==e?e+t:e},qS=function e(t,n){return Tx.arr(t)?t.every((function(t){return e(t,n)})):Tx.num(t)?t===n:parseFloat(t)===n},WS=function(e){g(n,e);var t=C(n);function n(e){var r=e.x,i=e.y,a=e.z,o=rx(e,DS);p(this,n);var s=[],l=[];return(r||i||a)&&(s.push([r||0,i||0,a||0]),l.push((function(e){return["translate3d(".concat(e.map((function(e){return zS(e,"px")})).join(","),")"),qS(e,0)]}))),Ix(o,(function(e,t){if("transform"===t)s.push([e||""]),l.push((function(e){return[e,""===e]}));else if(BS.test(t)){if(delete o[t],Tx.und(e))return;var n=US.test(t)?"px":VS.test(t)?"deg":"";s.push(Mx(e)),l.push("rotate3d"===t?function(e){var t=u(e,4),r=t[0],i=t[1],a=t[2],o=t[3];return["rotate3d(".concat(r,",").concat(i,",").concat(a,",").concat(zS(o,n),")"),qS(o,0)]}:function(e){return["".concat(t,"(").concat(e.map((function(e){return zS(e,n)})).join(","),")"),qS(e,t.startsWith("scale")?1:0)]})}})),s.length&&(o.transform=new QS(s,l)),t.call(this,o)}return m(n)}(sT),QS=function(e){g(n,e);var t=C(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).inputs=e,i.transforms=r,i._value=null,i}return m(n,[{key:"get",value:function(){return this._value||(this._value=this._get())}},{key:"_get",value:function(){var e=this,t="",n=!0;return Ex(this.inputs,(function(r,i){var a=CC(r[0]),o=u(e.transforms[i](Tx.arr(a)?a:r.map(CC)),2),s=o[0],l=o[1];t+=" "+s,n=n&&l})),n?"none":t}},{key:"observerAdded",value:function(e){var t=this;1==e&&Ex(this.inputs,(function(e){return Ex(e,(function(e){return xC(e)&&MC(e,t)}))}))}},{key:"observerRemoved",value:function(e){var t=this;0==e&&Ex(this.inputs,(function(e){return Ex(e,(function(e){return xC(e)&&NC(e,t)}))}))}},{key:"eventObserved",value:function(e){"change"==e.type&&(this._value=null),SC(this,e)}}]),n}(EC);ax.assign({batchedUpdates:c.unstable_batchedUpdates,createStringInterpolator:VC,colors:{transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199}});var HS=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.applyAnimatedValues,r=void 0===n?function(){return!1}:n,i=t.createAnimatedStyle,a=void 0===i?function(e){return new sT(e)}:i,o=t.getComponentProps,s=void 0===o?function(e){return e}:o,u={applyAnimatedValues:r,createAnimatedStyle:a,getComponentProps:s},l=function e(t){var n=pT(t)||"Anonymous";return(t=Tx.str(t)?e[t]||(e[t]=hT(t,u)):t[dT]||(t[dT]=hT(t,u))).displayName="Animated(".concat(n,")"),t};return Ix(e,(function(t,n){Tx.arr(e)&&(n=pT(t)),l[n]=l(t)})),{animated:l}}(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],{applyAnimatedValues:function(e,t){if(!e.nodeType||!e.setAttribute)return!1;var n="filter"===e.nodeName||e.parentNode&&"filter"===e.parentNode.nodeName,r=t.style,i=t.children,a=t.scrollTop,o=t.scrollLeft,s=t.viewBox,u=rx(t,AS),l=Object.values(u),c=Object.keys(u).map((function(t){return n||e.hasAttribute(t)?t:LS[t]||(LS[t]=t.replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()})))}));for(var h in void 0!==i&&(e.textContent=i),r)if(r.hasOwnProperty(h)){var f=OS(h,r[h]);PS.test(h)?e.style.setProperty(h,f):e.style[h]=f}c.forEach((function(t,n){e.setAttribute(t,l[n])})),void 0!==a&&(e.scrollTop=a),void 0!==o&&(e.scrollLeft=o),void 0!==s&&e.setAttribute("viewBox",s)},createAnimatedStyle:function(e){return new WS(e)},getComponentProps:function(e){e.scrollTop,e.scrollLeft;return rx(e,RS)}}),YS=HS.animated,KS=n.p+"static/media/card-back.194153f79ebbb9055fda.jpg";var GS=function(t){var n,r=t.deck,i=t.cardIndex,a=t.placeholder,o=t.flip,s=t.position,l=t.backToChosenCards,c=t.highlight,h=u((0,e.useState)({width:80,height:112}),2),f=h[0],d=h[1],p=s,v=u(TS((function(){return{boxShadow:"0 12.5px 10px -10px rgba(50, 50, 73, 0.4)",opacity:1,transform:"perspective(600px) rotateY(0deg) scale(1)",zIndex:0,config:{mass:5,tension:300,friction:100}}})),2),m=v[0],y=m.transform,g=m.opacity,k=m.zIndex,_=m.boxShadow,w=v[1];(0,e.useEffect)((function(){w({transform:"perspective(600px) rotateY(".concat(o?180:0,"deg) scale(").concat(o?1.3:1,") translateY(").concat(o?p:"0px",")"),zIndex:o?10:0,opacity:o?1:0,immediate:function(e){return"zIndex"===e}}),l&&w({transform:"perspective(600px) rotateY(180deg) scale(1) translateY(0px)",zIndex:0})}),[o,l,w,p]),(0,e.useEffect)((function(){c&&(w({boxShadow:"0 0 20px 10px gold",transform:"perspective(600px) rotateY(180deg) scale(1.3) translateY(".concat("top"===c?"-20px":"20px",")"),zIndex:100,immediate:function(e){return"zIndex"===e}}),setTimeout((function(){w({boxShadow:"0 12.5px 10px -10px rgba(50, 50, 73, 0.4)",transform:"perspective(600px) rotateY(180deg) scale(1) translateY(0px)",zIndex:10})}),1500))}),[c]),(0,e.useEffect)((function(){function e(){var e=Math.min(window.innerHeight/7.7,100),t=Math.min(window.innerHeight/5.5,140);d({width:e,height:t})}return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]);var b={position:"relative",width:f.width,height:f.height,zIndex:k},x=($e(n={position:"absolute",borderStyle:"solid",borderWidth:"1px",borderRadius:"4px",borderColor:"#dd5833",boxShadow:_,width:"100%",height:"100%",backfaceVisibility:"hidden",backgroundImage:"url(".concat(KS,")")},"position","absolute"),$e(n,"opacity",g.to((function(e){return 1-e}))),$e(n,"transform",y),$e(n,"transformStyle","preserve-3d"),n);return a?(0,Xb.jsx)("div",{style:{width:f.width,height:f.height,borderStyle:"dashed",borderWidth:"2px",borderColor:"#212529",borderRadius:"8px"}}):(0,Xb.jsxs)(YS.div,{style:b,children:[(0,Xb.jsx)(YS.div,{className:"card",style:$t($t({},x),{},{backgroundImage:"url(".concat(KS,")"),opacity:g.to((function(e){return 1-e}))})}),(0,Xb.jsx)(YS.div,{className:"card "+(c?"highlight":""),style:$t($t({},x),{},{backgroundImage:"url(".concat(r[i],")"),opacity:g,rotateY:"180deg"})})]})},XS=function(t){var n=t.score,r=t.startPosition,i=t.endPosition,a=t.onRest,o=u(TS((function(){return{opacity:0,fontSize:"40px",transform:"translate(".concat(r.x,"px, ").concat(r.y,"px)"),onRest:a}})),2),s=o[0],l=o[1];return(0,e.useEffect)((function(){l({opacity:1});var e=setTimeout((function(){l({transform:"translate(".concat(i.x,"px, ").concat(i.y,"px)"),fontSize:"10px",opacity:0})}),500);return function(){return clearTimeout(e)}}),[l,r,i]),(0,Xb.jsxs)(YS.div,{style:$t($t({},s),{},{position:"absolute",zIndex:1e3,display:"flex",justifyContent:"center",alignItems:"center",background:"white",border:"2px solid black",borderRadius:"50%",fontWeight:"bold",padding:"5px",color:"black"}),children:["+",n]})},$S=function(t){var n=t.deck,r=t.gameData,i=t.gameRef,a=t.players,o=r.teams,s=r.currentRound,l=s%a.length,c=a[l].name,h=u((0,e.useState)(null),2),f=h[0],p=h[1],v=u((0,e.useState)(null),2),m=v[0],y=v[1],g=u((0,e.useState)([]),2),k=g[0],_=g[1],w=u((0,e.useState)({stage:"",highlight:[],cardIndex:0,teamIndex:0,score:0,startPosition:{x:0,y:0},endPosition:{x:0,y:0}}),2),b=w[0],x=w[1],C=(0,e.useRef)([]);if((0,e.useEffect)((function(){var e=b.stage,t=b.cardIndex,n=b.teamIndex;"highlight"!==e||n>=k.length||function(){var e=k[n],r=e.players[0].chosenCards[t],i=e.players[1].chosenCards,a=function(e,t){var n=b.cardIndex,r=!1,i=0;return e===t[n]?(r=!0,i=Gb(n,n)):-1!==t.indexOf(e)&&(r=!0,i=Gb(n,t.indexOf(e))),{match:r,score:i}}(r,i);a.match?setTimeout((function(){x($t($t({},b),{},{highlight:[r,n],stage:"adjustScore",score:a.score}))}),500):x($t($t({},b),{},{highlight:[],stage:"nextPair",score:0}))}()}),[b]),(0,e.useEffect)((function(){var e=b.stage,t=b.cardIndex,n=b.teamIndex;if("nextPair"===e){var r=t+1,i=n,a=!1;4===t&&(i=n+1,r=0,a=!0);var o=$t($t({},b),{},{cardIndex:r,teamIndex:i,stage:"highlight"});setTimeout((function(){x(o)}),a?500:0)}}),[b]),(0,e.useEffect)((function(){var e=b.stage,t=(b.cardIndex,b.teamIndex),n=b.score;"adjustScore"===e&&function(){k[t].roundScore+=n;var e=C.current[t].getBoundingClientRect(),r=e.width/2,i=e.height/2-45,a={x:r,y:i},o={x:0,y:i};setTimeout((function(){x($t($t({},b),{},{stage:"animateScore",startPosition:a,endPosition:o}))}),100)}()}),[b]),(0,e.useEffect)((function(){k.length>0&&6===f.flippedCards&&x($t($t({},b),{},{stage:"highlight"}))}),[k]),(0,e.useEffect)((function(){f&&m&&function(e){var t,n=d(o).filter((function(e){return 2===e.players.length})),r=E(n);try{var i=function(){var n=t.value;n.players=a.filter((function(e){return e.team===n.name})),e.teams||(n.roundScore=0)};for(r.s();!(t=r.n()).done;)i()}catch(s){r.e(s)}finally{r.f()}a.forEach((function(e){e.chosenCards.length})),_(n)}(f)}),[f,a,m,o]),(0,e.useEffect)((function(){var e=xp(i,"rounds");xv(fv(e,pv("roundNumber","==",s))).then((function(t){if(1===t.size){var n=t.docs[0].id,r=Cp(e,n);Sv(r,(function(e){y(r),p(e.data())}))}else console.error("Invalid short ID.")}))}),[s,i]),!f)return(0,Xb.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,Xb.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})});var T=function(e,t,n){var r=b.highlight;return r[0]===e&&r[1]===t&&(0===n?"top":"bottom")},S=function(){setTimeout((function(){x($t($t({},b),{},{stage:"nextPair"}))}),500)};return(0,Xb.jsxs)("div",{children:[(0,Xb.jsx)(ex,{className:"max-w-screen-xl",round:s,phrase:function(){var e=f.phrase;return e?"Phrase: "+e:(0,Xb.jsxs)("span",{children:["Waiting for ",(0,Xb.jsx)("span",{className:"text-blue-500",children:c})," to choose the phrase"]})}()}),(0,Xb.jsx)("div",{className:"max-w-screen-xl mx-auto mt-4",children:(0,Xb.jsx)("div",{className:"grid grid-cols-2 gap-4",children:k.map((function(e,t){return(0,Xb.jsxs)("div",{ref:function(e){return r=t,void((n=e)&&(C.current[r]=n));var n,r},className:"flex bg-gray-100 rounded shadow p-3",children:["animateScore"===b.stage&&b.teamIndex===t&&(0,Xb.jsx)(XS,{score:b.score,startPosition:b.startPosition,endPosition:b.endPosition,onRest:S}),(0,Xb.jsxs)("div",{className:"flex flex-col justify-between items-start",children:[(0,Xb.jsx)("div",{className:"flex items-center mb-2",children:(0,Xb.jsx)("div",{className:"text-lg font-semibold w-20 mr-2",children:e.players[0].name})},e.players[0].name),(0,Xb.jsxs)("div",{className:"relative flex-grow-0 my-2",children:[(0,Xb.jsx)("h3",{className:"font-bold text-xl text-".concat(e.name,"-800"),children:"Team"}),(0,Xb.jsx)("h3",{className:"font-bold text-xl text-".concat(e.name,"-800"),children:e.name}),(0,Xb.jsx)("p",{className:"text-md",children:"Round: "}),(0,Xb.jsx)("p",{className:"text-md",children:e.roundScore}),(0,Xb.jsx)("p",{className:"text-md",children:"Game:"}),(0,Xb.jsx)("p",{className:"text-md",children:e.gameScore})]}),(0,Xb.jsx)("div",{className:"flex items-center mb-2",children:(0,Xb.jsx)("div",{className:"text-lg font-semibold w-20 mr-2",children:e.players[1].name})})]}),(0,Xb.jsx)("div",{className:"flex flex-col",children:e.players.map((function(e,r){return(0,Xb.jsx)("div",{className:"flex items-center mb-2",children:(0,Xb.jsx)("div",{className:"flex-grow grid grid-cols-5 gap-1",children:5===e.chosenCards.length?e.chosenCards.map((function(e,i){return(0,Xb.jsx)(GS,{deck:n,cardIndex:e,flip:f.flippedCards>i,position:(a=t,o=r,a<2&&0===o?"-31px":a<2&&1===o?"-5px":a>=2&&0===o?"-10px":a>=2&&1===o?"16px":"0px"),backToChosenCards:i+1<f.flippedCards,highlight:T(e,t,r)});var a,o})):Array(5).fill().map((function(e,t){return(0,Xb.jsx)("div",{className:"p-1",children:(0,Xb.jsx)(GS,{placeholder:!0})},t)}))})},e.name)}))},e.name)]})}))})})]})},ZS=function(){return(0,Xb.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,Xb.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})})};var JS=function(t){var n=t.gameData,r=t.gameRef,i=u((0,e.useState)(null),2),a=i[0],o=i[1];if((0,e.useEffect)((function(){function e(){return e=Ke(He().mark((function e(){var t,i,a,s;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=xp(r,"rounds"),i=fv(t,pv("roundNumber","==",n.gameLength)),e.prev=2,e.next=5,xv(i);case 5:(a=e.sent).empty?console.log("No matching rounds found"):(s=a.docs.map((function(e){return $t({id:e.id},e.data())})),o(s[0])),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("Error fetching round data: ",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])}))),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n.gameLength,r]),!n||!a)return(0,Xb.jsx)(ZS,{});var s=d(a.teams).sort((function(e,t){return t.gameScore-e.gameScore})),l=d(a.players).sort((function(e,t){return t.gameScore-e.gameScore}));return(0,Xb.jsxs)("div",{children:[(0,Xb.jsx)(ex,{className:"container"}),(0,Xb.jsxs)("div",{className:"container mx-auto p-4",children:[(0,Xb.jsxs)("div",{className:"flex flex-wrap -mx-2",children:[(0,Xb.jsx)("div",{className:"w-full md:w-1/2 px-2 mb-4 md:mb-0",children:(0,Xb.jsxs)("div",{className:"p-4 bg-gray-800 rounded-lg shadow",children:[(0,Xb.jsx)("h2",{className:"text-2xl font-bold mb-4 text-white",children:"Team Rankings"}),(0,Xb.jsx)("div",{className:"bg-gray-700 p-3 rounded",children:s.map((function(e){return(0,Xb.jsxs)("div",{className:"mb-2 text-white",children:[e.name,": ",e.gameScore]},e.name)}))})]})}),(0,Xb.jsx)("div",{className:"w-full md:w-1/2 px-2",children:(0,Xb.jsxs)("div",{className:"p-4 bg-gray-800 rounded-lg shadow",children:[(0,Xb.jsx)("h2",{className:"text-2xl font-bold mb-4 text-white",children:"Player Scores"}),(0,Xb.jsx)("div",{className:"bg-gray-700 p-3 rounded",children:l.map((function(e){return(0,Xb.jsxs)("div",{className:"mb-2 text-white",children:[e.name,": ",e.gameScore]},e.name)}))})]})})]}),(0,Xb.jsxs)("div",{className:"mt-4 bg-gray-800 p-4 rounded-lg shadow",children:[(0,Xb.jsx)("h2",{className:"text-2xl font-bold mb-4 text-center text-white",children:"Players In Common"}),(0,Xb.jsx)("div",{className:"overflow-x-auto",children:(0,Xb.jsxs)("table",{className:"w-full text-white",children:[(0,Xb.jsx)("thead",{children:(0,Xb.jsxs)("tr",{className:"bg-gray-700",children:[(0,Xb.jsx)("th",{className:"px-4 py-2 text-left font-semibold",children:"Player"}),(0,Xb.jsx)("th",{className:"px-4 py-2 text-left font-semibold",children:"Other Players"})]})}),(0,Xb.jsx)("tbody",{className:"bg-gray-600",children:l.map((function(e){return(0,Xb.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,Xb.jsx)("td",{className:"px-4 py-2",children:e.name}),(0,Xb.jsx)("td",{className:"px-4 py-2",children:e.gamePlayerScores.sort((function(e,t){return t.score-e.score})).map((function(e){return"".concat(e.name,": ").concat(e.score)})).join(", ")})]},e.name)}))})]})})]})]})]})},eE=function(){var t=u((0,e.useState)(null),2),n=t[0],r=t[1],i=u((0,e.useState)(null),2),a=i[0],o=i[1],s=u((0,e.useState)([]),2),l=s[0],c=s[1],h=ye().shortId;if((0,e.useEffect)((function(){xv(fv(xp(Wb,"games"),pv("shortId","==",h))).then((function(e){if(1===e.size){var t=e.docs[0].id,n=Cp(Wb,"games",t);o(n),Sv(n,(function(e){r(e.data())}))}else console.error("Invalid short ID.")}))}),[h]),(0,e.useEffect)((function(){if(a){var e=Sv(fv(xp(a,"players"),mv("joinedAt","asc")),(function(e){var t=e.docs.map((function(e){return $t({id:e.id},e.data())}));c(t)}));return function(){return e()}}}),[a]),!n)return(0,Xb.jsx)(ZS,{});return(0,Xb.jsx)("div",{children:function(){var e=n.deckType,t=n.gameState;return"setup"===t?(0,Xb.jsx)(nx,{gameData:n,gameRef:a,players:l}):"started"===t?(0,Xb.jsx)($S,{deck:Kb(e),gameData:n,gameRef:a,players:l}):"ended"===t?(0,Xb.jsx)(JS,{deck:Kb(e),gameData:n,gameRef:a,players:l}):(0,Xb.jsx)("div",{children:"Something went wrong"})}()})};function tE(e,t,n){return Math.max(t,Math.min(e,n))}var nE=function(e,t){return void 0===e&&(e=t),Array.isArray(e)?e:[e,e]},rE=function(e,t){return[e[0]+t[0],e[1]+t[1]]},iE=function(e,t){return[e[0]-t[0],e[1]-t[1]]},aE=function(e,t){e[0]+=t[0],e[1]+=t[1]};function oE(e,t,n){return 0===t||Math.abs(t)===1/0?Math.pow(e,5*n):e*t*n/(t+n*e)}function sE(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.15;return 0===r?tE(e,t,n):e<t?-oE(t-e,n-t,r)+t:e>n?+oE(e-n,n-t,r)+n:e}function uE(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function lE(e,t,n){return(t=uE(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cE(Object(n),!0).forEach((function(t){lE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fE={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function dE(e){return e?e[0].toUpperCase()+e.slice(1):""}var pE=["enter","leave"];function vE(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return e&&!pE.includes(t)}function mE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=fE[e],i=r&&r[t]||t;return"on"+dE(e)+dE(i)+(vE(n,i)?"Capture":"")}var yE=["gotpointercapture","lostpointercapture"];function gE(e){var t=e.substring(2).toLowerCase(),n=!!~t.indexOf("passive");n&&(t=t.replace("passive",""));var r=yE.includes(t)?"capturecapture":"capture",i=!!~t.indexOf(r);return i&&(t=t.replace("capture","")),{device:t,capture:i,passive:n}}function kE(e){return"touches"in e}function _E(e){return kE(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function wE(e){return kE(e)?function(e){return"touchend"===e.type||"touchcancel"===e.type?e.changedTouches:e.targetTouches}(e)[0]:e}function bE(e){return function(e){return Array.from(e.touches).filter((function(t){var n,r;return t.target===e.currentTarget||(null===(n=e.currentTarget)||void 0===n||null===(r=n.contains)||void 0===r?void 0:r.call(n,t.target))}))}(e).map((function(e){return e.identifier}))}function xE(e){var t=wE(e);return kE(e)?t.identifier:t.pointerId}function CE(e){var t=wE(e);return[t.clientX,t.clientY]}function TE(e){if("function"===typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,n)}return e}function SE(){}function EE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?SE:1===t.length?t[0]:function(){var e,n,r=E(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;e=i.apply(this,arguments)||e}}catch(a){r.e(a)}finally{r.f()}return e}}function IE(e,t){return Object.assign({},t,e||{})}var ME=function(){function e(t,n,r){p(this,e),this.ctrl=t,this.args=n,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}return m(e,[{key:"state",get:function(){return this.ctrl.state[this.key]},set:function(e){this.ctrl.state[this.key]=e}},{key:"shared",get:function(){return this.ctrl.state.shared}},{key:"eventStore",get:function(){return this.ctrl.gestureEventStores[this.key]}},{key:"timeoutStore",get:function(){return this.ctrl.gestureTimeoutStores[this.key]}},{key:"config",get:function(){return this.ctrl.config[this.key]}},{key:"sharedConfig",get:function(){return this.ctrl.config.shared}},{key:"handler",get:function(){return this.ctrl.handlers[this.key]}},{key:"reset",value:function(){var e=this.state,t=this.shared,n=this.ingKey,r=this.args;t[n]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}},{key:"start",value:function(e){var t=this.state,n=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=n.from?TE(n.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}},{key:"computeValues",value:function(e){var t=this.state;t._values=e,t.values=this.config.transform(e)}},{key:"computeInitial",value:function(){var e=this.state;e._initial=e._values,e.initial=e.values}},{key:"compute",value:function(e){var t=this.state,n=this.config,r=this.shared;t.args=this.args;var i=0;if(e&&(t.event=e,n.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,function(e){var t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){var n=e.shiftKey,r=e.altKey,i=e.metaKey,a=e.ctrlKey;Object.assign(t,{shiftKey:n,altKey:r,metaKey:i,ctrlKey:a})}return t}(e)),r.down=r.pressed=r.buttons%2===1||r.touches>0,i=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){var a=t._delta.map(Math.abs);aE(t._distance,a)}this.axisIntent&&this.axisIntent(e);var o=u(t._movement,2),s=o[0],l=o[1],c=u(n.threshold,2),h=c[0],f=c[1],d=t._step,p=t.values;if(n.hasCustomTransform?(!1===d[0]&&(d[0]=Math.abs(s)>=h&&p[0]),!1===d[1]&&(d[1]=Math.abs(l)>=f&&p[1])):(!1===d[0]&&(d[0]=Math.abs(s)>=h&&Math.sign(s)*h),!1===d[1]&&(d[1]=Math.abs(l)>=f&&Math.sign(l)*f)),t.intentional=!1!==d[0]||!1!==d[1],t.intentional){var v=[0,0];if(n.hasCustomTransform){var m=u(p,2),y=m[0],g=m[1];v[0]=!1!==d[0]?y-d[0]:0,v[1]=!1!==d[1]?g-d[1]:0}else v[0]=!1!==d[0]?s-d[0]:0,v[1]=!1!==d[1]?l-d[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(v);var k=t.offset,_=t._active&&!t._blocked||t.active;_&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e&&(t.first&&("bounds"in n&&(t._bounds=TE(n.bounds,t)),this.setup&&this.setup()),t.movement=v,this.computeOffset()));var w=u(t.offset,2),b=w[0],x=w[1],C=u(t._bounds,2),T=u(C[0],2),S=T[0],E=T[1],I=u(C[1],2),M=I[0],N=I[1];t.overflow=[b<S?-1:b>E?1:0,x<M?-1:x>N?1:0],t._movementBound[0]=!!t.overflow[0]&&(!1===t._movementBound[0]?t._movement[0]:t._movementBound[0]),t._movementBound[1]=!!t.overflow[1]&&(!1===t._movementBound[1]?t._movement[1]:t._movementBound[1]);var A=t._active&&n.rubberband||[0,0];if(t.offset=function(e,t,n){var r=u(t,2),i=r[0],a=r[1],o=u(n,2),s=o[0],l=o[1],c=u(e,2),h=u(c[0],2),f=h[0],d=h[1],p=u(c[1],2),v=p[0],m=p[1];return[sE(i,f,d,s),sE(a,v,m,l)]}(t._bounds,t.offset,A),t.delta=iE(t.offset,k),this.computeMovement(),_&&(!t.last||i>32)){t.delta=iE(t.offset,k);var D=t.delta.map(Math.abs);aE(t.distance,D),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&i>0&&(t.velocity=[D[0]/i,D[1]/i],t.timeDelta=i)}}}},{key:"emit",value:function(){var e=this.state,t=this.shared,n=this.config;if(e._active||this.clean(),!e._blocked&&e.intentional||e._force||n.triggerAllEvents){var r=this.handler(hE(hE(hE({},t),e),{},$e({},this.aliasKey,e.values)));void 0!==r&&(e.memo=r)}}},{key:"clean",value:function(){this.eventStore.clean(),this.timeoutStore.clean()}}]),e}();var NE=function(e){g(n,e);var t=C(n);function n(){var e;p(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return lE(b(e=t.call.apply(t,[this].concat(i))),"aliasKey","xy"),e}return m(n,[{key:"reset",value:function(){Xe(k(n.prototype),"reset",this).call(this),this.state.axis=void 0}},{key:"init",value:function(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}},{key:"computeOffset",value:function(){this.state.offset=rE(this.state.lastOffset,this.state.movement)}},{key:"computeMovement",value:function(){this.state.movement=iE(this.state.offset,this.state.lastOffset)}},{key:"axisIntent",value:function(e){var t=this.state,n=this.config;if(!t.axis&&e){var r="object"===typeof n.axisThreshold?n.axisThreshold[_E(e)]:n.axisThreshold;t.axis=function(e,t){var n=u(e,2),r=n[0],i=n[1],a=Math.abs(r),o=Math.abs(i);return a>o&&a>t?"x":o>a&&o>t?"y":void 0}(t._movement,r)}t._blocked=(n.lockDirection||!!n.axis)&&!t.axis||!!n.axis&&n.axis!==t.axis}},{key:"restrictToAxis",value:function(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0}}}]),n}(ME),AE=function(e){return e},DE=.15,RE={enabled:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e},eventOptions:function(e,t,n){return hE(hE({},n.shared.eventOptions),e)},preventDefault:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e},triggerAllEvents:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e},rubberband:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e){case!0:return[DE,DE];case!1:return[0,0];default:return nE(e)}},from:function(e){return"function"===typeof e?e:null!=e?nE(e):void 0},transform:function(e,t,n){var r=e||n.shared.transform;return this.hasCustomTransform=!!r,r||AE},threshold:function(e){return nE(e,0)}};var PE=hE(hE({},RE),{},{axis:function(e,t,n){var r=n.axis;if(this.lockDirection="lock"===r,!this.lockDirection)return r},axisThreshold:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e},bounds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("function"===typeof e)return function(t){return PE.bounds(e(t))};if("current"in e)return function(){return e.current};if("function"===typeof HTMLElement&&e instanceof HTMLElement)return e;var t=e.left,n=void 0===t?-1/0:t,r=e.right,i=void 0===r?1/0:r,a=e.top,o=void 0===a?-1/0:a,s=e.bottom,u=void 0===s?1/0:s;return[[n,i],[o,u]]}}),OE={ArrowRight:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return[e*t,0]},ArrowLeft:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return[-1*e*t,0]},ArrowUp:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return[0,-1*e*t]},ArrowDown:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return[0,e*t]}},LE=function(e){g(n,e);var t=C(n);function n(){var e;p(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return lE(b(e=t.call.apply(t,[this].concat(i))),"ingKey","dragging"),e}return m(n,[{key:"reset",value:function(){Xe(k(n.prototype),"reset",this).call(this);var e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}},{key:"setup",value:function(){var e=this.state;if(e._bounds instanceof HTMLElement){var t=e._bounds.getBoundingClientRect(),n=e.currentTarget.getBoundingClientRect(),r={left:t.left-n.left+e.offset[0],right:t.right-n.right+e.offset[0],top:t.top-n.top+e.offset[1],bottom:t.bottom-n.bottom+e.offset[1]};e._bounds=PE.bounds(r)}}},{key:"cancel",value:function(){var e=this,t=this.state;t.canceled||(t.canceled=!0,t._active=!1,setTimeout((function(){e.compute(),e.emit()}),0))}},{key:"setActive",value:function(){this.state._active=this.state._pointerActive||this.state._keyboardActive}},{key:"clean",value:function(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,Xe(k(n.prototype),"clean",this).call(this)}},{key:"pointerDown",value:function(e){var t=this.config,n=this.state;if(null==e.buttons||(Array.isArray(t.pointerButtons)?t.pointerButtons.includes(e.buttons):-1===t.pointerButtons||t.pointerButtons===e.buttons)){var r=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),r&&r.size>1&&n._pointerActive||(this.start(e),this.setupPointer(e),n._pointerId=xE(e),n._pointerActive=!0,this.computeValues(CE(e)),this.computeInitial(),t.preventScrollAxis&&"mouse"!==_E(e)?(n._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}}},{key:"startPointerDrag",value:function(e){var t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}},{key:"pointerMove",value:function(e){var t=this.state,n=this.config;if(t._pointerActive){var r=xE(e);if(void 0===t._pointerId||r===t._pointerId){var i=CE(e);return document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=iE(i,t._values),this.computeValues(i)),aE(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional?(this.timeoutStore.remove("dragDelay"),t.active=!1,void this.startPointerDrag(e)):n.preventScrollAxis&&!t._preventScroll?t.axis?t.axis===n.preventScrollAxis||"xy"===n.preventScrollAxis?(t._active=!1,void this.clean()):(this.timeoutStore.remove("startPointerDrag"),void this.startPointerDrag(e)):void 0:void this.emit()}}}},{key:"pointerUp",value:function(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch(x){0}var t=this.state,n=this.config;if(t._active&&t._pointerActive){var r=xE(e);if(void 0===t._pointerId||r===t._pointerId){this.state._pointerActive=!1,this.setActive(),this.compute(e);var i=u(t._distance,2),a=i[0],o=i[1];if(t.tap=a<=n.tapsThreshold&&o<=n.tapsThreshold,t.tap&&n.filterTaps)t._force=!0;else{var s=u(t._delta,2),l=s[0],c=s[1],h=u(t._movement,2),f=h[0],d=h[1],p=u(n.swipe.velocity,2),v=p[0],m=p[1],y=u(n.swipe.distance,2),g=y[0],k=y[1],_=n.swipe.duration;if(t.elapsedTime<_){var w=Math.abs(l/t.timeDelta),b=Math.abs(c/t.timeDelta);w>v&&Math.abs(f)>g&&(t.swipe[0]=Math.sign(l)),b>m&&Math.abs(d)>k&&(t.swipe[1]=Math.sign(c))}}this.emit()}}}},{key:"pointerClick",value:function(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}},{key:"setupPointer",value:function(e){var t=this.config,n=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,n,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"cancel",this.pointerUp.bind(this)))}},{key:"pointerClean",value:function(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}},{key:"preventScroll",value:function(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}},{key:"setupScrollPrevention",value:function(e){this.state._preventScroll=!1,function(e){"persist"in e&&"function"===typeof e.persist&&e.persist()}(e);var t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}},{key:"setupDelayTrigger",value:function(e){var t=this;this.state._delayed=!0,this.timeoutStore.add("dragDelay",(function(){t.state._step=[0,0],t.startPointerDrag(e)}),this.config.delay)}},{key:"keyDown",value:function(e){var t=OE[e.key];if(t){var n=this.state,r=e.shiftKey?10:e.altKey?.1:1;this.start(e),n._delta=t(this.config.keyboardDisplacement,r),n._keyboardActive=!0,aE(n._movement,n._delta),this.compute(e),this.emit()}}},{key:"keyUp",value:function(e){e.key in OE&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}},{key:"bind",value:function(e){var t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}]),n}(NE);var jE="undefined"!==typeof window&&window.document&&window.document.createElement;function FE(){return jE&&"ontouchstart"in window||jE&&window.navigator.maxTouchPoints>1}var BE={isBrowser:jE,gesture:function(){try{return"constructor"in GestureEvent}catch(e){return!1}}(),touch:FE(),touchscreen:FE(),pointer:jE&&"onpointerdown"in window,pointerLock:jE&&"exitPointerLock"in window.document},UE={mouse:0,touch:0,pen:8},VE=hE(hE({},PE),{},{device:function(e,t,n){var r=n.pointer,i=(r=void 0===r?{}:r).touch,a=void 0!==i&&i,o=r.lock,s=void 0!==o&&o,u=r.mouse,l=void 0!==u&&u;return this.pointerLock=s&&BE.pointerLock,BE.touch&&a?"touch":this.pointerLock?"mouse":BE.pointer&&!l?"pointer":BE.touch?"touch":"mouse"},preventScrollAxis:function(e,t,n){var r=n.preventScroll;if(this.preventScrollDelay="number"===typeof r?r:r||void 0===r&&e?250:void 0,BE.touchscreen&&!1!==r)return e||(void 0!==r?"y":void 0)},pointerCapture:function(e,t,n){var r=n.pointer,i=(r=void 0===r?{}:r).capture,a=void 0===i||i,o=r.buttons,s=void 0===o?1:o,u=r.keys,l=void 0===u||u;return this.pointerButtons=s,this.keys=l,!this.pointerLock&&"pointer"===this.device&&a},threshold:function(e,t,n){var r=n.filterTaps,i=void 0!==r&&r,a=n.tapsThreshold,o=void 0===a?3:a,s=n.axis,u=nE(e,i?o:(void 0===s?void 0:s)?1:0);return this.filterTaps=i,this.tapsThreshold=o,u},swipe:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.velocity,n=void 0===t?.5:t,r=e.distance,i=void 0===r?50:r,a=e.duration,o=void 0===a?250:a;return{velocity:this.transform(nE(n)),distance:this.transform(nE(i)),duration:o}},delay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e){case!0:return 180;case!1:return 0;default:return e}},axisThreshold:function(e){return e?hE(hE({},UE),e):UE},keyboardDisplacement:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return e}});hE(hE({},RE),{},{device:function(e,t,n){var r=n.shared,i=n.pointer,a=(i=void 0===i?{}:i).touch,o=void 0!==a&&a;if(r.target&&!BE.touch&&BE.gesture)return"gesture";if(BE.touch&&o)return"touch";if(BE.touchscreen){if(BE.pointer)return"pointer";if(BE.touch)return"touch"}},bounds:function(e,t,n){var r=n.scaleBounds,i=void 0===r?{}:r,a=n.angleBounds,o=void 0===a?{}:a,s=function(e){var t=IE(TE(i,e),{min:-1/0,max:1/0});return[t.min,t.max]},u=function(e){var t=IE(TE(o,e),{min:-1/0,max:1/0});return[t.min,t.max]};return"function"!==typeof i&&"function"!==typeof o?[s(),u()]:function(e){return[s(e),u(e)]}},threshold:function(e,t,n){this.lockDirection="lock"===n.axis;var r=nE(e,this.lockDirection?[.1,3]:0);return r},modifierKey:function(e){return void 0===e?"ctrlKey":e},pinchOnWheel:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e}}),hE(hE({},PE),{},{mouseOnly:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e}}),hE(hE({},PE),{},{mouseOnly:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e}});var zE=new Map,qE=new Map;var WE={key:"drag",engine:LE,resolver:VE};function QE(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var HE={target:function(e){if(e)return function(){return"current"in e?e.current:e}},enabled:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e},window:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:BE.isBrowser?window:void 0;return e})),eventOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.passive,n=void 0===t||t,r=e.capture,i=void 0!==r&&r;return{passive:n,capture:i}},transform:function(e){return e}},YE=["target","eventOptions","window","enabled","transform"];function KE(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n={},r=0,i=Object.entries(t);r<i.length;r++){var a=u(i[r],2),o=a[0],s=a[1];switch(typeof s){case"function":n[o]=s.call(n,e[o],o,e);break;case"object":n[o]=KE(e[o],s);break;case"boolean":s&&(n[o]=e[o])}}return n}var GE=function(){function e(t,n){p(this,e),lE(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=n}return m(e,[{key:"add",value:function(e,t,n,r,i){var a=this._listeners,o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=fE[e],r=n&&n[t]||t;return e+r}(t,n),s=hE(hE({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),i);e.addEventListener(o,r,s);var u=function t(){e.removeEventListener(o,r,s),a.delete(t)};return a.add(u),u}},{key:"clean",value:function(){this._listeners.forEach((function(e){return e()})),this._listeners.clear()}}]),e}(),XE=function(){function e(){p(this,e),lE(this,"_timeouts",new Map)}return m(e,[{key:"add",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:140;this.remove(e);for(var i=arguments.length,a=new Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];this._timeouts.set(e,(n=window).setTimeout.apply(n,[t,r].concat(a)))}},{key:"remove",value:function(e){var t=this._timeouts.get(e);t&&window.clearTimeout(t)}},{key:"clean",value:function(){this._timeouts.forEach((function(e){window.clearTimeout(e)})),this._timeouts.clear()}}]),e}(),$E=function(){function e(t){p(this,e),lE(this,"gestures",new Set),lE(this,"_targetEventStore",new GE(this)),lE(this,"gestureEventStores",{}),lE(this,"gestureTimeoutStores",{}),lE(this,"handlers",{}),lE(this,"config",{}),lE(this,"pointerIds",new Set),lE(this,"touchIds",new Set),lE(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),function(e,t){t.drag&&ZE(e,"drag");t.wheel&&ZE(e,"wheel");t.scroll&&ZE(e,"scroll");t.move&&ZE(e,"move");t.pinch&&ZE(e,"pinch");t.hover&&ZE(e,"hover")}(this,t)}return m(e,[{key:"setEventIds",value:function(e){return kE(e)?(this.touchIds=new Set(bE(e)),this.touchIds):"pointerId"in e?("pointerup"===e.type||"pointercancel"===e.type?this.pointerIds.delete(e.pointerId):"pointerdown"===e.type&&this.pointerIds.add(e.pointerId),this.pointerIds):void 0}},{key:"applyHandlers",value:function(e,t){this.handlers=e,this.nativeHandlers=t}},{key:"applyConfig",value:function(e,t){this.config=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e,i=r.target,a=r.eventOptions,o=r.window,s=r.enabled,u=r.transform,l=QE(r,YE);if(n.shared=KE({target:i,eventOptions:a,window:o,enabled:s,transform:u},HE),t){var c=qE.get(t);n[t]=KE(hE({shared:n.shared},l),c)}else for(var h in l){var f=qE.get(h);f&&(n[h]=KE(hE({shared:n.shared},l[h]),f))}return n}(e,t,this.config)}},{key:"clean",value:function(){this._targetEventStore.clean();var e,t=E(this.gestures);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.gestureEventStores[n].clean(),this.gestureTimeoutStores[n].clean()}}catch(r){t.e(r)}finally{t.f()}}},{key:"effect",value:function(){var e=this;return this.config.shared.target&&this.bind(),function(){return e._targetEventStore.clean()}}},{key:"bind",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i,a=this.config.shared,o={};if(!a.target||(i=a.target())){if(a.enabled){var s,u=E(this.gestures);try{for(u.s();!(s=u.n()).done;){var l=s.value,c=this.config[l],h=JE(o,c.eventOptions,!!i);if(c.enabled){var f=zE.get(l);new f(this,n,l).bind(h)}}}catch(x){u.e(x)}finally{u.f()}var p=JE(o,a.eventOptions,!!i),v=function(t){p(t,"",(function(r){return e.nativeHandlers[t](hE(hE({},e.state.shared),{},{event:r,args:n}))}),void 0,!0)};for(var m in this.nativeHandlers)v(m)}for(var y in o)o[y]=EE.apply(void 0,d(o[y]));if(!i)return o;for(var g in o){var k=gE(g),_=k.device,w=k.capture,b=k.passive;this._targetEventStore.add(i,_,"",o[g],{capture:w,passive:b})}}}}]),e}();function ZE(e,t){e.gestures.add(t),e.gestureEventStores[t]=new GE(e,t),e.gestureTimeoutStores[t]=new XE}var JE=function(e,t,n){return function(r,i,a){var o,s,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=null!==(o=u.capture)&&void 0!==o?o:t.capture,h=null!==(s=u.passive)&&void 0!==s?s:t.passive,f=l?r:mE(r,i,c);n&&h&&(f+="Passive"),e[f]=e[f]||[],e[f].push(a)}};function eI(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=e.useMemo((function(){return new $E(t)}),[]);if(a.applyHandlers(t,i),a.applyConfig(n,r),e.useEffect(a.effect.bind(a)),e.useEffect((function(){return a.clean.bind(a)}),[]),void 0===n.target)return a.bind.bind(a)}function tI(e,t){var n;return n=WE,zE.set(n.key,n.engine),qE.set(n.key,n.resolver),eI({drag:e},t||{},"drag")}var nI=900,rI=240,iI=d(Array(52)).map((function(){return"ready"}));var aI=function(t){var n=t.deck,r=t.handleSelectCards,i=t.gameData,a=u((0,e.useState)(!1),2),o=a[0],s=a[1],l=u((0,e.useState)(null),2),c=l[0],h=l[1],f=u((0,e.useState)([]),2),p=f[0],v=f[1],m=(0,e.useRef)([]);(0,e.useEffect)((function(){m.current=Array.from({length:5},(function(){return(0,e.createRef)()}))}),[]),(0,e.useEffect)((function(){iI=d(Array(52)).map((function(){return"ready"})),v([])}),[i.currentRound]);var y=TS({from:{y:-1e3},to:{y:o?180:-1e3},config:{tension:200,friction:20}}),g=(0,Xb.jsx)("div",{className:"box-container flex flex-wrap justify-center items-center mt-4 max-h-screen",children:m.current.length>0&&m.current.map((function(e,t){return(0,Xb.jsx)(YS.div,{ref:e,className:"box ".concat(c===t?"bg-[#EDAE49]":""," \n          text-gray-800 border-dashed border-2 border-gray-800 p-6 m-1 rounded-lg flex items-center justify-center \n          text-2xl font-bold w-24 h-[140px] ").concat(t>2?"mt-2":""),style:y,children:t+1},t)}))}),k=function(e){var t=iI[e].startsWith("box"),n="ready"===iI[e],r="marked"===iI[e],i={width:150,height:210,scale:1,rot:6*Math.random()-3,delay:10*e};return $t($t({},i),{},o?t?{width:100,height:140,zIndex:1e3}:n?{x:0,y:0,width:120,height:168}:{x:0,y:-1e3,width:120,height:168}:t?{y:-1e3}:r?{x:0,y:rI,zIndex:nI-e}:{x:0,y:0,zIndex:e})},_=function(e,t){return"perspective(1500px) rotateX(30deg) rotateY(".concat(e/10,"deg) rotateZ(").concat(e,"deg) scale(").concat(t,")")},w=function(){return"scale(1)"},b=u(CS(iI.length,(function(e){return $t($t({},k(e)),{},{from:{x:0,rot:0,scale:1,y:-1e3}})})),2),x=b[0],C=b[1];(0,e.useEffect)((function(){C.start((function(e){return $t({},k(e))}))}),[o,C]);var T=function(e){if(5===e)return{bx:0,by:0};var t=m.current[e].current;return{bx:t.offsetLeft-249,by:t.offsetTop+186}},S=function(){for(var e=0;e<5;e++)if(!Number.isInteger(p[e]))return!1;return!0};(0,e.useEffect)((function(){C.start((function(e){var t=iI.filter((function(e){return"ready"===e})).length,n=p.findIndex((function(t){return t===e}));if(-1!==n){if(5===n){var r=d(p);r[5]=void 0,v(r)}var i=T(n);return{x:i.bx,y:i.by,scale:1,rot:0,zIndex:5===n?t+nI:1e3}}return{}}))}),[p,C]);var E=function e(t,n,r){if(n>4)iI[t]="ready",r[n]=t;else{var i=r[n];r[n]=t,iI[t]="box"+n,Number.isInteger(i)&&e(i,n+1,r)}},I=tI((function(e){var t=u(e.args,1)[0],n=e.active,r=u(e.xy,2),i=r[0],a=r[1],s=u(e.movement,2),l=s[0],f=s[1],y=u(e.offset,2),g=(y[0],y[1],u(e.direction,2)),k=(g[0],g[1],u(e.velocity,2)),_=k[0],w=k[1],b=iI[t];if("ready"===b?f>110&&!o?iI[t]="readyToMarked":l<-80&&(iI[t]="toReviewed"):"reviewed"===b&&(f>90&&!o?iI[t]="reviewedToMarked":l>80&&(iI[t]="toReady")),n){var x=!1,S={width:90,height:160,x:i,y:a};m.current.forEach((function(e,t){if(e.current){var n=e.current.getBoundingClientRect();S.x+-90<n.right&&S.x+-90+S.width>n.left&&S.y+-160<n.bottom&&S.y+-160+S.height>n.top&&(h(t),x=!0)}})),x||h(null)}if(!n){if(Number.isInteger(c)&&Number.isInteger(t)){var I=d(p),M=I.findIndex((function(e){return e===t}));-1!==M&&(I[M]=null);var N=I[c];Number.isInteger(N)&&E(N,c+1,I),I[c]=t,v(I),iI[t]="box"+c}h(null)}C.start((function(e){if(t===e){b=iI[e];var r=l,i=f,s=2e3,u=iI.filter((function(e){return"ready"===e})).length,c=iI.filter((function(e){return"reviewed"===e})).length,h=iI.filter((function(e){return"marked"===e})).length;switch(b){case"ready":n||(r=0,i=0,s=u+nI);break;case"toReviewed":n||(r=-180,i=0,s=c+nI,iI[e]="reviewed");break;case"reviewed":n?r=l-180:(r=-180,i=0,s=c+nI);break;case"toReady":n?r=l-180:(r=0,i=0,s=u+nI,iI[e]="ready")}if(o){if(b.startsWith("box")){var m=parseInt(b.charAt(3)),y=T(m),g=y.bx,k=y.by;if(n)r=l+g,i=f+k;else if(a<325){r=0,i=0,s=u+nI,iI[e]="ready";var x=d(p);x[m]=null,v(x)}}}else switch(b){case"readyToMarked":n||(r=0,i=rI,s=h+nI,iI[e]="marked");break;case"reviewedToMarked":n?r=l-180:(r=0,i=rI,s=h+nI,iI[e]="marked");break;case"marked":r=0,i=rI,s=h+nI}return{x:r,y:i,zIndex:s,vx:_,vy:w,scale:n?1.1:1,delay:0,config:{friction:40,tension:400,mass:1},immediate:function(e){return"zIndex"===e&&n}}}}))}));return(0,Xb.jsxs)("div",{children:[(0,Xb.jsxs)("div",{className:"flex items-center justify-between pt-3",children:[(0,Xb.jsxs)("div",{className:"flex items-center",children:[(0,Xb.jsxs)("label",{htmlFor:"firstPassCheckbox",className:"switch flex items-center cursor-pointer ",children:[(0,Xb.jsx)("input",{type:"checkbox",checked:o,onChange:function(){if(s(!o),o)for(var e=0;e<iI.length;e++)"deck"===iI[e]?iI[e]="ready":"ready"!==iI[e]&&"reviewed"!==iI[e]||(iI[e]="marked");else{for(var t=0;t<iI.length;t++)"reviewed"===iI[t]||"ready"===iI[t]?iI[t]="deck":"marked"===iI[t]&&(iI[t]="ready");var n=d(p);n[5]="placeholder"+Math.random(),v(n)}},id:"firstPassCheckbox",className:"hidden"}),(0,Xb.jsx)("span",{className:"slider round ".concat(o?"bg-blue-500":"bg-gray-200")})]}),o?(0,Xb.jsx)("span",{className:"text-md text-gray-800 ml-2",children:"Back to Deck"}):(0,Xb.jsx)("span",{className:"text-md text-gray-800 ml-2",children:"Ready to Order"})]}),o&&(0,Xb.jsx)(Jb,{className:"".concat(S()?"bg-blue-500 hover:bg-blue-700":"bg-gray-200"),disabled:!S(),onClick:function(){return function(e){S()?r(e):alert("You must select 5 cards in order")}(p)},children:"Submit Cards"})]}),(0,Xb.jsxs)("div",{className:"relative text-gray-800 bg-gray-100 rounded-lg shadow",style:{height:o?"175px":"230px"},children:[x.map((function(e,t){var r=e.x,i=e.y,a=e.width,s=e.height,u=e.zIndex,l=e.rot,c=e.scale,h=(e.flip,e.vx,e.vy,_);if(o){var f=p.findIndex((function(e){return e===t})),d=-1!==f&&f<5;h=d?w:_,d?(a=101,s=141):(a=121,s=169)}return(0,Xb.jsx)(YS.div,{className:"deck",style:{x:r,y:i,zIndex:u},children:(0,Xb.jsx)(YS.div,$t($t({},I(t)),{},{className:"border-solid border-2 border-gray-600 rounded-lg",style:{zIndex:u,width:a,height:s,transform:NS([l,c],h),backgroundImage:"url(".concat(n[t],")")}}))},t)})),g]}),!o&&(0,Xb.jsxs)("div",{className:"flex markedSection",children:[(0,Xb.jsxs)("div",{children:[(0,Xb.jsx)("div",{className:"markedInstructions text-gray-800 flex items-center justify-center text-2xl pt-8 px-5",children:"Swipe 5 or more cards down to order"}),(0,Xb.jsx)("div",{className:"text-gray-800 flex items-center justify-center",children:(0,Xb.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-20 h-20 text-gray-800",children:(0,Xb.jsx)("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm4.28 10.28a.75.75 0 0 0 0-1.06l-3-3a.75.75 0 1 0-1.06 1.06l1.72 1.72H8.25a.75.75 0 0 0 0 1.5h5.69l-1.72 1.72a.75.75 0 1 0 1.06 1.06l3-3Z",clipRule:"evenodd"})})})]}),(0,Xb.jsx)("div",{className:"markedCards text-gray-800 border-dashed border-2 border-gray-800 rounded-lg flex items-center justify-center text-2xl font-bold",children:"First Pass Cards"})]})]})},oI=function(t){var n=t.deck,r=t.gameData,i=t.gameRef,a=t.players,o=r.currentRound,s=r.gameLength,l=o%a.length,c=(0,e.useContext)($b),h=c.currentPlayerName,f=c.currentPlayerId,d=a[0].name===h,p=u((0,e.useState)(""),2),v=p[0],m=p[1],y=u((0,e.useState)(""),2),g=y[0],k=y[1],_=u((0,e.useState)(null),2),w=_[0],b=_[1],x=u((0,e.useState)(!1),2),C=x[0],T=x[1],S=u((0,e.useState)(0),2),I=S[0],M=S[1];(0,e.useEffect)((function(){console.log({currentPlayerId:f})}),[f]),(0,e.useEffect)((function(){var e=xp(i,"rounds");xv(fv(e,pv("roundNumber","==",o))).then((function(t){if(1===t.size){var n=t.docs[0].id,r=Cp(e,n);Sv(r,(function(e){b(r),k(e.data())}))}else console.error("Invalid short ID.")}))}),[o,i]),(0,e.useEffect)((function(){var e=a.find((function(e){return e.name===h}));T(e.chosenCards&&e.chosenCards.length>0)}),[a,h]);var N=function(){var e=Ke(He().mark((function e(t){return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Cv(w,{phrase:v});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Ke(He().mark((function e(t){var n,r;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object.values(t).slice(0,5),e.prev=1,r=Cp(i,"players",f),e.next=5,Cv(r,{chosenCards:n});case 5:T(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("Error updating player's chosenCards: ",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Ke(He().mark((function e(){var t,n,r,a,o,s,u,l;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=xp(i,"players"),n=fv(t),e.prev=2,e.next=5,xv(n);case 5:r=e.sent,a=r.docs,o=E(a),e.prev=8,o.s();case 10:if((s=o.n()).done){e.next=17;break}return u=s.value,l=u.ref,e.next=15,Cv(l,{chosenCards:[]});case 15:e.next=10;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(8),o.e(e.t0);case 22:return e.prev=22,o.f(),e.finish(22);case 25:e.next=30;break;case 27:e.prev=27,e.t1=e.catch(2),console.error("Error clearing chosen cards: ",e.t1);case 30:case"end":return e.stop()}}),e,null,[[2,27],[8,19,22,25]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Ke(He().mark((function e(){var t;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(I<=5)){e.next=5;break}return M(t=I+1),e.next=5,Cv(w,{flippedCards:t});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Ke(He().mark((function e(){var t;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D(),M(0),m(""),e.prev=3,o!==s){e.next=9;break}return e.next=7,Cv(i,{gameState:"ended"});case 7:e.next=14;break;case 9:return t=xp(i,"rounds"),e.next=12,Tv(t,{roundNumber:o+1,phrase:"",players:a});case 12:return e.next=14,Cv(i,{currentRound:o+1});case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),console.error("Error updating document: ",e.t0);case 19:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(){return e.apply(this,arguments)}}();return(0,Xb.jsx)("div",{className:"max-w-screen-sm mx-auto text-center",children:function(){var e=a[l].name===h;return g.phrase?C?d?function(){var e="Start Next Round";return I<5?e="Flip ".concat(function(e){var t=e%10,n=e%100;return 1===t&&11!==n?e+"st":2===t&&12!==n?e+"nd":3===t&&13!==n?e+"rd":e+"th"}(I+1)," Card"):5===I&&(e="Show Scores"),(0,Xb.jsx)("div",{className:"mt-4",children:I<=5?(0,Xb.jsx)(Jb,{onClick:R,children:e}):(0,Xb.jsx)(Jb,{onClick:P,children:"Start Next Round"})})}():(0,Xb.jsx)("p",{className:"text-lg font-semibold text-gray-700 bg-gray-100 px-4 py-2 rounded-lg shadow mt-4",children:"Waiting for next round to start..."}):(0,Xb.jsxs)("div",{className:"deckContainer mb-4 mx-auto",children:[(0,Xb.jsxs)("p",{className:"mt-3 flex justify-between items-center text-lg font-semibold text-gray-800 bg-gray-100 px-2 py-1 rounded-lg shadow",children:[(0,Xb.jsxs)("span",{children:["Round ",o]}),(0,Xb.jsxs)("span",{children:["Phrase: ",g.phrase]})]}),(0,Xb.jsx)(aI,{deck:n,gameData:r,handleSelectCards:A})]}):e?(0,Xb.jsx)("div",{children:(0,Xb.jsxs)("form",{onSubmit:N,className:"space-y-4 mt-4",children:[(0,Xb.jsxs)("p",{className:"text-lg font-semibold",children:["Choose the phrase for round ",o]}),(0,Xb.jsx)("input",{type:"text",placeholder:"Enter your phrase...",value:v,onChange:function(e){return m(e.target.value)},className:"mr-2 px-3 py-2 border border-gray-300 rounded shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,Xb.jsx)(Jb,{type:"submit",children:"Choose Phrase"})]})}):(0,Xb.jsx)("div",{className:"mt-4",children:(0,Xb.jsxs)("p",{className:"text-lg font-semibold text-gray-700 bg-gray-100 px-4 py-2 rounded-lg shadow",children:["Waiting for ",(0,Xb.jsx)("span",{className:"text-blue-500",children:a[l].name})," to choose the phrase"]})})}()})},sI=function(t){var n=t.gameData,r=t.gameRef,i=t.players,a=(0,e.useContext)($b),o=a.currentPlayerName,s=a.currentPlayerId,l=u((0,e.useState)(""),2),c=l[0],h=l[1],f=u((0,e.useState)(!1),2),p=f[0],v=f[1],m=u((0,e.useState)("original"),2),y=m[0],g=m[1],k=u((0,e.useState)("3"),2),_=k[0],w=k[1];if(!i.length)return(0,Xb.jsx)(ZS,{});var b=n.teams,x=i[0].name===o,C=function(e){h(e.target.value)},T=function(){var e=Ke(He().mark((function e(){var t,i,a;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=3;break}return alert("Please choose a team."),e.abrupt("return");case 3:return t=d(n.teams),i=t.findIndex((function(e){return e.name===c})),t[i].players.push(o),a=Cp(Wb,"games",r.id,"players",s),e.next=9,Cv(a,{team:c});case 9:return e.next=11,Cv(r,{teams:t});case 11:v(!0);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Ke(He().mark((function e(){var t;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=xp(r,"rounds"),e.next=3,Tv(t,{roundNumber:1,phrase:"",players:i});case 3:return e.next=5,Cv(r,{gameLength:parseInt(_),currentRound:1,deckType:y,gameState:"started"});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,Xb.jsxs)("div",{className:"max-w-screen-md mx-auto p-4 text-gray-800",children:[(0,Xb.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Joined Players:"}),(0,Xb.jsx)("div",{className:"overflow-x-auto",children:(0,Xb.jsxs)("table",{className:"min-w-full leading-normal",children:[(0,Xb.jsx)("thead",{children:(0,Xb.jsxs)("tr",{className:"bg-gray-100",children:[(0,Xb.jsx)("th",{className:"px-5 py-3 border-b-2 border-gray-200 text-gray-800  text-left text-sm uppercase font-normal",children:"Player Name"}),(0,Xb.jsx)("th",{className:"px-5 py-3 border-b-2 border-gray-200 text-gray-800  text-left text-sm uppercase font-normal",children:"Team"})]})}),(0,Xb.jsx)("tbody",{children:i.map((function(e){return e.name!==o?(0,Xb.jsxs)("tr",{className:"hover:bg-gray-100",children:[(0,Xb.jsx)("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.name}),(0,Xb.jsx)("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.team})]},e.name):(0,Xb.jsxs)("tr",{className:"hover:bg-gray-100",children:[(0,Xb.jsx)("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:o}),(0,Xb.jsx)("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:p?(0,Xb.jsx)("span",{children:c}):(0,Xb.jsxs)("div",{className:"flex items-center",children:[(0,Xb.jsxs)("select",{value:c,onChange:C,className:"appearance-none mr-2 py-2 px-4 border rounded shadow",children:[(0,Xb.jsx)("option",{value:"",children:"Choose Team"}),b.map((function(e){return(0,Xb.jsx)("option",{value:e.name,children:e.name},e.name)}))]}),(0,Xb.jsx)(Jb,{onClick:T,disabled:!c,className:"".concat(c?"bg-blue-500 hover:bg-blue-700":"bg-gray-200"),children:"Join"})]})})]},e.name)}))})]})}),x&&(0,Xb.jsxs)("div",{children:[(0,Xb.jsxs)("div",{className:"mt-4",children:[(0,Xb.jsx)("label",{htmlFor:"deckType",className:"block text-gray-700 text-sm font-bold mb-2",children:"Choose your deck:"}),(0,Xb.jsxs)("select",{id:"deckType",value:y,onChange:function(e){g(e.target.value)},className:"block appearance-none w-full border border-gray-200 text-gray-700 py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-gray-500",children:[(0,Xb.jsx)("option",{value:"original",children:"Original"},"1"),(0,Xb.jsx)("option",{value:"actors",children:"Movie Stars"},"2")]})]}),(0,Xb.jsxs)("div",{className:"mt-4",children:[(0,Xb.jsx)("label",{htmlFor:"deckType",className:"block text-gray-700 text-sm font-bold mb-2",children:"Game Length:"}),(0,Xb.jsxs)("select",{id:"deckType",value:_,onChange:function(e){w(e.target.value)},className:"block appearance-none w-full border border-gray-200 text-gray-700 py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-gray-500",children:[(0,Xb.jsx)("option",{value:"3",children:"Short"},"3"),(0,Xb.jsx)("option",{value:"5",children:"Medium"},"5"),(0,Xb.jsx)("option",{value:"10",children:"Long"},"10")]})]}),(0,Xb.jsx)(Jb,{onClick:S,className:"mt-4",children:"Start Game"})]})]})};var uI=function(t){var n=t.gameData,r=t.gameRef,i=u((0,e.useState)(null),2),a=i[0],o=i[1];(0,e.useEffect)((function(){function e(){return e=Ke(He().mark((function e(){var t,i,a,s;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=xp(r,"rounds"),i=fv(t,pv("roundNumber","==",n.gameLength)),e.prev=2,e.next=5,xv(i);case 5:(a=e.sent).empty?console.log("No matching rounds found"):(s=a.docs.map((function(e){return $t({id:e.id},e.data())})),o(s[0])),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("Error fetching round data: ",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])}))),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n.gameLength,r]);var s=(0,e.useContext)($b).currentPlayerName;if(!n||!a)return(0,Xb.jsx)(ZS,{});var l=d(a.teams).sort((function(e,t){return t.gameScore-e.gameScore})),c=d(a.players).sort((function(e,t){return t.gameScore-e.gameScore})),h=l.find((function(e){return-1!==e.players.findIndex((function(e){return e.name===s}))})),f=c.find((function(e){return e.name===s})),p=l.findIndex((function(e){return e.name===h.name}))+1,v=c.findIndex((function(e){return e.name===s}))+1;return(0,Xb.jsxs)("div",{className:"container mx-auto p-4",children:[(0,Xb.jsxs)("div",{className:"mb-8",children:[(0,Xb.jsx)("h2",{className:"text-xl font-bold mb-2",children:"Team Placement"}),(0,Xb.jsxs)("p",{children:["Your team, ",(0,Xb.jsx)("span",{className:"text-".concat(h.name,"-700 font-bold"),children:h.name}),", finished in ",(0,Xb.jsxs)("span",{className:"font-semibold",children:[p," place"]}),"."]})]}),(0,Xb.jsxs)("div",{className:"mb-8",children:[(0,Xb.jsx)("h2",{className:"text-xl font-bold mb-2",children:"Individual Placement"}),(0,Xb.jsxs)("p",{children:["You finished in ",(0,Xb.jsxs)("span",{className:"font-semibold",children:[v," place"]}),"."]})]}),(0,Xb.jsxs)("div",{children:[(0,Xb.jsx)("h2",{className:"text-xl font-bold mb-2",children:"Incommon with Others"}),(0,Xb.jsx)("ul",{children:f.gamePlayerScores.sort((function(e,t){return t.score-e.score})).map((function(e,t){return(0,Xb.jsxs)("li",{className:"mb-1",children:[t+1,". ",e.name," - Score: ",e.score]},e.name)}))})]})]})},lI=function(){var t=ye().shortId,n=u((0,e.useState)(null),2),r=n[0],i=n[1],a=u((0,e.useState)([]),2),o=a[0],s=a[1],l=(0,e.useContext)($b),c=l.gameRef,h=l.setGameRef,f=l.setCurrentPlayerId,d=(0,e.useContext)($b).currentPlayerName,p=function(e){xv(fv(xp(e,"players"),pv("name","==",d))).then((function(e){if(1===e.size){var t=e.docs[0].id;f(t)}else console.error("Invalid Player Name.")}))};if((0,e.useEffect)((function(){c?Sv(c,(function(e){console.log(e.data()),i(e.data()),p(c)})):xv(fv(xp(Wb,"games"),pv("shortId","==",t))).then((function(e){if(1===e.size){var t=e.docs[0].id,n=Cp(Wb,"games",t);h(n),Sv(n,(function(e){i(e.data())})),p(n)}else console.error("Invalid short ID.")}))}),[t,c,h]),(0,e.useEffect)((function(){if(c){var e=Sv(fv(xp(c,"players"),mv("joinedAt","asc")),(function(e){var t=e.docs.map((function(e){return $t({id:e.id},e.data())}));s(t)}));return function(){return e()}}}),[c]),!r)return(0,Xb.jsx)("p",{children:"Loading..."});return(0,Xb.jsxs)("div",{children:[(0,Xb.jsx)(ex,{className:"max-w-screen-sm",name:d}),function(){var e=r.deckType,t=r.gameState;return"setup"===t?(0,Xb.jsx)(sI,{gameData:r,gameRef:c,players:o}):"started"===t?(0,Xb.jsx)(oI,{deck:Kb(e),gameData:r,gameRef:c,players:o}):"ended"===t?(0,Xb.jsx)(uI,{deck:Kb(e),gameData:r,gameRef:c,players:o}):(0,Xb.jsx)("div",{children:"Something went wrong"})}()]})},cI=function(){var t=u((0,e.useState)(null),2),n=t[0],r=t[1];return(0,e.useEffect)((function(){xv(fv(xp(Wb,"games"),pv("shortId","==","DA2L"))).then((function(e){if(1===e.size){var t=e.docs[0].id;Sv(Cp(Wb,"games",t),(function(e){console.log(e.data()),r(e.data())}))}else console.error("Invalid short ID.")}))}),[]),n?(0,Xb.jsxs)("div",{children:[(0,Xb.jsx)("h2",{children:"Test Page"}),(0,Xb.jsx)("h2",{children:"Swipe cards left and down"}),(0,Xb.jsx)(aI,{gameData:n})]}):(0,Xb.jsx)("p",{children:"Loading..."})};var hI=function(){return(0,Xb.jsx)(Zb,{children:(0,Xb.jsx)(Ue,{children:(0,Xb.jsxs)(De,{children:[(0,Xb.jsx)(Ne,{path:"/",element:(0,Xb.jsx)(tx,{})}),(0,Xb.jsx)(Ne,{path:"/host/:shortId",element:(0,Xb.jsx)(eE,{})}),(0,Xb.jsx)(Ne,{path:"/player/:shortId",element:(0,Xb.jsx)(lI,{})}),(0,Xb.jsx)(Ne,{path:"/test",element:(0,Xb.jsx)(cI,{})})]})})})},fI=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};r.createRoot(document.getElementById("root")).render((0,Xb.jsx)(hI,{})),fI()}()}();
//# sourceMappingURL=main.cc7d1f8f.js.map